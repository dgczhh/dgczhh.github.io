/*
: http://creativecommons.org/publicdomain/zero/1.0/
    2015 Longames Ltd.
 @github       {@link https://github.com/longyangxi/flax.js}
 @flax         {@link http://flax.so}
 @license      MIT License: {@link http:http://mit-license.org/}
    2015 Longames Ltd.
 @github       {@link https://github.com/longyangxi/flax.js}
 @flax         {@link http://flax.so}
 @license      MIT License: {@link http:http://mit-license.org/}
*/
(function(){var a=function(a,b){a=a||"flaxLoading";b=b||5;var e,g,l=document.createElement("div");l.className="flaxLoading";l.id=a;var k=document.createElement("ul"),f=[];for(e=0;e<b;e++)g=document.createElement("li"),f.push({ball:document.createElement("div"),halo:null}),g.appendChild(f[f.length-1].ball),k.appendChild(g);e=document.createElement("span");e.innerHTML="Loading";l.appendChild(k);l.appendChild(e);document.body.appendChild(l);return f},b=function(a,b){var e=0,g=!0,l=300,k=function(){setTimeout(function(){if(!b||
b())a[e].ball.className=g?"ball":"unball",e++,e>=a.length?(g=!g,e=0,l=1E3):l=300,k()},l)};k()};(function(){var c=document.body.style.background;document.body.style.background="#000";var d=document.createElement("style");d.type="text/css";d.innerHTML=".flaxLoading{position:absolute;margin:-30px -60px;padding:0;top:50%;left:50%}.flaxLoading ul{margin:0;padding:0;}.flaxLoading span{color:#FFF;text-align:center;display:block;}.flaxLoading li{list-style:none;float:left;border-radius:15px;width:15px;height:15px;background:#FFF;margin:5px 0 0 10px}.flaxLoading li .ball,.flaxLoading li .unball{background-color:#2187e7;background-image:-moz-linear-gradient(90deg,#2187e7 25%,#a0eaff);background-image:-webkit-linear-gradient(90deg,#2187e7 25%,#a0eaff);width:15px;height:15px;border-radius:50px}.flaxLoading li .ball{transform:scale(0);-moz-transform:scale(0);-webkit-transform:scale(0);animation:showDot 1s linear forwards;-moz-animation:showDot 1s linear forwards;-webkit-animation:showDot 1s linear forwards}.flaxLoading li .unball{transform:scale(1);-moz-transform:scale(1);-webkit-transform:scale(1);animation:hideDot 1s linear forwards;-moz-animation:hideDot 1s linear forwards;-webkit-animation:hideDot 1s linear forwards}@keyframes showDot{0%{transform:scale(0,0)}100%{transform:scale(1,1)}}@-moz-keyframes showDot{0%{-moz-transform:scale(0,0)}100%{-moz-transform:scale(1,1)}}@-webkit-keyframes showDot{0%{-webkit-transform:scale(0,0)}100%{-webkit-transform:scale(1,1)}}@keyframes hideDot{0%{transform:scale(1,1)}100%{transform:scale(0,0)}}@-moz-keyframes hideDot{0%{-moz-transform:scale(1,1)}100%{-moz-transform:scale(0,0)}}@-webkit-keyframes hideDot{0%{-webkit-transform:scale(1,1)}100%{-webkit-transform:scale(0,0)}}";
document.head.appendChild(d);d=a();b(d,function(){var a=document.getElementById("flaxLoading");a||(document.body.style.background=c);return!!a})})()})();function SignalBinding(a,b,c,d,e){this._listener=b;this._isOnce=c;this.context=d;this._signal=a;this._priority=e||0}
SignalBinding.prototype={actived:!0,params:null,execute:function(a){var b;this.actived&&this._listener&&(a=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach());return b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},
_destroy:function(){delete this._signal;delete this._listener;delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", actived:"+this.actived+"]"}};function validateListener(a,b){if("function"!==typeof a)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b));}
function Signal(){this._bindings=[];this._prevParams=null;var a=this;this.dispatch=function(){Signal.prototype.dispatch.apply(a,arguments)}}
Signal.prototype={VERSION:"::VERSION_NUMBER::",memorize:!1,_shouldPropagate:!0,actived:!0,_registerListener:function(a,b,c,d){var e=this._indexOfListener(a,c);if(-1!==e){if(a=this._bindings[e],a.isOnce()!==b)throw Error("You cannot add"+(b?"":"Once")+"() then add"+(!b?"":"Once")+"() the same listener without removing the relationship first.");}else a=new SignalBinding(this,a,b,c,d),this._addBinding(a);this.memorize&&this._prevParams&&a.execute(this._prevParams);return a},_addBinding:function(a){var b=
this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c=this._bindings.length,d;c--;)if(d=this._bindings[c],d._listener===a&&d.context===b)return c;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,c){validateListener(a,"add");return this._registerListener(a,!1,b,c)},addOnce:function(a,b,c){validateListener(a,"addOnce");return this._registerListener(a,!0,
b,c)},remove:function(a,b){validateListener(a,"remove");var c=this._indexOfListener(a,b);-1!==c&&(this._bindings[c]._destroy(),this._bindings.splice(c,1));return a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.actived){var b=Array.prototype.slice.call(arguments),c=this._bindings.length,d;this.memorize&&(this._prevParams=
b);if(c){d=this._bindings.slice();this._shouldPropagate=!0;do c--;while(d[c]&&this._shouldPropagate&&!1!==d[c].execute(b))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams},toString:function(){return"[Signal active:"+this.actived+" numListeners:"+this.getNumListeners()+"]"}};var signals=Signal;signals.Signal=Signal;
var VERSION=2.6,MIN_TOOL_VERSION=2,MOUSE_DOWN_SCALE=0.95,MIN_DIST_FOR_CLICK=10,RADIAN_TO_DEGREE=180/Math.PI,DEGREE_TO_RADIAN=Math.PI/180,PTM_RATIO=32,DEFAULT_SOUNDS_FOLDER="res/music/",RESET_FRAME_ON_RECYCLE=!0,H_ALIGHS=["left","center","right"],IMAGE_TYPES=[".png",".jpg",".bmp",".jpeg",".gif"],SOUND_TYPES=[".mp3",".ogg",".wav",".mp4",".m4a"],DATA_FORMAT=".json",Y_DIRECTION=1,flax=flax||{};flax._clsInstanceId=0|998*Math.random();flax.getInstanceId=function(){return flax._clsInstanceId++};
flax.toClass=function(a){a.prototype.ctor=a.prototype.constructor||function(){};a.extend=function(b){var c=function(){this.ctor&&arguments[0]!==a&&this.ctor.apply(this,arguments)},d=this.prototype,e=Object.create(d),g=/\b_super\b/,l;for(l in b)e[l]="function"==typeof b[l]&&"function"==typeof d[l]&&g.test(b[l])?function(a,f){return function(){var b=this._super;this._super=d[a];var c=f.apply(this,arguments);this._super=b;return c}}(l,b[l]):b[l];c.prototype=e;c.extend=this.extend;return c}};
flax.copyProperties=function(a,b){if(!(null==a||null==b))for(var c in a)b[c]=a[c]};flax.defineGetterSetter=function(a,b,c,d){var e={enumerable:!1,configurable:!0};c&&(e.get=c);d&&(e.set=d);Object.defineProperty(a,b,e)};flax.nameToObject=function(a,b){if(void 0==a||""==a)return null;b=b||"function";for(var c=a.split("."),d=window||this,e=0,g=c.length;e<g;e++)try{d=d[c[e]]}catch(l){break}return typeof d!==b?null:d};flax.Class=function(){};flax.Class.prototype.constructor=flax.Class;flax.toClass(flax.Class);
flax=flax||{};window.flax=flax;flax.resolution=1;flax.frameInterval=1/60;flax.stage=null;flax.stageRect=null;flax.resolutionPolicy=null;flax.designedStageSize=null;flax.REPEAT_FOREVER=Number.MAX_VALUE-1;flax.onScreenResize=new signals.Signal;flax.onScreenShow=new signals.Signal;flax.onScreenHide=new signals.Signal;flax._rendererOptions=null;flax.isMobile=!1;
if(window.navigator){var ua=window.navigator.userAgent.toLowerCase();flax.isMobile=-1!==ua.indexOf("mobile")||-1!==ua.indexOf("android")}else flax.isMobile=!0;flax.plugin=function(a){if(null==a)throw"Please give me stage!";flax.stage=a;flax._setupModules();flax.scheduler=new flax.Scheduler;flax.scheduler.start();console.log("Flax initialized as an plugin, version: "+VERSION)};
flax.init=function(a,b,c){"undefined"!=typeof document&&(document.getElementById&&document.getElementById("flaxLoading"))&&document.body.removeChild(document.getElementById("flaxLoading"));flax.game&&(flax.frameInterval=1/flax.game.config.frameRate);flax.language&&flax.language.init();flax._rendererOptions=c;flax._setupModules();(!c||!1!==c.enableRetina)&&flax.view.enableRetina(!0);flax._setupView(a,c);flax._addEvents();flax.preloadSounds&&flax.preloadSounds();console.log("Flax initialized as an engine, version: "+
VERSION)};
flax._setupModules=function(){flax.Module.PhysicsShape&&flax.addModule(flax.Collider,flax.Module.PhysicsShape);flax.Module.TileMap&&flax.addModule(flax.FlaxSprite,flax.Module.TileMap);flax.Module.Collider&&flax.addModule(flax.FlaxSprite,flax.Module.Collider);flax.Module.Physics&&flax.addModule(flax.FlaxSprite,flax.Module.Physics);flax.Module.Move&&flax.addModule(flax.FlaxSprite,flax.Module.Move);flax.Module.ScreenLayout&&flax.addModule(flax.FlaxSprite,flax.Module.ScreenLayout);flax.FlaxContainer&&(flax.Module.TileMap&&
flax.addModule(flax.FlaxContainer,flax.Module.TileMap),flax.Module.Collider&&flax.addModule(flax.FlaxContainer,flax.Module.Collider),flax.Module.Physics&&flax.addModule(flax.FlaxContainer,flax.Module.Physics),flax.Module.Move&&flax.addModule(flax.FlaxContainer,flax.Module.Move),flax.Module.ScreenLayout&&flax.addModule(flax.FlaxContainer,flax.Module.ScreenLayout));flax.FlaxSpriteBatch&&(flax.Module.TileMap&&flax.addModule(flax.FlaxSpriteBatch,flax.Module.TileMap),flax.Module.Collider&&flax.addModule(flax.FlaxSpriteBatch,
flax.Module.Collider),flax.Module.Physics&&flax.addModule(flax.FlaxSpriteBatch,flax.Module.Physics),flax.Module.Move&&flax.addModule(flax.FlaxSpriteBatch,flax.Module.Move),flax.Module.ScreenLayout&&flax.addModule(flax.FlaxSpriteBatch,flax.Module.ScreenLayout));flax.Module.Health&&(flax.Gunner&&flax.addModule(flax.Gunner,flax.Module.Health,!1,["onHit","onDie"]),flax.MCGunner&&flax.addModule(flax.MCGunner,flax.Module.Health,!1,["onHit","onDie"]))};
flax._setupView=function(a,b){flax.setViewPortMeta();var c=flax.game.config,d=c.platform;"fb"==d&&(a=flax.ResolutionPolicy.FIXED_WIDTH);null==a&&(a=flax.ResolutionPolicy.SHOW_ALL,flax.isMobile&&(a=!c.landscape?flax.ResolutionPolicy.FIXED_WIDTH:flax.ResolutionPolicy.FIXED_HEIGHT));flax.resolutionPolicy=a;var c=b&&b.width,e=b&&b.height,g=c?c:flax.game.config.width,l=e?e:flax.game.config.height;if(flax.sys.isMobile||"fb"==d)d=flax.getRealScreenSize(),c=flax.getGameScale(flax.rect(0,0,g,l)),g=d.x/c.x,
l=d.y/c.y;if(!g||!l)throw"Please set the game width and height in the project.json!";flax.designedStageSize=flax.rect(0,0,g,l);if(flax.sys.isNative)flax.stageRect=flax.rect(0,0,g,l);else{if(d=document.getElementById(flax.game.config.id))d.width=g=g||d.width,d.height=l=l||d.height;flax.stageRect=flax.rect(0,0,g,l);flax.view.adjustViewPort(!0);flax.view.resizeWithBrowserSize(!0)}flax.view.setDesignResolutionSize(g,l,a);flax.sys.isNative||window.addEventListener("resize",function(){flax.stageRect=flax.rect(0,
0,g,l);flax.view.updateView&&flax.view.updateView();flax.onScreenResize.dispatch()},!1)};
flax._addEvents=function(){var a=function(){flax.onScreenHide.dispatch()},b=function(){flax.onScreenShow.dispatch()};if("fb"==flax.game.config.platform)FBInstant.onPause(a);else{var c=window,d,e;"undefined"!=typeof document.hidden?(d="hidden",e="visibilitychange"):"undefined"!=typeof document.mozHidden?(d="mozHidden",e="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(d="msHidden",e="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(d="webkitHidden",e="webkitvisibilitychange");
d?c.addEventListener(e,function(){document[d]?a():b()},!1):(c.addEventListener("blur",a,!1),c.addEventListener("focus",b,!1));!flax.sys.isMobile&&flax.sys.browserType==flax.sys.BROWSER_TYPE_SAFARI&&(c.addEventListener("blur",a,!1),c.addEventListener("focus",b,!1));-1<navigator.userAgent.indexOf("MicroMessenger")&&(c.onfocus=function(){b()});"onpageshow"in window&&"onpagehide"in window&&(c.addEventListener("pagehide",a,!1),c.addEventListener("pageshow",b,!1));e=c=null}};
function catchAllErrors(){window.onerror=function(a,b,c,d,e){var g=b.lastIndexOf("/");console.log("**************JAVASCRIPT ERROR START*****************");-1<g&&(b=b.substring(g+1));console.log("In "+b+" (line #"+c+", column #"+d+"): "+a);console.log(e.stack);console.log("**************JAVASCRIPT ERROR END*****************");flax.showDebugError("In "+b+" (line #"+c+", column #"+d+"): "+a+"\n"+e.stack);return!1}}
flax.showStageMask=function(a,b){if(flax.stageRect){var c=flax.stageRect.width,d=flax.stageRect.height,e=new flax.Graphics;e.beginFill(0,0.5);e.drawRect(0,0,c,d);e.endFill();flax.stage.addChild(e);e.interactive=!0;flax.inputManager.addListener(e,function(){a&&e.destroy();b&&b()});return e}};
flax.showDebugError=function(a){if(flax.stageRect){var b=new PIXI.TextStyle({fontSize:24,fill:"#FFFFFF",align:"left",stroke:0,strokeThickness:5,wordWrap:!0,breakWords:!0,wordWrapWidth:flax.stageRect.width-50}),c=new flax.Text(a,b);flax.showStageMask(!0,function(){c.removeFromParent()});c.x=50;c.y=50;flax.currentScene.addChild(c)}};flax.isMobile&&catchAllErrors();flax._isWebglSupported=null;
flax.isWebGLSupported=function(){if(null!=flax._isWebglSupported)return flax._isWebglSupported;var a={stencil:!0};try{if(window.WebGLRenderingContext){var b=document.createElement("canvas"),c=b.getContext("webgl",a)||b.getContext("experimental-webgl",a);flax._isWebglSupported=!(!c||!c.getContextAttributes().stencil)}else flax._isWebglSupported=!1;return flax._isWebglSupported}catch(d){return flax._isWebglSupported=!1}};flax._screenSize={x:0,y:0};flax._realScreenSize={x:0,y:0};
flax.getScreenSize=function(){if(0<flax._screenSize.x&&flax.sys.isMobile)return flax._screenSize;var a=window.innerHeight;flax._screenSize.x=window.innerWidth;flax._screenSize.y=a;return flax._screenSize};flax.getRealScreenSize=function(){if(0<flax._realScreenSize.x&&flax.sys.isMobile)return flax._realScreenSize;var a=1;"wechat"==flax.game.config.platform&&(a=window.devicePixelRatio);var b=flax.getScreenSize();flax._realScreenSize.x=b.x*a;flax._realScreenSize.y=b.y*a;return flax._realScreenSize};
flax.getGameScale=function(a){var b=1,c=1,d=flax.getRealScreenSize();a||(a=flax.designedStageSize);var e=d.x/a.width;a=d.y/a.height;switch(flax.resolutionPolicy){case flax.ResolutionPolicy.EXACT_FIT:b=e;c=a;break;case flax.ResolutionPolicy.NO_BORDER:b=c=e;a>e&&(b=c=a);break;case flax.ResolutionPolicy.SHOW_ALL:b=c=e;a<e&&(b=c=a);break;case flax.ResolutionPolicy.FIXED_HEIGHT:b=c=a;break;case flax.ResolutionPolicy.FIXED_WIDTH:b=c=e}return{x:b,y:c}};flax.isDisplay=function(a){return a instanceof PIXI.DisplayObject};
flax.isFlaxDisplay=function(a){return a instanceof flax.FlaxSprite||a instanceof flax.FlaxContainer||a instanceof flax.FlaxSpriteBatch||a instanceof flax.Image||flax.Scale9Image&&a instanceof flax.Scale9Image};flax.isFlaxSprite=function(a){return a instanceof flax.FlaxSprite||a instanceof flax.FlaxContainer||a instanceof flax.FlaxSpriteBatch};flax.isMovieClip=function(a){return a instanceof flax.MovieClip||a instanceof flax.MovieClipBatch};
flax.isButton=function(a){return a instanceof flax.Button||a instanceof flax.SimpleButton};flax.isChildOf=function(a,b){if(null==a||null==b||a==b)return!1;for(var c=a.parent;c;){if(c==b)return!0;c=c.parent}return!1};flax.findParentWithClass=function(a,b){for(var c=a;c;){if(c instanceof b)return c;c=c.parent}return null};flax.findChildWithClass=function(a,b){for(var c=a.children,d=c.length,e;d--;)if(e=c[d],e instanceof b||(e=flax.findChildWithClass(e,b)))return e;return null};
flax.isImageFile=function(a){if("string"!=typeof a)return!1;a=flax.path.extname(a);a=a.toLowerCase();return-1<IMAGE_TYPES.indexOf(a)};flax.isSoundFile=function(a){if("string"!=typeof a)return!1;a=flax.path.extname(a);return-1<SOUND_TYPES.indexOf(a)};flax.getUrlVars=function(){var a={};try{var b=window.location.search.substring(1)}catch(c){return a}for(var b=b.split("&"),d=0;d<b.length;d++){var e=b[d].split("=");a[e[0]]=decodeURIComponent(e[1])}return a};
flax.encodeUrlVars=function(a,b){if(!a)return"";var c="",d;for(d in a)""!=c&&(c+="&"),c+=d+"="+encodeURIComponent(a[d]);return c};CHS_PATTERN=/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi;flax.wordWrapStr=function(a){if(!CHS_PATTERN.exec(a))return a.split(" ");for(var b=[],c="",d=0;d<a.length;d++){var e=a.charCodeAt(d);255<e||0>e?(""!=c&&b.push(c),b.push(a[d]),c=""):" "==a[d]?(""!=c&&b.push(c),c=""):c+=a[d]}return b};
flax.ifTouched=function(a,b){if(null==a||!flax.isDisplay(a))return!1;if(a.mainCollider)return a.mainCollider.containsPoint(b);var c=flax.getBounds(a,!0);return flax.rectContainsPoint(c,b)};
flax.ifTouchValid=function(a,b){if(null==a||!(a instanceof flax.Scene)&&!a.parent)return!1;var c=null;b&&(c=b.getLocation());for(var d=a;d;){if(!d.visible)return!1;if(c&&d.getClickArea){var e=d.getClickArea();if(e&&!flax.rectContainsPoint(e,c))return!1}d=d.parent}return a.isMouseEnabled&&!1===a.isMouseEnabled()||c&&!flax.ifTouched(a,c)?!1:!0};
flax.fixHtmlElementToScreen=function(a,b,c,d,e,g,l){b||(b=a.offsetWidth);c||(c=a.offsetHeight);d||(d=100);e||(e=100);g||(g=0);l||(l=0);var k=flax.getScreenSize();b=Math.min((k.x-2*d)/b,(k.y-2*e)/c);flax.isSetDeviceViewPort()&&(b=1);g=k.x/2+g;l=k.y/2+l;k=flax.htmlStyleToObject(a);b="-ms-transform scale($);-moz-transform: scale($);-webkit-transform: scale($);transform: scale($);".replace(/\$/g,b);k=flax.mergeHtmlStyleToStr(k,b);a.style=k+"position:absolute;left:"+g+"px;top:"+l+"px;";console.log(k);
return!0};flax.isSetDeviceViewPort=function(){var a=document.getElementById("flaxViewPort");return a&&a.content&&-1<a.content.indexOf("device-width")?!0:!1};flax.htmlStyleToObject=function(a){var b=a.style.cssText,b=b.replace(/\s/g,"");a={};for(var b=b.split(";"),c=0;c<b.length;c++){var d=b[c].split(":");a[d[0]]=d[1]}return a};flax.mergeHtmlStyleToStr=function(a,b){for(var c=b.split(";"),d=0;d<c.length;d++){var e=c[d].split(":");a[e[0]]=e[1]}var c="",g;for(g in a)c=c+g+": "+a[g]+";";return c};
flax=flax||{};flax.pointZero={x:0,y:0};flax.getRotation=function(a,b){if(!1==b)return a.rotation;for(var c=0,d=a;d&&!(c+=d.rotation,d=d.parent,d===b););return c};flax.getScale=function(a,b){if(!1==b)return{x:a.scaleX,y:a.scaleY};for(var c=1,d=1,e=a;e&&e!=flax.stage&&!(c*=e.scaleX,d*=e.scaleY,e=e.parent,e===b););return{x:c,y:d}};flax.getPosition=function(a,b){var c=a.getPosition();a.parent&&(b&&(c=a.parent.convertToWorldSpace(c)),b instanceof flax.Sprite&&(c=b.convertToNodeSpace(c)));return c};
flax.getBounds=function(a,b){var c;if(a.getBounds)return c=a.getBounds(b);null==b&&(b=!0);c=a.getContentSize();var d=a.getPosition();if(a.parent)if(b){if(b!=a.parent){if(isNaN(d.x))return console.log("JSB bug, todo!"),flax.rect();d=a.parent.convertToWorldSpace(d);flax.isDisplay(b)&&(d=b.convertToNodeSpace(d))}}else return c.width*=Math.abs(1),c.height*=Math.abs(1),flax.rect(0,0,c.width,c.height);var e=a.getAnchorPoint();return c=flax.rect(d.x-1*c.width*e.x,d.y-1*c.height*e.y,c.width*Math.abs(1),c.height*
Math.abs(1))};flax.getRect=flax.getBounds;flax=flax||{};flax.getAngle=function(a,b,c){var d=0,e=0;a&&(d=a.x,e=a.y);return flax.getAngle1(b.x-d,b.y-e,c)};flax.getAngle1=function(a,b,c){void 0===c&&(c=!0);a=Math.atan2(a,b);0>a&&(a+=2*Math.PI);c&&(a*=RADIAN_TO_DEGREE);return a};flax.getDistance=function(a,b){var c=b.x-(null==a?0:a.x),d=b.y-(null==a?0:a.y);return Math.sqrt(c*c+d*d)};flax.getPointOnCircle=function(a,b,c){c=(90-c)*DEGREE_TO_RADIAN;var d=a?a.y:0;return{x:(a?a.x:0)+b*Math.cos(c),y:d+b*Math.sin(c)}};
flax.sortArray=function(a,b){null==b&&(b=function(a,b){return b>a});for(var c=0;c<a.length;c++){for(var d=a[c],e=c-1;0<=e&&b(a[e],d);)a[e+1]=a[e],e--;a[e+1]=d}return a};flax.shuffleArray=function(a,b){if(void 0===b||0>=b||b>a.length)b=a.length;for(var c=b-1;0<=c;c--){var d=0|16777215*Math.random()%(c+1),e=a[c];a[c]=a[d];a[d]=e}};flax.restrictValue=function(a,b,c){a=Math.max(b,a);return a=Math.min(c,a)};flax.numberSign=function(a){return 0==a?0:0<a?1:-1};
flax.randInt=function(a,b){return a+Math.floor(Math.random()*(b-a))};flax.getRandomInArray=function(a,b){if(null==a)return null;if(null==b){var c=flax.randInt(0,a.length);return a[c]}for(var d=Math.random(),e=0,c=0;c<b.length&&(0>=b[c]||!(e+=b[c],d<=e));c++);c==b.length&&(c=flax.randInt(0,a.length),console.warn("The sum of the rates is not equal with 1!"));return a[c]};flax.createDInts=function(a,b){isNaN(b)&&(b=0);for(var c=[],d=-1,e=b-1,g=b;++d<a;)0==d%2?c.push(++e):c.push(--g);return c};
flax.p=function(a,b){return void 0===a?new PIXI.Point(0,0):void 0===b?new PIXI.Point(a.x,a.y):new PIXI.Point(a,b)};flax.POINT_EPSILON=parseFloat("1.192092896e-07F");flax.pAdd=function(a,b){return flax.p(a.x+b.x,a.y+b.y)};flax.pSub=function(a,b){return flax.p(a.x-b.x,a.y-b.y)};flax.pMult=function(a,b){return flax.p(a.x*b,a.y*b)};flax.pLength=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};flax.pDistance=function(a,b){return flax.pLength(flax.pSub(a,b))};flax.pDot=function(a,b){return a.x*b.x+a.y*b.y};
flax.ZERO_RECT={x:0,y:0,width:0,height:0};flax.rect=function(a,b,c,d){return a&&void 0!=a.x?new PIXI.Rectangle(a.x,a.y,a.width,a.height):new PIXI.Rectangle(a,b,c,d)};flax.rectContainsRect=function(a,b){return!a||!b?!1:!(a.x>=b.x||a.y>=b.y||a.x+a.width<=b.x+b.width||a.y+a.height<=b.y+b.height)};flax.rectContainsPoint=function(a,b){return b.x>=a.x&&b.x<=a.x+a.width&&b.y>=a.y&&b.y<=a.y+a.height};
flax.rectIntersectsRect=function(a,b){var c=a.y+a.height,d=b.x+b.width,e=b.y+b.height;return!(a.x+a.width<b.x||d<a.x||c<b.y||e<a.y)};flax.rectUnion=function(a,b){var c=flax.rect(0,0,0,0);c.x=Math.min(a.x,b.x);c.y=Math.min(a.y,b.y);c.width=Math.max(a.x+a.width,b.x+b.width)-c.x;c.height=Math.max(a.y+a.height,b.y+b.height)-c.y;return c};flax=flax||{};
flax.path={join:function(){for(var a=arguments.length,b="",c=0;c<a;c++)b=(b+(""===b?"":"/")+arguments[c]).replace(/(\/|\\\\)$/,"");return b},extname:function(a){return(a=/(\.[^\.\/\?\\]*)(\?.*)?$/.exec(a))?a[1]:null},mainFileName:function(a){if(a){var b=a.lastIndexOf(".");if(-1!==b)return a.substring(0,b)}return a},basename:function(a,b){var c=a.indexOf("?");0<c&&(a=a.substring(0,c));c=/(\/|\\\\)([^(\/|\\\\)]+)$/g.exec(a.replace(/(\/|\\\\)$/,""));if(!c)return null;c=c[2];return b&&a.substring(a.length-
b.length).toLowerCase()===b.toLowerCase()?c.substring(0,c.length-b.length):c},dirname:function(a){return a.replace(/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,"$2")},changeExtname:function(a,b){b=b||"";var c=a.indexOf("?"),d="";0<c&&(d=a.substring(c),a=a.substring(0,c));c=a.lastIndexOf(".");return 0>c?a+b+d:a.substring(0,c)+b+d},changeBasename:function(a,b,c){if(0===b.indexOf("."))return this.changeExtname(a,b);var d=a.indexOf("?"),e="";c=c?this.extname(a):"";0<d&&(e=a.substring(d),a=a.substring(0,d));d=a.lastIndexOf("/");
return a.substring(0,0>=d?0:d+1)+b+c+e}};var flax=flax||{},polygon_half_width_to_radius=[1,1,1,1.1320593513522075,1.375313813423834,1.030845317880654,1.128635810811684,1.0056047679142686,0.9818576365156653],polygon_half_height_to_radius=[1,1,1,1.3071895424836597,1.375313813423834,1.0838949107843963,0.982974384239583,1.0314657682369481,0.9818576365156653];
flax.getPolygonPoints=function(a,b,c){var d=2*Math.PI,e=Math.PI/2;2==b?e=0:4==b&&(e=Math.PI/4);b=d/b;for(var g=[],l=0;l<d;l+=b){var k=Math.cos(l-e)*a,f=Math.sin(l-e)*a,k=flax.p(k,f);g.push(k);!0===c&&(k=0.5*Math.cos(l-e+b/2)*a,f=0.5*Math.sin(l-e+b/2)*a,k=flax.p(k,f),g.push(k))}g.push(g[0]);return g};
flax.findPolygonBounds=function(a){for(var b={minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:Number.MIN_VALUE,maxY:Number.MIN_VALUE,centerX:0,centerY:0},c=0;c<a.length;c++){var d=a[c];d.x<b.minX&&(b.minX=d.x);d.x>b.maxX&&(b.maxX=d.x);d.y<b.minY&&(b.minY=d.y);d.y>b.maxY&&(b.maxY=d.y)}b.centerX=(b.minX+b.maxX)/2;b.centerY=(b.minY+b.maxY)/2;return b};
flax.drawPolygon=function(a,b,c,d,e,g,l,k){a=flax.getPolygonPoints(a,b,e);k=k||new flax.Graphics;k.lineStyle(l||2,16777215);l=a[0];k.moveTo(l.x,l.y);for(b=1;b<a.length;b++)l=a[b],k.lineTo(l.x,l.y);k.endFill();k.setPosition(c,d);g&&g.addChild(k);return k};flax=flax||{};flax.Module=flax.Module||{};var MODULE_SPECIAL_FUNCS=["onInit","onEnter","onExit","onPosition"];
flax.addModule=function(a,b,c,d){if(null==b)throw"Module can not be null!";for(var e in b){var g=b[e];if(!1!==d&&"function"==typeof g&&(-1<MODULE_SPECIAL_FUNCS.indexOf(e)||Array.isArray(d)&&-1<d.indexOf(e))){var l="__"+e,k=l+"Num",f=a.prototype;void 0===f[k]?f[k]=0:f[k]++;f[l+f[k]]=g}else if(!0===c||void 0==a.prototype[e])g&&("function"===typeof g.get||"function"===typeof g.set)?"function"===typeof g.clone?a.prototype[e]=g.clone():Object.defineProperty(a.prototype,e,g):a.prototype[e]=g}};
flax.callModuleFunction=function(a,b,c){b="__"+b;var d=a[b+"Num"];if(void 0!==d)for(;0<=d;)a[b+d](c),d--;else if(a[b])a[b](c)};flax.callModuleOnEnter=function(a){flax.callModuleFunction(a,"onEnter")};flax.callModuleOnExit=function(a){flax.callModuleFunction(a,"onExit")};flax=flax||{};flax.Module||(flax.Module={});
flax.Module.Draggable={xDraggable:!0,yDraggable:!0,dragEnabled:!0,tweenEnabled:!0,_boundsView:null,_viewRect:null,_inDragging:!1,_dragSpeed:null,_lastPos:null,_anchorPos:null,_tempPos:null,onEnter:function(){var a=this.getCollider("view");null==a&&(a=this.getCollider("mask"));this._boundsView=a;this._dragSpeed=flax.p();this._tempPos=flax.p();flax.inputManager.addListener(this,this._startDrag,InputType.press,this);flax.inputManager.addListener(this,this._drag,InputType.move,this);flax.inputManager.addListener(this,
this._stopDrag,InputType.up,this)},onExit:function(){this.tweenEnabled=this.dragEnabled=this.yDraggable=this.xDraggable=!0;this._dragSpeed=this._anchorPos=this._lastPos=this._viewRect=this._boundsView=null},_startDrag:function(a){if(this.dragEnabled){this._inDragging=!0;this._lastPos=flax.mousePos;if(this.onStartDrag)this.onStartDrag();this._stopTween()}},_drag:function(a){this._inDragging&&(a=flax.mousePos,this.dragBy(a.x-this._lastPos.x,a.y-this._lastPos.y),this._lastPos=a)},_stopDrag:function(a){this._inDragging=
!1;if(this.onStopDrag)this.onStopDrag();this.tweenEnabled&&this._startTween()},getMaxDragSpeed:function(){return 100},dragBy:function(a,b){if(0==a&&0==b)return!1;var c=this.getMaxDragSpeed();a=(0<a?1:-1)*Math.min(c,Math.abs(a));b=(0<b?1:-1)*Math.min(c,Math.abs(b));this._dragSpeed.x=a;this._dragSpeed.y=b;this._viewRect||(this._viewRect=this._boundsView?this._boundsView.getBounds(!0):null);this._viewRect&&(c=this.getViewRect?this.getViewRect(!0):this.getBounds(!0),c.x+=a,c.y+=b,c.x>this._viewRect.x&&
0<a&&(a-=c.x-this._viewRect.x,0>a&&(a=0)),c.x+c.width<this._viewRect.x+this._viewRect.width&&0>a&&(a-=c.x+c.width-this._viewRect.x-this._viewRect.width,0<a&&(a=0)),c.y>this._viewRect.y&&0<b&&(b-=c.y-this._viewRect.y,0>b&&(b=0)),c.y+c.height<this._viewRect.y+this._viewRect.height&&0>b&&(b-=c.y+c.height-this._viewRect.y-this._viewRect.height,0<b&&(b=0)));var c=this.getPosition(),d=this._tempPos;d.x=c.x;d.y=c.y;this.xDraggable&&(d.x+=a);this.yDraggable&&(d.y+=b);this.restrainDragPos&&this.restrainDragPos(d,
a,b);this.setPosition(d);a=d.x-c.x;b=d.y-c.y;if((c=0!=a||0!=b)&&this.onNewPosition)this.onNewPosition(a,b);return c},_startTween:function(){this.schedule(this._doTween,flax.frameInterval)},_stopTween:function(){this.unschedule(this._doTween)},_doTween:function(a){this._dragSpeed.x*=0.9;this._dragSpeed.y*=0.9;(1>flax.pLength(this._dragSpeed)||!this.dragBy(this._dragSpeed.x,this._dragSpeed.y))&&this._stopTween()}};var _Group=function(){this._tweens={};this._tweensAddedDuringUpdate={}};
_Group.prototype={getAll:function(){return Object.keys(this._tweens).map(function(a){return this._tweens[a]}.bind(this))},removeAll:function(){this._tweens={}},add:function(a){this._tweens[a.getId()]=a;this._tweensAddedDuringUpdate[a.getId()]=a},remove:function(a){delete this._tweens[a.getId()];delete this._tweensAddedDuringUpdate[a.getId()]},update:function(a,b){var c=Object.keys(this._tweens);if(0===c.length)return!1;for(a=void 0!==a?a:TWEEN.now();0<c.length;){this._tweensAddedDuringUpdate={};for(var d=
0;d<c.length;d++){var e=this._tweens[c[d]];e&&!1===e.update(a)&&(e._isPlaying=!1,b||delete this._tweens[c[d]])}c=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var TWEEN=new _Group;TWEEN.Group=_Group;TWEEN._nextId=0;TWEEN.nextId=function(){return TWEEN._nextId++};
TWEEN.now="undefined"===typeof window&&"undefined"!==typeof process?function(){var a=process.hrtime();return 1E3*a[0]+a[1]/1E6}:"undefined"!==typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};
TWEEN.Tween=function(a,b){this._object=a;this._valuesStart={};this._valuesEnd={};this._valuesStartRepeat={};this._duration=1E3;this._repeat=0;this._repeatDelayTime=void 0;this._reversed=this._isPlaying=this._yoyo=!1;this._delayTime=0;this._startTime=null;this._easingFunction=TWEEN.Easing.Linear.None;this._interpolationFunction=TWEEN.Interpolation.Linear;this._chainedTweens=[];this._onStartCallback=null;this._onStartCallbackFired=!1;this._onStopCallback=this._onCompleteCallback=this._onUpdateCallback=
null;this._group=b||TWEEN;this._id=TWEEN.nextId()};
TWEEN.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(a,b){this._valuesEnd=a;void 0!==b&&(this._duration=b);return this},start:function(a){this._group.add(this);this._isPlaying=!0;this._onStartCallbackFired=!1;this._startTime=void 0!==a?"string"===typeof a?TWEEN.now()+parseFloat(a):a:TWEEN.now();this._startTime+=this._delayTime;for(var b in this._valuesEnd){if(this._valuesEnd[b]instanceof Array){if(0===this._valuesEnd[b].length)continue;
this._valuesEnd[b]=[this._object[b]].concat(this._valuesEnd[b])}void 0!==this._object[b]&&(this._valuesStart[b]=this._object[b],!1===this._valuesStart[b]instanceof Array&&(this._valuesStart[b]*=1),this._valuesStartRepeat[b]=this._valuesStart[b]||0)}return this},stop:function(){if(!this._isPlaying)return this;this._group.remove(this);this._isPlaying=!1;null!==this._onStopCallback&&this._onStopCallback(this._object);this.stopChainedTweens();return this},end:function(){this.update(this._startTime+this._duration);
return this},stopChainedTweens:function(){for(var a=0,b=this._chainedTweens.length;a<b;a++)this._chainedTweens[a].stop()},group:function(a){this._group=a;return this},delay:function(a){this._delayTime=a;return this},repeat:function(a){this._repeat=a;return this},repeatDelay:function(a){this._repeatDelayTime=a;return this},yoyo:function(a){this._yoyo=a;return this},easing:function(a){this._easingFunction=a;return this},interpolation:function(a){this._interpolationFunction=a;return this},chain:function(){this._chainedTweens=
arguments;return this},onStart:function(a){this._onStartCallback=a;return this},onUpdate:function(a){this._onUpdateCallback=a;return this},onComplete:function(a){this._onCompleteCallback=a;return this},onStop:function(a){this._onStopCallback=a;return this},update:function(a){var b,c,d;if(a<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0);c=(a-this._startTime)/this._duration;c=0===this._duration||
1<c?1:c;d=this._easingFunction(c);for(b in this._valuesEnd)if(void 0!==this._valuesStart[b]){var e=this._valuesStart[b]||0,g=this._valuesEnd[b];g instanceof Array?this._object[b]=this._interpolationFunction(g,d):("string"===typeof g&&(g="+"===g.charAt(0)||"-"===g.charAt(0)?e+parseFloat(g):parseFloat(g)),"number"===typeof g&&(this._object[b]=e+(g-e)*d))}null!==this._onUpdateCallback&&this._onUpdateCallback(this._object);if(1===c)if(0<this._repeat){isFinite(this._repeat)&&this._repeat--;for(b in this._valuesStartRepeat)"string"===
typeof this._valuesEnd[b]&&(this._valuesStartRepeat[b]+=parseFloat(this._valuesEnd[b])),this._yoyo&&(c=this._valuesStartRepeat[b],this._valuesStartRepeat[b]=this._valuesEnd[b],this._valuesEnd[b]=c),this._valuesStart[b]=this._valuesStartRepeat[b];this._yoyo&&(this._reversed=!this._reversed);this._startTime=void 0!==this._repeatDelayTime?a+this._repeatDelayTime:a+this._delayTime}else{null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);a=0;for(b=this._chainedTweens.length;a<b;a++)this._chainedTweens[a].start(this._startTime+
this._duration);return!1}return!0}};
TWEEN.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return 1>(a*=2)?0.5*a*a:-0.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return 1>(a*=2)?0.5*a*a*a:0.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return 1>(a*=2)?0.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*
a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return 1>(a*=2)?0.5*a*a*a*a*a:0.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return 0.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:1>(a*=2)?0.5*Math.pow(1024,a-1):0.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-
Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){return 0===a?0:1===a?1:-Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)},Out:function(a){return 0===a?0:1===a?1:Math.pow(2,-10*a)*Math.sin(5*(a-0.1)*Math.PI)+1},InOut:function(a){if(0===a)return 0;if(1===a)return 1;a*=2;return 1>a?-0.5*Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI):0.5*Math.pow(2,-10*(a-1))*Math.sin(5*
(a-1.1)*Math.PI)+1}},Back:{In:function(a){return a*a*(2.70158*a-1.70158)},Out:function(a){return--a*a*(2.70158*a+1.70158)+1},InOut:function(a){return 1>(a*=2)?0.5*a*a*(3.5949095*a-2.5949095):0.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)}},Bounce:{In:function(a){return 1-TWEEN.Easing.Bounce.Out(1-a)},Out:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},InOut:function(a){return 0.5>a?0.5*TWEEN.Easing.Bounce.In(2*
a):0.5*TWEEN.Easing.Bounce.Out(2*a-1)+0.5}}};
TWEEN.Interpolation={Linear:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),g=TWEEN.Interpolation.Utils.Linear;return 0>b?g(a[0],a[1],d):1<b?g(a[c],a[c-1],c-d):g(a[e],a[e+1>c?c:e+1],d-e)},Bezier:function(a,b){for(var c=0,d=a.length-1,e=Math.pow,g=TWEEN.Interpolation.Utils.Bernstein,l=0;l<=d;l++)c+=e(1-b,d-l)*e(b,l)*a[l]*g(d,l);return c},CatmullRom:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),g=TWEEN.Interpolation.Utils.CatmullRom;return a[0]===a[c]?(0>b&&(e=Math.floor(d=c*(1+b))),g(a[(e-
1+c)%c],a[e],a[(e+1)%c],a[(e+2)%c],d-e)):0>b?a[0]-(g(a[0],a[0],a[1],a[1],-d)-a[0]):1<b?a[c]-(g(a[c],a[c],a[c-1],a[c-1],d-c)-a[c]):g(a[e?e-1:0],a[e],a[c<e+1?c:e+1],a[c<e+2?c:e+2],d-e)},Utils:{Linear:function(a,b,c){return(b-a)*c+a},Bernstein:function(a,b){var c=TWEEN.Interpolation.Utils.Factorial;return c(a)/c(b)/c(a-b)},Factorial:function(){var a=[1];return function(b){var c=1;if(a[b])return a[b];for(var d=b;1<d;d--)c*=d;return a[b]=c}}(),CatmullRom:function(a,b,c,d,e){a=0.5*(c-a);d=0.5*(d-b);var g=
e*e;return(2*b-2*c+a+d)*e*g+(-3*b+3*c-2*a-d)*g+a*e+b}}};(function(a){"function"===typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!==typeof module&&"object"===typeof exports?module.exports=TWEEN:void 0!==a&&(a.TWEEN=TWEEN)})(this);
var Stats=function(){function a(a,f,b){a=document.createElement(a);a.id=f;a.style.cssText=b;return a}function b(f,b,c){var g=a("div",f,"padding:0 0 3px 3px;text-align:left;background:"+c),k=a("div",f+"Text","font-family:Helvetica,Arial,sans-serif;font-size:20px;font-weight:bold;line-height:20px;color:"+b);k.innerHTML=f.toUpperCase();g.appendChild(k);f=a("div",f+"Graph","width:80px;height:40px;background:"+b);g.appendChild(f);for(b=0;74>b;b++)f.appendChild(a("span","","width:1px;height:40px;float:left;opacity:0.9;background:"+
c));return g}function c(a){for(var b=m.children,c=0;c<b.length;c++)b[c].style.display=c===a?"block":"none";f=a}function d(a,f){a.appendChild(a.firstChild).style.height=Math.min(40,40-40*f)+"px"}var e=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,g=e(),l=g,k=0,f=0,m=a("div","stats","width:90px;opacity:0.9;cursor:pointer");m.addEventListener("mousedown",function(a){a.preventDefault();c(++f%m.children.length)},!1);var n=0,p=Infinity,r=0,q=b("fps","#0ff","#002"),
t=q.children[0],s=q.children[1];m.appendChild(q);var v=0,w=Infinity,u=0,q=b("ms","#0f0","#020"),x=q.children[0],z=q.children[1];m.appendChild(q);if(self.performance&&self.performance.memory){var y=0,B=Infinity,C=0,q=b("mb","#f08","#201"),F=q.children[0],D=q.children[1];m.appendChild(q)}c(f);return{REVISION:14,domElement:m,setMode:c,begin:function(){g=e()},end:function(){var a=e();v=a-g;w=Math.min(w,v);u=Math.max(u,v);x.textContent=(v|0)+" MS ("+(w|0)+"-"+(u|0)+")";d(z,v/200);k++;if(a>l+1E3&&(n=Math.round(1E3*
k/(a-l)),p=Math.min(p,n),r=Math.max(r,n),t.textContent=n+" FPS ",d(s,n/100),l=a,k=0,void 0!==y)){var f=performance.memory.usedJSHeapSize,b=performance.memory.jsHeapSizeLimit;y=Math.round(9.54E-7*f);B=Math.min(B,y);C=Math.max(C,y);F.textContent=y+" MB ("+B+"-"+C+")";d(D,f/b)}return a},update:function(){g=this.end()}}};"object"===typeof module&&(module.exports=Stats);
(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).PIXI=a()})(function(){return function(){function a(b,c,d){function e(k,f){if(!c[k]){if(!b[k]){var m="function"==typeof require&&require;if(!f&&m)return m(k,!0);if(g)return g(k,!0);m=Error("Cannot find module '"+k+"'");throw m.code="MODULE_NOT_FOUND",m;}m=
c[k]={exports:{}};b[k][0].call(m.exports,function(a){var f=b[k][1][a];return e(f?f:a)},m,m.exports,a,b,c,d)}return c[k].exports}for(var g="function"==typeof require&&require,l=0;l<d.length;l++)e(d[l]);return e}return a}()({1:[function(a,b,c){function d(a){var b=32;(a&=-a)&&b--;a&65535&&(b-=16);a&16711935&&(b-=8);a&252645135&&(b-=4);a&858993459&&(b-=2);a&1431655765&&(b-=1);return b}"use restrict";c.INT_BITS=32;c.INT_MAX=2147483647;c.INT_MIN=-2147483648;c.sign=function(a){return(0<a)-(0>a)};c.abs=function(a){var b=
a>>31;return(a^b)-b};c.min=function(a,b){return b^(a^b)&-(a<b)};c.max=function(a,b){return a^(a^b)&-(a<b)};c.isPow2=function(a){return!(a&a-1)&&!!a};c.log2=function(a){var b,c;b=(65535<a)<<4;a>>>=b;c=(255<a)<<3;a>>>=c;b|=c;c=(15<a)<<2;a>>>=c;b|=c;c=(3<a)<<1;return b|c|a>>>c>>1};c.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};c.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>
24};c.countTrailingZeros=d;c.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;return(a|a>>>16)+1};c.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};c.parity=function(a){a^=a>>>16;a^=a>>>8;a=(a^a>>>4)&15;return 27030>>>a&1};var e=Array(256);(function(a){for(var b=0;256>b;++b){for(var c=b,f=b,m=7,c=c>>>1;c;c>>>=1)f<<=1,f|=c&1,--m;a[b]=f<<m&255}})(e);c.reverse=function(a){return e[a&255]<<24|e[a>>>8&255]<<16|e[a>>>16&255]<<8|e[a>>>24&255]};c.interleave2=
function(a,b){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1};c.deinterleave2=function(a,b){a=a>>>b&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};c.interleave3=function(a,b,c){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&
251719695;b=(b|b<<4)&3272356035;a=(a|a<<2)&1227133513|((b|b<<2)&1227133513)<<1;c&=1023;c=(c|c<<16)&4278190335;c=(c|c<<8)&251719695;c=(c|c<<4)&3272356035;return a|((c|c<<2)&1227133513)<<2};c.deinterleave3=function(a,b){a=a>>>b&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],2:[function(a,b,c){function d(a,b,c){c=c||2;var k=b&&b.length,n=k?b[0]*c:a.length,d=
e(a,0,n,c,!0),r=[];if(!d)return r;var q,t,s,x;if(k){var v=c,k=[],u,z,y;x=0;for(u=b.length;x<u;x++)z=b[x]*v,y=x<u-1?b[x+1]*v:a.length,z=e(a,z,y,v,!1),z===z.next&&(z.steiner=!0),k.push(p(z));k.sort(f);for(x=0;x<k.length;x++){b=k[x];v=d;if(v=m(b,v))b=w(v,b),g(b,b.next);d=g(d,d.next)}}if(a.length>80*c){q=s=a[0];t=k=a[1];for(v=c;v<n;v+=c)x=a[v],b=a[v+1],x<q&&(q=x),b<t&&(t=b),x>s&&(s=x),b>k&&(k=b);s=Math.max(s-q,k-t);s=0!==s?1/s:0}l(d,r,c,q,t,s);return r}function e(a,f,b,c,k){var m;if(k===0<y(a,f,b,c))for(k=
f;k<b;k+=c)m=u(k,a[k],a[k+1],m);else for(k=b-c;k>=f;k-=c)m=u(k,a[k],a[k+1],m);m&&t(m,m.next)&&(x(m),m=m.next);return m}function g(a,f){if(!a)return a;f||(f=a);var b=a,c;do if(c=!1,!b.steiner&&(t(b,b.next)||0===q(b.prev,b,b.next))){x(b);b=f=b.prev;if(b===b.next)break;c=!0}else b=b.next;while(c||b!==f);return f}function l(a,f,b,c,m,d,e){if(a){if(!e&&d){var p=a,u=p;do null===u.z&&(u.z=n(u.x,u.y,c,m,d)),u.prevZ=u.prev,u=u.nextZ=u.next;while(u!==p);u.prevZ.nextZ=null;u.prevZ=null;var p=u,z,y,A,K,G,M,N=
1;do{u=p;A=p=null;for(K=0;u;){K++;y=u;for(z=G=0;z<N&&!(G++,y=y.nextZ,!y);z++);for(M=N;0<G||0<M&&y;)0!==G&&(0===M||!y||u.z<=y.z)?(z=u,u=u.nextZ,G--):(z=y,y=y.nextZ,M--),A?A.nextZ=z:p=z,z.prevZ=A,A=z;u=y}A.nextZ=null;N*=2}while(1<K)}for(p=a;a.prev!==a.next;){u=a.prev;y=a.next;if(d)A=k(a,c,m,d);else a:if(A=a,K=A.prev,G=A,N=A.next,0<=q(K,G,N))A=!1;else{for(z=A.next.next;z!==A.prev;){if(r(K.x,K.y,G.x,G.y,N.x,N.y,z.x,z.y)&&0<=q(z.prev,z,z.next)){A=!1;break a}z=z.next}A=!0}if(A)f.push(u.i/b),f.push(a.i/
b),f.push(y.i/b),x(a),p=a=y.next;else if(a=y,a===p){if(e)if(1===e){e=f;p=b;u=a;do y=u.prev,A=u.next.next,!t(y,A)&&(s(y,u,u.next,A)&&v(y,A)&&v(A,y))&&(e.push(y.i/p),e.push(u.i/p),e.push(A.i/p),x(u),x(u.next),u=a=A),u=u.next;while(u!==a);a=u;l(a,f,b,c,m,d,2)}else{if(2===e)a:{e=a;do{for(p=e.next.next;p!==e.prev;){if(u=e.i!==p.i){u=e;y=p;A=void 0;if(A=u.next.i!==y.i)if(A=void 0,A=u.prev.i!==y.i){A=A=void 0;b:{A=u;do{if(A.i!==u.i&&A.next.i!==u.i&&A.i!==y.i&&A.next.i!==y.i&&s(A,A.next,u,y)){A=!0;break b}A=
A.next}while(A!==u);A=!1}if(A=!A)if(A=void 0,A=v(u,y))if(A=void 0,A=v(y,u)){A=u;K=!1;G=(u.x+y.x)/2;y=(u.y+y.y)/2;do A.y>y!==A.next.y>y&&(A.next.y!==A.y&&G<(A.next.x-A.x)*(y-A.y)/(A.next.y-A.y)+A.x)&&(K=!K),A=A.next;while(A!==u);A=K}}u=A}if(u){a=w(e,p);e=g(e,e.next);a=g(a,a.next);l(e,f,b,c,m,d);l(a,f,b,c,m,d);break a}p=p.next}e=e.next}while(e!==a)}}else l(g(a),f,b,c,m,d,1);break}}}}function k(a,f,b,c){var k=a.prev,m=a.next;if(0<=q(k,a,m))return!1;var g=k.x>a.x?k.x>m.x?k.x:m.x:a.x>m.x?a.x:m.x,d=k.y>
a.y?k.y>m.y?k.y:m.y:a.y>m.y?a.y:m.y,l=n(k.x<a.x?k.x<m.x?k.x:m.x:a.x<m.x?a.x:m.x,k.y<a.y?k.y<m.y?k.y:m.y:a.y<m.y?a.y:m.y,f,b,c);f=n(g,d,f,b,c);b=a.prevZ;for(c=a.nextZ;b&&b.z>=l&&c&&c.z<=f;){if(b!==a.prev&&b!==a.next&&r(k.x,k.y,a.x,a.y,m.x,m.y,b.x,b.y)&&0<=q(b.prev,b,b.next))return!1;b=b.prevZ;if(c!==a.prev&&c!==a.next&&r(k.x,k.y,a.x,a.y,m.x,m.y,c.x,c.y)&&0<=q(c.prev,c,c.next))return!1;c=c.nextZ}for(;b&&b.z>=l;){if(b!==a.prev&&b!==a.next&&r(k.x,k.y,a.x,a.y,m.x,m.y,b.x,b.y)&&0<=q(b.prev,b,b.next))return!1;
b=b.prevZ}for(;c&&c.z<=f;){if(c!==a.prev&&c!==a.next&&r(k.x,k.y,a.x,a.y,m.x,m.y,c.x,c.y)&&0<=q(c.prev,c,c.next))return!1;c=c.nextZ}return!0}function f(a,b){return a.x-b.x}function m(a,b){var f=b,c=a.x,k=a.y,m=-Infinity,g;do{if(k<=f.y&&k>=f.next.y&&f.next.y!==f.y){var d=f.x+(k-f.y)*(f.next.x-f.x)/(f.next.y-f.y);if(d<=c&&d>m){m=d;if(d===c){if(k===f.y)return f;if(k===f.next.y)return f.next}g=f.x<f.next.x?f:f.next}}f=f.next}while(f!==b);if(!g)return null;if(c===m)return g.prev;for(var d=g,n=g.x,l=g.y,
e=Infinity,p,f=g.next;f!==d;){if(c>=f.x&&f.x>=n&&c!==f.x&&r(k<l?c:m,k,n,l,k<l?m:c,k,f.x,f.y))if(p=Math.abs(k-f.y)/(c-f.x),(p<e||p===e&&f.x>g.x)&&v(f,a))g=f,e=p;f=f.next}return g}function n(a,f,b,c,k){a=32767*(a-b)*k;f=32767*(f-c)*k;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;f=(f|f<<8)&16711935;f=(f|f<<4)&252645135;f=(f|f<<2)&858993459;return(a|a<<1)&1431655765|((f|f<<1)&1431655765)<<1}function p(a){var f=a,b=a;do f.x<b.x&&(b=f),f=f.next;while(f!==a);return b}function r(a,f,b,c,
k,m,g,d){return 0<=(k-g)*(f-d)-(a-g)*(m-d)&&0<=(a-g)*(c-d)-(b-g)*(f-d)&&0<=(b-g)*(m-d)-(k-g)*(c-d)}function q(a,f,b){return(f.y-a.y)*(b.x-f.x)-(f.x-a.x)*(b.y-f.y)}function t(a,f){return a.x===f.x&&a.y===f.y}function s(a,f,b,c){return t(a,f)&&t(b,c)||t(a,c)&&t(b,f)?!0:0<q(a,f,b)!==0<q(a,f,c)&&0<q(b,c,a)!==0<q(b,c,f)}function v(a,f){return 0>q(a.prev,a,a.next)?0<=q(a,f,a.next)&&0<=q(a,a.prev,f):0>q(a,f,a.prev)||0>q(a,a.next,f)}function w(a,f){var b=new z(a.i,a.x,a.y),c=new z(f.i,f.x,f.y),k=a.next,m=
f.prev;a.next=f;f.prev=a;b.next=k;k.prev=b;c.next=b;b.prev=c;m.next=c;c.prev=m;return c}function u(a,f,b,c){a=new z(a,f,b);c?(a.next=c.next,a.prev=c,c.next.prev=a,c.next=a):(a.prev=a,a.next=a);return a}function x(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function z(a,f,b){this.i=a;this.x=f;this.y=b;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function y(a,f,b,c){for(var k=0,m=b-c;f<b;f+=c)k+=(a[m]-a[f])*(a[f+
1]+a[m+1]),m=f;return k}b.exports=d;b.exports.default=d;d.deviation=function(a,f,b,c){var k=f&&f.length,m=Math.abs(y(a,0,k?f[0]*b:a.length,b));if(k)for(var k=0,g=f.length;k<g;k++)m-=Math.abs(y(a,f[k]*b,k<g-1?f[k+1]*b:a.length,b));for(k=f=0;k<c.length;k+=3){var g=c[k]*b,d=c[k+1]*b,n=c[k+2]*b;f+=Math.abs((a[g]-a[n])*(a[d+1]-a[g+1])-(a[g]-a[d])*(a[n+1]-a[g+1]))}return 0===m&&0===f?0:Math.abs((f-m)/m)};d.flatten=function(a){for(var f=a[0][0].length,b={vertices:[],holes:[],dimensions:f},c=0,k=0;k<a.length;k++){for(var m=
0;m<a[k].length;m++)for(var g=0;g<f;g++)b.vertices.push(a[k][m][g]);0<k&&(c+=a[k-1].length,b.holes.push(c))}return b}},{}],3:[function(a,b,c){function d(){}function e(a,b,c){this.fn=a;this.context=b;this.once=c||!1}function g(){this._events=new d;this._eventsCount=0}var l=Object.prototype.hasOwnProperty,k="~";Object.create&&(d.prototype=Object.create(null),(new d).__proto__||(k=!1));g.prototype.eventNames=function(){var a=[],b,c;if(0===this._eventsCount)return a;for(c in b=this._events)l.call(b,c)&&
a.push(k?c.slice(1):c);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(b)):a};g.prototype.listeners=function(a,b){var c=this._events[k?k+a:a];if(b)return!!c;if(!c)return[];if(c.fn)return[c.fn];for(var g=0,d=c.length,l=Array(d);g<d;g++)l[g]=c[g].fn;return l};g.prototype.emit=function(a,b,c,g,d,l){var e=k?k+a:a;if(!this._events[e])return!1;var e=this._events[e],s=arguments.length,v,w;if(e.fn){e.once&&this.removeListener(a,e.fn,void 0,!0);switch(s){case 1:return e.fn.call(e.context),
!0;case 2:return e.fn.call(e.context,b),!0;case 3:return e.fn.call(e.context,b,c),!0;case 4:return e.fn.call(e.context,b,c,g),!0;case 5:return e.fn.call(e.context,b,c,g,d),!0;case 6:return e.fn.call(e.context,b,c,g,d,l),!0}w=1;for(v=Array(s-1);w<s;w++)v[w-1]=arguments[w];e.fn.apply(e.context,v)}else{var u=e.length,x;for(w=0;w<u;w++)switch(e[w].once&&this.removeListener(a,e[w].fn,void 0,!0),s){case 1:e[w].fn.call(e[w].context);break;case 2:e[w].fn.call(e[w].context,b);break;case 3:e[w].fn.call(e[w].context,
b,c);break;case 4:e[w].fn.call(e[w].context,b,c,g);break;default:if(!v){x=1;for(v=Array(s-1);x<s;x++)v[x-1]=arguments[x]}e[w].fn.apply(e[w].context,v)}}return!0};g.prototype.on=function(a,b,c){b=new e(b,c||this);a=k?k+a:a;this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],b]:this._events[a].push(b):(this._events[a]=b,this._eventsCount++);return this};g.prototype.once=function(a,b,c){b=new e(b,c||this,!0);a=k?k+a:a;this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],
b]:this._events[a].push(b):(this._events[a]=b,this._eventsCount++);return this};g.prototype.removeListener=function(a,b,c,g){a=k?k+a:a;if(!this._events[a])return this;if(!b)return 0===--this._eventsCount?this._events=new d:delete this._events[a],this;var l=this._events[a];if(l.fn){if(l.fn===b&&(!g||l.once)&&(!c||l.context===c))0===--this._eventsCount?this._events=new d:delete this._events[a]}else{for(var e=0,t=[],s=l.length;e<s;e++)(l[e].fn!==b||g&&!l[e].once||c&&l[e].context!==c)&&t.push(l[e]);t.length?
this._events[a]=1===t.length?t[0]:t:0===--this._eventsCount?this._events=new d:delete this._events[a]}return this};g.prototype.removeAllListeners=function(a){a?(a=k?k+a:a,this._events[a]&&(0===--this._eventsCount?this._events=new d:delete this._events[a])):(this._events=new d,this._eventsCount=0);return this};g.prototype.off=g.prototype.removeListener;g.prototype.addListener=g.prototype.on;g.prototype.setMaxListeners=function(){return this};g.prefixed=k;g.EventEmitter=g;"undefined"!==typeof b&&(b.exports=
g)},{}],4:[function(a,b,c){(function(a){var c=/iPhone/i,g=/iPod/i,l=/iPad/i,k=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,f=/Android/i,m=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,n=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,p=/Windows Phone/i,r=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,q=/BlackBerry/i,t=/BB10/i,s=/Opera Mini/i,v=/(CriOS|Chrome)(?=.*\bMobile\b)/i,w=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,u=/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i,
x=function(a){a=a||navigator.userAgent;var b=a.split("[FBAN");"undefined"!==typeof b[1]&&(a=b[0]);b=a.split("Twitter");"undefined"!==typeof b[1]&&(a=b[0]);this.apple={phone:c.test(a),ipod:g.test(a),tablet:!c.test(a)&&l.test(a),device:c.test(a)||g.test(a)||l.test(a)};this.amazon={phone:m.test(a),tablet:!m.test(a)&&n.test(a),device:m.test(a)||n.test(a)};this.android={phone:m.test(a)||k.test(a),tablet:!m.test(a)&&!k.test(a)&&(n.test(a)||f.test(a)),device:m.test(a)||n.test(a)||k.test(a)||f.test(a)};this.windows=
{phone:p.test(a),tablet:r.test(a),device:p.test(a)||r.test(a)};this.other={blackberry:q.test(a),blackberry10:t.test(a),opera:s.test(a),firefox:w.test(a),chrome:v.test(a),device:q.test(a)||t.test(a)||s.test(a)||w.test(a)||v.test(a)};this.seven_inch=u.test(a);this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch;this.phone=this.apple.phone||this.android.phone||this.windows.phone;this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet;
if("undefined"===typeof window)return this},z=function(){var a=new x;a.Class=x;return a};"undefined"!==typeof b&&b.exports&&"undefined"===typeof window?b.exports=x:"undefined"!==typeof b&&b.exports&&"undefined"!==typeof window?b.exports=z():a.isMobile=z()})(this)},{}],5:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){a._head?(a._tail._next=b,b._prev=a._tail):a._head=b;a._tail=b;b._owner=a;return b}Object.defineProperty(c,
"__esModule",{value:!0});var g=function(){function a(b,c){for(var k=0;k<c.length;k++){var g=c[k];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(b,g.key,g)}}return function(b,c,g){c&&a(b.prototype,c);g&&a(b,g);return b}}(),l=function(){function a(b,c,g){void 0===c&&(c=!1);d(this,a);this._fn=b;this._once=c;this._thisArg=g;this._next=this._prev=this._owner=null}g(a,[{key:"detach",value:function(){if(null===this._owner)return!1;this._owner.detach(this);
return!0}}]);return a}();a=function(){function a(){d(this,a);this._head=this._tail=void 0}g(a,[{key:"handlers",value:function(){var a=this._head;if(0>=arguments.length||void 0===arguments[0]?0:arguments[0])return!!a;for(var b=[];a;)b.push(a),a=a._next;return b}},{key:"has",value:function(a){if(!(a instanceof l))throw Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return a._owner===this}},{key:"dispatch",value:function(){var a=this._head;if(!a)return!1;for(;a;)a._once&&this.detach(a),
a._fn.apply(a._thisArg,arguments),a=a._next;return!0}},{key:"add",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!==typeof a)throw Error("MiniSignal#add(): First arg must be a Function.");return e(this,new l(a,!1,b))}},{key:"once",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!==typeof a)throw Error("MiniSignal#once(): First arg must be a Function.");return e(this,new l(a,!0,b))}},{key:"detach",
value:function(a){if(!(a instanceof l))throw Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");if(a._owner!==this)return this;a._prev&&(a._prev._next=a._next);a._next&&(a._next._prev=a._prev);a===this._head?(this._head=a._next,null===a._next&&(this._tail=null)):a===this._tail&&(this._tail=a._prev,this._tail._next=null);a._owner=null;return this}},{key:"detachAll",value:function(){var a=this._head;if(!a)return this;for(this._head=this._tail=null;a;)a._owner=null,a=a._next;
return this}}]);return a}();a.MiniSignalBinding=l;c["default"]=a;b.exports=c["default"]},{}],6:[function(a,b,c){var d=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;b.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},a=0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;
var f={};"abcdefghijklmnopqrst".split("").forEach(function(a){f[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},f)).join("")?!1:!0}catch(c){return!1}}()?Object.assign:function(a,b){var f,c;if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");c=Object(a);for(var n,p=1;p<arguments.length;p++){f=Object(arguments[p]);for(var r in f)e.call(f,r)&&(c[r]=f[r]);if(d){n=d(f);for(var q=0;q<n.length;q++)g.call(f,n[q])&&(c[n[q]]=f[n[q]])}}return c}},
{}],7:[function(a,b,c){b.exports=function(a,b){b=b||{};for(var c="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),l={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},k={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}[b.strictMode?
"strict":"loose"].exec(a),f={},m=14;m--;)f[c[m]]=k[m]||"";f[l.name]={};f[c[12]].replace(l.parser,function(a,b,c){b&&(f[l.name][b]=c)});return f}},{}],8:[function(a,b,c){(function(a){function b(a,c){for(var k=0,g=a.length-1;0<=g;g--){var d=a[g];"."===d?a.splice(g,1):".."===d?(a.splice(g,1),k++):k&&(a.splice(g,1),k--)}if(c)for(;k--;k)a.unshift("..");return a}function g(a,b){if(a.filter)return a.filter(b);for(var c=[],k=0;k<a.length;k++)b(a[k],k,a)&&c.push(a[k]);return c}var l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
c.resolve=function(){for(var f="",c=!1,k=arguments.length-1;-1<=k&&!c;k--){var l=0<=k?arguments[k]:a.cwd();if("string"!==typeof l)throw new TypeError("Arguments to path.resolve must be strings");l&&(f=l+"/"+f,c="/"===l.charAt(0))}f=b(g(f.split("/"),function(a){return!!a}),!c).join("/");return(c?"/":"")+f||"."};c.normalize=function(a){var m=c.isAbsolute(a),d="/"===k(a,-1);a=b(g(a.split("/"),function(a){return!!a}),!m).join("/");!a&&!m&&(a=".");a&&d&&(a+="/");return(m?"/":"")+a};c.isAbsolute=function(a){return"/"===
a.charAt(0)};c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(g(a,function(a,b){if("string"!==typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))};c.relative=function(a,b){function k(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;0<=c&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1);b=c.resolve(b).substr(1);for(var g=k(a.split("/")),d=k(b.split("/")),l=Math.min(g.length,d.length),e=l,
s=0;s<l;s++)if(g[s]!==d[s]){e=s;break}l=[];for(s=e;s<g.length;s++)l.push("..");l=l.concat(d.slice(e));return l.join("/")};c.sep="/";c.delimiter=":";c.dirname=function(a){var b=l.exec(a).slice(1);a=b[0];b=b[1];if(!a&&!b)return".";b&&(b=b.substr(0,b.length-1));return a+b};c.basename=function(a,b){var c=l.exec(a).slice(1)[2];b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length));return c};c.extname=function(a){return l.exec(a).slice(1)[3]};var k="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,
c)}:function(a,b,c){0>b&&(b=a.length+b);return a.substr(b,c)}}).call(this,a("_process"))},{_process:26}],9:[function(a,b,c){var d=new ArrayBuffer(0),e=function(a,b,c,f){this.gl=a;this.buffer=a.createBuffer();this.type=b||a.ARRAY_BUFFER;this.drawType=f||a.STATIC_DRAW;this.data=d;c&&this.upload(c);this._updateID=0};e.prototype.upload=function(a,b,c){c||this.bind();c=this.gl;a=a||this.data;this.data.byteLength>=a.byteLength?c.bufferSubData(this.type,b||0,a):c.bufferData(this.type,a,this.drawType);this.data=
a};e.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)};e.createVertexBuffer=function(a,b,c){return new e(a,a.ARRAY_BUFFER,b,c)};e.createIndexBuffer=function(a,b,c){return new e(a,a.ELEMENT_ARRAY_BUFFER,b,c)};e.create=function(a,b,c,f){return new e(a,b,c,f)};e.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)};b.exports=e},{}],10:[function(a,b,c){var d=a("./GLTexture"),e=function(a,b,c){this.gl=a;this.framebuffer=a.createFramebuffer();this.texture=this.stencil=null;
this.width=b||100;this.height=c||100};e.prototype.enableTexture=function(a){var b=this.gl;this.texture=a||new d(b);this.texture.bind();this.bind();b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.texture.texture,0)};e.prototype.enableStencil=function(){if(!this.stencil){var a=this.gl;this.stencil=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,this.stencil);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.stencil);a.renderbufferStorage(a.RENDERBUFFER,
a.DEPTH_STENCIL,this.width,this.height)}};e.prototype.clear=function(a,b,c,f){this.bind();var m=this.gl;m.clearColor(a,b,c,f);m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT)};e.prototype.bind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer)};e.prototype.unbind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)};e.prototype.resize=function(a,b){var c=this.gl;this.width=a;this.height=b;this.texture&&this.texture.uploadData(null,a,b);this.stencil&&(c.bindRenderbuffer(c.RENDERBUFFER,
this.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,b))};e.prototype.destroy=function(){var a=this.gl;this.texture&&this.texture.destroy();a.deleteFramebuffer(this.framebuffer);this.texture=this.stencil=this.gl=null};e.createRGBA=function(a,b,c,f){f=d.fromData(a,null,b,c);f.enableNearestScaling();f.enableWrapClamp();a=new e(a,b,c);a.enableTexture(f);a.unbind();return a};e.createFloat32=function(a,b,c,f){f=new d.fromData(a,f,b,c);f.enableNearestScaling();f.enableWrapClamp();a=new e(a,
b,c);a.enableTexture(f);a.unbind();return a};b.exports=e},{"./GLTexture":12}],11:[function(a,b,c){var d=a("./shader/compileProgram"),e=a("./shader/extractAttributes"),g=a("./shader/extractUniforms"),l=a("./shader/setPrecision"),k=a("./shader/generateUniformAccessObject");a=function(a,b,c,p,r){this.gl=a;p&&(b=l(b,p),c=l(c,p));this.program=d(a,b,c,r);this.attributes=e(a,this.program);this.uniformData=g(a,this.program);this.uniforms=k(a,this.uniformData)};a.prototype.bind=function(){this.gl.useProgram(this.program);
return this};a.prototype.destroy=function(){this.uniforms=this.uniformData=this.attributes=null;this.gl.deleteProgram(this.program)};b.exports=a},{"./shader/compileProgram":17,"./shader/extractAttributes":19,"./shader/extractUniforms":20,"./shader/generateUniformAccessObject":21,"./shader/setPrecision":25}],12:[function(a,b,c){var d=function(a,b,c,f,m){this.gl=a;this.texture=a.createTexture();this.premultiplyAlpha=this.mipmap=!1;this.width=b||-1;this.height=c||-1;this.format=f||a.RGBA;this.type=m||
a.UNSIGNED_BYTE};d.prototype.upload=function(a){this.bind();var b=this.gl;b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var c=a.videoWidth||a.width,f=a.videoHeight||a.height;f!==this.height||c!==this.width?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,this.type,a):b.texSubImage2D(b.TEXTURE_2D,0,0,0,this.format,this.type,a);this.width=c;this.height=f};var e=!1;d.prototype.uploadData=function(a,b,c){this.bind();var f=this.gl;if(a instanceof Float32Array){if(!e)if(f.getExtension("OES_texture_float"))e=
!0;else throw Error("floating point textures not available");this.type=f.FLOAT}else this.type=this.type||f.UNSIGNED_BYTE;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);b!==this.width||c!==this.height?f.texImage2D(f.TEXTURE_2D,0,this.format,b,c,0,this.format,this.type,a||null):f.texSubImage2D(f.TEXTURE_2D,0,0,0,b,c,this.format,this.type,a||null);this.width=b;this.height=c};d.prototype.bind=function(a){var b=this.gl;void 0!==a&&b.activeTexture(b.TEXTURE0+a);b.bindTexture(b.TEXTURE_2D,
this.texture)};d.prototype.unbind=function(){var a=this.gl;a.bindTexture(a.TEXTURE_2D,null)};d.prototype.minFilter=function(a){var b=this.gl;this.bind();this.mipmap?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR_MIPMAP_LINEAR:b.NEAREST_MIPMAP_NEAREST):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR:b.NEAREST)};d.prototype.magFilter=function(a){var b=this.gl;this.bind();b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a?b.LINEAR:b.NEAREST)};d.prototype.enableMipmap=function(){var a=
this.gl;this.bind();this.mipmap=!0;a.generateMipmap(a.TEXTURE_2D)};d.prototype.enableLinearScaling=function(){this.minFilter(!0);this.magFilter(!0)};d.prototype.enableNearestScaling=function(){this.minFilter(!1);this.magFilter(!1)};d.prototype.enableWrapClamp=function(){var a=this.gl;this.bind();a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)};d.prototype.enableWrapRepeat=function(){var a=this.gl;this.bind();a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)};d.prototype.enableWrapMirrorRepeat=function(){var a=this.gl;this.bind();a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.MIRRORED_REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.MIRRORED_REPEAT)};d.prototype.destroy=function(){this.gl.deleteTexture(this.texture)};d.fromSource=function(a,b,c){a=new d(a);a.premultiplyAlpha=c||!1;a.upload(b);return a};d.fromData=function(a,b,c,f){a=new d(a);a.uploadData(b,c,f);
return a};b.exports=d},{}],13:[function(a,b,c){function d(a,b){this.nativeVaoExtension=null;d.FORCE_NATIVE||(this.nativeVaoExtension=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object"));this.nativeState=b;if(this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var c=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:Array(c),attribState:Array(c)}}this.gl=a;this.attributes=
[];this.indexBuffer=null;this.dirty=!1}var e=a("./setVertexAttribArrays");d.prototype.constructor=d;b.exports=d;d.FORCE_NATIVE=!1;d.prototype.bind=function(){if(this.nativeVao){this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao);if(this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this};d.prototype.unbind=function(){this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null);return this};d.prototype.activate=function(){for(var a=
this.gl,b=null,c=0;c<this.attributes.length;c++){var f=this.attributes[c];b!==f.buffer&&(f.buffer.bind(),b=f.buffer);a.vertexAttribPointer(f.attribute.location,f.attribute.size,f.type||a.FLOAT,f.normalized||!1,f.stride||0,f.start||0)}e(a,this.attributes,this.nativeState);this.indexBuffer&&this.indexBuffer.bind();return this};d.prototype.addAttribute=function(a,b,c,f,m,d){this.attributes.push({buffer:a,attribute:b,location:b.location,type:c||this.gl.FLOAT,normalized:f||!1,stride:m||0,start:d||0});
this.dirty=!0;return this};d.prototype.addIndex=function(a){this.indexBuffer=a;this.dirty=!0;return this};d.prototype.clear=function(){this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao);this.attributes.length=0;this.indexBuffer=null;return this};d.prototype.draw=function(a,b,c){var f=this.gl;this.indexBuffer?f.drawElements(a,b||this.indexBuffer.data.length,f.UNSIGNED_SHORT,2*(c||0)):f.drawArrays(a,c,b||this.getSize());return this};d.prototype.destroy=function(){this.nativeState=
this.attributes=this.indexBuffer=this.gl=null;this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao);this.nativeVao=this.nativeVaoExtension=null};d.prototype.getSize=function(){var a=this.attributes[0];return a.buffer.data.length/(a.stride/4||a.attribute.size)}},{"./setVertexAttribArrays":16}],14:[function(a,b,c){b.exports=function(a,b){var c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b);if(!c)throw Error("This browser does not support webGL. Try using the canvas renderer");
return c}},{}],15:[function(a,b,c){a={createContext:a("./createContext"),setVertexAttribArrays:a("./setVertexAttribArrays"),GLBuffer:a("./GLBuffer"),GLFramebuffer:a("./GLFramebuffer"),GLShader:a("./GLShader"),GLTexture:a("./GLTexture"),VertexArrayObject:a("./VertexArrayObject"),shader:a("./shader")};"undefined"!==typeof b&&b.exports&&(b.exports=a);"undefined"!==typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=a)},{"./GLBuffer":9,"./GLFramebuffer":10,"./GLShader":11,"./GLTexture":12,
"./VertexArrayObject":13,"./createContext":14,"./setVertexAttribArrays":16,"./shader":22}],16:[function(a,b,c){b.exports=function(a,b,c){var l;if(c){var k=c.tempAttribState,f=c.attribState;for(l=0;l<k.length;l++)k[l]=!1;for(l=0;l<b.length;l++)k[b[l].attribute.location]=!0;for(l=0;l<f.length;l++)f[l]!==k[l]&&(f[l]=k[l],c.attribState[l]?a.enableVertexAttribArray(l):a.disableVertexAttribArray(l))}else for(l=0;l<b.length;l++)a.enableVertexAttribArray(b[l].attribute.location)}},{}],17:[function(a,b,c){var d=
function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return!a.getShaderParameter(b,a.COMPILE_STATUS)?(console.log(a.getShaderInfoLog(b)),null):b};b.exports=function(a,b,c,k){b=d(a,a.VERTEX_SHADER,b);c=d(a,a.FRAGMENT_SHADER,c);var f=a.createProgram();a.attachShader(f,b);a.attachShader(f,c);if(k)for(var m in k)a.bindAttribLocation(f,k[m],m);a.linkProgram(f);a.getProgramParameter(f,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",
a.getProgramParameter(f,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(f)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(f)),a.deleteProgram(f),f=null);a.deleteShader(b);a.deleteShader(c);return f}},{}],18:[function(a,b,c){var d=function(a){a=Array(a);for(var b=0;b<a.length;b++)a[b]=!1;return a};b.exports=function(a,b){switch(a){case "float":return 0;case "vec2":return new Float32Array(2*b);case "vec3":return new Float32Array(3*
b);case "vec4":return new Float32Array(4*b);case "int":case "sampler2D":return 0;case "ivec2":return new Int32Array(2*b);case "ivec3":return new Int32Array(3*b);case "ivec4":return new Int32Array(4*b);case "bool":return!1;case "bvec2":return d(2*b);case "bvec3":return d(3*b);case "bvec4":return d(4*b);case "mat2":return new Float32Array([1,0,0,1]);case "mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case "mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],19:[function(a,b,
c){var d=a("./mapType"),e=a("./mapSize"),g=function(a,b,c,m){gl.vertexAttribPointer(this.location,this.size,a||gl.FLOAT,b||!1,c||0,m||0)};b.exports=function(a,b){for(var c={},m=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),n=0;n<m;n++){var p=a.getActiveAttrib(b,n),r=d(a,p.type);c[p.name]={type:r,size:e(r),location:a.getAttribLocation(b,p.name),pointer:g}}return c}},{"./mapSize":23,"./mapType":24}],20:[function(a,b,c){var d=a("./mapType"),e=a("./defaultValue");b.exports=function(a,b){for(var c={},f=
a.getProgramParameter(b,a.ACTIVE_UNIFORMS),m=0;m<f;m++){var n=a.getActiveUniform(b,m),p=n.name.replace(/\[.*?\]/,""),r=d(a,n.type);c[p]={type:r,size:n.size,location:a.getUniformLocation(b,p),value:e(r,n.size)}}return c}},{"./defaultValue":18,"./mapType":24}],21:[function(a,b,c){function d(a,b){return function(c){this.data[a].value=c;var d=this.data[a].location;if(1===b.size)g[b.type](this.gl,d,c);else l[b.type](this.gl,d,c)}}var e=function(a){return function(){return this.data[a].value}},g={"float":function(a,
b,c){a.uniform1f(b,c)},vec2:function(a,b,c){a.uniform2f(b,c[0],c[1])},vec3:function(a,b,c){a.uniform3f(b,c[0],c[1],c[2])},vec4:function(a,b,c){a.uniform4f(b,c[0],c[1],c[2],c[3])},"int":function(a,b,c){a.uniform1i(b,c)},ivec2:function(a,b,c){a.uniform2i(b,c[0],c[1])},ivec3:function(a,b,c){a.uniform3i(b,c[0],c[1],c[2])},ivec4:function(a,b,c){a.uniform4i(b,c[0],c[1],c[2],c[3])},bool:function(a,b,c){a.uniform1i(b,c)},bvec2:function(a,b,c){a.uniform2i(b,c[0],c[1])},bvec3:function(a,b,c){a.uniform3i(b,
c[0],c[1],c[2])},bvec4:function(a,b,c){a.uniform4i(b,c[0],c[1],c[2],c[3])},mat2:function(a,b,c){a.uniformMatrix2fv(b,!1,c)},mat3:function(a,b,c){a.uniformMatrix3fv(b,!1,c)},mat4:function(a,b,c){a.uniformMatrix4fv(b,!1,c)},sampler2D:function(a,b,c){a.uniform1i(b,c)}},l={"float":function(a,b,c){a.uniform1fv(b,c)},vec2:function(a,b,c){a.uniform2fv(b,c)},vec3:function(a,b,c){a.uniform3fv(b,c)},vec4:function(a,b,c){a.uniform4fv(b,c)},"int":function(a,b,c){a.uniform1iv(b,c)},ivec2:function(a,b,c){a.uniform2iv(b,
c)},ivec3:function(a,b,c){a.uniform3iv(b,c)},ivec4:function(a,b,c){a.uniform4iv(b,c)},bool:function(a,b,c){a.uniform1iv(b,c)},bvec2:function(a,b,c){a.uniform2iv(b,c)},bvec3:function(a,b,c){a.uniform3iv(b,c)},bvec4:function(a,b,c){a.uniform4iv(b,c)},sampler2D:function(a,b,c){a.uniform1iv(b,c)}};b.exports=function(a,b){var c={data:{}};c.gl=a;for(var g=Object.keys(b),l=0;l<g.length;l++){for(var r=g[l],q=r.split("."),t=q[q.length-1],s=c,v=0;v<q.length-1;v++)var w=s[q[v]]||{data:{}},s=s[q[v]]=w;q=s;r=
b[r];q.data[t]=r;q.gl=a;Object.defineProperty(q,t,{get:e(t),set:d(t,r)})}return c}},{}],22:[function(a,b,c){b.exports={compileProgram:a("./compileProgram"),defaultValue:a("./defaultValue"),extractAttributes:a("./extractAttributes"),extractUniforms:a("./extractUniforms"),generateUniformAccessObject:a("./generateUniformAccessObject"),setPrecision:a("./setPrecision"),mapSize:a("./mapSize"),mapType:a("./mapType")}},{"./compileProgram":17,"./defaultValue":18,"./extractAttributes":19,"./extractUniforms":20,
"./generateUniformAccessObject":21,"./mapSize":23,"./mapType":24,"./setPrecision":25}],23:[function(a,b,c){var d={"float":1,vec2:2,vec3:3,vec4:4,"int":1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};b.exports=function(a){return d[a]}},{}],24:[function(a,b,c){var d=null,e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",
FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};b.exports=function(a,b){if(!d){var c=Object.keys(e);d={};for(var f=0;f<c.length;++f){var m=c[f];d[a[m]]=e[m]}}return d[b]}},{}],25:[function(a,b,c){b.exports=function(a,b){return"precision"!==a.substring(0,9)?"precision "+b+" float;\n"+a:a}},{}],26:[function(a,b,c){function d(){throw Error("setTimeout has not been defined");}function e(){throw Error("clearTimeout has not been defined");}function g(a){if(p===setTimeout)return setTimeout(a,
0);if((p===d||!p)&&setTimeout)return p=setTimeout,setTimeout(a,0);try{return p(a,0)}catch(b){try{return p.call(null,a,0)}catch(c){return p.call(this,a,0)}}}function l(a){if(r===clearTimeout)return clearTimeout(a);if((r===e||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(a);try{return r(a)}catch(b){try{return r.call(null,a)}catch(c){return r.call(this,a)}}}function k(){v&&w&&(v=!1,w.length?s=w.concat(s):u=-1,s.length&&f())}function f(){if(!v){var a=g(k);v=!0;for(var b=s.length;b;){w=s;for(s=
[];++u<b;)w&&w[u].run();u=-1;b=s.length}w=null;v=!1;l(a)}}function m(a,b){this.fun=a;this.array=b}function n(){}a=b.exports={};var p,r;try{p="function"===typeof setTimeout?setTimeout:d}catch(q){p=d}try{r="function"===typeof clearTimeout?clearTimeout:e}catch(t){r=e}var s=[],v=!1,w,u=-1;a.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];s.push(new m(a,b));1===s.length&&!v&&g(f)};m.prototype.run=function(){this.fun.apply(null,
this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=n;a.addListener=n;a.once=n;a.off=n;a.removeListener=n;a.removeAllListeners=n;a.emit=n;a.prependListener=n;a.prependOnceListener=n;a.listeners=function(a){return[]};a.binding=function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],27:[function(a,b,c){(function(a){(function(e){function g(a){throw new RangeError(I[a]);
}function l(a,b){for(var c=a.length,f=[];c--;)f[c]=b(a[c]);return f}function k(a,b){var c=a.split("@"),f="";1<c.length&&(f=c[0]+"@",a=c[1]);a=a.replace(H,".");c=a.split(".");c=l(c,b).join(".");return f+c}function f(a){for(var b=[],c=0,f=a.length,k,m;c<f;)k=a.charCodeAt(c++),55296<=k&&56319>=k&&c<f?(m=a.charCodeAt(c++),56320==(m&64512)?b.push(((k&1023)<<10)+(m&1023)+65536):(b.push(k),c--)):b.push(k);return b}function m(a){return l(a,function(a){var b="";65535<a&&(a-=65536,b+=S(a>>>10&1023|55296),a=
56320|a&1023);return b+=S(a)}).join("")}function n(a,b,c){var f=0;a=c?O(a/y):a>>1;for(a+=O(a/b);a>Q*x>>1;f+=w)a=O(a/Q);return O(f+(Q+1)*a/(a+z))}function p(a){var b=[],c=a.length,f,k=0,d=C,l=B,e,p,r,q,t;e=a.lastIndexOf(F);0>e&&(e=0);for(p=0;p<e;++p)128<=a.charCodeAt(p)&&g("not-basic"),b.push(a.charCodeAt(p));for(e=0<e?e+1:0;e<c;){p=k;f=1;for(r=w;;r+=w){e>=c&&g("invalid-input");q=a.charCodeAt(e++);q=10>q-48?q-22:26>q-65?q-65:26>q-97?q-97:w;(q>=w||q>O((v-k)/f))&&g("overflow");k+=q*f;t=r<=l?u:r>=l+x?
x:r-l;if(q<t)break;q=w-t;f>O(v/q)&&g("overflow");f*=q}f=b.length+1;l=n(k-p,f,0==p);O(k/f)>v-d&&g("overflow");d+=O(k/f);k%=f;b.splice(k++,0,d)}return m(b)}function r(a){var b,c,k,m,d,l,e,p,r,q=[],t,s,z;a=f(a);t=a.length;b=C;c=0;d=B;for(l=0;l<t;++l)r=a[l],128>r&&q.push(S(r));for((k=m=q.length)&&q.push(F);k<t;){e=v;for(l=0;l<t;++l)r=a[l],r>=b&&r<e&&(e=r);s=k+1;e-b>O((v-c)/s)&&g("overflow");c+=(e-b)*s;b=e;for(l=0;l<t;++l)if(r=a[l],r<b&&++c>v&&g("overflow"),r==b){p=c;for(e=w;;e+=w){r=e<=d?u:e>=d+x?x:e-
d;if(p<r)break;z=p-r;p=w-r;q.push(S(r+z%p+22+75*(26>r+z%p)-0));p=O(z/p)}q.push(S(p+22+75*(26>p)-0));d=n(c,s,k==m);c=0;++k}++c;++b}return q.join("")}var q="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof b&&b&&!b.nodeType&&b,s="object"==typeof a&&a;if(s.global===s||s.window===s||s.self===s)e=s;var v=2147483647,w=36,u=1,x=26,z=38,y=700,B=72,C=128,F="-",D=/^xn--/,E=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)",
"invalid-input":"Invalid input"},Q=w-u,O=Math.floor,S=String.fromCharCode,R,s={version:"1.4.1",ucs2:{decode:f,encode:m},decode:p,encode:r,toASCII:function(a){return k(a,function(a){return E.test(a)?"xn--"+r(a):a})},toUnicode:function(a){return k(a,function(a){return D.test(a)?p(a.slice(4).toLowerCase()):a})}};if(q&&t)if(b.exports==q)t.exports=s;else for(R in s)s.hasOwnProperty(R)&&(q[R]=s[R]);else e.punycode=s})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==
typeof window?window:{})},{}],28:[function(a,b,c){b.exports=function(a,b,c,k){c=c||"=";var f={};if("string"!==typeof a||0===a.length)return f;var m=/\+/g;a=a.split(b||"&");b=1E3;k&&"number"===typeof k.maxKeys&&(b=k.maxKeys);k=a.length;0<b&&k>b&&(k=b);for(b=0;b<k;++b){var n=a[b].replace(m,"%20"),p=n.indexOf(c),r;0<=p?(r=n.substr(0,p),n=n.substr(p+1)):(r=n,n="");r=decodeURIComponent(r);n=decodeURIComponent(n);Object.prototype.hasOwnProperty.call(f,r)?d(f[r])?f[r].push(n):f[r]=[f[r],n]:f[r]=n}return f};
var d=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],29:[function(a,b,c){function d(a,b){if(a.map)return a.map(b);for(var c=[],g=0;g<a.length;g++)c.push(b(a[g],g));return c}var e=function(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,n){b=b||"&";c=c||"=";null===a&&(a=void 0);return"object"===typeof a?d(l(a),function(n){var l=encodeURIComponent(e(n))+
c;return g(a[n])?d(a[n],function(a){return l+encodeURIComponent(e(a))}).join(b):l+encodeURIComponent(e(a[n]))}).join(b):!n?"":encodeURIComponent(e(n))+c+encodeURIComponent(e(a))};var g=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},l=Object.keys||function(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],30:[function(a,b,c){c.decode=c.parse=a("./decode");c.encode=c.stringify=a("./encode")},{"./decode":28,"./encode":29}],
31:[function(a,b,c){b.exports=function(a,b,c){var l=a.length;if(!(b>=l||0===c)){c=b+c>l?l-b:c;for(l-=c;b<l;++b)a[b]=a[b+c];a.length=l}}},{}],32:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(b,c){for(var f=0;f<c.length;f++){var k=
c[f];k.enumerable=k.enumerable||!1;k.configurable=!0;"value"in k&&(k.writable=!0);Object.defineProperty(b,k.key,k)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}();b=a("mini-signals");var l=d(b);b=a("parse-uri");var k=d(b),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("./async"));a=a("./Resource");var m=d(a),n=/(#[\w-]+)?$/;a=function(){function a(){var b=this,c=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:"",k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.baseUrl=c;this.progress=0;this.loading=!1;this.defaultQueryString="";this._beforeMiddleware=[];this._afterMiddleware=[];this._resourcesParsing=[];this._boundLoadResource=function(a,c){return b._loadResource(a,c)};this._queue=f.queue(this._boundLoadResource,k);this._queue.pause();this.resources={};this.onProgress=new l.default;
this.onError=new l.default;this.onLoad=new l.default;this.onStart=new l.default;this.onComplete=new l.default}a.prototype.add=function(a,b,c,f){if(Array.isArray(a)){for(b=0;b<a.length;++b)this.add(a[b]);return this}if("object"===("undefined"===typeof a?"undefined":e(a)))f=b||a.callback||a.onComplete,c=a,b=a.url,a=a.name||a.key||a.url;"string"!==typeof b&&(f=c,c=b,b=a);if("string"!==typeof b)throw Error("No url passed to add resource to loader.");"function"===typeof c&&(f=c,c=null);if(this.loading&&
(!c||!c.parentResource))throw Error("Cannot add resources while the loader is running.");if(this.resources[a])throw Error('Resource named "'+a+'" already exists.');b=this._prepareUrl(b);this.resources[a]=new m.default(a,b,c);if("function"===typeof f)this.resources[a].onAfterMiddleware.once(f);if(this.loading){c=c.parentResource;b=[];for(f=0;f<c.children.length;++f)c.children[f].isComplete||b.push(c.children[f]);f=c.progressChunk*(b.length+1)/(b.length+2);c.children.push(this.resources[a]);c.progressChunk=
f;for(c=0;c<b.length;++c)b[c].progressChunk=f;this.resources[a].progressChunk=f}this._queue.push(this.resources[a]);return this};a.prototype.pre=function(a){this._beforeMiddleware.push(a);return this};a.prototype.use=function(a){this._afterMiddleware.push(a);return this};a.prototype.reset=function(){this.progress=0;this.loading=!1;this._queue.kill();this._queue.pause();for(var a in this.resources){var b=this.resources[a];b._onLoadBinding&&b._onLoadBinding.detach();b.isLoading&&b.abort()}this.resources=
{};return this};a.prototype.load=function(a){if("function"===typeof a)this.onComplete.once(a);if(this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{a=100/this._queue._tasks.length;for(var b=0;b<this._queue._tasks.length;++b)this._queue._tasks[b].data.progressChunk=a;this._onStart();this._queue.resume()}return this};a.prototype._prepareUrl=function(a){var b=(0,k.default)(a,{strictMode:!0}),c=void 0,c=b.protocol||!b.path||0===a.indexOf("//")?a:this.baseUrl.length&&
this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a;this.defaultQueryString&&(a=n.exec(c)[0],c=c.substr(0,c.length-a.length),c=-1!==c.indexOf("?")?c+("&"+this.defaultQueryString):c+("?"+this.defaultQueryString),c+=a);return c};a.prototype._loadResource=function(a,b){var c=this;a._dequeue=b;f.eachSeries(this._beforeMiddleware,function(b,f){b.call(c,a,function(){f(a.isComplete?{}:null)})},function(){a.isComplete?c._onLoad(a):(a._onLoadBinding=a.onComplete.once(c._onLoad,
c),a.load())},!0)};a.prototype._onStart=function(){this.progress=0;this.loading=!0;this.onStart.dispatch(this)};a.prototype._onComplete=function(){this.progress=100;this.loading=!1;this.onComplete.dispatch(this,this.resources)};a.prototype._onLoad=function(a){var b=this;a._onLoadBinding=null;this._resourcesParsing.push(a);a._dequeue();f.eachSeries(this._afterMiddleware,function(c,f){c.call(b,a,f)},function(){a.onAfterMiddleware.dispatch(a);b.progress+=a.progressChunk;b.onProgress.dispatch(b,a);a.error?
b.onError.dispatch(a.error,b,a):b.onLoad.dispatch(b,a);b._resourcesParsing.splice(b._resourcesParsing.indexOf(a),1);b._queue.idle()&&0===b._resourcesParsing.length&&b._onComplete()},!0)};g(a,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(a){this._queue.concurrency=a}}]);return a}();c.default=a},{"./Resource":33,"./async":34,"mini-signals":5,"parse-uri":7}],33:[function(a,b,c){function d(){}function e(a,b,c){b&&0===b.indexOf(".")&&(b=b.substring(1));b&&(a[b]=c)}function g(a){return a.toString().replace("object ",
"")}c.__esModule=!0;var l=function(){function a(b,c){for(var f=0;f<c.length;f++){var k=c[f];k.enumerable=k.enumerable||!1;k.configurable=!0;"value"in k&&(k.writable=!0);Object.defineProperty(b,k.key,k)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}(),k=(b=a("parse-uri"))&&b.__esModule?b:{"default":b},f=(a=a("mini-signals"))&&a.__esModule?a:{"default":a},m=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),n=null;a=function(){function a(b,c,k){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
if("string"!==typeof b||"string"!==typeof c)throw Error("Both name and url are required for constructing a resource.");k=k||{};this._flags=0;this._setFlag(a.STATUS_FLAGS.DATA_URL,0===c.indexOf("data:"));this.name=b;this.url=c;this.extension=this._getExtension();this.data=null;this.crossOrigin=!0===k.crossOrigin?"anonymous":k.crossOrigin;this.loadType=k.loadType||this._determineLoadType();this.xhrType=k.xhrType;this.metadata=k.metadata||{};this.xhr=this.error=null;this.children=[];this.type=a.TYPE.UNKNOWN;
this.progressChunk=0;this._dequeue=d;this._onLoadBinding=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this);this.onStart=new f.default;this.onProgress=new f.default;this.onComplete=new f.default;this.onAfterMiddleware=
new f.default}a.setExtensionLoadType=function(b,c){e(a._loadTypeMap,b,c)};a.setExtensionXhrType=function(b,c){e(a._xhrTypeMap,b,c)};a.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1));this.xhr&&(this.xhr.removeEventListener?
(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null));if(this.isComplete)throw Error("Complete called again for an already completed resource.");this._setFlag(a.STATUS_FLAGS.COMPLETE,!0);this._setFlag(a.STATUS_FLAGS.LOADING,
!1);this.onComplete.dispatch(this)};a.prototype.abort=function(b){if(!this.error){this.error=Error(b);if(this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=a.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}};a.prototype.load=function(b){var c=this;if(!this.isLoading)if(this.isComplete)b&&setTimeout(function(){return b(c)},1);else{if(b)this.onComplete.once(b);this._setFlag(a.STATUS_FLAGS.LOADING,
!0);this.onStart.dispatch(this);if(!1===this.crossOrigin||"string"!==typeof this.crossOrigin)this.crossOrigin=this._determineCrossOrigin(this.url);switch(this.loadType){case a.LOAD_TYPE.IMAGE:this.type=a.TYPE.IMAGE;this._loadElement("image");break;case a.LOAD_TYPE.AUDIO:this.type=a.TYPE.AUDIO;this._loadSourceElement("audio");break;case a.LOAD_TYPE.VIDEO:this.type=a.TYPE.VIDEO;this._loadSourceElement("video");break;default:m&&this.crossOrigin?this._loadXdr():this._loadXhr()}}};a.prototype._hasFlag=
function(a){return!!(this._flags&a)};a.prototype._setFlag=function(a,b){this._flags=b?this._flags|a:this._flags&~a};a.prototype._loadElement=function(a){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===a&&"undefined"!==typeof window.Image?new Image:document.createElement(a);this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin);this.metadata.skipSource||(this.data.src=this.url);this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,
!1);this.data.addEventListener("progress",this._boundOnProgress,!1)};a.prototype._loadSourceElement=function(a){this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===a&&"undefined"!==typeof window.Audio?new Audio:document.createElement(a);if(null===this.data)this.abort("Unsupported element: "+a);else{if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var b=this.metadata.mimeType,c=0;c<
this.url.length;++c)this.data.appendChild(this._createSource(a,this.url[c],Array.isArray(b)?b[c]:b));else b=this.metadata.mimeType,this.data.appendChild(this._createSource(a,this.url,Array.isArray(b)?b[0]:b));this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1);this.data.addEventListener("canplaythrough",this._boundComplete,!1);this.data.load()}};a.prototype._loadXhr=function(){"string"!==
typeof this.xhrType&&(this.xhrType=this._determineXhrType());var b=this.xhr=new XMLHttpRequest;b.open("GET",this.url,!0);b.responseType=this.xhrType===a.XHR_RESPONSE_TYPE.JSON||this.xhrType===a.XHR_RESPONSE_TYPE.DOCUMENT?a.XHR_RESPONSE_TYPE.TEXT:this.xhrType;b.addEventListener("error",this._boundXhrOnError,!1);b.addEventListener("abort",this._boundXhrOnAbort,!1);b.addEventListener("progress",this._boundOnProgress,!1);b.addEventListener("load",this._boundXhrOnLoad,!1);b.send()};a.prototype._loadXdr=
function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XDomainRequest;a.timeout=5E3;a.onerror=this._boundXhrOnError;a.ontimeout=this._boundXdrOnTimeout;a.onprogress=this._boundOnProgress;a.onload=this._boundXhrOnLoad;a.open("GET",this.url,!0);setTimeout(function(){return a.send()},1)};a.prototype._createSource=function(a,b,c){c||(c=a+"/"+this._getExtension(b));a=document.createElement("source");a.src=b;a.type=c;return a};a.prototype._onError=function(a){this.abort("Failed to load element using: "+
a.target.nodeName)};a.prototype._onProgress=function(a){a&&a.lengthComputable&&this.onProgress.dispatch(this,a.loaded/a.total)};a.prototype._xhrOnError=function(){var a=this.xhr;this.abort(g(a)+" Request failed. Status: "+a.status+', text: "'+a.statusText+'"')};a.prototype._xhrOnAbort=function(){this.abort(g(this.xhr)+" Request was aborted by the user.")};a.prototype._xdrOnTimeout=function(){this.abort(g(this.xhr)+" Request timed out.")};a.prototype._xhrOnLoad=function(){var b=this.xhr,c="",f="undefined"===
typeof b.status?200:b.status;if(""===b.responseType||"text"===b.responseType||"undefined"===typeof b.responseType)c=b.responseText;0===f&&(0<c.length||b.responseType===a.XHR_RESPONSE_TYPE.BUFFER)?f=200:1223===f&&(f=204);if(2===(f/100|0)){if(this.xhrType===a.XHR_RESPONSE_TYPE.TEXT)this.data=c,this.type=a.TYPE.TEXT;else if(this.xhrType===a.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(c),this.type=a.TYPE.JSON}catch(k){this.abort("Error trying to parse loaded json: "+k);return}else if(this.xhrType===
a.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser)this.data=(new DOMParser).parseFromString(c,"text/xml");else{var m=document.createElement("div");m.innerHTML=c;this.data=m}this.type=a.TYPE.XML}catch(g){this.abort("Error trying to parse loaded xml: "+g);return}else this.data=b.response||c;this.complete()}else this.abort("["+b.status+"] "+b.statusText+": "+b.responseURL)};a.prototype._determineCrossOrigin=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location;n||(n=document.createElement("a"));
n.href=a;a=(0,k.default)(n.href,{strictMode:!0});var c=!a.port&&""===b.port||a.port===b.port,f=a.protocol?a.protocol+":":"";return a.host!==b.hostname||!c||f!==b.protocol?"anonymous":""};a.prototype._determineXhrType=function(){return a._xhrTypeMap[this.extension]||a.XHR_RESPONSE_TYPE.TEXT};a.prototype._determineLoadType=function(){return a._loadTypeMap[this.extension]||a.LOAD_TYPE.XHR};a.prototype._getExtension=function(){var a=this.url,b="";if(this.isDataUrl)b=a.indexOf("/"),b=a.substring(b+1,a.indexOf(";",
b));else var b=a.indexOf("?"),c=a.indexOf("#"),b=Math.min(-1<b?b:a.length,-1<c?c:a.length),a=a.substring(0,b),b=a.substring(a.lastIndexOf(".")+1);return b.toLowerCase()};a.prototype._getMimeFromXhrType=function(b){switch(b){case a.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case a.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case a.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case a.XHR_RESPONSE_TYPE.JSON:return"application/json";default:return"text/plain"}};l(a,[{key:"isDataUrl",
get:function(){return this._hasFlag(a.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(a.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(a.STATUS_FLAGS.LOADING)}}]);return a}();c.default=a;a.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4};a.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};a.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};a.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",
JSON:"json",TEXT:"text"};a._loadTypeMap={gif:a.LOAD_TYPE.IMAGE,png:a.LOAD_TYPE.IMAGE,bmp:a.LOAD_TYPE.IMAGE,jpg:a.LOAD_TYPE.IMAGE,jpeg:a.LOAD_TYPE.IMAGE,tif:a.LOAD_TYPE.IMAGE,tiff:a.LOAD_TYPE.IMAGE,webp:a.LOAD_TYPE.IMAGE,tga:a.LOAD_TYPE.IMAGE,svg:a.LOAD_TYPE.IMAGE,"svg+xml":a.LOAD_TYPE.IMAGE,mp3:a.LOAD_TYPE.AUDIO,ogg:a.LOAD_TYPE.AUDIO,wav:a.LOAD_TYPE.AUDIO,mp4:a.LOAD_TYPE.VIDEO,webm:a.LOAD_TYPE.VIDEO};a._xhrTypeMap={xhtml:a.XHR_RESPONSE_TYPE.DOCUMENT,html:a.XHR_RESPONSE_TYPE.DOCUMENT,htm:a.XHR_RESPONSE_TYPE.DOCUMENT,
xml:a.XHR_RESPONSE_TYPE.DOCUMENT,tmx:a.XHR_RESPONSE_TYPE.DOCUMENT,svg:a.XHR_RESPONSE_TYPE.DOCUMENT,tsx:a.XHR_RESPONSE_TYPE.DOCUMENT,gif:a.XHR_RESPONSE_TYPE.BLOB,png:a.XHR_RESPONSE_TYPE.BLOB,bmp:a.XHR_RESPONSE_TYPE.BLOB,jpg:a.XHR_RESPONSE_TYPE.BLOB,jpeg:a.XHR_RESPONSE_TYPE.BLOB,tif:a.XHR_RESPONSE_TYPE.BLOB,tiff:a.XHR_RESPONSE_TYPE.BLOB,webp:a.XHR_RESPONSE_TYPE.BLOB,tga:a.XHR_RESPONSE_TYPE.BLOB,json:a.XHR_RESPONSE_TYPE.JSON,text:a.XHR_RESPONSE_TYPE.TEXT,txt:a.XHR_RESPONSE_TYPE.TEXT,ttf:a.XHR_RESPONSE_TYPE.BUFFER,
otf:a.XHR_RESPONSE_TYPE.BUFFER};a.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":5,"parse-uri":7}],34:[function(a,b,c){function d(){}function e(a){return function(){if(null===a)throw Error("Callback was already called.");var b=a;a=null;b.apply(this,arguments)}}c.__esModule=!0;c.eachSeries=function(a,b,c,f){var m=0,d=a.length;(function r(e){e||m===d?c&&c(e):f?setTimeout(function(){b(a[m++],r)},1):b(a[m++],r)})()};c.queue=function(a,b){function c(a,
b,f){if(null!=f&&"function"!==typeof f)throw Error("task callback must be a function");n.started=!0;null==a&&n.idle()?setTimeout(function(){return n.drain()},1):(a={data:a,callback:"function"===typeof f?f:d},b?n._tasks.unshift(a):n._tasks.push(a),setTimeout(function(){return n.process()},1))}function f(a){return function(){m-=1;a.callback.apply(a,arguments);null!=arguments[0]&&n.error(arguments[0],a.data);m<=n.concurrency-n.buffer&&n.unsaturated();n.idle()&&n.drain();n.process()}}if(null==b)b=1;else if(0===
b)throw Error("Concurrency must not be zero");var m=0,n={_tasks:[],concurrency:b,saturated:d,unsaturated:d,buffer:b/4,empty:d,drain:d,error:d,started:!1,paused:!1,push:function(a,b){c(a,!1,b)},kill:function(){m=0;n.drain=d;n.started=!1;n._tasks=[]},unshift:function(a,b){c(a,!0,b)},process:function(){for(;!n.paused&&m<n.concurrency&&n._tasks.length;){var b=n._tasks.shift();0===n._tasks.length&&n.empty();m+=1;m===n.concurrency&&n.saturated();a(b.data,e(f(b)))}},length:function(){return n._tasks.length},
running:function(){return m},idle:function(){return 0===n._tasks.length+m},pause:function(){!0!==n.paused&&(n.paused=!0)},resume:function(){if(!1!==n.paused){n.paused=!1;for(var a=1;a<=n.concurrency;a++)n.process()}}};return n}},{}],35:[function(a,b,c){c.__esModule=!0;c.encodeBinary=function(a){for(var b="",c=0;c<a.length;){for(var k=[0,0,0],f=[0,0,0,0],m=0;m<k.length;++m)k[m]=c<a.length?a.charCodeAt(c++)&255:0;f[0]=k[0]>>2;f[1]=(k[0]&3)<<4|k[1]>>4;f[2]=(k[1]&15)<<2|k[2]>>6;f[3]=k[2]&63;switch(c-
(a.length-1)){case 2:f[3]=64;f[2]=64;break;case 1:f[3]=64}for(k=0;k<f.length;++k)b+=d.charAt(f[k])}return b};var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],36:[function(a,b,c){c=a("./Loader").default;var d=a("./Resource").default,e=a("./async");a=a("./b64");c.Resource=d;c.async=e;c.base64=a;b.exports=c;b.exports.default=c},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(a,b,c){c.__esModule=!0;var d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?
function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};c.blobMiddlewareFactory=function(){return function(a,b){if(a.data&&a.xhr&&a.xhrType===e.default.XHR_RESPONSE_TYPE.BLOB)if(!window.Blob||"string"===typeof a.data){var c=a.xhr.getResponseHeader("content-type");if(c&&0===c.indexOf("image")){a.data=new Image;a.data.src="data:"+c+";base64,"+g.default.encodeBinary(a.xhr.responseText);a.type=e.default.TYPE.IMAGE;
a.data.onload=function(){a.data.onload=null;b()};return}}else if(0===a.data.type.indexOf("image")&&(c=function(){var c=l.createObjectURL(a.data);a.blob=a.data;a.data=new Image;a.data.src=c;a.type=e.default.TYPE.IMAGE;a.data.onload=function(){l.revokeObjectURL(c);a.data.onload=null;b()};return{v:void 0}}(),"object"===("undefined"===typeof c?"undefined":d(c))))return c.v;b()}};var e=(b=a("../../Resource"))&&b.__esModule?b:{"default":b},g=(a=a("../../b64"))&&a.__esModule?a:{"default":a},l=window.URL||
window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(a,b,c){function d(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function e(a,b,c){if(a&&l.isObject(a)&&a instanceof d)return a;var f=new d;f.parse(a,b,c);return f}var g=a("punycode"),l=a("./util");c.parse=e;c.resolve=function(a,b){return e(a,!1,!0).resolve(b)};c.resolveObject=function(a,b){return!a?b:e(a,!1,!0).resolveObject(b)};c.format=
function(a){l.isString(a)&&(a=e(a));return!(a instanceof d)?d.prototype.format.call(a):a.format()};c.Url=d;var k=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/;b="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var n=["'"].concat(b),p=["%","/","?",";","#"].concat(n),r=["/","?","#"],q=/^[+a-z0-9A-Z_-]{0,63}$/,t=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,s={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,
"ftp:":!0,"gopher:":!0,"file:":!0},u=a("querystring");d.prototype.parse=function(a,b,c){if(!l.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var f=a.indexOf("?"),f=-1!==f&&f<a.indexOf("#")?"?":"#";a=a.split(f);a[0]=a[0].replace(/\\/g,"/");a=a.join(f);f=a.trim();if(!c&&1===a.split("#").length&&(a=m.exec(f)))return this.href=this.path=f,this.pathname=a[1],a[2]?(this.search=a[2],this.query=b?u.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",
this.query={}),this;if(a=k.exec(f)){a=a[0];var d=a.toLowerCase();this.protocol=d;f=f.substr(a.length)}if(c||a||f.match(/^\/\/[^@\/]+@[^@\/]+/)){var e="//"===f.substr(0,2);if(e&&(!a||!v[a]))f=f.substr(2),this.slashes=!0}if(!v[a]&&(e||a&&!w[a])){e=-1;for(c=0;c<r.length;c++)if(a=f.indexOf(r[c]),-1!==a&&(-1===e||a<e))e=a;e=-1===e?f.lastIndexOf("@"):f.lastIndexOf("@",e);-1!==e&&(c=f.slice(0,e),f=f.slice(e+1),this.auth=decodeURIComponent(c));e=-1;for(c=0;c<p.length;c++)if(a=f.indexOf(p[c]),-1!==a&&(-1===
e||a<e))e=a;-1===e&&(e=f.length);this.host=f.slice(0,e);f=f.slice(e);this.parseHost();this.hostname=this.hostname||"";e="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!e){var D=this.hostname.split(/\./);c=0;for(a=D.length;c<a;c++){var E=D[c];if(E&&!E.match(q)){for(var H="",I=0,Q=E.length;I<Q;I++)H=127<E.charCodeAt(I)?H+"x":H+E[I];if(!H.match(q)){a=D.slice(0,c);c=D.slice(c+1);if(E=E.match(t))a.push(E[1]),c.unshift(E[2]);c.length&&(f="/"+c.join(".")+f);this.hostname=a.join(".");
break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();e||(this.hostname=g.toASCII(this.hostname));c=this.port?":"+this.port:"";this.host=(this.hostname||"")+c;this.href+=this.host;e&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==f[0]&&(f="/"+f))}if(!s[d]){c=0;for(a=n.length;c<a;c++)e=n[c],-1!==f.indexOf(e)&&(E=encodeURIComponent(e),E===e&&(E=escape(e)),f=f.split(e).join(E))}c=f.indexOf("#");-1!==c&&(this.hash=f.substr(c),f=f.slice(0,c));c=f.indexOf("?");
-1!==c?(this.search=f.substr(c),this.query=f.substr(c+1),b&&(this.query=u.parse(this.query)),f=f.slice(0,c)):b&&(this.search="",this.query={});f&&(this.pathname=f);w[d]&&(this.hostname&&!this.pathname)&&(this.pathname="/");if(this.pathname||this.search)c=this.pathname||"",this.path=c+(this.search||"");this.href=this.format();return this};d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",f=this.hash||
"",k=!1,m="";this.host?k=a+this.host:this.hostname&&(k=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(k+=":"+this.port));this.query&&(l.isObject(this.query)&&Object.keys(this.query).length)&&(m=u.stringify(this.query));a=this.search||m&&"?"+m||"";b&&":"!==b.substr(-1)&&(b+=":");this.slashes||(!b||w[b])&&!1!==k?(k="//"+(k||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):k||(k="");f&&"#"!==f.charAt(0)&&(f="#"+f);a&&"?"!==a.charAt(0)&&(a="?"+a);c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)});
a=a.replace("#","%23");return b+k+c+a+f};d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()};d.prototype.resolveObject=function(a){if(l.isString(a)){var b=new d;b.parse(a,!1,!0);a=b}for(var b=new d,c=Object.keys(this),f=0;f<c.length;f++){var k=c[f];b[k]=this[k]}b.hash=a.hash;if(""===a.href)return b.href=b.format(),b;if(a.slashes&&!a.protocol){c=Object.keys(a);for(f=0;f<c.length;f++)k=c[f],"protocol"!==k&&(b[k]=a[k]);w[b.protocol]&&(b.hostname&&!b.pathname)&&(b.path=b.pathname=
"/");b.href=b.format();return b}if(a.protocol&&a.protocol!==b.protocol){if(!w[a.protocol]){c=Object.keys(a);for(f=0;f<c.length;f++)k=c[f],b[k]=a[k];b.href=b.format();return b}b.protocol=a.protocol;if(!a.host&&!v[a.protocol]){for(var m=(a.pathname||"").split("/");m.length&&!(a.host=m.shift()););a.host||(a.host="");a.hostname||(a.hostname="");""!==m[0]&&m.unshift("");2>m.length&&m.unshift("");b.pathname=m.join("/")}else b.pathname=a.pathname;b.search=a.search;b.query=a.query;b.host=a.host||"";b.auth=
a.auth;b.hostname=a.hostname||a.host;b.port=a.port;if(b.pathname||b.search)b.path=(b.pathname||"")+(b.search||"");b.slashes=b.slashes||a.slashes;b.href=b.format();return b}var c=b.pathname&&"/"===b.pathname.charAt(0),g=a.host||a.pathname&&"/"===a.pathname.charAt(0),n=c=g||c||b.host&&a.pathname,f=b.pathname&&b.pathname.split("/")||[],m=a.pathname&&a.pathname.split("/")||[];if(k=b.protocol&&!w[b.protocol])b.hostname="",b.port=null,b.host&&(""===f[0]?f[0]=b.host:f.unshift(b.host)),b.host="",a.protocol&&
(a.hostname=null,a.port=null,a.host&&(""===m[0]?m[0]=a.host:m.unshift(a.host)),a.host=null),c=c&&(""===m[0]||""===f[0]);if(g)b.host=a.host||""===a.host?a.host:b.host,b.hostname=a.hostname||""===a.hostname?a.hostname:b.hostname,b.search=a.search,b.query=a.query,f=m;else if(m.length)f||(f=[]),f.pop(),f=f.concat(m),b.search=a.search,b.query=a.query;else if(!l.isNullOrUndefined(a.search)){if(k&&(b.hostname=b.host=f.shift(),k=b.host&&0<b.host.indexOf("@")?b.host.split("@"):!1))b.auth=k.shift(),b.host=
b.hostname=k.shift();b.search=a.search;b.query=a.query;if(!l.isNull(b.pathname)||!l.isNull(b.search))b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"");b.href=b.format();return b}if(!f.length)return b.pathname=null,b.path=b.search?"/"+b.search:null,b.href=b.format(),b;for(var g=f.slice(-1)[0],m=(b.host||a.host||1<f.length)&&("."===g||".."===g)||""===g,e=0,p=f.length;0<=p;p--)g=f[p],"."===g?f.splice(p,1):".."===g?(f.splice(p,1),e++):e&&(f.splice(p,1),e--);if(!c&&!n)for(;e--;e)f.unshift("..");
c&&(""!==f[0]&&(!f[0]||"/"!==f[0].charAt(0)))&&f.unshift("");m&&"/"!==f.join("/").substr(-1)&&f.push("");n=""===f[0]||f[0]&&"/"===f[0].charAt(0);if(k&&(b.hostname=b.host=n?"":f.length?f.shift():"",k=b.host&&0<b.host.indexOf("@")?b.host.split("@"):!1))b.auth=k.shift(),b.host=b.hostname=k.shift();(c=c||b.host&&f.length)&&!n&&f.unshift("");f.length?b.pathname=f.join("/"):(b.pathname=null,b.path=null);if(!l.isNull(b.pathname)||!l.isNull(b.search))b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"");
b.auth=a.auth||b.auth;b.slashes=b.slashes||a.slashes;b.href=b.format();return b};d.prototype.parseHost=function(){var a=this.host,b=f.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length));a&&(this.hostname=a)}},{"./util":39,punycode:27,querystring:30}],39:[function(a,b,c){b.exports={isString:function(a){return"string"===typeof a},isObject:function(a){return"object"===typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},
{}],40:[function(a,b,c){c.__esModule=!0;var d=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../core")),e=(b=a("ismobilejs"))&&b.__esModule?b:{"default":b};a=a("./accessibleTarget");d.utils.mixins.delayMixin(d.DisplayObject.prototype,(a&&a.__esModule?a:{"default":a}).default);var g=100,l=0,k=0,f=2;a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
(e.default.tablet||e.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var c=document.createElement("div");c.style.width=g+"px";c.style.height=g+"px";c.style.position="absolute";c.style.top=l+"px";c.style.left=k+"px";c.style.zIndex=f;this.div=c;this.pool=[];this.renderId=0;this.debug=!1;this.renderer=b;this.children=[];this._onKeyDown=this._onKeyDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);this.isMobileAccessabillity=this.isActive=!1;window.addEventListener("keydown",
this._onKeyDown,!1)}a.prototype.createTouchHook=function(){var a=this,b=document.createElement("button");b.style.width="1px";b.style.height="1px";b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.style.zIndex=2;b.style.backgroundColor="#FF0000";b.title="HOOK DIV";b.addEventListener("focus",function(){a.isMobileAccessabillity=!0;a.activate();document.body.removeChild(b)});document.body.appendChild(b)};a.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",
this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))};a.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))};
a.prototype.updateAccessibleObjects=function(a){if(a.visible){a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId);a=a.children;for(var b=a.length-1;0<=b;b--)this.updateAccessibleObjects(a[b])}};a.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var a=this.renderer.view.getBoundingClientRect(),b=a.width/this.renderer.width,c=a.height/this.renderer.height,f=this.div;f.style.left=
a.left+"px";f.style.top=a.top+"px";f.style.width=this.renderer.width+"px";f.style.height=this.renderer.height+"px";for(a=0;a<this.children.length;a++){var k=this.children[a];if(k.renderId!==this.renderId)k._accessibleActive=!1,d.utils.removeItems(this.children,a,1),this.div.removeChild(k._accessibleDiv),this.pool.push(k._accessibleDiv),k._accessibleDiv=null,a--,0===this.children.length&&this.deactivate();else{var f=k._accessibleDiv,m=k.hitArea,g=k.worldTransform;k.hitArea?(f.style.left=(g.tx+m.x*
g.a)*b+"px",f.style.top=(g.ty+m.y*g.d)*c+"px",f.style.width=m.width*g.a*b+"px",f.style.height=m.height*g.d*c+"px"):(m=k.getBounds(),this.capHitArea(m),f.style.left=m.x*b+"px",f.style.top=m.y*c+"px",f.style.width=m.width*b+"px",f.style.height=m.height*c+"px")}}this.renderId++}};a.prototype.capHitArea=function(a){0>a.x&&(a.width+=a.x,a.x=0);0>a.y&&(a.height+=a.y,a.y=0);a.x+a.width>this.renderer.width&&(a.width=this.renderer.width-a.x);a.y+a.height>this.renderer.height&&(a.height=this.renderer.height-
a.y)};a.prototype.addChild=function(a){var b=this.pool.pop();b||(b=document.createElement("button"),b.style.width=g+"px",b.style.height=g+"px",b.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",b.style.position="absolute",b.style.zIndex=f,b.style.borderStyle="none",b.addEventListener("click",this._onClick.bind(this)),b.addEventListener("focus",this._onFocus.bind(this)),b.addEventListener("focusout",this._onFocusOut.bind(this)));a.accessibleTitle?b.title=a.accessibleTitle:!a.accessibleTitle&&
!a.accessibleHint&&(b.title="displayObject "+this.tabIndex);a.accessibleHint&&b.setAttribute("aria-label",a.accessibleHint);a._accessibleActive=!0;a._accessibleDiv=b;b.displayObject=a;this.children.push(a);this.div.appendChild(a._accessibleDiv);a._accessibleDiv.tabIndex=a.tabIndex};a.prototype._onClick=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"click",b.eventData)};a.prototype._onFocus=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,
"mouseover",b.eventData)};a.prototype._onFocusOut=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"mouseout",b.eventData)};a.prototype._onKeyDown=function(a){9===a.keyCode&&this.activate()};a.prototype._onMouseMove=function(){this.deactivate()};a.prototype.destroy=function(){this.div=null;for(var a=0;a<this.children.length;a++)this.children[a].div=null;window.document.removeEventListener("mousemove",this._onMouseMove);window.removeEventListener("keydown",
this._onKeyDown);this.renderer=this.children=this.pool=null};return a}();c.default=a;d.WebGLRenderer.registerPlugin("accessibility",a);d.CanvasRenderer.registerPlugin("accessibility",a)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(a,b,c){c.__esModule=!0;c.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(a,b,c){c.__esModule=!0;var d=a("./accessibleTarget");Object.defineProperty(c,"accessibleTarget",
{enumerable:!0,get:function(){return(d&&d.__esModule?d:{"default":d}).default}});var e=a("./AccessibilityManager");Object.defineProperty(c,"AccessibilityManager",{enumerable:!0,get:function(){return(e&&e.__esModule?e:{"default":e}).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(a,b,c){c.__esModule=!0;var d=function(){function a(b,c){for(var f=0;f<c.length;f++){var k=c[f];k.enumerable=k.enumerable||!1;k.configurable=!0;"value"in k&&(k.writable=!0);Object.defineProperty(b,
k.key,k)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}(),e=a("./autoDetectRenderer"),g=(b=a("./display/Container"))&&b.__esModule?b:{"default":b},l=a("./ticker"),k=(b=a("./settings"))&&b.__esModule?b:{"default":b},f=a("./const");a=function(){function a(b,c,f,d,t){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");"number"===typeof b&&(b=Object.assign({width:b,height:c||k.default.RENDER_OPTIONS.height,forceCanvas:!!d,sharedTicker:!!t},f));this._options=
b=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},b);this.renderer=(0,e.autoDetectRenderer)(b);this.stage=new g.default;this._ticker=null;this.ticker=b.sharedTicker?l.shared:new l.Ticker;b.autoStart&&this.start()}a.prototype.render=function(){this.renderer.render(this.stage)};a.prototype.stop=function(){this._ticker.stop()};a.prototype.start=function(){this._ticker.start()};a.prototype.destroy=function(a){if(this._ticker){var b=this._ticker;this.ticker=null;b.destroy()}this.stage.destroy();
this.stage=null;this.renderer.destroy(a);this._options=this.renderer=null};d(a,[{key:"ticker",set:function(a){this._ticker&&this._ticker.remove(this.render,this);(this._ticker=a)&&a.add(this.render,this,f.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]);return a}();c.default=a},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],
44:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(a instanceof Array){if("precision"!==a[0].substring(0,9)){var c=a.slice(0);c.unshift("precision "+b+" float;");return c}}else if("precision"!==a.trim().substring(0,
9))return"precision "+b+" float;\n"+a;return a}c.__esModule=!0;b=a("pixi-gl-core");var g=(a=a("./settings"))&&a.__esModule?a:{"default":a};a=function(a){function b(c,m,d,p,r){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c,e(m,r||g.default.PRECISION_VERTEX),e(d,r||g.default.PRECISION_FRAGMENT),void 0,p);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&("object"===typeof c||"function"===typeof c)?
c:this}d(b,a);return b}(b.GLShader);c.default=a},{"./settings":101,"pixi-gl-core":15}],45:[function(a,b,c){c.__esModule=!0;c.autoDetectRenderer=function(a,b,c,m){var n=a&&a.forceCanvas;void 0!==m&&(n=m);return!n&&d.isWebGLSupported()?new g.default(a,b,c):new e.default(a,b,c)};var d=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("./utils")),e=(b=a("./renderers/canvas/CanvasRenderer"))&&b.__esModule?
b:{"default":b},g=(a=a("./renderers/webgl/WebGLRenderer"))&&a.__esModule?a:{"default":a}},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(a,b,c){c.__esModule=!0;c.VERSION="4.7.3";c.PI_2=2*Math.PI;c.RAD_TO_DEG=180/Math.PI;c.DEG_TO_RAD=Math.PI/180;c.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2};c.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,
HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19};c.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};c.SCALE_MODES={LINEAR:0,NEAREST:1};c.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2};c.GC_MODES={AUTO:0,MANUAL:1};c.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i;c.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i;c.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;
c.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4};c.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"};c.TRANSFORM_MODE={STATIC:0,DYNAMIC:1};c.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1};c.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(a,b,c){c.__esModule=!0;var d=a("../math");a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity;this.rect=
null}a.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY};a.prototype.clear=function(){this.updateID++;this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};a.prototype.getRectangle=function(a){if(this.minX>this.maxX||this.minY>this.maxY)return d.Rectangle.EMPTY;a=a||new d.Rectangle(0,0,1,1);a.x=this.minX;a.y=this.minY;a.width=this.maxX-this.minX;a.height=this.maxY-this.minY;return a};a.prototype.addPoint=function(a){this.minX=Math.min(this.minX,a.x);this.maxX=Math.max(this.maxX,
a.x);this.minY=Math.min(this.minY,a.y);this.maxY=Math.max(this.maxY,a.y)};a.prototype.addQuad=function(a){var b=this.minX,c=this.minY,f=this.maxX,m=this.maxY,d=a[0],e=a[1],b=d<b?d:b,c=e<c?e:c,f=d>f?d:f,m=e>m?e:m,d=a[2],e=a[3],b=d<b?d:b,c=e<c?e:c,f=d>f?d:f,m=e>m?e:m,d=a[4],e=a[5],b=d<b?d:b,c=e<c?e:c,f=d>f?d:f,m=e>m?e:m,d=a[6],e=a[7];this.minX=d<b?d:b;this.minY=e<c?e:c;this.maxX=d>f?d:f;this.maxY=e>m?e:m};a.prototype.addFrame=function(a,b,c,f,m){var d=a.worldTransform;a=d.a;var e=d.b,r=d.c,q=d.d,t=
d.tx,d=d.ty,s=this.minX,v=this.minY,w=this.maxX,u=this.maxY,x=a*b+r*c+t,z=e*b+q*c+d,s=x<s?x:s,v=z<v?z:v,w=x>w?x:w,u=z>u?z:u,x=a*f+r*c+t,z=e*f+q*c+d,s=x<s?x:s,v=z<v?z:v,w=x>w?x:w,u=z>u?z:u,x=a*b+r*m+t,z=e*b+q*m+d,s=x<s?x:s,v=z<v?z:v,w=x>w?x:w,u=z>u?z:u,x=a*f+r*m+t,z=e*f+q*m+d;this.minX=x<s?x:s;this.minY=z<v?z:v;this.maxX=x>w?x:w;this.maxY=z>u?z:u};a.prototype.addVertices=function(a,b,c,f){var m=a.worldTransform;a=m.a;for(var d=m.b,e=m.c,r=m.d,q=m.tx,m=m.ty,t=this.minX,s=this.minY,v=this.maxX,w=this.maxY;c<
f;c+=2)var u=b[c],x=b[c+1],z=a*u+e*x+q,u=r*x+d*u+m,t=z<t?z:t,s=u<s?u:s,v=z>v?z:v,w=u>w?u:w;this.minX=t;this.minY=s;this.maxX=v;this.maxY=w};a.prototype.addBounds=function(a){var b=this.minX,c=this.minY,f=this.maxX,m=this.maxY;this.minX=a.minX<b?a.minX:b;this.minY=a.minY<c?a.minY:c;this.maxX=a.maxX>f?a.maxX:f;this.maxY=a.maxY>m?a.maxY:m};a.prototype.addBoundsMask=function(a,b){var c=a.minX>b.minX?a.minX:b.minX,f=a.minY>b.minY?a.minY:b.minY,m=a.maxX<b.maxX?a.maxX:b.maxX,d=a.maxY<b.maxY?a.maxY:b.maxY;
if(c<=m&&f<=d){var e=this.minX,r=this.minY,q=this.maxX,t=this.maxY;this.minX=c<e?c:e;this.minY=f<r?f:r;this.maxX=m>q?m:q;this.maxY=d>t?d:t}};a.prototype.addBoundsArea=function(a,b){var c=a.minX>b.x?a.minX:b.x,f=a.minY>b.y?a.minY:b.y,m=a.maxX<b.x+b.width?a.maxX:b.x+b.width,d=a.maxY<b.y+b.height?a.maxY:b.y+b.height;if(c<=m&&f<=d){var e=this.minX,r=this.minY,q=this.maxX,t=this.maxY;this.minX=c<e?c:e;this.minY=f<r?f:r;this.maxX=m>q?m:q;this.maxY=d>t?d:t}};return a}();c.default=a},{"../math":70}],48:[function(a,
b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var g=c[d];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(b,
g.key,g)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=a("../utils");a=a("./DisplayObject");a=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var c;c=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.children=[];return c}d(b,a);b.prototype.onChildrenChange=function(){};b.prototype.addChild=function(a){var b=
arguments.length;if(1<b)for(var c=0;c<b;c++)this.addChild(arguments[c]);else a.parent&&a.parent.removeChild(a),a.parent=this,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),a.emit("added",this);return a};b.prototype.addChildAt=function(a,b){if(0>b||b>this.children.length)throw Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length);a.parent&&a.parent.removeChild(a);a.parent=this;a.transform._parentID=-1;this.children.splice(b,
0,a);this._boundsID++;this.onChildrenChange(b);a.emit("added",this);return a};b.prototype.swapChildren=function(a,b){if(a!==b){var c=this.getChildIndex(a),k=this.getChildIndex(b);this.children[c]=b;this.children[k]=a;this.onChildrenChange(c<k?c:k)}};b.prototype.getChildIndex=function(a){a=this.children.indexOf(a);if(-1===a)throw Error("The supplied DisplayObject must be a child of the caller");return a};b.prototype.setChildIndex=function(a,b){if(0>b||b>=this.children.length)throw Error("The index "+
b+" supplied is out of bounds "+this.children.length);var c=this.getChildIndex(a);(0,g.removeItems)(this.children,c,1);this.children.splice(b,0,a);this.onChildrenChange(b)};b.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw Error("getChildAt: Index ("+a+") does not exist.");return this.children[a]};b.prototype.removeChild=function(a){var b=arguments.length;if(1<b)for(var c=0;c<b;c++)this.removeChild(arguments[c]);else{b=this.children.indexOf(a);if(-1===b)return null;a.parent=
null;a.transform._parentID=-1;(0,g.removeItems)(this.children,b,1);this._boundsID++;this.onChildrenChange(b);a.emit("removed",this)}return a};b.prototype.removeChildAt=function(a){var b=this.getChildAt(a);b.parent=null;b.transform._parentID=-1;(0,g.removeItems)(this.children,a,1);this._boundsID++;this.onChildrenChange(a);b.emit("removed",this);return b};b.prototype.removeChildren=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b=arguments[1],c="number"===typeof b?b:this.children.length,
k=c-a,b=void 0;if(0<k&&k<=c){b=this.children.splice(a,k);for(c=0;c<b.length;++c)b[c].parent=null,b[c].transform&&(b[c].transform._parentID=-1);this._boundsID++;this.onChildrenChange(a);for(a=0;a<b.length;++a)b[a].emit("removed",this);return b}if(0===k&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.");};b.prototype.updateTransform=function(){this._boundsID++;this.transform.updateTransform(this.parent.transform);this.worldAlpha=
this.alpha*this.parent.worldAlpha;for(var a=0,b=this.children.length;a<b;++a){var c=this.children[a];c.visible&&c.updateTransform()}};b.prototype.calculateBounds=function(){this._bounds.clear();this._calculateBounds();for(var a=0;a<this.children.length;a++){var b=this.children[a];b.visible&&b.renderable&&(b.calculateBounds(),b._mask?(b._mask.calculateBounds(),this._bounds.addBoundsMask(b._bounds,b._mask._bounds)):b.filterArea?this._bounds.addBoundsArea(b._bounds,b.filterArea):this._bounds.addBounds(b._bounds))}this._lastBoundsID=
this._boundsID};b.prototype._calculateBounds=function(){};b.prototype.renderWebGL=function(a){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(a);else{this._renderWebGL(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].renderWebGL(a)}};b.prototype.renderAdvancedWebGL=function(a){a.flush();var b=this._filters,c=this._mask;if(b){this._enabledFilters||(this._enabledFilters=[]);for(var k=this._enabledFilters.length=0;k<b.length;k++)b[k].enabled&&
this._enabledFilters.push(b[k]);this._enabledFilters.length&&a.filterManager.pushFilter(this,this._enabledFilters)}c&&a.maskManager.pushMask(this,this._mask);this._renderWebGL(a);for(var k=0,d=this.children.length;k<d;k++)this.children[k].renderWebGL(a);a.flush();c&&a.maskManager.popMask(this,this._mask);b&&(this._enabledFilters&&this._enabledFilters.length)&&a.filterManager.popFilter()};b.prototype._renderWebGL=function(a){};b.prototype._renderCanvas=function(a){};b.prototype.renderCanvas=function(a){if(this.visible&&
!(0>=this.worldAlpha)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask);this._renderCanvas(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}};b.prototype.destroy=function(b){a.prototype.destroy.call(this);var c="boolean"===typeof b?b:b&&b.children,k=this.removeChildren(0,this.children.length);if(c)for(c=0;c<k.length;++c)k[c].destroy(b)};e(b,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},
set:function(a){var b=this.getLocalBounds().width;this.scale.x=0!==b?a/b:1;this._width=a}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;this.scale.y=0!==b?a/b:1;this._height=a}}]);return b}((a&&a.__esModule?a:{"default":a}).default);c.default=a;a.prototype.containerUpdateTransform=a.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}
function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(b,c){for(var f=0;f<c.length;f++){var k=c[f];k.enumerable=k.enumerable||!1;k.configurable=!0;"value"in k&&(k.writable=!0);Object.defineProperty(b,
k.key,k)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}();b=a("eventemitter3");b=d(b);var l=a("../const"),k=a("../settings"),f=d(k),k=a("./TransformStatic"),m=d(k),k=a("./Transform"),n=d(k),k=a("./Bounds"),p=d(k),r=a("../math");a=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var c;c=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===
typeof c)?c:this;var k=f.default.TRANSFORM_MODE===l.TRANSFORM_MODE.STATIC?m.default:n.default;c.tempDisplayObjectParent=null;c.transform=new k;c.alpha=1;c.visible=!0;c.renderable=!0;c.parent=null;c.worldAlpha=1;c.filterArea=null;c._filters=null;c._enabledFilters=null;c._bounds=new p.default;c._boundsID=0;c._lastBoundsID=-1;c._boundsRect=null;c._localBoundsRect=null;c._mask=null;c._destroyed=!1;return c}e(b,a);b.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform);
this.worldAlpha=this.alpha*this.parent.worldAlpha;this._bounds.updateID++};b.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)};b.prototype.getBounds=function(a,b){a||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=
null));this._boundsID!==this._lastBoundsID&&this.calculateBounds();b||(this._boundsRect||(this._boundsRect=new r.Rectangle),b=this._boundsRect);return this._bounds.getRectangle(b)};b.prototype.getLocalBounds=function(a){var b=this.transform,c=this.parent;this.parent=null;this.transform=this._tempDisplayObjectParent.transform;a||(this._localBoundsRect||(this._localBoundsRect=new r.Rectangle),a=this._localBoundsRect);a=this.getBounds(!1,a);this.parent=c;this.transform=b;return a};b.prototype.toGlobal=
function(a,b){if(!(2<arguments.length&&void 0!==arguments[2])||!arguments[2])this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null);return this.worldTransform.apply(a,b)};b.prototype.toLocal=function(a,b,c,f){b&&(a=b.toGlobal(a,c,f));f||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),
this.parent=null));return this.worldTransform.applyInverse(a,c)};b.prototype.renderWebGL=function(a){};b.prototype.renderCanvas=function(a){};b.prototype.setParent=function(a){if(!a||!a.addChild)throw Error("setParent: Argument must be a Container");a.addChild(this);return a};b.prototype.setTransform=function(){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,f=4<arguments.length&&
void 0!==arguments[4]?arguments[4]:0,k=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,d=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,g=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,m=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;this.position.x=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.position.y=a;this.scale.x=!b?1:b;this.scale.y=!c?1:c;this.rotation=f;this.skew.x=k;this.skew.y=d;this.pivot.x=g;this.pivot.y=m;return this};b.prototype.destroy=
function(){this.removeAllListeners();this.parent&&this.parent.removeChild(this);this.filterArea=this._mask=this._currentBounds=this._bounds=this.parent=this.transform=null;this.interactiveChildren=this.interactive=!1;this._destroyed=!0};g(b,[{key:"_tempDisplayObjectParent",get:function(){null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new b);return this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(a){this.transform.position.x=a}},{key:"y",
get:function(){return this.position.y},set:function(a){this.transform.position.y=a}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(a){this.transform.position.copy(a)}},{key:"scale",get:function(){return this.transform.scale},set:function(a){this.transform.scale.copy(a)}},{key:"pivot",get:function(){return this.transform.pivot},
set:function(a){this.transform.pivot.copy(a)}},{key:"skew",get:function(){return this.transform.skew},set:function(a){this.transform.skew.copy(a)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(a){this.transform.rotation=a}},{key:"worldVisible",get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}},{key:"mask",get:function(){return this._mask},set:function(a){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1);if(this._mask=a)this._mask.renderable=
!1,this._mask.isMask=!0}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(a){this._filters=a&&a.slice()}}]);return b}(b.default);c.default=a;a.prototype.displayObjectUpdateTransform=a.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var g=c[d];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(b,g.key,g)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=a("../math");a=a("./TransformBase");a=function(a){function b(){if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");var c;c=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.position=new g.Point(0,0);c.scale=new g.Point(1,1);c.skew=new g.ObservablePoint(c.updateSkew,c,0,0);c.pivot=new g.Point(0,0);c._rotation=0;c._cx=1;c._sx=0;c._cy=0;c._sy=1;return c}d(b,a);b.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y);
this._sx=Math.sin(this._rotation+this.skew._y);this._cy=-Math.sin(this._rotation-this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x)};b.prototype.updateLocalTransform=function(){var a=this.localTransform;a.a=this._cx*this.scale.x;a.b=this._sx*this.scale.x;a.c=this._cy*this.scale.y;a.d=this._sy*this.scale.y;a.tx=this.position.x-(this.pivot.x*a.a+this.pivot.y*a.c);a.ty=this.position.y-(this.pivot.x*a.b+this.pivot.y*a.d)};b.prototype.updateTransform=function(a){var b=this.localTransform;b.a=
this._cx*this.scale.x;b.b=this._sx*this.scale.x;b.c=this._cy*this.scale.y;b.d=this._sy*this.scale.y;b.tx=this.position.x-(this.pivot.x*b.a+this.pivot.y*b.c);b.ty=this.position.y-(this.pivot.x*b.b+this.pivot.y*b.d);a=a.worldTransform;var c=this.worldTransform;c.a=b.a*a.a+b.b*a.c;c.b=b.a*a.b+b.b*a.d;c.c=b.c*a.a+b.d*a.c;c.d=b.c*a.b+b.d*a.d;c.tx=b.tx*a.a+b.ty*a.c+a.tx;c.ty=b.tx*a.b+b.ty*a.d+a.ty;this._worldID++};b.prototype.setFromMatrix=function(a){a.decompose(this)};e(b,[{key:"rotation",get:function(){return this._rotation},
set:function(a){this._rotation=a;this.updateSkew()}}]);return b}((a&&a.__esModule?a:{"default":a}).default);c.default=a},{"../math":70,"./TransformBase":51}],51:[function(a,b,c){c.__esModule=!0;var d=a("../math");a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.worldTransform=new d.Matrix;this.localTransform=new d.Matrix;this._parentID=this._worldID=0}a.prototype.updateLocalTransform=function(){};a.prototype.updateTransform=function(a){a=
a.worldTransform;var b=this.worldTransform,c=this.localTransform;b.a=c.a*a.a+c.b*a.c;b.b=c.a*a.b+c.b*a.d;b.c=c.c*a.a+c.d*a.c;b.d=c.c*a.b+c.d*a.d;b.tx=c.tx*a.a+c.ty*a.c+a.tx;b.ty=c.tx*a.b+c.ty*a.d+a.ty;this._worldID++};return a}();c.default=a;a.prototype.updateWorldTransform=a.prototype.updateTransform;a.IDENTITY=new a},{"../math":70}],52:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=
Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var g=c[d];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(b,g.key,g)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=a("../math");a=a("./TransformBase");a=function(a){function b(){if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");var c;c=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.position=new g.ObservablePoint(c.onChange,c,0,0);c.scale=new g.ObservablePoint(c.onChange,c,1,1);c.pivot=new g.ObservablePoint(c.onChange,c,0,0);c.skew=new g.ObservablePoint(c.updateSkew,c,0,0);c._rotation=0;c._cx=1;c._sx=0;c._cy=0;c._sy=1;c._localID=0;c._currentLocalID=
0;return c}d(b,a);b.prototype.onChange=function(){this._localID++};b.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y);this._sx=Math.sin(this._rotation+this.skew._y);this._cy=-Math.sin(this._rotation-this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x);this._localID++};b.prototype.updateLocalTransform=function(){var a=this.localTransform;this._localID!==this._currentLocalID&&(a.a=this._cx*this.scale._x,a.b=this._sx*this.scale._x,a.c=this._cy*this.scale._y,a.d=
this._sy*this.scale._y,a.tx=this.position._x-(this.pivot._x*a.a+this.pivot._y*a.c),a.ty=this.position._y-(this.pivot._x*a.b+this.pivot._y*a.d),this._currentLocalID=this._localID,this._parentID=-1)};b.prototype.updateTransform=function(a){var b=this.localTransform;this._localID!==this._currentLocalID&&(b.a=this._cx*this.scale._x,b.b=this._sx*this.scale._x,b.c=this._cy*this.scale._y,b.d=this._sy*this.scale._y,b.tx=this.position._x-(this.pivot._x*b.a+this.pivot._y*b.c),b.ty=this.position._y-(this.pivot._x*
b.b+this.pivot._y*b.d),this._currentLocalID=this._localID,this._parentID=-1);if(this._parentID!==a._worldID){var c=a.worldTransform,k=this.worldTransform;k.a=b.a*c.a+b.b*c.c;k.b=b.a*c.b+b.b*c.d;k.c=b.c*c.a+b.d*c.c;k.d=b.c*c.b+b.d*c.d;k.tx=b.tx*c.a+b.ty*c.c+c.tx;k.ty=b.tx*c.b+b.ty*c.d+c.ty;this._parentID=a._worldID;this._worldID++}};b.prototype.setFromMatrix=function(a){a.decompose(this);this._localID++};e(b,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a;this.updateSkew()}}]);
return b}((a&&a.__esModule?a:{"default":a}).default);c.default=a},{"../math":70,"./TransformBase":51}],53:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=
!0;b=a("../display/Container");b=d(b);var g=a("../textures/RenderTexture"),l=d(g),g=a("../textures/Texture"),k=d(g),g=a("./GraphicsData"),f=d(g),g=a("../sprites/Sprite"),m=d(g),n=a("../math"),p=a("../utils"),r=a("../const"),g=a("../display/Bounds"),q=d(g),g=a("./utils/bezierCurveTo"),t=d(g);a=a("../renderers/canvas/CanvasRenderer");var s=d(a),v=void 0,w=new n.Matrix,u=new n.Point,x=new Float32Array(4),z=new Float32Array(4);a=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:!1;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var f;f=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=f&&("object"===typeof f||"function"===typeof f)?f:this;f.fillAlpha=1;f.lineWidth=0;f.nativeLines=c;f.lineColor=0;f.graphicsData=[];f.tint=16777215;f._prevTint=16777215;f.blendMode=r.BLEND_MODES.NORMAL;f.currentPath=null;f._webGL={};f.isMask=!1;f.boundsPadding=0;f._localBounds=new q.default;
f.dirty=0;f.fastRectDirty=-1;f.clearDirty=0;f.boundsDirty=-1;f.cachedSpriteDirty=!1;f._spriteRect=null;f._fastRect=!1;return f}e(b,a);b.prototype.clone=function(){var a=new b;a.renderable=this.renderable;a.fillAlpha=this.fillAlpha;a.lineWidth=this.lineWidth;a.lineColor=this.lineColor;a.tint=this.tint;a.blendMode=this.blendMode;a.isMask=this.isMask;a.boundsPadding=this.boundsPadding;a.dirty=0;a.cachedSpriteDirty=this.cachedSpriteDirty;for(var c=0;c<this.graphicsData.length;++c)a.graphicsData.push(this.graphicsData[c].clone());
a.currentPath=a.graphicsData[a.graphicsData.length-1];a.updateLocalBounds();return a};b.prototype.lineStyle=function(){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;this.lineWidth=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.lineColor=a;this.lineAlpha=b;this.currentPath&&(this.currentPath.shape.points.length?(a=new n.Polygon(this.currentPath.shape.points.slice(-2)),a.closed=!1,this.drawShape(a)):(this.currentPath.lineWidth=
this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha));return this};b.prototype.moveTo=function(a,b){var c=new n.Polygon([a,b]);c.closed=!1;this.drawShape(c);return this};b.prototype.lineTo=function(a,b){this.currentPath.shape.points.push(a,b);this.dirty++;return this};b.prototype.quadraticCurveTo=function(a,b,c,f){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var k=this.currentPath.shape.points,
d=0,g=0;0===k.length&&this.moveTo(0,0);for(var m=k[k.length-2],e=k[k.length-1],l=1;20>=l;++l){var n=l/20,d=m+(a-m)*n,g=e+(b-e)*n;k.push(d+(a+(c-a)*n-d)*n,g+(b+(f-b)*n-g)*n)}this.dirty++;return this};b.prototype.bezierCurveTo=function(a,b,c,f,k,d){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var g=this.currentPath.shape.points,m=g[g.length-2],e=g[g.length-1];g.length-=2;(0,t.default)(m,e,a,b,c,f,k,d,g);this.dirty++;return this};b.prototype.arcTo=
function(a,b,c,f,k){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b);var d=this.currentPath.shape.points,g=d[d.length-1]-b,m=d[d.length-2]-a;f-=b;c-=a;var e=Math.abs(g*c-m*f);if(1E-8>e||0===k)(d[d.length-2]!==a||d[d.length-1]!==b)&&d.push(a,b);else{var l=g*g+m*m,n=f*f+c*c,p=g*f+m*c,d=k*Math.sqrt(l)/e,e=k*Math.sqrt(n)/e,l=d*p/l,q=e*p/n,n=d*c+e*m,p=d*f+e*g,r=c*(d+q),d=f*(d+q),e=Math.atan2(g*(e+l)-p,m*(e+l)-n),d=Math.atan2(d-p,r-n);this.arc(n+
a,p+b,k,e,d,m*f>c*g)}this.dirty++;return this};b.prototype.arc=function(a,b,c,f,k){var d=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1;if(f===k)return this;!d&&k<=f?k+=r.PI_2:d&&f<=k&&(f+=r.PI_2);var g=k-f,m=40*Math.ceil(Math.abs(g)/r.PI_2);if(0===g)return this;var e=a+Math.cos(f)*c,l=b+Math.sin(f)*c;(d=this.currentPath?this.currentPath.shape.points:null)?(d[d.length-2]!==e||d[d.length-1]!==l)&&d.push(e,l):(this.moveTo(e,l),d=this.currentPath.shape.points);for(var g=g/(2*m),e=2*g,l=Math.cos(g),
n=Math.sin(g),m=m-1,p=m%1/m,q=0;q<=m;++q){var t=g+f+e*(q+p*q),s=Math.cos(t),t=-Math.sin(t);d.push((l*s+n*t)*c+a,(l*-t+n*s)*c+b)}this.dirty++;return this};b.prototype.beginFill=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.filling=!0;this.fillColor=a;this.fillAlpha=b;this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=
this.fillAlpha);return this};b.prototype.endFill=function(){this.filling=!1;this.fillColor=null;this.fillAlpha=1;return this};b.prototype.drawRect=function(a,b,c,f){this.drawShape(new n.Rectangle(a,b,c,f));return this};b.prototype.drawRoundedRect=function(a,b,c,f,k){this.drawShape(new n.RoundedRectangle(a,b,c,f,k));return this};b.prototype.drawCircle=function(a,b,c){this.drawShape(new n.Circle(a,b,c));return this};b.prototype.drawEllipse=function(a,b,c,f){this.drawShape(new n.Ellipse(a,b,c,f));return this};
b.prototype.drawPolygon=function(a){var b=a,c=!0;b instanceof n.Polygon&&(c=b.closed,b=b.points);if(!Array.isArray(b))for(var b=Array(arguments.length),f=0;f<b.length;++f)b[f]=arguments[f];b=new n.Polygon(b);b.closed=c;this.drawShape(b);return this};b.prototype.drawStar=function(a,b,c,f,k){var d=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;k=k||f/2;for(var d=-1*Math.PI/2+d,g=2*c,m=r.PI_2/g,e=[],l=0;l<g;l++){var n=l%2?k:f,p=l*m+d;e.push(a+n*Math.cos(p),b+n*Math.sin(p))}return this.drawPolygon(e)};
b.prototype.clear=function(){if(this.lineWidth||this.filling||0<this.graphicsData.length)this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0;this._spriteRect=this.currentPath=null;return this};b.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===r.SHAPES.RECT&&!this.graphicsData[0].lineWidth};b.prototype._renderWebGL=function(a){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,
this._fastRect=this.isFastRect());this._fastRect?this._renderSpriteRect(a):(a.setObjectRenderer(a.plugins.graphics),a.plugins.graphics.render(this))};b.prototype._renderSpriteRect=function(a){var b=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new m.default(new k.default(k.default.WHITE)));var c=this._spriteRect;16777215===this.tint?c.tint=this.graphicsData[0].fillColor:((0,p.hex2rgb)(this.graphicsData[0].fillColor,x),(0,p.hex2rgb)(this.tint,z),x[0]*=z[0],x[1]*=z[1],x[2]*=z[2],c.tint=
(0,p.rgb2hex)(x));c.alpha=this.graphicsData[0].fillAlpha;c.worldAlpha=this.worldAlpha*c.alpha;c.blendMode=this.blendMode;c._texture._frame.width=b.width;c._texture._frame.height=b.height;c.transform.worldTransform=this.transform.worldTransform;c.anchor.set(-b.x/b.width,-b.y/b.height);c._onAnchorUpdate();c._renderWebGL(a)};b.prototype._renderCanvas=function(a){!0!==this.isMask&&a.plugins.graphics.render(this)};b.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=
this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var a=this._localBounds;this._bounds.addFrame(this.transform,a.minX,a.minY,a.maxX,a.maxY)};b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,u);for(var b=this.graphicsData,c=0;c<b.length;++c)if(a=b[c],a.fill&&a.shape&&a.shape.contains(u.x,u.y)){if(a.holes)for(b=0;b<a.holes.length;b++)if(a.holes[b].contains(u.x,u.y))return!1;return!0}return!1};b.prototype.updateLocalBounds=function(){var a=Infinity,b=-Infinity,c=
Infinity,f=-Infinity;if(this.graphicsData.length)for(var k=0,d=0,g=0,m=0,e=0,l=0;l<this.graphicsData.length;l++){var k=this.graphicsData[l],g=k.type,n=k.lineWidth,k=k.shape;if(g===r.SHAPES.RECT||g===r.SHAPES.RREC)d=k.x-n/2,g=k.y-n/2,m=k.width+n,e=k.height+n,a=d<a?d:a,b=d+m>b?d+m:b,c=g<c?g:c,f=g+e>f?g+e:f;else if(g===r.SHAPES.CIRC)d=k.x,g=k.y,m=k.radius+n/2,e=k.radius+n/2,a=d-m<a?d-m:a,b=d+m>b?d+m:b,c=g-e<c?g-e:c,f=g+e>f?g+e:f;else if(g===r.SHAPES.ELIP)d=k.x,g=k.y,m=k.width+n/2,e=k.height+n/2,a=d-
m<a?d-m:a,b=d+m>b?d+m:b,c=g-e<c?g-e:c,f=g+e>f?g+e:f;else for(var k=k.points,p=0,q=0,t=0,s=0,u=0,v=g=d=m=0;v+2<k.length;v+=2)d=k[v],g=k[v+1],p=k[v+2],q=k[v+3],t=Math.abs(p-d),s=Math.abs(q-g),e=n,m=Math.sqrt(t*t+s*s),1E-9>m||(u=(e/m*s+t)/2,m=(e/m*t+s)/2,d=(p+d)/2,g=(q+g)/2,a=d-u<a?d-u:a,b=d+u>b?d+u:b,c=g-m<c?g-m:c,f=g+m>f?g+m:f)}else f=c=b=a=0;l=this.boundsPadding;this._localBounds.minX=a-l;this._localBounds.maxX=b+l;this._localBounds.minY=c-l;this._localBounds.maxY=f+l};b.prototype.drawShape=function(a){this.currentPath&&
2>=this.currentPath.shape.points.length&&this.graphicsData.pop();this.currentPath=null;a=new f.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,a);this.graphicsData.push(a);a.type===r.SHAPES.POLY&&(a.shape.closed=a.shape.closed||this.filling,this.currentPath=a);this.dirty++;return a};b.prototype.generateCanvasTexture=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,c=this.getLocalBounds(),f=l.default.create(c.width,
c.height,a,b);v||(v=new s.default);this.transform.updateLocalTransform();this.transform.localTransform.copy(w);w.invert();w.tx-=c.x;w.ty-=c.y;v.render(this,f,!0,w);c=k.default.fromCanvas(f.baseTexture._canvasRenderTarget.canvas,a,"graphics");c.baseTexture.resolution=b;c.baseTexture.update();return c};b.prototype.closePath=function(){var a=this.currentPath;a&&a.shape&&a.shape.close();return this};b.prototype.addHole=function(){var a=this.graphicsData.pop();this.currentPath=this.graphicsData[this.graphicsData.length-
1];this.currentPath.addHole(a.shape);this.currentPath=null;return this};b.prototype.destroy=function(b){a.prototype.destroy.call(this,b);for(b=0;b<this.graphicsData.length;++b)this.graphicsData[b].destroy();for(var c in this._webgl)for(b=0;b<this._webgl[c].data.length;++b)this._webgl[c].data[b].destroy();this._spriteRect&&this._spriteRect.destroy();this._localBounds=this._webgl=this.currentPath=this.graphicsData=null};return b}(b.default);c.default=a;a._SPRITE_TEXTURE=null},{"../const":46,"../display/Bounds":47,
"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(a,b,c){c.__esModule=!0;a=function(){function a(b,c,l,k,f,m,n,p){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.lineWidth=b;this.nativeLines=n;this.lineColor=c;this.lineAlpha=l;this._lineTint=c;this.fillColor=k;this.fillAlpha=
f;this._fillTint=k;this.fill=m;this.holes=[];this.shape=p;this.type=p.type}a.prototype.clone=function(){return new a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)};a.prototype.addHole=function(a){this.holes.push(a)};a.prototype.destroy=function(){this.holes=this.shape=null};return a}();c.default=a},{}],55:[function(a,b,c){c.__esModule=!0;b=(b=a("../../renderers/canvas/CanvasRenderer"))&&b.__esModule?b:{"default":b};var d=a("../../const");
a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=b}a.prototype.render=function(a){var b=this.renderer,c=b.context,f=a.worldAlpha,m=a.transform.worldTransform,e=b.resolution;this._prevTint!==this.tint&&(this.dirty=!0);c.setTransform(m.a*e,m.b*e,m.c*e,m.d*e,m.tx*e,m.ty*e);a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1);b.setBlendMode(a.blendMode);for(b=0;b<a.graphicsData.length;b++){var m=a.graphicsData[b],p=m.shape,e=m._fillTint,
r=m._lineTint;c.lineWidth=m.lineWidth;if(m.type===d.SHAPES.POLY){c.beginPath();this.renderPolygon(p.points,p.closed,c);for(var q=0;q<m.holes.length;q++)this.renderPolygon(m.holes[q].points,!0,c);m.fill&&(c.globalAlpha=m.fillAlpha*f,c.fillStyle="#"+("00000"+(e|0).toString(16)).substr(-6),c.fill());m.lineWidth&&(c.globalAlpha=m.lineAlpha*f,c.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6),c.stroke())}else if(m.type===d.SHAPES.RECT){if(m.fillColor||0===m.fillColor)c.globalAlpha=m.fillAlpha*f,
c.fillStyle="#"+("00000"+(e|0).toString(16)).substr(-6),c.fillRect(p.x,p.y,p.width,p.height);m.lineWidth&&(c.globalAlpha=m.lineAlpha*f,c.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6),c.strokeRect(p.x,p.y,p.width,p.height))}else if(m.type===d.SHAPES.CIRC)c.beginPath(),c.arc(p.x,p.y,p.radius,0,2*Math.PI),c.closePath(),m.fill&&(c.globalAlpha=m.fillAlpha*f,c.fillStyle="#"+("00000"+(e|0).toString(16)).substr(-6),c.fill()),m.lineWidth&&(c.globalAlpha=m.lineAlpha*f,c.strokeStyle="#"+("00000"+(r|
0).toString(16)).substr(-6),c.stroke());else if(m.type===d.SHAPES.ELIP){var t=2*p.width,s=2*p.height,q=p.x-t/2,p=p.y-s/2;c.beginPath();var v=0.5522848*(t/2),w=0.5522848*(s/2),u=q+t,x=p+s,t=q+t/2,s=p+s/2;c.moveTo(q,s);c.bezierCurveTo(q,s-w,t-v,p,t,p);c.bezierCurveTo(t+v,p,u,s-w,u,s);c.bezierCurveTo(u,s+w,t+v,x,t,x);c.bezierCurveTo(t-v,x,q,s+w,q,s);c.closePath();m.fill&&(c.globalAlpha=m.fillAlpha*f,c.fillStyle="#"+("00000"+(e|0).toString(16)).substr(-6),c.fill());m.lineWidth&&(c.globalAlpha=m.lineAlpha*
f,c.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6),c.stroke())}else if(m.type===d.SHAPES.RREC){q=p.x;s=p.y;v=p.width;w=p.height;p=p.radius;u=Math.min(v,w)/2|0;p=p>u?u:p;c.beginPath();c.moveTo(q,s+p);c.lineTo(q,s+w-p);c.quadraticCurveTo(q,s+w,q+p,s+w);c.lineTo(q+v-p,s+w);c.quadraticCurveTo(q+v,s+w,q+v,s+w-p);c.lineTo(q+v,s+p);c.quadraticCurveTo(q+v,s,q+v-p,s);c.lineTo(q+p,s);c.quadraticCurveTo(q,s,q,s+p);c.closePath();if(m.fillColor||0===m.fillColor)c.globalAlpha=m.fillAlpha*f,c.fillStyle=
"#"+("00000"+(e|0).toString(16)).substr(-6),c.fill();m.lineWidth&&(c.globalAlpha=m.lineAlpha*f,c.strokeStyle="#"+("00000"+(r|0).toString(16)).substr(-6),c.stroke())}}};a.prototype.updateGraphicsTint=function(a){a._prevTint=a.tint;for(var b=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,f=(a.tint&255)/255,d=0;d<a.graphicsData.length;++d){var e=a.graphicsData[d],p=e.fillColor|0,r=e.lineColor|0;e._fillTint=(255*(p>>16&255)/255*b<<16)+(255*(p>>8&255)/255*c<<8)+255*(p&255)/255*f;e._lineTint=(255*(r>>16&255)/
255*b<<16)+(255*(r>>8&255)/255*c<<8)+255*(r&255)/255*f}};a.prototype.renderPolygon=function(a,b,c){c.moveTo(a[0],a[1]);for(var f=1;f<a.length/2;++f)c.lineTo(a[2*f],a[2*f+1]);b&&c.closePath()};a.prototype.destroy=function(){this.renderer=null};return a}();c.default=a;b.default.registerPlugin("graphics",a)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(a,b,c){c.__esModule=!0;c.default=function(a,b,c,l,k,f,m,n){var p=8<arguments.length&&void 0!==arguments[8]?arguments[8]:
[],r=0,q=0,t=0,s=0,v=0;p.push(a,b);for(var w=1,u=0;20>=w;++w)u=w/20,r=1-u,q=r*r,t=q*r,s=u*u,v=s*u,p.push(t*a+3*q*u*c+3*r*s*k+v*m,t*b+3*q*u*l+3*r*s*f+v*n);return p}},{}],57:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../utils"),l=a("../../const");b=a("../../renderers/webgl/utils/ObjectRenderer");var k=d(b);b=a("../../renderers/webgl/WebGLRenderer");b=d(b);var f=a("./WebGLGraphicsData"),m=d(f),f=a("./shaders/PrimitiveShader"),n=d(f),f=a("./utils/buildPoly"),p=d(f),f=a("./utils/buildRectangle"),r=d(f),f=a("./utils/buildRoundedRectangle"),q=d(f);a=a("./utils/buildCircle");var t=d(a);a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var f;f=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=f&&("object"===typeof f||"function"===typeof f)?f:this;f.graphicsDataPool=[];f.primitiveShader=null;f.gl=c.gl;f.CONTEXT_UID=0;return f}e(b,a);b.prototype.onContextChange=function(){this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.primitiveShader=new n.default(this.gl)};b.prototype.destroy=function(){k.default.prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();
this.graphicsDataPool=null};b.prototype.render=function(a){var b=this.renderer,c=b.gl,f=void 0,d=a._webGL[this.CONTEXT_UID];if(!d||a.dirty!==d.dirty)this.updateGraphics(a),d=a._webGL[this.CONTEXT_UID];b.bindShader(this.primitiveShader);b.state.setBlendMode(a.blendMode);for(var k=0,m=d.data.length;k<m;k++){var f=d.data[k],e=f.shader;b.bindShader(e);e.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0);e.uniforms.tint=(0,g.hex2rgb)(a.tint);e.uniforms.alpha=a.worldAlpha;b.bindVao(f.vao);
f.nativeLines?c.drawArrays(c.LINES,0,f.points.length/6):f.vao.draw(c.TRIANGLE_STRIP,f.indices.length)}};b.prototype.updateGraphics=function(a){var b=this.renderer.gl,c=a._webGL[this.CONTEXT_UID];c||(c=a._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:b,clearDirty:-1,dirty:-1});c.dirty=a.dirty;if(a.clearDirty!==c.clearDirty){c.clearDirty=a.clearDirty;for(b=0;b<c.data.length;b++)this.graphicsDataPool.push(c.data[b]);c.data.length=0;c.lastIndex=0}for(var f=b=void 0,d=c.lastIndex;d<a.graphicsData.length;d++){var k=
a.graphicsData[d],b=this.getWebGLData(c,0);k.nativeLines&&k.lineWidth&&(f=this.getWebGLData(c,0,!0),c.lastIndex++);k.type===l.SHAPES.POLY&&(0,p.default)(k,b,f);k.type===l.SHAPES.RECT?(0,r.default)(k,b,f):k.type===l.SHAPES.CIRC||k.type===l.SHAPES.ELIP?(0,t.default)(k,b,f):k.type===l.SHAPES.RREC&&(0,q.default)(k,b,f);c.lastIndex++}this.renderer.bindVao(null);for(a=0;a<c.data.length;a++)b=c.data[a],b.dirty&&b.upload()};b.prototype.getWebGLData=function(a,b,c){var f=a.data[a.data.length-1];if(!f||f.nativeLines!==
c||32E4<f.points.length)f=this.graphicsDataPool.pop()||new m.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),f.nativeLines=c,f.reset(b),a.data.push(f);f.dirty=!0;return f};return b}(k.default);c.default=a;b.default.registerPlugin("graphics",a)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,
"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(a,b,c){c.__esModule=!0;var d=(a=a("pixi-gl-core"))&&a.__esModule?a:{"default":a};a=function(){function a(b,c,k){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.gl=b;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=d.default.GLBuffer.createVertexBuffer(b);this.indexBuffer=d.default.GLBuffer.createIndexBuffer(b);this.dirty=!0;this.nativeLines=!1;this.glIndices=this.glPoints=
null;this.shader=c;this.vao=(new d.default.VertexArrayObject(b,k)).addIndex(this.indexBuffer).addAttribute(this.buffer,c.attributes.aVertexPosition,b.FLOAT,!1,24,0).addAttribute(this.buffer,c.attributes.aColor,b.FLOAT,!1,24,8)}a.prototype.reset=function(){this.points.length=0;this.indices.length=0};a.prototype.upload=function(){this.glPoints=new Float32Array(this.points);this.buffer.upload(this.glPoints);this.glIndices=new Uint16Array(this.indices);this.indexBuffer.upload(this.glIndices);this.dirty=
!1};a.prototype.destroy=function(){this.indices=this.points=this.color=null;this.vao.destroy();this.buffer.destroy();this.indexBuffer.destroy();this.glIndices=this.glPoints=this.indexBuffer=this.buffer=this.gl=null};return a}();c.default=a},{"pixi-gl-core":15}],59:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;a=a("../../../Shader");a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}",
"varying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&("object"===typeof c||"function"===typeof c)?c:this}d(b,a);return b}((a&&a.__esModule?a:{"default":a}).default);c.default=a},{"../../../Shader":44}],60:[function(a,b,c){c.__esModule=!0;c.default=function(a,b,c){var m=a.shape,n=m.x,p=m.y,r=void 0,q=void 0;a.type===e.SHAPES.CIRC?q=r=m.radius:(r=m.width,q=m.height);if(!(0===r||
0===q)){var m=Math.floor(30*Math.sqrt(m.radius))||Math.floor(15*Math.sqrt(m.width+m.height)),t=2*Math.PI/m;if(a.fill){var s=(0,g.hex2rgb)(a.fillColor),v=a.fillAlpha,w=s[0]*v,u=s[1]*v,s=s[2]*v,x=b.points,z=b.indices,y=x.length/6;z.push(y);for(var B=0;B<m+1;B++)x.push(n,p,w,u,s,v),x.push(n+Math.sin(t*B)*r,p+Math.cos(t*B)*q,w,u,s,v),z.push(y++,y++);z.push(y-1)}if(a.lineWidth){v=a.points;a.points=[];for(w=0;w<m+1;w++)a.points.push(n+Math.sin(t*w)*r,p+Math.cos(t*w)*q);(0,d.default)(a,b,c);a.points=v}}};
var d=(b=a("./buildLine"))&&b.__esModule?b:{"default":b},e=a("../../../const"),g=a("../../../utils")},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(a,b,c){c.__esModule=!0;c.default=function(a,b,c){if(a.nativeLines){var f=0,m=a.points;if(0!==m.length){b=c.points;c=m.length/2;var f=(0,e.hex2rgb)(a.lineColor),n=a.lineAlpha,p=f[0]*n,r=f[1]*n;a=f[2]*n;for(f=1;f<c;f++){var q=m[2*f],t=m[2*f+1];b.push(m[2*(f-1)],m[2*(f-1)+1]);b.push(p,r,a,n);b.push(q,t);b.push(p,r,a,n)}}}else if(m=
a.points,0!==m.length){c=new d.Point(m[0],m[1]);n=new d.Point(m[m.length-2],m[m.length-1]);c.x===n.x&&c.y===n.y&&(m=m.slice(),m.pop(),m.pop(),n=new d.Point(m[m.length-2],m[m.length-1]),f=n.x+0.5*(c.x-n.x),c=n.y+0.5*(c.y-n.y),m.unshift(f,c),m.push(f,c));f=b.points;b=b.indices;p=m.length/2;c=m.length;var n=f.length/6,r=a.lineWidth/2,s=(0,e.hex2rgb)(a.lineColor);a=a.lineAlpha;var q=s[0]*a,t=s[1]*a,s=s[2]*a,v=m[0],w=m[1],u=m[2],x=m[3],z=0,y=0,B=-(w-x),C=v-u,F=0,D=0,D=F=0,E=Math.sqrt(B*B+C*C),B=B/E*r,
C=C/E*r;f.push(v-B,w-C,q,t,s,a);f.push(v+B,w+C,q,t,s,a);for(var H=1;H<p-1;++H){var v=m[2*(H-1)],w=m[2*(H-1)+1],u=m[2*H],x=m[2*H+1],z=m[2*(H+1)],y=m[2*(H+1)+1],B=-(w-x),C=v-u,E=Math.sqrt(B*B+C*C),B=B/E,C=C/E,B=B*r,C=C*r,F=-(x-y),D=u-z,E=Math.sqrt(F*F+D*D),F=F/E,D=D/E,F=F*r,D=D*r,E=-C+w-(-C+x),I=-B+u-(-B+v),v=(-B+v)*(-C+x)-(-B+u)*(-C+w),w=-D+y-(-D+x),Q=-F+u-(-F+z),z=(-F+z)*(-D+x)-(-F+u)*(-D+y),y=E*Q-w*I;0.1>Math.abs(y)?(f.push(u-B,x-C,q,t,s,a),f.push(u+B,x+C,q,t,s,a)):(I=(I*z-Q*v)/y,E=(w*v-E*z)/y,(I-
u)*(I-u)+(E-x)*(E-x)>196*r*r?(F=B-F,D=C-D,E=Math.sqrt(F*F+D*D),F/=E,D/=E,F*=r,D*=r,f.push(u-F,x-D),f.push(q,t,s,a),f.push(u+F,x+D),f.push(q,t,s,a),f.push(u-F,x-D),f.push(q,t,s,a),c++):(f.push(I,E),f.push(q,t,s,a),f.push(u-(I-u),x-(E-x)),f.push(q,t,s,a)))}v=m[2*(p-2)];w=m[2*(p-2)+1];u=m[2*(p-1)];x=m[2*(p-1)+1];B=-(w-x);C=v-u;E=Math.sqrt(B*B+C*C);B/=E;C/=E;B*=r;C*=r;f.push(u-B,x-C);f.push(q,t,s,a);f.push(u+B,x+C);f.push(q,t,s,a);b.push(n);for(m=0;m<c;++m)b.push(n++);b.push(n-1)}};var d=a("../../../math"),
e=a("../../../utils")},{"../../../math":70,"../../../utils":125}],62:[function(a,b,c){c.__esModule=!0;c.default=function(a,b,c){a.points=a.shape.points.slice();var m=a.points;if(a.fill&&6<=m.length){for(var n=[],p=a.holes,r=0;r<p.length;r++){var q=p[r];n.push(m.length/2);m=m.concat(q.points)}var p=b.points,t=b.indices,r=m.length/2,s=(0,e.hex2rgb)(a.fillColor),q=a.fillAlpha,v=s[0]*q,w=s[1]*q,s=s[2]*q,n=(0,g.default)(m,n,2);if(!n)return;for(var u=p.length/6,x=0;x<n.length;x+=3)t.push(n[x]+u),t.push(n[x]+
u),t.push(n[x+1]+u),t.push(n[x+2]+u),t.push(n[x+2]+u);for(n=0;n<r;n++)p.push(m[2*n],m[2*n+1],v,w,s,q)}0<a.lineWidth&&(0,d.default)(a,b,c)};var d=(b=a("./buildLine"))&&b.__esModule?b:{"default":b},e=a("../../../utils"),g=(a=a("earcut"))&&a.__esModule?a:{"default":a}},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(a,b,c){c.__esModule=!0;c.default=function(a,b,c){var f=a.shape,m=f.x,n=f.y,p=f.width,f=f.height;if(a.fill){var r=(0,e.hex2rgb)(a.fillColor),q=a.fillAlpha,t=r[0]*q,s=r[1]*q,
r=r[2]*q,v=b.points,w=b.indices,u=v.length/6;v.push(m,n);v.push(t,s,r,q);v.push(m+p,n);v.push(t,s,r,q);v.push(m,n+f);v.push(t,s,r,q);v.push(m+p,n+f);v.push(t,s,r,q);w.push(u,u,u+1,u+2,u+3,u+3)}a.lineWidth&&(q=a.points,a.points=[m,n,m+p,n,m+p,n+f,m,n+f,m,n],(0,d.default)(a,b,c),a.points=q)};var d=(b=a("./buildLine"))&&b.__esModule?b:{"default":b},e=a("../../../utils")},{"../../../utils":125,"./buildLine":61}],64:[function(a,b,c){function d(a,b,c,d,g,e){for(var l=6<arguments.length&&void 0!==arguments[6]?
arguments[6]:[],t=0,s=0,v=0,w=0,u=s=t=0,x=0;20>=u;++u)x=u/20,t=a+(c-a)*x,s=b+(d-b)*x,v=c+(g-c)*x,w=d+(e-d)*x,t+=(v-t)*x,s+=(w-s)*x,l.push(t,s);return l}c.__esModule=!0;c.default=function(a,b,c){var n=a.shape,p=n.x,r=n.y,q=n.width,t=n.height,s=n.radius,n=[];n.push(p,r+s);d(p,r+t-s,p,r+t,p+s,r+t,n);d(p+q-s,r+t,p+q,r+t,p+q,r+t-s,n);d(p+q,r+s,p+q,r,p+q-s,r,n);d(p+s,r,p,r,p,r+s+1E-10,n);if(a.fill){for(var t=(0,l.hex2rgb)(a.fillColor),p=a.fillAlpha,r=t[0]*p,q=t[1]*p,t=t[2]*p,s=b.points,v=b.indices,w=s.length/
6,u=(0,e.default)(n,null,2),x=0,z=u.length;x<z;x+=3)v.push(u[x]+w),v.push(u[x]+w),v.push(u[x+1]+w),v.push(u[x+2]+w),v.push(u[x+2]+w);v=0;for(w=n.length;v<w;v++)s.push(n[v],n[++v],r,q,t,p)}a.lineWidth&&(p=a.points,a.points=n,(0,g.default)(a,b,c),a.points=p)};var e=(b=a("earcut"))&&b.__esModule?b:{"default":b},g=(b=a("./buildLine"))&&b.__esModule?b:{"default":b},l=a("../../../utils")},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(a,b,c){function d(a){if(a&&a.__esModule)return a;var b=
{};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}function e(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;c.autoDetectRenderer=c.Application=c.Filter=c.SpriteMaskFilter=c.Quad=c.RenderTarget=c.ObjectRenderer=c.WebGLManager=c.Shader=c.CanvasRenderTarget=c.TextureUvs=c.VideoBaseTexture=c.BaseRenderTexture=c.RenderTexture=c.BaseTexture=c.TextureMatrix=c.Texture=c.Spritesheet=c.CanvasGraphicsRenderer=c.GraphicsRenderer=c.GraphicsData=
c.Graphics=c.TextMetrics=c.TextStyle=c.Text=c.SpriteRenderer=c.CanvasTinter=c.CanvasSpriteRenderer=c.Sprite=c.TransformBase=c.TransformStatic=c.Transform=c.Container=c.DisplayObject=c.Bounds=c.glCore=c.WebGLRenderer=c.CanvasRenderer=c.ticker=c.utils=c.settings=void 0;var g=a("./const");Object.keys(g).forEach(function(a){"default"===a||"__esModule"===a||Object.defineProperty(c,a,{enumerable:!0,get:function(){return g[a]}})});var l=a("./math");Object.keys(l).forEach(function(a){"default"===a||"__esModule"===
a||Object.defineProperty(c,a,{enumerable:!0,get:function(){return l[a]}})});var k=a("pixi-gl-core");Object.defineProperty(c,"glCore",{enumerable:!0,get:function(){return e(k).default}});var f=a("./display/Bounds");Object.defineProperty(c,"Bounds",{enumerable:!0,get:function(){return e(f).default}});var m=a("./display/DisplayObject");Object.defineProperty(c,"DisplayObject",{enumerable:!0,get:function(){return e(m).default}});var n=a("./display/Container");Object.defineProperty(c,"Container",{enumerable:!0,
get:function(){return e(n).default}});var p=a("./display/Transform");Object.defineProperty(c,"Transform",{enumerable:!0,get:function(){return e(p).default}});var r=a("./display/TransformStatic");Object.defineProperty(c,"TransformStatic",{enumerable:!0,get:function(){return e(r).default}});var q=a("./display/TransformBase");Object.defineProperty(c,"TransformBase",{enumerable:!0,get:function(){return e(q).default}});var t=a("./sprites/Sprite");Object.defineProperty(c,"Sprite",{enumerable:!0,get:function(){return e(t).default}});
var s=a("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(c,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return e(s).default}});var v=a("./sprites/canvas/CanvasTinter");Object.defineProperty(c,"CanvasTinter",{enumerable:!0,get:function(){return e(v).default}});var w=a("./sprites/webgl/SpriteRenderer");Object.defineProperty(c,"SpriteRenderer",{enumerable:!0,get:function(){return e(w).default}});var u=a("./text/Text");Object.defineProperty(c,"Text",{enumerable:!0,get:function(){return e(u).default}});
var x=a("./text/TextStyle");Object.defineProperty(c,"TextStyle",{enumerable:!0,get:function(){return e(x).default}});var z=a("./text/TextMetrics");Object.defineProperty(c,"TextMetrics",{enumerable:!0,get:function(){return e(z).default}});var y=a("./graphics/Graphics");Object.defineProperty(c,"Graphics",{enumerable:!0,get:function(){return e(y).default}});var B=a("./graphics/GraphicsData");Object.defineProperty(c,"GraphicsData",{enumerable:!0,get:function(){return e(B).default}});var C=a("./graphics/webgl/GraphicsRenderer");
Object.defineProperty(c,"GraphicsRenderer",{enumerable:!0,get:function(){return e(C).default}});var F=a("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(c,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return e(F).default}});var D=a("./textures/Spritesheet");Object.defineProperty(c,"Spritesheet",{enumerable:!0,get:function(){return e(D).default}});var E=a("./textures/Texture");Object.defineProperty(c,"Texture",{enumerable:!0,get:function(){return e(E).default}});var H=a("./textures/TextureMatrix");
Object.defineProperty(c,"TextureMatrix",{enumerable:!0,get:function(){return e(H).default}});var I=a("./textures/BaseTexture");Object.defineProperty(c,"BaseTexture",{enumerable:!0,get:function(){return e(I).default}});var Q=a("./textures/RenderTexture");Object.defineProperty(c,"RenderTexture",{enumerable:!0,get:function(){return e(Q).default}});var O=a("./textures/BaseRenderTexture");Object.defineProperty(c,"BaseRenderTexture",{enumerable:!0,get:function(){return e(O).default}});var S=a("./textures/VideoBaseTexture");
Object.defineProperty(c,"VideoBaseTexture",{enumerable:!0,get:function(){return e(S).default}});var R=a("./textures/TextureUvs");Object.defineProperty(c,"TextureUvs",{enumerable:!0,get:function(){return e(R).default}});var A=a("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(c,"CanvasRenderTarget",{enumerable:!0,get:function(){return e(A).default}});var K=a("./Shader");Object.defineProperty(c,"Shader",{enumerable:!0,get:function(){return e(K).default}});var G=a("./renderers/webgl/managers/WebGLManager");
Object.defineProperty(c,"WebGLManager",{enumerable:!0,get:function(){return e(G).default}});var M=a("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(c,"ObjectRenderer",{enumerable:!0,get:function(){return e(M).default}});var N=a("./renderers/webgl/utils/RenderTarget");Object.defineProperty(c,"RenderTarget",{enumerable:!0,get:function(){return e(N).default}});var J=a("./renderers/webgl/utils/Quad");Object.defineProperty(c,"Quad",{enumerable:!0,get:function(){return e(J).default}});var P=
a("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(c,"SpriteMaskFilter",{enumerable:!0,get:function(){return e(P).default}});var L=a("./renderers/webgl/filters/Filter");Object.defineProperty(c,"Filter",{enumerable:!0,get:function(){return e(L).default}});var W=a("./Application");Object.defineProperty(c,"Application",{enumerable:!0,get:function(){return e(W).default}});var X=a("./autoDetectRenderer");Object.defineProperty(c,"autoDetectRenderer",{enumerable:!0,get:function(){return X.autoDetectRenderer}});
b=a("./utils");b=d(b);var T=a("./ticker"),T=d(T),U=a("./settings"),U=e(U),V=a("./renderers/canvas/CanvasRenderer"),V=e(V);a=a("./renderers/webgl/WebGLRenderer");a=e(a);c.settings=U.default;c.utils=b;c.ticker=T;c.CanvasRenderer=V.default;c.WebGLRenderer=a.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,
"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,
"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":15}],
66:[function(a,b,c){c.__esModule=!0;var d=(a=a("./Matrix"))&&a.__esModule?a:{"default":a},e=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],g=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],l=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],k=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],f=[],m=[];(function(){for(var a=0;16>a;a++){var b=[];m.push(b);for(var c=0;16>c;c++)for(var n=0>e[a]*e[c]+l[a]*g[c]?-1:0<e[a]*e[c]+l[a]*g[c]?1:0,s=0>g[a]*e[c]+k[a]*g[c]?-1:0<g[a]*e[c]+k[a]*g[c]?1:0,v=0>e[a]*l[c]+l[a]*k[c]?-1:0<e[a]*l[c]+l[a]*k[c]?
1:0,w=0>g[a]*l[c]+k[a]*k[c]?-1:0<g[a]*l[c]+k[a]*k[c]?1:0,u=0;16>u;u++)if(e[u]===n&&g[u]===s&&l[u]===v&&k[u]===w){b.push(u);break}}for(a=0;16>a;a++)b=new d.default,b.set(e[a],g[a],l[a],k[a],0,0),f.push(b)})();var n={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(a){return e[a]},uY:function(a){return g[a]},vX:function(a){return l[a]},vY:function(a){return k[a]},inv:function(a){return a&8?a&15:-a&7},add:function(a,b){return m[a][b]},sub:function(a,b){return m[a][n.inv(b)]},
rotate180:function(a){return a^4},isVertical:function(a){return 2===(a&3)},byDirection:function(a,b){return 2*Math.abs(a)<=Math.abs(b)?0<=b?n.S:n.N:2*Math.abs(b)<=Math.abs(a)?0<a?n.E:n.W:0<b?0<a?n.SE:n.SW:0<a?n.NE:n.NW},matrixAppendRotationInv:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,k=f[n.inv(b)];k.tx=c;k.ty=d;a.append(k)}};c.default=n},{"./Matrix":67}],67:[function(a,b,c){c.__esModule=!0;var d=function(){function a(b,
c){for(var d=0;d<c.length;d++){var g=c[d];g.enumerable=g.enumerable||!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(b,g.key,g)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),e=(b=a("./Point"))&&b.__esModule?b:{"default":b},g=a("../const");a=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,g=3<arguments.length&&
void 0!==arguments[3]?arguments[3]:1,e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.a=b;this.b=c;this.c=d;this.d=g;this.tx=e;this.ty=r;this.array=null}a.prototype.fromArray=function(a){this.a=a[0];this.b=a[1];this.c=a[3];this.d=a[4];this.tx=a[2];this.ty=a[5]};a.prototype.set=function(a,b,c,d,g,e){this.a=a;this.b=b;this.c=c;this.d=d;this.tx=g;
this.ty=e;return this};a.prototype.toArray=function(a,b){this.array||(this.array=new Float32Array(9));var c=b||this.array;a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0);c[8]=1;return c};a.prototype.apply=function(a,b){b=b||new e.default;var c=a.x,d=a.y;b.x=this.a*c+this.c*d+this.tx;b.y=this.b*c+this.d*d+this.ty;return b};a.prototype.applyInverse=function(a,b){b=b||
new e.default;var c=1/(this.a*this.d+this.c*-this.b),d=a.x,g=a.y;b.x=this.d*c*d+-this.c*c*g+(this.ty*this.c-this.tx*this.d)*c;b.y=this.a*c*g+-this.b*c*d+(-this.ty*this.a+this.tx*this.b)*c;return b};a.prototype.translate=function(a,b){this.tx+=a;this.ty+=b;return this};a.prototype.scale=function(a,b){this.a*=a;this.d*=b;this.c*=a;this.b*=b;this.tx*=a;this.ty*=b;return this};a.prototype.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.a,d=this.c,g=this.tx;this.a=c*b-this.b*a;this.b=c*a+
this.b*b;this.c=d*b-this.d*a;this.d=d*a+this.d*b;this.tx=g*b-this.ty*a;this.ty=g*a+this.ty*b;return this};a.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,g=this.d;this.a=a.a*b+a.b*d;this.b=a.a*c+a.b*g;this.c=a.c*b+a.d*d;this.d=a.c*c+a.d*g;this.tx=a.tx*b+a.ty*d+this.tx;this.ty=a.tx*c+a.ty*g+this.ty;return this};a.prototype.setTransform=function(a,b,c,d,g,e,l,t,s){this.a=Math.cos(l+s)*g;this.b=Math.sin(l+s)*g;this.c=-Math.sin(l-t)*e;this.d=Math.cos(l-t)*e;this.tx=a-(c*this.a+d*this.c);
this.ty=b-(c*this.b+d*this.d);return this};a.prototype.prepend=function(a){var b=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){var c=this.a,d=this.c;this.a=c*a.a+this.b*a.c;this.b=c*a.b+this.b*a.d;this.c=d*a.a+this.d*a.c;this.d=d*a.b+this.d*a.d}this.tx=b*a.a+this.ty*a.c+a.tx;this.ty=b*a.b+this.ty*a.d+a.ty;return this};a.prototype.decompose=function(a){var b=this.a,c=this.b,d=this.c,e=this.d,l=-Math.atan2(-d,e),q=Math.atan2(c,b),t=Math.abs(l+q);1E-5>t||1E-5>Math.abs(g.PI_2-t)?(a.rotation=q,0>b&&0<=
e&&(a.rotation+=0>=a.rotation?Math.PI:-Math.PI),a.skew.x=a.skew.y=0):(a.rotation=0,a.skew.x=l,a.skew.y=q);a.scale.x=Math.sqrt(b*b+c*c);a.scale.y=Math.sqrt(d*d+e*e);a.position.x=this.tx;a.position.y=this.ty;return a};a.prototype.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,g=this.tx,e=a*d-b*c;this.a=d/e;this.b=-b/e;this.c=-c/e;this.d=a/e;this.tx=(c*this.ty-d*g)/e;this.ty=-(a*this.ty-b*g)/e;return this};a.prototype.identity=function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;
return this};a.prototype.clone=function(){var b=new a;b.a=this.a;b.b=this.b;b.c=this.c;b.d=this.d;b.tx=this.tx;b.ty=this.ty;return b};a.prototype.copy=function(a){a.a=this.a;a.b=this.b;a.c=this.c;a.d=this.d;a.tx=this.tx;a.ty=this.ty;return a};d(a,null,[{key:"IDENTITY",get:function(){return new a}},{key:"TEMP_MATRIX",get:function(){return new a}}]);return a}();c.default=a},{"../const":46,"./Point":69}],68:[function(a,b,c){c.__esModule=!0;var d=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=
c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();a=function(){function a(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._x=d;this._y=f;this.cb=b;this.scope=c}a.prototype.set=function(a,b){var c=a||0,f=b||
(0!==b?c:0);if(this._x!==c||this._y!==f)this._x=c,this._y=f,this.cb.call(this.scope)};a.prototype.copy=function(a){if(this._x!==a.x||this._y!==a.y)this._x=a.x,this._y=a.y,this.cb.call(this.scope)};d(a,[{key:"x",get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this.cb.call(this.scope))}}]);return a}();c.default=a},{}],69:[function(a,b,c){c.__esModule=!0;a=function(){function a(){var b=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.x=b;this.y=c}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.copy=function(a){this.set(a.x,a.y)};a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y};a.prototype.set=function(a,b){this.x=a||0;this.y=b||(0!==b?this.x:0)};return a}();c.default=a},{}],70:[function(a,
b,c){function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./Point");Object.defineProperty(c,"Point",{enumerable:!0,get:function(){return d(e).default}});var g=a("./ObservablePoint");Object.defineProperty(c,"ObservablePoint",{enumerable:!0,get:function(){return d(g).default}});var l=a("./Matrix");Object.defineProperty(c,"Matrix",{enumerable:!0,get:function(){return d(l).default}});var k=a("./GroupD8");Object.defineProperty(c,"GroupD8",{enumerable:!0,get:function(){return d(k).default}});
var f=a("./shapes/Circle");Object.defineProperty(c,"Circle",{enumerable:!0,get:function(){return d(f).default}});var m=a("./shapes/Ellipse");Object.defineProperty(c,"Ellipse",{enumerable:!0,get:function(){return d(m).default}});var n=a("./shapes/Polygon");Object.defineProperty(c,"Polygon",{enumerable:!0,get:function(){return d(n).default}});var p=a("./shapes/Rectangle");Object.defineProperty(c,"Rectangle",{enumerable:!0,get:function(){return d(p).default}});var r=a("./shapes/RoundedRectangle");Object.defineProperty(c,
"RoundedRectangle",{enumerable:!0,get:function(){return d(r).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(a,b,c){c.__esModule=!0;var d=(b=a("./Rectangle"))&&b.__esModule?b:{"default":b},e=a("../../const");a=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:0,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.x=b;this.y=c;this.radius=f;this.type=e.SHAPES.CIRC}a.prototype.clone=function(){return new a(this.x,this.y,this.radius)};a.prototype.contains=function(a,b){if(0>=this.radius)return!1;var c=this.radius*this.radius,d=this.x-a,g=this.y-b;return d*d+g*g<=c};a.prototype.getBounds=function(){return new d.default(this.x-this.radius,this.y-this.radius,
2*this.radius,2*this.radius)};return a}();c.default=a},{"../../const":46,"./Rectangle":74}],72:[function(a,b,c){c.__esModule=!0;var d=(b=a("./Rectangle"))&&b.__esModule?b:{"default":b},e=a("../../const");a=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.x=b;this.y=c;this.width=f;this.height=d;this.type=e.SHAPES.ELIP}a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)};a.prototype.contains=function(a,b){if(0>=this.width||0>=this.height)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return 1>=c*c+d*d};a.prototype.getBounds=function(){return new d.default(this.x-this.width,this.y-this.height,this.width,this.height)};return a}();c.default=a},{"../../const":46,"./Rectangle":74}],73:[function(a,b,c){c.__esModule=
!0;var d=(b=a("../Point"))&&b.__esModule?b:{"default":b},e=a("../../const");a=function(){function a(){for(var b=arguments.length,c=Array(b),f=0;f<b;f++)c[f]=arguments[f];if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");Array.isArray(c[0])&&(c=c[0]);if(c[0]instanceof d.default){for(var b=[],f=0,m=c.length;f<m;f++)b.push(c[f].x,c[f].y);c=b}this.closed=!0;this.points=c;this.type=e.SHAPES.POLY}a.prototype.clone=function(){return new a(this.points.slice())};a.prototype.close=
function(){var a=this.points;(a[0]!==a[a.length-2]||a[1]!==a[a.length-1])&&a.push(a[0],a[1])};a.prototype.contains=function(a,b){for(var c=!1,d=this.points.length/2,g=0,e=d-1;g<d;e=g++){var r=this.points[2*g],q=this.points[2*g+1],t=this.points[2*e],e=this.points[2*e+1];q>b!==e>b&&a<(t-r)*((b-q)/(e-q))+r&&(c=!c)}return c};return a}();c.default=a},{"../../const":46,"../Point":69}],74:[function(a,b,c){c.__esModule=!0;var d=function(){function a(b,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=
d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}(),e=a("../../const");a=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.x=Number(b);this.y=Number(c);this.width=Number(f);this.height=Number(d);this.type=e.SHAPES.RECT}a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)};a.prototype.copy=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};a.prototype.contains=function(a,b){return 0>=this.width||0>=this.height?!1:a>=this.x&&a<this.x+this.width&&b>=this.y&&b<this.y+this.height?!0:!1};a.prototype.pad=function(a,b){a=a||0;b=b||(0!==b?a:0);this.x-=a;this.y-=
b;this.width+=2*a;this.height+=2*b};a.prototype.fit=function(a){this.x<a.x&&(this.width+=this.x,0>this.width&&(this.width=0),this.x=a.x);this.y<a.y&&(this.height+=this.y,0>this.height&&(this.height=0),this.y=a.y);this.x+this.width>a.x+a.width&&(this.width=a.width-this.x,0>this.width&&(this.width=0));this.y+this.height>a.y+a.height&&(this.height=a.height-this.y,0>this.height&&(this.height=0))};a.prototype.enlarge=function(a){var b=Math.min(this.x,a.x),c=Math.max(this.x+this.width,a.x+a.width),d=Math.min(this.y,
a.y);a=Math.max(this.y+this.height,a.y+a.height);this.x=b;this.width=c-b;this.y=d;this.height=a-d};d(a,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new a(0,0,0,0)}}]);return a}();c.default=a},{"../../const":46}],75:[function(a,b,c){c.__esModule=!0;var d=a("../../const");a=function(){function a(){var b=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,m=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.x=b;this.y=c;this.width=k;this.height=f;this.radius=m;this.type=d.SHAPES.RREC}a.prototype.clone=function(){return new a(this.x,this.y,this.width,
this.height,this.radius)};a.prototype.contains=function(a,b){if(0>=this.width||0>=this.height)return!1;if(a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height){if(b>=this.y+this.radius&&b<=this.y+this.height-this.radius||a>=this.x+this.radius&&a<=this.x+this.width-this.radius)return!0;var c=a-(this.x+this.radius),f=b-(this.y+this.radius),d=this.radius*this.radius;if(c*c+f*f<=d)return!0;c=a-(this.x+this.width-this.radius);if(c*c+f*f<=d)return!0;f=b-(this.y+this.height-this.radius);if(c*
c+f*f<=d)return!0;c=a-(this.x+this.radius);if(c*c+f*f<=d)return!0}return!1};return a}();c.default=a},{"../../const":46}],76:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}c.__esModule=!0;var g=function(){function a(b,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}(),l=a("../utils"),k=a("../math"),f=a("../const");b=a("../settings");var m=d(b);b=a("../display/Container");var n=d(b);b=a("../textures/RenderTexture");var p=d(b);a=a("eventemitter3");a=d(a);var r=new k.Matrix;a=function(a){function b(c,
d,g,e){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var p;p=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");p=p&&("object"===typeof p||"function"===typeof p)?p:this;(0,l.sayHello)(c);"number"===typeof d&&(d=Object.assign({width:d,height:g||m.default.RENDER_OPTIONS.height},e));d=Object.assign({},m.default.RENDER_OPTIONS,d);p.options=d;p.type=f.RENDERER_TYPE.UNKNOWN;p.screen=new k.Rectangle(0,0,d.width,d.height);
p.view=d.view||document.createElement("canvas");p.resolution=d.resolution||m.default.RESOLUTION;p.transparent=d.transparent;p.autoResize=d.autoResize||!1;p.blendModes=null;p.preserveDrawingBuffer=d.preserveDrawingBuffer;p.clearBeforeRender=d.clearBeforeRender;p.roundPixels=d.roundPixels;p._backgroundColor=0;p._backgroundColorRgba=[0,0,0,0];p._backgroundColorString="#000000";p.backgroundColor=d.backgroundColor||p._backgroundColor;p._tempDisplayObjectParent=new n.default;p._lastObjectRendered=p._tempDisplayObjectParent;
return p}e(b,a);b.prototype.resize=function(a,b){this.screen.width=a;this.screen.height=b;this.view.width=a*this.resolution;this.view.height=b*this.resolution;this.autoResize&&(this.view.style.width=a+"px",this.view.style.height=b+"px")};b.prototype.generateTexture=function(a,b,c,f){f=f||a.getLocalBounds();b=p.default.create(f.width|0,f.height|0,b,c);r.tx=-f.x;r.ty=-f.y;this.render(a,b,!1,r,!0);return b};b.prototype.destroy=function(a){a&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);
this.type=f.RENDERER_TYPE.UNKNOWN;this.screen=this.view=null;this.resolution=0;this.autoResize=this.transparent=!1;this.options=this.blendModes=null;this.roundPixels=this.clearBeforeRender=this.preserveDrawingBuffer=!1;this._backgroundColor=0;this._lastObjectRendered=this._tempDisplayObjectParent=this._backgroundColorString=this._backgroundColorRgba=null};g(b,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},
set:function(a){this._backgroundColor=a;this._backgroundColorString=(0,l.hex2string)(a);(0,l.hex2rgb)(a,this._backgroundColorRgba)}}]);return b}(a.default);c.default=a},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;b=a("../SystemRenderer");b=d(b);var g=a("./utils/CanvasMaskManager"),l=d(g),g=a("./utils/CanvasRenderTarget"),k=d(g),g=a("./utils/mapCanvasBlendModesToPixi"),f=d(g),g=a("../../utils"),m=a("../../const");a=a("../../settings");var n=d(a);a=function(a){function b(c,d,g){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
c=a.call(this,"Canvas",c,d,g);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.type=m.RENDERER_TYPE.CANVAS;c.rootContext=c.view.getContext("2d",{alpha:c.transparent});c.context=c.rootContext;c.refresh=!0;c.maskManager=new l.default(c);c.smoothProperty="imageSmoothingEnabled";c.rootContext.imageSmoothingEnabled||(c.rootContext.webkitImageSmoothingEnabled?c.smoothProperty="webkitImageSmoothingEnabled":
c.rootContext.mozImageSmoothingEnabled?c.smoothProperty="mozImageSmoothingEnabled":c.rootContext.oImageSmoothingEnabled?c.smoothProperty="oImageSmoothingEnabled":c.rootContext.msImageSmoothingEnabled&&(c.smoothProperty="msImageSmoothingEnabled"));c.initPlugins();c.blendModes=(0,f.default)();c._activeBlendMode=null;c.renderingToScreen=!1;c.resize(c.options.width,c.options.height);return c}e(b,a);b.prototype.render=function(a,b,c,f,d){if(this.view){this.renderingToScreen=!b;this.emit("prerender");var g=
this.resolution;b?(b=b.baseTexture||b,b._canvasRenderTarget||(b._canvasRenderTarget=new k.default(b.width,b.height,b.resolution),b.source=b._canvasRenderTarget.canvas,b.valid=!0),this.context=b._canvasRenderTarget.context,this.resolution=b._canvasRenderTarget.resolution):this.context=this.rootContext;var e=this.context;b||(this._lastObjectRendered=a);d||(b=a.parent,d=this._tempDisplayObjectParent.transform.worldTransform,f?(f.copy(d),this._tempDisplayObjectParent.transform._worldID=-1):d.identity(),
a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=b);e.save();e.setTransform(1,0,0,1,0,0);e.globalAlpha=1;this._activeBlendMode=m.BLEND_MODES.NORMAL;e.globalCompositeOperation=this.blendModes[m.BLEND_MODES.NORMAL];navigator.isCocoonJS&&this.view.screencanvas&&(e.fillStyle="black",e.clear());if((void 0!==c?c:this.clearBeforeRender)&&this.renderingToScreen)this.transparent?e.clearRect(0,0,this.width,this.height):(e.fillStyle=this._backgroundColorString,e.fillRect(0,0,this.width,this.height));
c=this.context;this.context=e;a.renderCanvas(this);this.context=c;e.restore();this.resolution=g;this.emit("postrender")}};b.prototype.clear=function(a){var b=this.context;a=a||this._backgroundColorString;!this.transparent&&a?(b.fillStyle=a,b.fillRect(0,0,this.width,this.height)):b.clearRect(0,0,this.width,this.height)};b.prototype.setBlendMode=function(a){this._activeBlendMode!==a&&(this._activeBlendMode=a,this.context.globalCompositeOperation=this.blendModes[a])};b.prototype.destroy=function(b){this.destroyPlugins();
a.prototype.destroy.call(this,b);this.context=null;this.refresh=!0;this.maskManager.destroy();this.smoothProperty=this.maskManager=null};b.prototype.resize=function(b,c){a.prototype.resize.call(this,b,c);this.smoothProperty&&(this.rootContext[this.smoothProperty]=n.default.SCALE_MODE===m.SCALE_MODES.LINEAR)};b.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)};return b}(b.default);c.default=a;g.pluginTarget.mixin(a)},{"../../const":46,
"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(a,b,c){c.__esModule=!0;var d=a("../../../const");a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=b}a.prototype.pushMask=function(a){var b=this.renderer;b.context.save();var c=a.alpha,f=a.transform.worldTransform,d=b.resolution;b.context.setTransform(f.a*
d,f.b*d,f.c*d,f.d*d,f.tx*d,f.ty*d);a._texture||(this.renderGraphicsShape(a),b.context.clip());a.worldAlpha=c};a.prototype.renderGraphicsShape=function(a){var b=this.renderer.context,c=a.graphicsData.length;if(0!==c){b.beginPath();for(var f=0;f<c;f++){var e=a.graphicsData[f],n=e.shape;if(e.type===d.SHAPES.POLY){e=n.points;b.moveTo(e[0],e[1]);for(var p=1;p<e.length/2;p++)b.lineTo(e[2*p],e[2*p+1]);e[0]===e[e.length-2]&&e[1]===e[e.length-1]&&b.closePath()}else if(e.type===d.SHAPES.RECT)b.rect(n.x,n.y,
n.width,n.height),b.closePath();else if(e.type===d.SHAPES.CIRC)b.arc(n.x,n.y,n.radius,0,2*Math.PI),b.closePath();else if(e.type===d.SHAPES.ELIP){var r=2*n.width,p=2*n.height,e=n.x-r/2,n=n.y-p/2,q=0.5522848*(r/2),t=0.5522848*(p/2),s=e+r,v=n+p,r=e+r/2,p=n+p/2;b.moveTo(e,p);b.bezierCurveTo(e,p-t,r-q,n,r,n);b.bezierCurveTo(r+q,n,s,p-t,s,p);b.bezierCurveTo(s,p+t,r+q,v,r,v);b.bezierCurveTo(r-q,v,e,p+t,e,p);b.closePath()}else e.type===d.SHAPES.RREC&&(e=n.x,p=n.y,q=n.width,t=n.height,n=n.radius,s=Math.min(q,
t)/2|0,n=n>s?s:n,b.moveTo(e,p+n),b.lineTo(e,p+t-n),b.quadraticCurveTo(e,p+t,e+n,p+t),b.lineTo(e+q-n,p+t),b.quadraticCurveTo(e+q,p+t,e+q,p+t-n),b.lineTo(e+q,p+n),b.quadraticCurveTo(e+q,p,e+q-n,p),b.lineTo(e+n,p),b.quadraticCurveTo(e,p,e,p+n),b.closePath())}}};a.prototype.popMask=function(a){a.context.restore();a.invalidateBlendMode()};a.prototype.destroy=function(){};return a}();c.default=a},{"../../../const":46}],79:[function(a,b,c){c.__esModule=!0;var d=function(){function a(b,c){for(var f=0;f<c.length;f++){var d=
c[f];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}(),e=(a=a("../../../settings"))&&a.__esModule?a:{"default":a};a=function(){function a(b,c,f){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=f||e.default.RESOLUTION;this.resize(b,c)}a.prototype.clear=
function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};a.prototype.resize=function(a,b){this.canvas.width=a*this.resolution;this.canvas.height=b*this.resolution};a.prototype.destroy=function(){this.canvas=this.context=null};d(a,[{key:"width",get:function(){return this.canvas.width},set:function(a){this.canvas.width=a}},{key:"height",get:function(){return this.canvas.height},set:function(a){this.canvas.height=a}}]);return a}();c.default=
a},{"../../../settings":101}],80:[function(a,b,c){function d(a){var b=document.createElement("canvas");b.width=6;b.height=1;var c=b.getContext("2d");c.fillStyle=a;c.fillRect(0,0,6,1);return b}c.__esModule=!0;c.default=function(){if("undefined"===typeof document)return!1;var a=d("#ff00ff"),b=d("#ffff00"),c=document.createElement("canvas");c.width=6;c.height=1;c=c.getContext("2d");c.globalCompositeOperation="multiply";c.drawImage(a,0,0);c.drawImage(b,2,0);a=c.getImageData(2,0,1,1);if(!a)return!1;a=
a.data;return 255===a[0]&&0===a[1]&&0===a[2]}},{}],81:[function(a,b,c){c.__esModule=!0;c.default=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];(0,e.default)()?(a[d.BLEND_MODES.NORMAL]="source-over",a[d.BLEND_MODES.ADD]="lighter",a[d.BLEND_MODES.MULTIPLY]="multiply",a[d.BLEND_MODES.SCREEN]="screen",a[d.BLEND_MODES.OVERLAY]="overlay",a[d.BLEND_MODES.DARKEN]="darken",a[d.BLEND_MODES.LIGHTEN]="lighten",a[d.BLEND_MODES.COLOR_DODGE]="color-dodge",a[d.BLEND_MODES.COLOR_BURN]=
"color-burn",a[d.BLEND_MODES.HARD_LIGHT]="hard-light",a[d.BLEND_MODES.SOFT_LIGHT]="soft-light",a[d.BLEND_MODES.DIFFERENCE]="difference",a[d.BLEND_MODES.EXCLUSION]="exclusion",a[d.BLEND_MODES.HUE]="hue",a[d.BLEND_MODES.SATURATION]="saturate",a[d.BLEND_MODES.COLOR]="color",a[d.BLEND_MODES.LUMINOSITY]="luminosity"):(a[d.BLEND_MODES.NORMAL]="source-over",a[d.BLEND_MODES.ADD]="lighter",a[d.BLEND_MODES.MULTIPLY]="source-over",a[d.BLEND_MODES.SCREEN]="source-over",a[d.BLEND_MODES.OVERLAY]="source-over",
a[d.BLEND_MODES.DARKEN]="source-over",a[d.BLEND_MODES.LIGHTEN]="source-over",a[d.BLEND_MODES.COLOR_DODGE]="source-over",a[d.BLEND_MODES.COLOR_BURN]="source-over",a[d.BLEND_MODES.HARD_LIGHT]="source-over",a[d.BLEND_MODES.SOFT_LIGHT]="source-over",a[d.BLEND_MODES.DIFFERENCE]="source-over",a[d.BLEND_MODES.EXCLUSION]="source-over",a[d.BLEND_MODES.HUE]="source-over",a[d.BLEND_MODES.SATURATION]="source-over",a[d.BLEND_MODES.COLOR]="source-over",a[d.BLEND_MODES.LUMINOSITY]="source-over");a[d.BLEND_MODES.NORMAL_NPM]=
a[d.BLEND_MODES.NORMAL];a[d.BLEND_MODES.ADD_NPM]=a[d.BLEND_MODES.ADD];a[d.BLEND_MODES.SCREEN_NPM]=a[d.BLEND_MODES.SCREEN];return a};var d=a("../../../const"),e=(a=a("./canUseNewCanvasBlendModes"))&&a.__esModule?a:{"default":a}},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(a,b,c){c.__esModule=!0;var d=a("../../const"),e=(a=a("../../settings"))&&a.__esModule?a:{"default":a};a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.renderer=b;this.checkCount=this.count=0;this.maxIdle=e.default.GC_MAX_IDLE;this.checkCountMax=e.default.GC_MAX_CHECK_COUNT;this.mode=e.default.GC_MODE}a.prototype.update=function(){this.count++;this.mode!==d.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))};a.prototype.run=function(){for(var a=this.renderer.textureManager,b=a._managedTextures,c=!1,d=0;d<b.length;d++){var e=b[d];!e._glRenderTargets&&this.count-e.touched>this.maxIdle&&(a.destroyTexture(e,
!0),b[d]=null,c=!0)}if(c){for(c=a=0;c<b.length;c++)null!==b[c]&&(b[a++]=b[c]);b.length=a}};a.prototype.unload=function(a){var b=this.renderer.textureManager;a._texture&&a._texture._glRenderTargets&&b.destroyTexture(a._texture,!0);for(b=a.children.length-1;0<=b;b--)this.unload(a.children[b])};return a}();c.default=a},{"../../const":46,"../../settings":101}],83:[function(a,b,c){c.__esModule=!0;var d=a("pixi-gl-core"),e=a("../../const"),g=(b=a("./utils/RenderTarget"))&&b.__esModule?b:{"default":b},l=
a("../../utils");a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=b;this.gl=b.gl;this._managedTextures=[]}a.prototype.bindTexture=function(){};a.prototype.getTexture=function(){};a.prototype.updateTexture=function(a,b){var c=this.gl,k=!!a._glRenderTargets;if(!a.hasLoaded)return null;var l=this.renderer.boundTextures;if(void 0===b)for(var q=b=0;q<l.length;++q)if(l[q]===a){b=q;break}l[b]=a;c.activeTexture(c.TEXTURE0+b);(c=a._glTextures[this.renderer.CONTEXT_UID])?
k?a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width,a.height):c.upload(a.source):(k?(k=new g.default(this.gl,a.width,a.height,a.scaleMode,a.resolution),k.resize(a.width,a.height),a._glRenderTargets[this.renderer.CONTEXT_UID]=k,c=k.texture):(c=new d.GLTexture(this.gl,null,null,null,null),c.bind(b),c.premultiplyAlpha=!0,c.upload(a.source)),a._glTextures[this.renderer.CONTEXT_UID]=c,a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a),
a.isPowerOfTwo?(a.mipmap&&c.enableMipmap(),a.wrapMode===e.WRAP_MODES.CLAMP?c.enableWrapClamp():a.wrapMode===e.WRAP_MODES.REPEAT?c.enableWrapRepeat():c.enableWrapMirrorRepeat()):c.enableWrapClamp(),a.scaleMode===e.SCALE_MODES.NEAREST?c.enableNearestScaling():c.enableLinearScaling());return c};a.prototype.destroyTexture=function(a,b){a=a.baseTexture||a;if(a.hasLoaded){var c=this.renderer.CONTEXT_UID,d=a._glTextures,e=a._glRenderTargets;d[c]&&(this.renderer.unbindTexture(a),d[c].destroy(),a.off("update",
this.updateTexture,this),a.off("dispose",this.destroyTexture,this),delete d[c],b||(d=this._managedTextures.indexOf(a),-1!==d&&(0,l.removeItems)(this._managedTextures,d,1)));e&&e[c]&&(e[c].destroy(),delete e[c])}};a.prototype.removeAll=function(){for(var a=0;a<this._managedTextures.length;++a){var b=this._managedTextures[a];b._glTextures[this.renderer.CONTEXT_UID]&&delete b._glTextures[this.renderer.CONTEXT_UID]}};a.prototype.destroy=function(){for(var a=0;a<this._managedTextures.length;++a){var b=
this._managedTextures[a];this.destroyTexture(b,!0);b.off("update",this.updateTexture,this);b.off("dispose",this.destroyTexture,this)}this._managedTextures=null};return a}();c.default=a},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":15}],84:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;b=a("../SystemRenderer");var g=d(b);b=a("./managers/MaskManager");var l=d(b);b=a("./managers/StencilManager");var k=d(b);b=a("./managers/FilterManager");var f=d(b);b=a("./utils/RenderTarget");var m=d(b);b=a("./utils/ObjectRenderer");var n=d(b);b=a("./TextureManager");var p=d(b);b=a("../../textures/BaseTexture");var r=d(b);b=a("./TextureGarbageCollector");
var q=d(b);b=a("./WebGLState");var t=d(b);b=a("./utils/mapWebGLDrawModesToPixi");var s=d(b);b=a("./utils/validateContext");var v=d(b);b=a("../../utils");var w=a("pixi-gl-core"),u=d(w),x=a("../../const"),z=0;a=function(a){function b(c,f,d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,"WebGL",c,f,d);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;
c.legacy=c.options.legacy;c.legacy&&(u.default.VertexArrayObject.FORCE_NATIVE=!0);c.type=x.RENDERER_TYPE.WEBGL;c.handleContextLost=c.handleContextLost.bind(c);c.handleContextRestored=c.handleContextRestored.bind(c);c.view.addEventListener("webglcontextlost",c.handleContextLost,!1);c.view.addEventListener("webglcontextrestored",c.handleContextRestored,!1);c._contextOptions={alpha:c.transparent,antialias:c.options.antialias,premultipliedAlpha:c.transparent&&"notMultiplied"!==c.transparent,stencil:!0,
preserveDrawingBuffer:c.options.preserveDrawingBuffer,powerPreference:c.options.powerPreference};c._backgroundColorRgba[3]=c.transparent?0:1;c.maskManager=new l.default(c);c.stencilManager=new k.default(c);c.emptyRenderer=new n.default(c);c.currentRenderer=c.emptyRenderer;c.textureManager=null;c.filterManager=null;c.initPlugins();c.options.context&&(0,v.default)(c.options.context);c.gl=c.options.context||u.default.createContext(c.view,c._contextOptions);c.CONTEXT_UID=z++;c.state=new t.default(c.gl);
c.renderingToScreen=!0;c.boundTextures=null;c._activeShader=null;c._activeVao=null;c._activeRenderTarget=null;c._initContext();c.drawModes=(0,s.default)(c.gl);c._nextTextureLocation=0;c.setBlendMode(0);return c}e(b,a);b.prototype._initContext=function(){var a=this.gl;a.isContextLost()&&a.getExtension("WEBGL_lose_context")&&a.getExtension("WEBGL_lose_context").restoreContext();var b=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this._activeVao=this._activeShader=null;this.boundTextures=Array(b);this.emptyTextures=
Array(b);this.textureManager=new p.default(this);this.filterManager=new f.default(this);this.textureGC=new q.default(this);this.state.resetToDefault();this.rootRenderTarget=new m.default(a,this.width,this.height,null,this.resolution,!0);this.rootRenderTarget.clearColor=this._backgroundColorRgba;this.bindRenderTarget(this.rootRenderTarget);var c=new u.default.GLTexture.fromData(a,null,1,1),d={_glTextures:{}};d._glTextures[this.CONTEXT_UID]={};for(var e=0;e<b;e++){var k=new r.default;k._glTextures[this.CONTEXT_UID]=
c;this.boundTextures[e]=d;this.emptyTextures[e]=k;this.bindTexture(null,e)}this.emit("context",a);this.resize(this.screen.width,this.screen.height)};b.prototype.render=function(a,b,c,f,d){this.renderingToScreen=!b;this.emit("prerender");this.gl&&!this.gl.isContextLost()&&(this._nextTextureLocation=0,b||(this._lastObjectRendered=a),d||(d=a.parent,a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=d),this.bindRenderTexture(b,f),this.currentRenderer.start(),(void 0!==c?c:this.clearBeforeRender)&&
this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender"))};b.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())};b.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)};b.prototype.resize=function(a,b){g.default.prototype.resize.call(this,a,b);this.rootRenderTarget.resize(a,b);this._activeRenderTarget===this.rootRenderTarget&&
(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))};b.prototype.setBlendMode=function(a){this.state.setBlendMode(a)};b.prototype.clear=function(a){this._activeRenderTarget.clear(a)};b.prototype.setTransform=function(a){this._activeRenderTarget.transform=a};b.prototype.clearRenderTexture=function(a,b){var c=a.baseTexture._glRenderTargets[this.CONTEXT_UID];c&&c.clear(b);return this};b.prototype.bindRenderTexture=
function(a,b){var c=void 0;a?(c=a.baseTexture,c._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(c,0),this.unbindTexture(c),c=c._glRenderTargets[this.CONTEXT_UID],c.setFrame(a.frame)):c=this.rootRenderTarget;c.transform=b;this.bindRenderTarget(c);return this};b.prototype.bindRenderTarget=function(a){a!==this._activeRenderTarget&&(this._activeRenderTarget=a,a.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=a.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(a.stencilMaskStack));
return this};b.prototype.bindShader=function(a,b){this._activeShader!==a&&(this._activeShader=a,a.bind(),!1!==b&&(a.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)));return this};b.prototype.bindTexture=function(a,b,c){a=a||this.emptyTextures[b];a=a.baseTexture||a;a.touched=this.textureGC.count;if(c)b=b||0;else{for(c=0;c<this.boundTextures.length;c++)if(this.boundTextures[c]===a)return c;void 0===b&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,
b=this.boundTextures.length-this._nextTextureLocation-1)}c=this.gl;var f=a._glTextures[this.CONTEXT_UID];f?(this.boundTextures[b]=a,c.activeTexture(c.TEXTURE0+b),c.bindTexture(c.TEXTURE_2D,f.texture)):this.textureManager.updateTexture(a,b);return b};b.prototype.unbindTexture=function(a){var b=this.gl;a=a.baseTexture||a;for(var c=0;c<this.boundTextures.length;c++)this.boundTextures[c]===a&&(this.boundTextures[c]=this.emptyTextures[c],b.activeTexture(b.TEXTURE0+c),b.bindTexture(b.TEXTURE_2D,this.emptyTextures[c]._glTextures[this.CONTEXT_UID].texture));
return this};b.prototype.createVao=function(){return new u.default.VertexArrayObject(this.gl,this.state.attribState)};b.prototype.bindVao=function(a){if(this._activeVao===a)return this;a?a.bind():this._activeVao&&this._activeVao.unbind();this._activeVao=a;return this};b.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer);this.bindVao(null);this._activeShader=null;this._activeRenderTarget=this.rootRenderTarget;for(var a=0;a<this.boundTextures.length;a++)this.boundTextures[a]=this.emptyTextures[a];
this.rootRenderTarget.activate();this.state.resetToDefault();return this};b.prototype.handleContextLost=function(a){a.preventDefault()};b.prototype.handleContextRestored=function(){this.textureManager.removeAll();this.filterManager.destroy(!0);this._initContext()};b.prototype.destroy=function(b){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);this.textureManager.destroy();
a.prototype.destroy.call(this,b);this.uid=0;this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this._contextOptions=this.handleContextRestored=this.handleContextLost=this.currentRenderer=this.textureManager=this.filterManager=this.maskManager=null;this.gl.useProgram(null);this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext();this.gl=null};return b}(g.default);c.default=a;b.pluginTarget.mixin(a)},{"../../const":46,"../../textures/BaseTexture":112,
"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":15}],85:[function(a,b,c){c.__esModule=!0;var d=(a=a("./utils/mapWebGLBlendModesToPixi"))&&a.__esModule?a:{"default":a};a=function(){function a(b){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this.activeState=new Uint8Array(16);this.defaultState=new Uint8Array(16);this.defaultState[0]=1;this.stackIndex=0;this.stack=[];this.gl=b;this.maxAttribs=b.getParameter(b.MAX_VERTEX_ATTRIBS);this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)};this.blendModes=(0,d.default)(b);this.nativeVaoExtension=b.getExtension("OES_vertex_array_object")||b.getExtension("MOZ_OES_vertex_array_object")||b.getExtension("WEBKIT_OES_vertex_array_object")}
a.prototype.push=function(){var a=this.stack[this.stackIndex];a||(a=this.stack[this.stackIndex]=new Uint8Array(16));++this.stackIndex;for(var b=0;b<this.activeState.length;b++)a[b]=this.activeState[b]};a.prototype.pop=function(){var a=this.stack[--this.stackIndex];this.setState(a)};a.prototype.setState=function(a){this.setBlend(a[0]);this.setDepthTest(a[1]);this.setFrontFace(a[2]);this.setCullFace(a[3]);this.setBlendMode(a[4])};a.prototype.setBlend=function(a){a=a?1:0;this.activeState[0]!==a&&(this.activeState[0]=
a,this.gl[a?"enable":"disable"](this.gl.BLEND))};a.prototype.setBlendMode=function(a){a!==this.activeState[4]&&(this.activeState[4]=a,a=this.blendModes[a],2===a.length?this.gl.blendFunc(a[0],a[1]):this.gl.blendFuncSeparate(a[0],a[1],a[2],a[3]))};a.prototype.setDepthTest=function(a){a=a?1:0;this.activeState[1]!==a&&(this.activeState[1]=a,this.gl[a?"enable":"disable"](this.gl.DEPTH_TEST))};a.prototype.setCullFace=function(a){a=a?1:0;this.activeState[3]!==a&&(this.activeState[3]=a,this.gl[a?"enable":
"disable"](this.gl.CULL_FACE))};a.prototype.setFrontFace=function(a){a=a?1:0;this.activeState[2]!==a&&(this.activeState[2]=a,this.gl.frontFace(this.gl[a?"CW":"CCW"]))};a.prototype.resetAttributes=function(){for(var a=0;a<this.attribState.tempAttribState.length;a++)this.attribState.tempAttribState[a]=0;for(a=0;a<this.attribState.attribState.length;a++)this.attribState.attribState[a]=0;for(a=1;a<this.maxAttribs;a++)this.gl.disableVertexAttribArray(a)};a.prototype.resetToDefault=function(){this.nativeVaoExtension&&
this.nativeVaoExtension.bindVertexArrayOES(null);this.resetAttributes();for(var a=0;a<this.activeState.length;++a)this.activeState[a]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1);this.setState(this.defaultState)};return a}();c.default=a},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(a,b,c){c.__esModule=!0;var d=function(){function a(b,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,
d)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}(),e=(b=a("./extractUniformsFromSrc"))&&b.__esModule?b:{"default":b},g=a("../../../utils"),l=a("../../../const"),k=(a=a("../../../settings"))&&a.__esModule?a:{"default":a},f={};a=function(){function a(b,c,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.vertexSrc=b||a.defaultVertexSrc;this.fragmentSrc=c||a.defaultFragmentSrc;this._blendMode=l.BLEND_MODES.NORMAL;this.uniformData=d||(0,e.default)(this.vertexSrc,
this.fragmentSrc,"projectionMatrix|uSampler");this.uniforms={};for(var q in this.uniformData)this.uniforms[q]=this.uniformData[q].value,this.uniformData[q].type&&(this.uniformData[q].type=this.uniformData[q].type.toLowerCase());this.glShaders={};f[this.vertexSrc+this.fragmentSrc]||(f[this.vertexSrc+this.fragmentSrc]=(0,g.uid)());this.glShaderKey=f[this.vertexSrc+this.fragmentSrc];this.padding=4;this.resolution=k.default.FILTER_RESOLUTION;this.autoFit=this.enabled=!0}a.prototype.apply=function(a,b,
c,f,d){a.applyFilter(this,b,c,f)};d(a,[{key:"blendMode",get:function(){return this._blendMode},set:function(a){this._blendMode=a}}],[{key:"defaultVertexSrc",get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord ;\n}"}},
{key:"defaultFragmentSrc",get:function(){return"varying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\nuniform sampler2D filterSampler;\nvoid main(void){\n   vec4 masky = texture2D(filterSampler, vFilterCoord);\n   vec4 sample = texture2D(uSampler, vTextureCoord);\n   vec4 color;\n   if(mod(vFilterCoord.x, 1.0) > 0.5)\n   {\n     color = vec4(1.0, 0.0, 0.0, 1.0);\n   }\n   else\n   {\n     color = vec4(0.0, 1.0, 0.0, 1.0);\n   }\n   gl_FragColor = mix(sample, masky, 0.5);\n   gl_FragColor *= sample.a;\n}"}}]);
return a}();c.default=a},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(a,b,c){function d(a){var b=/^(projectionMatrix|uSampler|filterArea|filterClamp)$/,c={},f=void 0;a=a.replace(/\s+/g," ").split(/\s*;\s*/);for(var d=0;d<a.length;d++)if(f=a[d].trim(),-1<f.indexOf("uniform")){var f=f.split(" "),n=f[1],p=f[2],r=1;-1<p.indexOf("[")&&(f=p.split(/\[|]/),p=f[0],r*=Number(f[1]));p.match(b)||(c[p]={value:e(n,r),name:p,type:n})}return c}c.__esModule=
!0;c.default=function(a,b,c){a=d(a,c);b=d(b,c);return Object.assign(a,b)};a=a("pixi-gl-core");var e=(a&&a.__esModule?a:{"default":a}).default.shader.defaultValue},{"pixi-gl-core":15}],88:[function(a,b,c){c.__esModule=!0;c.calculateScreenSpaceMatrix=function(a,b,c){a=a.identity();a.translate(b.x/c.width,b.y/c.height);a.scale(c.width,c.height);return a};c.calculateNormalizedScreenSpaceMatrix=function(a,b,c){a=a.identity();a.translate(b.x/c.width,b.y/c.height);a.scale(c.width/b.width,c.height/b.height);
return a};c.calculateSpriteMatrix=function(a,b,c,k){var f=k._texture.orig;a=a.set(c.width,0,0,c.height,b.x,b.y);b=k.worldTransform.copy(d.Matrix.TEMP_MATRIX);b.invert();a.prepend(b);a.scale(1/f.width,1/f.height);a.translate(k.anchor.x,k.anchor.y);return a};var d=a("../../../math")},{"../../../math":70}],89:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;b=(b=a("../Filter"))&&b.__esModule?b:{"default":b};var e=a("../../../../math");a("path");var g=(a=a("../../../../textures/TextureMatrix"))&&a.__esModule?a:{"default":a};a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d=new e.Matrix,g;g=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",
"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n");
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=g&&("object"===typeof g||"function"===typeof g)?g:this;c.renderable=!1;g.maskSprite=c;g.maskMatrix=d;return g}d(b,a);b.prototype.apply=function(a,b,c){var d=this.maskSprite,e=this.maskSprite.texture;e.valid&&(e.transform||(e.transform=new g.default(e,0)),e.transform.update(),this.uniforms.mask=e,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,d).prepend(e.transform.mapCoord),this.uniforms.alpha=
d.worldAlpha,this.uniforms.maskClamp=e.transform.uClampFrame,a.applyFilter(this,b,c))};return b}(b.default);c.default=a},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:8}],90:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}c.__esModule=!0;b=a("./WebGLManager");b=d(b);var l=a("../utils/RenderTarget"),k=d(l),l=a("../utils/Quad"),f=d(l),m=a("../../../math"),l=a("../../../Shader"),n=d(l),p=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../filters/filterTransforms"));
a=a("bit-twiddle");var r=d(a),q=function s(){g(this,s);this.renderTarget=null;this.sourceFrame=new m.Rectangle;this.destinationFrame=new m.Rectangle;this.filters=[];this.target=null;this.resolution=1};a=function(a){function b(c){g(this,b);var d;d=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=d&&("object"===typeof d||"function"===typeof d)?d:this;d.gl=d.renderer.gl;d.quad=new f.default(d.gl,c.state.attribState);d.shaderCache={};d.pool=
{};d.filterData=null;d.managedFilters=[];d.renderer.on("prerender",d.onPrerender,d);d._screenWidth=c.view.width;d._screenHeight=c.view.height;return d}e(b,a);b.prototype.pushFilter=function(a,b){var c=this.renderer,f=this.filterData;if(!f){var d=new q;d.sourceFrame=d.destinationFrame=this.renderer._activeRenderTarget.size;d.renderTarget=c._activeRenderTarget;this.filterData=this.renderer._activeRenderTarget.filterData=f={index:0,stack:[d]}}var d=f.stack[++f.index],e=f.stack[0].destinationFrame;d||
(d=f.stack[f.index]=new q);var k=a.filterArea&&0===a.filterArea.x&&0===a.filterArea.y&&a.filterArea.width===c.screen.width&&a.filterArea.height===c.screen.height,m=b[0].resolution,g=b[0].padding|0,n=k?c.screen:a.filterArea||a.getBounds(!0),l=d.sourceFrame,p=d.destinationFrame;l.x=(n.x*m|0)/m;l.y=(n.y*m|0)/m;l.width=(n.width*m|0)/m;l.height=(n.height*m|0)/m;k||(f.stack[0].renderTarget.transform||b[0].autoFit&&l.fit(e),l.pad(g));p.width=l.width;p.height=l.height;f=this.getPotRenderTarget(c.gl,l.width,
l.height,m);d.target=a;d.filters=b;d.resolution=m;d.renderTarget=f;f.setFrame(p,l);c.bindRenderTarget(f);f.clear()};b.prototype.popFilter=function(){var a=this.filterData,b=a.stack[a.index-1],c=a.stack[a.index];this.quad.map(c.renderTarget.size,c.sourceFrame).upload();var f=c.filters;if(1===f.length)f[0].apply(this,c.renderTarget,b.renderTarget,!1,c),this.freePotRenderTarget(c.renderTarget);else{var d=c.renderTarget,e=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,c.sourceFrame.height,
c.resolution);e.setFrame(c.destinationFrame,c.sourceFrame);e.clear();for(var k=0,k=0;k<f.length-1;++k){f[k].apply(this,d,e,!0,c);var m=d,d=e,e=m}f[k].apply(this,d,b.renderTarget,!1,c);this.freePotRenderTarget(d);this.freePotRenderTarget(e)}a.index--;0===a.index&&(this.filterData=null)};b.prototype.applyFilter=function(a,b,c,f){var d=this.renderer,e=d.gl,k=a.glShaders[d.CONTEXT_UID];k||(a.glShaderKey?(k=this.shaderCache[a.glShaderKey],k||(k=new n.default(this.gl,a.vertexSrc,a.fragmentSrc),a.glShaders[d.CONTEXT_UID]=
this.shaderCache[a.glShaderKey]=k,this.managedFilters.push(a))):(k=a.glShaders[d.CONTEXT_UID]=new n.default(this.gl,a.vertexSrc,a.fragmentSrc),this.managedFilters.push(a)),d.bindVao(null),this.quad.initVao(k));d.bindVao(this.quad.vao);d.bindRenderTarget(c);f&&(e.disable(e.SCISSOR_TEST),d.clear(),e.enable(e.SCISSOR_TEST));c===d.maskManager.scissorRenderTarget&&d.maskManager.pushScissorMask(null,d.maskManager.scissorData);d.bindShader(k);c=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=
c;this.syncUniforms(k,a);d.state.setBlendMode(a.blendMode);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,b.texture.texture);this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0);e.bindTexture(e.TEXTURE_2D,c._glTextures[this.renderer.CONTEXT_UID].texture)};b.prototype.syncUniforms=function(a,b){var c=b.uniformData,f=b.uniforms,d=1,e=void 0;if(a.uniforms.filterArea){var e=this.filterData.stack[this.filterData.index],k=a.uniforms.filterArea;k[0]=e.renderTarget.size.width;k[1]=e.renderTarget.size.height;
k[2]=e.sourceFrame.x;k[3]=e.sourceFrame.y;a.uniforms.filterArea=k}a.uniforms.filterClamp&&(e=e||this.filterData.stack[this.filterData.index],k=a.uniforms.filterClamp,k[0]=0,k[1]=0,k[2]=(e.sourceFrame.width-1)/e.renderTarget.size.width,k[3]=(e.sourceFrame.height-1)/e.renderTarget.size.height,a.uniforms.filterClamp=k);for(var m in c)e=c[m].type,"sampler2d"===e&&0!==f[m]?(f[m].baseTexture?a.uniforms[m]=this.renderer.bindTexture(f[m].baseTexture,d):(a.uniforms[m]=d,e=this.renderer.gl,this.renderer.boundTextures[d]=
this.renderer.emptyTextures[d],e.activeTexture(e.TEXTURE0+d),f[m].texture.bind()),d++):"mat3"===e?a.uniforms[m]=void 0!==f[m].a?f[m].toArray(!0):f[m]:"vec2"===e?void 0!==f[m].x?(e=a.uniforms[m]||new Float32Array(2),e[0]=f[m].x,e[1]=f[m].y,a.uniforms[m]=e):a.uniforms[m]=f[m]:"float"===e?a.uniforms.data[m].value!==c[m]&&(a.uniforms[m]=f[m]):a.uniforms[m]=f[m]};b.prototype.getRenderTarget=function(a,b){var c=this.filterData.stack[this.filterData.index],f=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,
c.sourceFrame.height,b||c.resolution);f.setFrame(c.destinationFrame,c.sourceFrame);return f};b.prototype.returnRenderTarget=function(a){this.freePotRenderTarget(a)};b.prototype.calculateScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return p.calculateScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size)};b.prototype.calculateNormalizedScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return p.calculateNormalizedScreenSpaceMatrix(a,
b.sourceFrame,b.renderTarget.size,b.destinationFrame)};b.prototype.calculateSpriteMatrix=function(a,b){var c=this.filterData.stack[this.filterData.index];return p.calculateSpriteMatrix(a,c.sourceFrame,c.renderTarget.size,b)};b.prototype.destroy=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,b=this.renderer,c=this.managedFilters;b.off("prerender",this.onPrerender,this);for(var f=0;f<c.length;f++)a||c[f].glShaders[b.CONTEXT_UID].destroy(),delete c[f].glShaders[b.CONTEXT_UID];
this.shaderCache={};a?this.pool={}:this.emptyPool()};b.prototype.getPotRenderTarget=function(a,b,c,f){var d="screen";b*=f;c*=f;if(b!==this._screenWidth||c!==this._screenHeight)b=r.default.nextPow2(b),c=r.default.nextPow2(c),d=(b&65535)<<16|c&65535;this.pool[d]||(this.pool[d]=[]);d=this.pool[d].pop();if(!d){var e=this.renderer.boundTextures[0];a.activeTexture(a.TEXTURE0);d=new k.default(a,b,c,null,1);a.bindTexture(a.TEXTURE_2D,e._glTextures[this.renderer.CONTEXT_UID].texture)}d.resolution=f;d.defaultFrame.width=
d.size.width=b/f;d.defaultFrame.height=d.size.height=c/f;return d};b.prototype.emptyPool=function(){for(var a in this.pool){var b=this.pool[a];if(b)for(var c=0;c<b.length;c++)b[c].destroy(!0)}this.pool={}};b.prototype.freePotRenderTarget=function(a){var b=a.size.width*a.resolution,c=a.size.height*a.resolution,f="screen";if(b!==this._screenWidth||c!==this._screenHeight)f=(b&65535)<<16|c&65535;this.pool[f].push(a)};b.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||
this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width;this._screenHeight=this.renderer.view.height;var a=this.pool.screen;if(a)for(var b=0;b<a.length;b++)a[b].destroy(!0);this.pool.screen=[]}};return b}(b.default);c.default=a},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;b=(b=a("./WebGLManager"))&&b.__esModule?b:{"default":b};var e=(a=a("../filters/spriteMask/SpriteMaskFilter"))&&a.__esModule?a:{"default":a};a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.scissor=!1;c.scissorData=null;c.scissorRenderTarget=null;c.enableScissor=!0;c.alphaMaskPool=[];c.alphaMaskIndex=0;return c}d(b,a);b.prototype.pushMask=function(a,b){if(b.texture)this.pushSpriteMask(a,b);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&b.isFastRect()){var c=b.worldTransform,c=Math.atan2(c.b,c.a),c=Math.round(c*(180/Math.PI));c%90?this.pushStencilMask(b):
this.pushScissorMask(a,b)}else this.pushStencilMask(b)};b.prototype.popMask=function(a,b){b.texture?this.popSpriteMask(a,b):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(a,b):this.popStencilMask(a,b)};b.prototype.pushSpriteMask=function(a,b){var c=this.alphaMaskPool[this.alphaMaskIndex];c||(c=this.alphaMaskPool[this.alphaMaskIndex]=[new e.default(b)]);c[0].resolution=this.renderer.resolution;c[0].maskSprite=b;a.filterArea=b.getBounds(!0);this.renderer.filterManager.pushFilter(a,
c);this.alphaMaskIndex++};b.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter();this.alphaMaskIndex--};b.prototype.pushStencilMask=function(a){this.renderer.currentRenderer.stop();this.renderer.stencilManager.pushStencil(a)};b.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop();this.renderer.stencilManager.popStencil()};b.prototype.pushScissorMask=function(a,b){b.renderable=!0;var c=this.renderer._activeRenderTarget,d=b.getBounds();d.fit(c.size);b.renderable=
!1;this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var e=this.renderer.resolution;this.renderer.gl.scissor(d.x*e,(c.root?c.size.height-d.y-d.height:d.y)*e,d.width*e,d.height*e);this.scissorRenderTarget=c;this.scissorData=b;this.scissor=!0};b.prototype.popScissorMask=function(){this.scissorData=this.scissorRenderTarget=null;this.scissor=!1;var a=this.renderer.gl;a.disable(a.SCISSOR_TEST)};return b}(b.default);c.default=a},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(a,
b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=(a=a("./WebGLManager"))&&a.__esModule?a:{"default":a};a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.stencilMaskStack=null;return c}d(b,a);b.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var b=this.renderer.gl;0===a.length?b.disable(b.STENCIL_TEST):b.enable(b.STENCIL_TEST)};b.prototype.pushStencil=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);this.renderer._activeRenderTarget.attachStencilBuffer();
var b=this.renderer.gl,c=this.stencilMaskStack.length;0===c&&b.enable(b.STENCIL_TEST);this.stencilMaskStack.push(a);b.colorMask(!1,!1,!1,!1);b.stencilFunc(b.EQUAL,c,this._getBitwiseMask());b.stencilOp(b.KEEP,b.KEEP,b.INCR);this.renderer.plugins.graphics.render(a);this._useCurrent()};b.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var a=this.renderer.gl,b=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(a.disable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT),
a.clearStencil(0)):(a.colorMask(!1,!1,!1,!1),a.stencilOp(a.KEEP,a.KEEP,a.DECR),this.renderer.plugins.graphics.render(b),this._useCurrent())};b.prototype._useCurrent=function(){var a=this.renderer.gl;a.colorMask(!0,!0,!0,!0);a.stencilFunc(a.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask());a.stencilOp(a.KEEP,a.KEEP,a.KEEP)};b.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1};b.prototype.destroy=function(){e.default.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=
null};return b}(e.default);c.default=a},{"./WebGLManager":93}],93:[function(a,b,c){c.__esModule=!0;a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=b;this.renderer.on("context",this.onContextChange,this)}a.prototype.onContextChange=function(){};a.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this);this.renderer=null};return a}();c.default=a},{}],94:[function(a,b,c){function d(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;a=a("../managers/WebGLManager");a=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var c=a.apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return c&&("object"===typeof c||"function"===typeof c)?c:this}d(b,a);b.prototype.start=function(){};b.prototype.stop=function(){this.flush()};b.prototype.flush=function(){};b.prototype.render=function(a){};return b}((a&&a.__esModule?a:{"default":a}).default);c.default=a},{"../managers/WebGLManager":93}],95:[function(a,b,c){c.__esModule=!0;var d=(b=a("pixi-gl-core"))&&b.__esModule?b:{"default":b},e=(a=a("../../../utils/createIndicesForQuads"))&&a.__esModule?a:{"default":a};a=function(){function a(b,
c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.gl=b;this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.interleaved=new Float32Array(16);for(var f=0;4>f;f++)this.interleaved[4*f]=this.vertices[2*f],this.interleaved[4*f+1]=this.vertices[2*f+1],this.interleaved[4*f+2]=this.uvs[2*f],this.interleaved[4*f+3]=this.uvs[2*f+1];this.indices=(0,e.default)(1);this.vertexBuffer=d.default.GLBuffer.createVertexBuffer(b,
this.interleaved,b.STATIC_DRAW);this.indexBuffer=d.default.GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW);this.vao=new d.default.VertexArrayObject(b,c)}a.prototype.initVao=function(a){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,a.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,a.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)};a.prototype.map=function(a,b){var c=0,d=0;this.uvs[0]=c;this.uvs[1]=d;this.uvs[2]=c+b.width/a.width;
this.uvs[3]=d;this.uvs[4]=c+b.width/a.width;this.uvs[5]=d+b.height/a.height;this.uvs[6]=c;this.uvs[7]=d+b.height/a.height;c=b.x;d=b.y;this.vertices[0]=c;this.vertices[1]=d;this.vertices[2]=c+b.width;this.vertices[3]=d;this.vertices[4]=c+b.width;this.vertices[5]=d+b.height;this.vertices[6]=c;this.vertices[7]=d+b.height;return this};a.prototype.upload=function(){for(var a=0;4>a;a++)this.interleaved[4*a]=this.vertices[2*a],this.interleaved[4*a+1]=this.vertices[2*a+1],this.interleaved[4*a+2]=this.uvs[2*
a],this.interleaved[4*a+3]=this.uvs[2*a+1];this.vertexBuffer.upload(this.interleaved);return this};a.prototype.destroy=function(){var a=this.gl;a.deleteBuffer(this.vertexBuffer);a.deleteBuffer(this.indexBuffer)};return a}();c.default=a},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":15}],96:[function(a,b,c){c.__esModule=!0;var d=a("../../../math"),e=a("../../../const"),g=(b=a("../../../settings"))&&b.__esModule?b:{"default":b},l=a("pixi-gl-core");a=function(){function a(b,c,n,p,r,q){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this.gl=b;this.texture=this.frameBuffer=null;this.clearColor=[0,0,0,0];this.size=new d.Rectangle(0,0,1,1);this.resolution=r||g.default.RESOLUTION;this.projectionMatrix=new d.Matrix;this.frame=this.transform=null;this.defaultFrame=new d.Rectangle;this.stencilBuffer=this.sourceFrame=this.destinationFrame=null;this.stencilMaskStack=[];this.filterData=null;this.scaleMode=void 0!==p?p:g.default.SCALE_MODE;(this.root=q)?(this.frameBuffer=new l.GLFramebuffer(b,
100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(b,100,100),this.scaleMode===e.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture);this.setFrame();this.resize(c,n)}a.prototype.clear=function(a){a=a||this.clearColor;this.frameBuffer.clear(a[0],a[1],a[2],a[3])};a.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()};a.prototype.setFrame=
function(a,b){this.destinationFrame=a||this.destinationFrame||this.defaultFrame;this.sourceFrame=b||this.sourceFrame||this.destinationFrame};a.prototype.activate=function(){var a=this.gl;this.frameBuffer.bind();this.calculateProjection(this.destinationFrame,this.sourceFrame);this.transform&&this.projectionMatrix.append(this.transform);this.destinationFrame!==this.sourceFrame?(a.enable(a.SCISSOR_TEST),a.scissor(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|
0,this.destinationFrame.height*this.resolution|0)):a.disable(a.SCISSOR_TEST);a.viewport(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)};a.prototype.calculateProjection=function(a,b){var c=this.projectionMatrix;b=b||a;c.identity();this.root?(c.a=2*(1/a.width),c.d=2*(-1/a.height),c.tx=-1-b.x*c.a,c.ty=1-b.y*c.d):(c.a=2*(1/a.width),c.d=2*(1/a.height),c.tx=-1-b.x*c.a,c.ty=-1-b.y*c.d)};a.prototype.resize=
function(a,b){a|=0;b|=0;this.size.width===a&&this.size.height===b||(this.size.width=a,this.size.height=b,this.defaultFrame.width=a,this.defaultFrame.height=b,this.frameBuffer.resize(a*this.resolution,b*this.resolution),this.calculateProjection(this.frame||this.size))};a.prototype.destroy=function(){this.frameBuffer.destroy();this.texture=this.frameBuffer=null};return a}();c.default=a},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":15}],97:[function(a,b,c){function d(a){for(var b=
"",c=0;c<a;++c)0<c&&(b+="\nelse "),c<a-1&&(b+="if(test == "+c+".0){}");return b}c.__esModule=!0;c.default=function(a,b){var c=!b;if(0===a)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(c){var m=document.createElement("canvas");m.width=1;m.height=1;b=e.default.createContext(m)}for(m=b.createShader(b.FRAGMENT_SHADER);;){var n=g.replace(/%forloop%/gi,d(a));b.shaderSource(m,n);b.compileShader(m);if(b.getShaderParameter(m,b.COMPILE_STATUS))break;else a=a/2|0}c&&b.getExtension("WEBGL_lose_context")&&
b.getExtension("WEBGL_lose_context").loseContext();return a};var e=(a=a("pixi-gl-core"))&&a.__esModule?a:{"default":a},g="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}"},{"pixi-gl-core":15}],98:[function(a,b,c){c.__esModule=!0;c.default=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];b[d.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA];b[d.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,
a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR];b[d.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.DIFFERENCE]=
[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.NORMAL_NPM]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA];b[d.BLEND_MODES.ADD_NPM]=[a.SRC_ALPHA,a.DST_ALPHA,a.ONE,a.DST_ALPHA];b[d.BLEND_MODES.SCREEN_NPM]=[a.SRC_ALPHA,
a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_COLOR];return b};var d=a("../../../const")},{"../../../const":46}],99:[function(a,b,c){c.__esModule=!0;c.default=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};b[d.DRAW_MODES.POINTS]=a.POINTS;b[d.DRAW_MODES.LINES]=a.LINES;b[d.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP;b[d.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP;b[d.DRAW_MODES.TRIANGLES]=a.TRIANGLES;b[d.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP;b[d.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN;
return b};var d=a("../../../const")},{"../../../const":46}],100:[function(a,b,c){c.__esModule=!0;c.default=function(a){a.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(a,b,c){c.__esModule=!0;b=(b=a("./utils/maxRecommendedTextures"))&&b.__esModule?b:{"default":b};a=(a=a("./utils/canUploadSameBuffer"))&&a.__esModule?a:{"default":a};c.default={TARGET_FPMS:0.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,
SPRITE_MAX_TEXTURES:(0,b.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,a.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":122,
"./utils/maxRecommendedTextures":127}],102:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}(),g=a("../math"),l=a("../utils"),k=a("../const"),f=(b=a("../textures/Texture"))&&b.__esModule?b:{"default":b};a=(a=a("../display/Container"))&&a.__esModule?a:{"default":a};var m=new g.Point;a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d;d=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
d=d&&("object"===typeof d||"function"===typeof d)?d:this;d._anchor=new g.ObservablePoint(d._onAnchorUpdate,d);d._texture=null;d._width=0;d._height=0;d._tint=null;d._tintRGB=null;d.tint=16777215;d.blendMode=k.BLEND_MODES.NORMAL;d.shader=null;d.cachedTint=16777215;d.texture=c||f.default.EMPTY;d.vertexData=new Float32Array(8);d.vertexTrimmedData=null;d._transformID=-1;d._textureID=-1;d._transformTrimmedID=-1;d._textureTrimmedID=-1;d.pluginName="sprite";return d}d(b,a);b.prototype._onTextureUpdate=function(){this._textureTrimmedID=
this._textureID=-1;this.cachedTint=16777215;this._width&&(this.scale.x=(0,l.sign)(this.scale.x)*this._width/this._texture.orig.width);this._height&&(this.scale.y=(0,l.sign)(this.scale.y)*this._height/this._texture.orig.height)};b.prototype._onAnchorUpdate=function(){this._transformTrimmedID=this._transformID=-1};b.prototype.calculateVertices=function(){if(!(this._transformID===this.transform._worldID&&this._textureID===this._texture._updateID)){this._transformID=this.transform._worldID;this._textureID=
this._texture._updateID;var a=this._texture,b=this.transform.worldTransform,c=b.a,d=b.b,f=b.c,e=b.d,k=b.tx,b=b.ty,m=this.vertexData,g=a.trim,a=a.orig,n=this._anchor,l=0,p=0,F=0,D=0;g?(p=g.x-n._x*a.width,l=p+g.width,D=g.y-n._y*a.height,F=D+g.height):(p=-n._x*a.width,l=p+a.width,D=-n._y*a.height,F=D+a.height);m[0]=c*p+f*D+k;m[1]=e*D+d*p+b;m[2]=c*l+f*D+k;m[3]=e*D+d*l+b;m[4]=c*l+f*F+k;m[5]=e*F+d*l+b;m[6]=c*p+f*F+k;m[7]=e*F+d*p+b}};b.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===
this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID;this._textureTrimmedID=this._texture._updateID;var a=this.vertexTrimmedData,b=this._texture.orig,c=this._anchor,d=this.transform.worldTransform,f=d.a,e=d.b,k=d.c,m=d.d,g=d.tx,d=d.ty,n=-c._x*b.width,l=n+b.width,c=-c._y*b.height,b=c+b.height;a[0]=f*n+k*c+g;a[1]=m*c+e*n+d;a[2]=f*l+k*c+g;a[3]=m*c+e*l+d;a[4]=f*l+k*b+g;a[5]=m*b+
e*l+d;a[6]=f*n+k*b+g;a[7]=m*b+e*n+d};b.prototype._renderWebGL=function(a){this.calculateVertices();a.setObjectRenderer(a.plugins[this.pluginName]);a.plugins[this.pluginName].render(this)};b.prototype._renderCanvas=function(a){a.plugins[this.pluginName].render(this)};b.prototype._calculateBounds=function(){var a=this._texture.trim,b=this._texture.orig;!a||a.width===b.width&&a.height===b.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))};
b.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),b||(this._localBoundsRect||(this._localBoundsRect=new g.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)};b.prototype.containsPoint=
function(a){this.worldTransform.applyInverse(a,m);a=this._texture.orig.width;var b=this._texture.orig.height,c=-a*this.anchor.x,d=0;return m.x>=c&&m.x<c+a&&(d=-b*this.anchor.y,m.y>=d&&m.y<d+b)?!0:!1};b.prototype.destroy=function(b){a.prototype.destroy.call(this,b);this._anchor=null;if("boolean"===typeof b?b:b&&b.texture)this._texture.destroy(!!("boolean"===typeof b?b:b&&b.baseTexture));this.shader=this._texture=null};b.from=function(a){return new b(f.default.from(a))};b.fromFrame=function(a){var c=
l.TextureCache[a];if(!c)throw Error('The frameId "'+a+'" does not exist in the texture cache');return new b(c)};b.fromImage=function(a,c,d){return new b(f.default.fromImage(a,c,d))};e(b,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(a){var b=(0,l.sign)(this.scale.x)||1;this.scale.x=b*a/this._texture.orig.width;this._width=a}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){var b=(0,l.sign)(this.scale.y)||
1;this.scale.y=b*a/this._texture.orig.height;this._height=a}},{key:"anchor",get:function(){return this._anchor},set:function(a){this._anchor.copy(a)}},{key:"tint",get:function(){return this._tint},set:function(a){this._tint=a;this._tintRGB=(a>>16)+(a&65280)+((a&255)<<16)}},{key:"texture",get:function(){return this._texture},set:function(a){if(this._texture!==a&&(this._texture=a,this.cachedTint=16777215,this._textureTrimmedID=this._textureID=-1,a))if(a.baseTexture.hasLoaded)this._onTextureUpdate();
else a.once("update",this._onTextureUpdate,this)}}]);return b}(a.default);c.default=a},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(a,b,c){c.__esModule=!0;b=(b=a("../../renderers/canvas/CanvasRenderer"))&&b.__esModule?b:{"default":b};var d=a("../../const"),e=a("../../math"),g=(a=a("./CanvasTinter"))&&a.__esModule?a:{"default":a},l=new e.Matrix;a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.renderer=b}a.prototype.render=function(a){var b=a._texture,c=this.renderer,k=b._frame.width,r=b._frame.height,q=a.transform.worldTransform,t=0,s=0;if(!(0>=b.orig.width||0>=b.orig.height||!b.baseTexture.source))if(c.setBlendMode(a.blendMode),b.valid)if(c.context.globalAlpha=a.worldAlpha,t=b.baseTexture.scaleMode===d.SCALE_MODES.LINEAR,c.smoothProperty&&c.context[c.smoothProperty]!==t&&(c.context[c.smoothProperty]=t),b.trim?(t=b.trim.width/2+b.trim.x-a.anchor.x*b.orig.width,s=b.trim.height/2+b.trim.y-
a.anchor.y*b.orig.height):(t=(0.5-a.anchor.x)*b.orig.width,s=(0.5-a.anchor.y)*b.orig.height),b.rotate&&(q.copy(l),q=l,e.GroupD8.matrixAppendRotationInv(q,b.rotate,t,s),s=t=0),t-=k/2,s-=r/2,c.roundPixels?(c.context.setTransform(q.a,q.b,q.c,q.d,q.tx*c.resolution|0,q.ty*c.resolution|0),t|=0,s|=0):c.context.setTransform(q.a,q.b,q.c,q.d,q.tx*c.resolution,q.ty*c.resolution),q=b.baseTexture.resolution,16777215!==a.tint){if(a.cachedTint!==a.tint||a.tintedTexture.tintId!==a._texture._updateID)a.cachedTint=
a.tint,a.tintedTexture=g.default.getTintedTexture(a,a.tint);c.context.drawImage(a.tintedTexture,0,0,k*q,r*q,t*c.resolution,s*c.resolution,k*c.resolution,r*c.resolution)}else c.context.drawImage(b.baseTexture.source,b._frame.x*q,b._frame.y*q,k*q,r*q,t*c.resolution,s*c.resolution,k*c.resolution,r*c.resolution)};a.prototype.destroy=function(){this.renderer=null};return a}();c.default=a;b.default.registerPlugin("sprite",a)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,
"./CanvasTinter":104}],104:[function(a,b,c){c.__esModule=!0;var d=a("../../utils");a=(a=a("../../renderers/canvas/utils/canUseNewCanvasBlendModes"))&&a.__esModule?a:{"default":a};var e={getTintedTexture:function(a,b){var c=a._texture;b=e.roundColor(b);var d="#"+("00000"+(b|0).toString(16)).substr(-6);c.tintCache=c.tintCache||{};var m=c.tintCache[d],n=void 0;if(m){if(m.tintId===c._updateID)return c.tintCache[d];n=c.tintCache[d]}else n=e.canvas||document.createElement("canvas");e.tintMethod(c,b,n);
n.tintId=c._updateID;e.convertTintToImage?(m=new Image,m.src=n.toDataURL(),c.tintCache[d]=m):(c.tintCache[d]=n,e.canvas=null);return n},tintWithMultiply:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),n=a.baseTexture.resolution;e.x*=n;e.y*=n;e.width*=n;e.height*=n;c.width=Math.ceil(e.width);c.height=Math.ceil(e.height);d.save();d.fillStyle="#"+("00000"+(b|0).toString(16)).substr(-6);d.fillRect(0,0,e.width,e.height);d.globalCompositeOperation="multiply";d.drawImage(a.baseTexture.source,
e.x,e.y,e.width,e.height,0,0,e.width,e.height);d.globalCompositeOperation="destination-atop";d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height);d.restore()},tintWithOverlay:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),n=a.baseTexture.resolution;e.x*=n;e.y*=n;e.width*=n;e.height*=n;c.width=Math.ceil(e.width);c.height=Math.ceil(e.height);d.save();d.globalCompositeOperation="copy";d.fillStyle="#"+("00000"+(b|0).toString(16)).substr(-6);d.fillRect(0,0,e.width,
e.height);d.globalCompositeOperation="destination-atop";d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height);d.restore()},tintWithPerPixel:function(a,b,c){var f=c.getContext("2d"),e=a._frame.clone(),n=a.baseTexture.resolution;e.x*=n;e.y*=n;e.width*=n;e.height*=n;c.width=Math.ceil(e.width);c.height=Math.ceil(e.height);f.save();f.globalCompositeOperation="copy";f.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height);f.restore();c=(0,d.hex2rgb)(b);a=
c[0];b=c[1];c=c[2];for(var e=f.getImageData(0,0,e.width,e.height),n=e.data,p=0;p<n.length;p+=4)n[p+0]*=a,n[p+1]*=b,n[p+2]*=c;f.putImageData(e,0,0)},roundColor:function(a){var b=e.cacheStepsPerColorChannel;a=(0,d.hex2rgb)(a);a[0]=Math.min(255,a[0]/b*b);a[1]=Math.min(255,a[1]/b*b);a[2]=Math.min(255,a[2]/b*b);return(0,d.rgb2hex)(a)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,a.default)(),tintMethod:0};e.tintMethod=e.canUseMultiply?e.tintWithMultiply:e.tintWithPerPixel;c.default=
e},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(a,b,c){c.__esModule=!0;a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.vertices=new ArrayBuffer(b);this.float32View=new Float32Array(this.vertices);this.uint32View=new Uint32Array(this.vertices)}a.prototype.destroy=function(){this.colors=this.uvs=this.positions=this.vertices=null};return a}();c.default=a},{}],106:[function(a,b,c){function d(a){return a&&
a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;b=a("../../renderers/webgl/utils/ObjectRenderer");b=d(b);var g=a("../../renderers/webgl/WebGLRenderer"),g=d(g),l=a("../../utils/createIndicesForQuads"),
k=d(l),l=a("./generateMultiTextureShader"),f=d(l),l=a("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),m=d(l),l=a("./BatchBuffer"),n=d(l),l=a("../../settings"),p=d(l),r=a("../../utils"),l=a("pixi-gl-core"),q=d(l);a=a("bit-twiddle");var t=d(a),s=0,v=0;a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||
"function"===typeof c)?c:this;c.vertSize=5;c.vertByteSize=4*c.vertSize;c.size=p.default.SPRITE_BATCH_SIZE;c.buffers=[];for(var d=1;d<=t.default.nextPow2(c.size);d*=2)c.buffers.push(new n.default(4*d*c.vertByteSize));c.indices=(0,k.default)(c.size);c.shader=null;c.currentIndex=0;c.groups=[];for(d=0;d<c.size;d++)c.groups[d]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};c.sprites=[];c.vertexBuffers=[];c.vaos=[];c.vaoMax=2;c.vertexCount=0;c.renderer.on("prerender",c.onPrerender,c);return c}
e(b,a);b.prototype.onContextChange=function(){var a=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),p.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,m.default)(this.MAX_TEXTURES,a));this.shader=(0,f.default)(a,this.MAX_TEXTURES);this.indexBuffer=q.default.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW);this.renderer.bindVao(null);for(var b=this.shader.attributes,c=0;c<this.vaoMax;c++){var d=this.vertexBuffers[c]=
q.default.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),e=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(d,b.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(d,b.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(d,b.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12);b.aTextureId&&e.addAttribute(d,b.aTextureId,a.FLOAT,!1,this.vertByteSize,16);this.vaos[c]=e}this.vao=this.vaos[0];this.currentBlendMode=99999;this.boundTextures=Array(this.MAX_TEXTURES)};
b.prototype.onPrerender=function(){this.vertexCount=0};b.prototype.render=function(a){this.currentIndex>=this.size&&this.flush();a._texture._uvs&&(this.sprites[this.currentIndex++]=a)};b.prototype.flush=function(){if(0!==this.currentIndex){var a=this.renderer.gl,b=this.MAX_TEXTURES,c=t.default.nextPow2(this.currentIndex),c=t.default.log2(c),d=this.buffers[c],f=this.sprites,c=this.groups,e=d.float32View,k=d.uint32View,m=this.boundTextures,g=this.renderer.boundTextures,n=this.renderer.textureGC.count,
l=0,u=void 0,w=void 0,R=1,A=0,K=c[0],G=void 0,M=void 0,N=r.premultiplyBlendMode[f[0]._texture.baseTexture.premultipliedAlpha?1:0][f[0].blendMode];K.textureCount=0;K.start=0;K.blend=N;s++;for(var J=void 0,J=0;J<b;++J)u=g[J],u._enabled===s?m[J]=this.renderer.emptyTextures[J]:(m[J]=u,u._virtalBoundId=J,u._enabled=s);s++;for(J=0;J<this.currentIndex;++J){var P=f[J],u=P._texture.baseTexture,G=r.premultiplyBlendMode[Number(u.premultipliedAlpha)][P.blendMode];N!==G&&(N=G,w=null,A=b,s++);if(w!==u&&(w=u,u._enabled!==
s)){A===b&&(s++,K.size=J-K.start,A=0,K=c[R++],K.blend=N,K.textureCount=0,K.start=J);u.touched=n;if(-1===u._virtalBoundId)for(G=0;G<b;++G){var M=(G+v)%b,L=m[M];if(L._enabled!==s){v++;L._virtalBoundId=-1;u._virtalBoundId=M;m[M]=u;break}}u._enabled=s;K.textureCount++;K.ids[A]=u._virtalBoundId;K.textures[A++]=u}G=P.vertexData;M=P._texture._uvs.uvsUint32;this.renderer.roundPixels?(L=this.renderer.resolution,e[l]=(G[0]*L|0)/L,e[l+1]=(G[1]*L|0)/L,e[l+5]=(G[2]*L|0)/L,e[l+6]=(G[3]*L|0)/L,e[l+10]=(G[4]*L|0)/
L,e[l+11]=(G[5]*L|0)/L,e[l+15]=(G[6]*L|0)/L,e[l+16]=(G[7]*L|0)/L):(e[l]=G[0],e[l+1]=G[1],e[l+5]=G[2],e[l+6]=G[3],e[l+10]=G[4],e[l+11]=G[5],e[l+15]=G[6],e[l+16]=G[7]);k[l+2]=M[0];k[l+7]=M[1];k[l+12]=M[2];k[l+17]=M[3];G=Math.min(P.worldAlpha,1);P=1>G&&u.premultipliedAlpha?(0,r.premultiplyTint)(P._tintRGB,G):P._tintRGB+(255*G<<24);k[l+3]=k[l+8]=k[l+13]=k[l+18]=P;e[l+4]=e[l+9]=e[l+14]=e[l+19]=u._virtalBoundId;l+=20}K.size=J-K.start;p.default.CAN_UPLOAD_SAME_BUFFER?this.vertexBuffers[this.vertexCount].upload(d.vertices,
0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,w=this.shader.attributes,J=this.vertexBuffers[this.vertexCount]=q.default.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),f=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(J,w.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(J,w.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(J,w.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12),w.aTextureId&&f.addAttribute(J,w.aTextureId,a.FLOAT,!1,this.vertByteSize,
16),this.vaos[this.vertexCount]=f),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(d.vertices,0,!1),this.vertexCount++);for(J=0;J<b;++J)g[J]._virtalBoundId=-1;for(J=0;J<R;++J){b=c[J];d=b.textureCount;for(f=0;f<d;f++)w=b.textures[f],g[b.ids[f]]!==w&&this.renderer.bindTexture(w,b.ids[f],!0),w._virtalBoundId=-1;this.renderer.state.setBlendMode(b.blend);a.drawElements(a.TRIANGLES,6*b.size,a.UNSIGNED_SHORT,12*b.start)}this.currentIndex=0}};b.prototype.start=
function(){this.renderer.bindShader(this.shader);p.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())};b.prototype.stop=function(){this.flush()};b.prototype.destroy=function(){for(var b=0;b<this.vaoMax;b++)this.vertexBuffers[b]&&this.vertexBuffers[b].destroy(),this.vaos[b]&&this.vaos[b].destroy();this.indexBuffer&&this.indexBuffer.destroy();this.renderer.off("prerender",this.onPrerender,this);a.prototype.destroy.call(this);
this.shader&&(this.shader.destroy(),this.shader=null);this.sprites=this.indices=this.indexBuffer=this.vaos=this.vertexBuffers=null;for(b=0;b<this.buffers.length;++b)this.buffers[b].destroy()};return b}(b.default);c.default=a;g.default.registerPlugin("sprite",a)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,
"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":15}],107:[function(a,b,c){function d(a){var b;b="\n\n";for(var c=0;c<a;c++)0<c&&(b+="\nelse "),c<a-1&&(b+="if(textureId == "+c+".0)"),b+="\n{",b+="\n\tcolor = texture2D(uSamplers["+c+"], vTextureCoord);",b+="\n}";b+="\n";return b+="\n"}c.__esModule=!0;c.default=function(a,b){for(var c=g,c=c.replace(/%count%/gi,b),c=c.replace(/%forloop%/gi,d(b)),c=new e.default(a,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",
c),m=[],n=0;n<b;n++)m[n]=n;c.bind();c.uniforms.uSamplers=m;return c};var e=(b=a("../../Shader"))&&b.__esModule?b:{"default":b};a("path");var g="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\nvoid main(void){\nvec4 color;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor = color * vColor;\n}"},{"../../Shader":44,path:8}],108:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,
c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();b=a("../sprites/Sprite");b=d(b);var l=a("../textures/Texture"),k=d(l),f=a("../math"),m=a("../utils"),n=a("../const"),l=a("../settings"),p=d(l),l=a("./TextStyle"),r=d(l),l=a("./TextMetrics"),q=d(l);a=a("../utils/trimCanvas");var t=d(a),s={texture:!0,children:!1,baseTexture:!0};a=function(a){function b(c,d,e){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");e=e||document.createElement("canvas");e.width=3;e.height=3;var m=
k.default.fromCanvas(e,p.default.SCALE_MODE,"text");m.orig=new f.Rectangle;m.trim=new f.Rectangle;m=a.call(this,m);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");m=m&&("object"===typeof m||"function"===typeof m)?m:this;k.default.addToCache(m._texture,m._texture.baseTexture.textureCacheIds[0]);m.canvas=e;m.context=m.canvas.getContext("2d");m.resolution=p.default.RESOLUTION;m._text=null;m._style=null;m._styleListener=null;m._font="";m.text=c;m.style=d;
m.localStyleID=-1;return m}e(b,a);b.prototype.updateText=function(a){var b=this._style;this.localStyleID!==b.styleID&&(this.dirty=!0,this.localStyleID=b.styleID);if(this.dirty||!a){this._font=this._style.toFontString();var c=this.context,d=q.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),f=d.height;a=d.lines;var e=d.lineHeight,k=d.lineWidths,m=d.maxLineWidth,g=d.fontProperties;this.canvas.width=Math.ceil((Math.max(1,d.width)+2*b.padding)*this.resolution);this.canvas.height=
Math.ceil((Math.max(1,f)+2*b.padding)*this.resolution);c.scale(this.resolution,this.resolution);c.clearRect(0,0,this.canvas.width,this.canvas.height);c.font=this._font;c.strokeStyle=b.stroke;c.lineWidth=b.strokeThickness;c.textBaseline=b.textBaseline;c.lineJoin=b.lineJoin;c.miterLimit=b.miterLimit;f=d=void 0;if(b.dropShadow){c.fillStyle=b.dropShadowColor;c.globalAlpha=b.dropShadowAlpha;c.shadowBlur=b.dropShadowBlur;0<b.dropShadowBlur&&(c.shadowColor=b.dropShadowColor);for(var n=Math.cos(b.dropShadowAngle)*
b.dropShadowDistance,l=Math.sin(b.dropShadowAngle)*b.dropShadowDistance,p=0;p<a.length;p++)d=b.strokeThickness/2,f=b.strokeThickness/2+p*e+g.ascent,"right"===b.align?d+=m-k[p]:"center"===b.align&&(d+=(m-k[p])/2),b.fill&&(this.drawLetterSpacing(a[p],d+n+b.padding,f+l+b.padding),b.stroke&&b.strokeThickness&&(c.strokeStyle=b.dropShadowColor,this.drawLetterSpacing(a[p],d+n+b.padding,f+l+b.padding,!0),c.strokeStyle=b.stroke))}c.shadowBlur=0;c.globalAlpha=1;c.fillStyle=this._generateFillStyle(b,a);for(c=
0;c<a.length;c++)d=b.strokeThickness/2,f=b.strokeThickness/2+c*e+g.ascent,"right"===b.align?d+=m-k[c]:"center"===b.align&&(d+=(m-k[c])/2),b.stroke&&b.strokeThickness&&this.drawLetterSpacing(a[c],d+b.padding,f+b.padding,!0),b.fill&&this.drawLetterSpacing(a[c],d+b.padding,f+b.padding);this.updateTexture()}};b.prototype.drawLetterSpacing=function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,f=this._style.letterSpacing;if(0===f)d?this.context.strokeText(a,b,c):this.context.fillText(a,
b,c);else for(var e=String.prototype.split.call(a,""),k=b,m=0,g="";m<a.length;)g=e[m++],d?this.context.strokeText(g,k,c):this.context.fillText(g,k,c),k+=this.context.measureText(g).width+f};b.prototype.updateTexture=function(){var a=this.canvas;if(this._style.trim){var b=(0,t.default)(a);a.width=b.width;a.height=b.height;this.context.putImageData(b.data,0,0)}var b=this._texture,c=this._style,c=c.trim?0:c.padding,d=b.baseTexture;d.hasLoaded=!0;d.resolution=this.resolution;d.realWidth=a.width;d.realHeight=
a.height;d.width=a.width/this.resolution;d.height=a.height/this.resolution;b.trim.width=b._frame.width=a.width/this.resolution;b.trim.height=b._frame.height=a.height/this.resolution;b.trim.x=-c;b.trim.y=-c;b.orig.width=b._frame.width-2*c;b.orig.height=b._frame.height-2*c;this._onTextureUpdate();d.emit("update",d);this.dirty=!1};b.prototype.renderWebGL=function(b){this.resolution!==b.resolution&&(this.resolution=b.resolution,this.dirty=!0);this.updateText(!0);a.prototype.renderWebGL.call(this,b)};
b.prototype._renderCanvas=function(b){this.resolution!==b.resolution&&(this.resolution=b.resolution,this.dirty=!0);this.updateText(!0);a.prototype._renderCanvas.call(this,b)};b.prototype.getLocalBounds=function(b){this.updateText(!0);return a.prototype.getLocalBounds.call(this,b)};b.prototype._calculateBounds=function(){this.updateText(!0);this.calculateVertices();this._bounds.addQuad(this.vertexData)};b.prototype._onStyleChange=function(){this.dirty=!0};b.prototype._generateFillStyle=function(a,
b){if(!Array.isArray(a.fill))return a.fill;if(navigator.isCocoonJS)return a.fill[0];var c=void 0,d=void 0,f=void 0,e=void 0,c=this.canvas.width/this.resolution,d=this.canvas.height/this.resolution,k=a.fill.slice(),m=a.fillGradientStops.slice();if(!m.length){f=k.length+1;for(e=1;e<f;++e)m.push(e/f)}k.unshift(a.fill[0]);m.unshift(0);k.push(a.fill[a.fill.length-1]);m.push(1);if(a.fillGradientType===n.TEXT_GRADIENT.LINEAR_VERTICAL)for(var c=this.context.createLinearGradient(c/2,0,c/2,d),d=(k.length+1)*
b.length,g=f=0;g<b.length;g++)for(var f=f+1,l=0;l<k.length;l++)e="number"===typeof m[l]?m[l]/b.length+g/b.length:f/d,c.addColorStop(e,k[l]),f++;else{c=this.context.createLinearGradient(0,d/2,c,d/2);d=k.length+1;f=1;for(g=0;g<k.length;g++)e="number"===typeof m[g]?m[g]:f/d,c.addColorStop(e,k[g]),f++}return c};b.prototype.destroy=function(b){"boolean"===typeof b&&(b={children:b});b=Object.assign({},s,b);a.prototype.destroy.call(this,b);this._style=this.canvas=this.context=null};g(b,[{key:"width",get:function(){this.updateText(!0);
return Math.abs(this.scale.x)*this._texture.orig.width},set:function(a){this.updateText(!0);var b=(0,m.sign)(this.scale.x)||1;this.scale.x=b*a/this._texture.orig.width;this._width=a}},{key:"height",get:function(){this.updateText(!0);return Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){this.updateText(!0);var b=(0,m.sign)(this.scale.y)||1;this.scale.y=b*a/this._texture.orig.height;this._height=a}},{key:"style",get:function(){return this._style},set:function(a){a=a||{};this._style=
a instanceof r.default?a:new r.default(a);this.localStyleID=-1;this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(a){a=String(""===a||null===a||void 0===a?" ":a);this._text!==a&&(this._text=a,this.dirty=!0)}}]);return b}(b.default);c.default=a},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(a,b,c){c.__esModule=!0;a=function(){function a(b,
c,l,k,f,m,n,p,r){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.text=b;this.style=c;this.width=l;this.height=k;this.lines=f;this.lineWidths=m;this.lineHeight=n;this.maxLineWidth=p;this.fontProperties=r}a.measureText=function(b,c,l){var k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:a._canvas;l=l||c.wordWrap;var f=c.toFontString(),m=a.measureFont(f),n=k.getContext("2d");n.font=f;for(var k=(l?a.wordWrap(b,c,k):b).split(/(?:\r\n|\r|\n)/),f=Array(k.length),
p=c.wordWrap?c.wordWrapWidth:0,r=0;r<k.length;r++){var q=n.measureText(k[r]).width+(k[r].length-1)*c.letterSpacing;f[r]=q;p=Math.max(p,q)}n=p+c.strokeThickness;c.dropShadow&&(n+=c.dropShadowDistance);r=c.lineHeight||m.fontSize+c.strokeThickness;q=Math.max(r,m.fontSize+c.strokeThickness)+(k.length-1)*(r+c.leading);c.dropShadow&&(q+=c.dropShadowDistance);return new a(b,c,n,q,k,f,r+c.leading,p,m)};a.wordWrap=function(b,c){for(var l=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:a._canvas).getContext("2d"),
k="",f=0,m="",n={},p=c.letterSpacing,r=c.wordWrapWidth+c.letterSpacing,q=a.getFromCache(" ",p,n,l),t=b.split(" "),s=0;s<t.length;s++){var v=t[s],w=a.getFromCache(v,p,n,l);if(w>r)if(c.breakWords){v=(0<k.length?" "+v:v).split("");for(w=0;w<v.length;w++){var u=v[w],x=a.getFromCache(u,p,n,l);x+f>r&&(m+=a.addLine(k),k="",f=0);k+=u;f+=x}}else 0<k.length&&(m+=a.addLine(k)),m+=a.addLine(v),k="",f=0;else w+f>r&&(m+=a.addLine(k),k="",f=0),k=0<k.length?k+(" "+v):k+v,f+=w+q}return m+=a.addLine(k,!1)};a.addLine=
function(a){return a=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1)?a+"\n":a};a.getFromCache=function(a,b,c,d){var f=c[a];void 0===f&&(b*=a.length,f=d.measureText(a).width+b,c[a]=f);return f};a.measureFont=function(b){if(a._fonts[b])return a._fonts[b];var c={},l=a._canvas,k=a._context;k.font=b;var f=Math.ceil(k.measureText("|M\u00c9q").width),m=Math.ceil(k.measureText("M").width),n=2*m,m=1.4*m|0;l.width=f;l.height=n;k.fillStyle="#f00";k.fillRect(0,0,f,n);k.font=b;k.textBaseline="alphabetic";
k.fillStyle="#000";k.fillText("|M\u00c9q",0,m);for(var l=k.getImageData(0,0,f,n).data,k=l.length,f=4*f,p=0,r=0,q=!1,p=0;p<m;++p){for(var t=0;t<f;t+=4)if(255!==l[r+t]){q=!0;break}if(q)break;else r+=f}c.ascent=m-p;r=k-f;q=!1;for(p=n;p>m;--p){for(n=0;n<f;n+=4)if(255!==l[r+n]){q=!0;break}if(q)break;else r-=f}c.descent=p-m;c.fontSize=c.ascent+c.descent;return a._fonts[b]=c};return a}();c.default=a;c=document.createElement("canvas");c.width=c.height=10;a._canvas=c;a._context=c.getContext("2d");a._fonts=
{}},{}],110:[function(a,b,c){function d(a){if("number"===typeof a)return(0,k.hex2string)(a);"string"===typeof a&&0===a.indexOf("0x")&&(a=a.replace("0x","#"));return a}function e(a){if(Array.isArray(a)){for(var b=0;b<a.length;++b)a[b]=d(a[b]);return a}return d(a)}function g(a,b,c){for(var d in c)Array.isArray(b[d])?a[d]=b[d].slice():a[d]=b[d]}c.__esModule=!0;var l=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=
!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();b=a("../const");var k=a("../utils"),f={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:b.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",
miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0};a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.styleID=0;this.reset();g(this,b,b)}a.prototype.clone=function(){var b={};g(b,this,f);return new a(b)};a.prototype.reset=function(){g(this,f,f)};a.prototype.toFontString=function(){var a="number"===typeof this.fontSize?this.fontSize+"px":this.fontSize,b=this.fontFamily;
Array.isArray(this.fontFamily)||(b=this.fontFamily.split(","));for(var c=b.length-1;0<=c;c--){var d=b[c].trim();/([\"\'])[^\'\"]+\1/.test(d)||(d='"'+d+'"');b[c]=d}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+a+" "+b.join(",")};l(a,[{key:"align",get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.styleID++)}},
{key:"dropShadow",get:function(){return this._dropShadow},set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(a){this._dropShadowAlpha!==a&&(this._dropShadowAlpha=a,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},
set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=a,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(a){a=e(a);this._dropShadowColor!==a&&(this._dropShadowColor=a,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==a&&(this._dropShadowDistance=a,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(a){a=e(a);this._fill!==a&&(this._fill=
a,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(a){var b;a:if(b=this._fillGradientStops,!Array.isArray(b)||!Array.isArray(a)||b.length!==a.length)b=!1;else{for(var c=0;c<b.length;++c)if(b[c]!==a[c]){b=!1;break a}b=!0}b||(this._fillGradientStops=a,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},
set:function(a){this.fontFamily!==a&&(this._fontFamily=a,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},
set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=a,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(a){this._leading!==a&&(this._leading=a,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},
set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(a){a=e(a);this._stroke!==a&&(this._stroke=a,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},
set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(a){this._trim!==a&&(this._trim=a,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},
set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.styleID++)}}]);return a}();c.default=a},{"../const":46,"../utils":125}],111:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;b=(b=a("./BaseTexture"))&&
b.__esModule?b:{"default":b};var e=(a=a("../settings"))&&a.__esModule?a:{"default":a};a=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,m=arguments[2],n=arguments[3];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var p;p=a.call(this,null,m);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");p=p&&("object"===typeof p||"function"===
typeof p)?p:this;p.resolution=n||e.default.RESOLUTION;p.width=Math.ceil(c);p.height=Math.ceil(d);p.realWidth=p.width*p.resolution;p.realHeight=p.height*p.resolution;p.scaleMode=void 0!==m?m:e.default.SCALE_MODE;p.hasLoaded=!0;p._glRenderTargets={};p._canvasRenderTarget=null;p.valid=!1;return p}d(b,a);b.prototype.resize=function(a,b){a=Math.ceil(a);b=Math.ceil(b);a===this.width&&b===this.height||(this.valid=0<a&&0<b,this.width=a,this.height=b,this.realWidth=this.width*this.resolution,this.realHeight=
this.height*this.resolution,this.valid&&this.emit("update",this))};b.prototype.destroy=function(){a.prototype.destroy.call(this,!0);this.renderer=null};return b}(b.default);c.default=a},{"../settings":101,"./BaseTexture":112}],112:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../utils");b=a("../settings");var l=d(b);b=a("eventemitter3");b=d(b);var k=a("../utils/determineCrossOrigin"),f=d(k);a=a("bit-twiddle");var m=d(a);a=function(a){function b(c,d,f){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var e;e=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
e=e&&("object"===typeof e||"function"===typeof e)?e:this;e.uid=(0,g.uid)();e.touched=0;e.resolution=f||l.default.RESOLUTION;e.width=100;e.height=100;e.realWidth=100;e.realHeight=100;e.scaleMode=void 0!==d?d:l.default.SCALE_MODE;e.hasLoaded=!1;e.isLoading=!1;e.source=null;e.origSource=null;e.imageType=null;e.sourceScale=1;e.premultipliedAlpha=!0;e.imageUrl=null;e.isPowerOfTwo=!1;e.mipmap=l.default.MIPMAP_TEXTURES;e.wrapMode=l.default.WRAP_MODE;e._glTextures={};e._enabled=0;e._virtalBoundId=-1;e._destroyed=
!1;e.textureCacheIds=[];c&&e.loadSource(c);return e}e(b,a);b.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions());this.emit("update",this)};b.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=m.default.isPow2(this.realWidth)&&
m.default.isPow2(this.realHeight)};b.prototype.loadSource=function(a){var b=this.isLoading;this.isLoading=this.hasLoaded=!1;b&&this.source&&(this.source.onload=null,this.source.onerror=null);var c=!this.source;this.source=a;if((a.src&&a.complete||a.getContext)&&a.width&&a.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),c&&this.emit("loaded",this);else if(!a.getContext){this.isLoading=!0;var d=this;a.onload=function(){d._updateImageType();a.onload=null;
a.onerror=null;d.isLoading&&(d.isLoading=!1,d._sourceLoaded(),"svg"===d.imageType?d._loadSvgSource():d.emit("loaded",d))};a.onerror=function(){a.onload=null;a.onerror=null;d.isLoading&&(d.isLoading=!1,d.emit("error",d))};a.complete&&a.src&&(a.onload=null,a.onerror=null,"svg"===d.imageType?d._loadSvgSource():(this.isLoading=!1,a.width&&a.height?(this._sourceLoaded(),b&&this.emit("loaded",this)):b&&this.emit("error",this)))}};b.prototype._updateImageType=function(){if(this.imageUrl){var a=(0,g.decomposeDataUri)(this.imageUrl),
b=void 0;if(a&&"image"===a.mediaType){if(a=a.subType.split("+")[0],b=(0,g.getUrlFileExtension)("."+a),!b)throw Error("Invalid image type in data URI.");}else(b=(0,g.getUrlFileExtension)(this.imageUrl))||(b="png");this.imageType=b}};b.prototype._loadSvgSource=function(){if("svg"===this.imageType){var a=(0,g.decomposeDataUri)(this.imageUrl);a?this._loadSvgSourceUsingDataUri(a):this._loadSvgSourceUsingXhr()}};b.prototype._loadSvgSourceUsingDataUri=function(a){var b=void 0;if("base64"===a.encoding){if(!atob)throw Error("Your browser doesn't support base64 conversions.");
b=atob(a.data)}else b=a.data;this._loadSvgSourceUsingString(b)};b.prototype._loadSvgSourceUsingXhr=function(){var a=this,b=new XMLHttpRequest;b.onload=function(){if(b.readyState!==b.DONE||200!==b.status)throw Error("Failed to load SVG using XHR.");a._loadSvgSourceUsingString(b.response)};b.onerror=function(){return a.emit("error",a)};b.open("GET",this.imageUrl,!0);b.send()};b.prototype._loadSvgSourceUsingString=function(a){var c=(0,g.getSvgSize)(a);a=c.width;c=c.height;if(!a||!c)throw Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");
this.realWidth=Math.round(a*this.sourceScale);this.realHeight=Math.round(c*this.sourceScale);this._updateDimensions();var d=document.createElement("canvas");d.width=this.realWidth;d.height=this.realHeight;d._pixiId="canvas_"+(0,g.uid)();d.getContext("2d").drawImage(this.source,0,0,a,c,0,0,this.realWidth,this.realHeight);this.origSource=this.source;this.source=d;b.addToCache(this,d._pixiId);this.isLoading=!1;this._sourceLoaded();this.emit("loaded",this)};b.prototype._sourceLoaded=function(){this.hasLoaded=
!0;this.update()};b.prototype.destroy=function(){this.imageUrl&&(delete g.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src=""));this.source=null;this.dispose();b.removeFromCache(this);this.textureCacheIds=null;this._destroyed=!0};b.prototype.dispose=function(){this.emit("dispose",this)};b.prototype.updateSourceImage=function(a){this.source.src=a;this.loadSource(this.source)};b.fromImage=function(a,c,d,e){var k=g.BaseTextureCache[a];if(!k){var m=new Image;void 0===
c&&0!==a.indexOf("data:")?m.crossOrigin=(0,f.default)(a):c&&(m.crossOrigin="string"===typeof c?c:"anonymous");k=new b(m,d);k.imageUrl=a;e&&(k.sourceScale=e);k.resolution=(0,g.getResolutionOfUrl)(a);m.src=a;b.addToCache(k,a)}return k};b.fromCanvas=function(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";a._pixiId||(a._pixiId=d+"_"+(0,g.uid)());d=g.BaseTextureCache[a._pixiId];d||(d=new b(a,c),b.addToCache(d,a._pixiId));return d};b.from=function(a,c,d){if("string"===typeof a)return b.fromImage(a,
void 0,c,d);if(a instanceof HTMLImageElement){var f=a.src,e=g.BaseTextureCache[f];e||(e=new b(a,c),e.imageUrl=f,d&&(e.sourceScale=d),e.resolution=(0,g.getResolutionOfUrl)(f),b.addToCache(e,f));return e}return a instanceof HTMLCanvasElement?b.fromCanvas(a,c):a};b.addToCache=function(a,b){b&&(-1===a.textureCacheIds.indexOf(b)&&a.textureCacheIds.push(b),g.BaseTextureCache[b]&&console.warn("BaseTexture added to the cache with an id ["+b+"] that already had an entry"),g.BaseTextureCache[b]=a)};b.removeFromCache=
function(a){if("string"===typeof a){var b=g.BaseTextureCache[a];if(b){var c=b.textureCacheIds.indexOf(a);-1<c&&b.textureCacheIds.splice(c,1);delete g.BaseTextureCache[a];return b}}else if(a&&a.textureCacheIds){for(b=0;b<a.textureCacheIds.length;++b)delete g.BaseTextureCache[a.textureCacheIds[b]];a.textureCacheIds.length=0;return a}return null};return b}(b.default);c.default=a},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(a,b,
c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=(b=a("./BaseRenderTexture"))&&b.__esModule?b:{"default":b};a=a("./Texture");a=function(a){function b(c,d,m,n,p){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var r=null;if(!(c instanceof e.default)){var q=d;console.warn("Please use RenderTexture.create("+q+", "+m+") instead of the ctor directly.");r=c;d=null;c=new e.default(q,m,n,p)}c=a.call(this,c,d);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.legacyRenderer=r;c.valid=!0;c._updateUvs();return c}d(b,a);b.prototype.resize=function(a,b,c){a=Math.ceil(a);b=Math.ceil(b);this.valid=0<a&&0<b;this._frame.width=
this.orig.width=a;this._frame.height=this.orig.height=b;c||this.baseTexture.resize(a,b);this._updateUvs()};b.create=function(a,c,d,g){return new b(new e.default(a,c,d,g))};return b}((a&&a.__esModule?a:{"default":a}).default);c.default=a},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(a,b,c){c.__esModule=!0;var d=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}
return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),e=a("../"),g=a("../utils");a=function(){function a(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.baseTexture=b;this.textures={};this.data=c;this.resolution=this._updateResolution(d||this.baseTexture.imageUrl);this._frames=this.data.frames;this._frameKeys=Object.keys(this._frames);this._batchIndex=0;this._callback=null}d(a,
null,[{key:"BATCH_SIZE",get:function(){return 1E3}}]);a.prototype._updateResolution=function(a){var b=this.data.meta.scale;a=(0,g.getResolutionOfUrl)(a,null);null===a&&(a=void 0!==b?parseFloat(b):1);1!==a&&(this.baseTexture.resolution=a,this.baseTexture.update());return a};a.prototype.parse=function(b){this._batchIndex=0;this._callback=b;this._frameKeys.length<=a.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()};a.prototype._processFrames=function(b){for(var c=b,d=a.BATCH_SIZE,
g=this.baseTexture.sourceScale;c-b<d&&c<this._frameKeys.length;){var p=this._frameKeys[c],r=this._frames[p],q=r.frame;if(q){var t=null,s=null,t=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,v=new e.Rectangle(0,0,Math.floor(t.w*g)/this.resolution,Math.floor(t.h*g)/this.resolution),t=r.rotated?new e.Rectangle(Math.floor(q.x*g)/this.resolution,Math.floor(q.y*g)/this.resolution,Math.floor(q.h*g)/this.resolution,Math.floor(q.w*g)/this.resolution):new e.Rectangle(Math.floor(q.x*g)/this.resolution,Math.floor(q.y*
g)/this.resolution,Math.floor(q.w*g)/this.resolution,Math.floor(q.h*g)/this.resolution);!1!==r.trimmed&&r.spriteSourceSize&&(s=new e.Rectangle(Math.floor(r.spriteSourceSize.x*g)/this.resolution,Math.floor(r.spriteSourceSize.y*g)/this.resolution,Math.floor(q.w*g)/this.resolution,Math.floor(q.h*g)/this.resolution));this.textures[p]=new e.Texture(this.baseTexture,t,v,s,r.rotated?2:0);e.Texture.addToCache(this.textures[p],p)}c++}};a.prototype._parseComplete=function(){var a=this._callback;this._callback=
null;this._batchIndex=0;a.call(this,this.textures)};a.prototype._nextBatch=function(){var b=this;this._processFrames(this._batchIndex*a.BATCH_SIZE);this._batchIndex++;setTimeout(function(){b._batchIndex*a.BATCH_SIZE<b._frameKeys.length?b._nextBatch():b._parseComplete()},0)};a.prototype.destroy=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,b;for(b in this.textures)this.textures[b].destroy();this.textures=this.data=this._frameKeys=this._frames=null;a&&this.baseTexture.destroy();
this.baseTexture=null};return a}();c.default=a},{"../":65,"../utils":125}],115:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){a.destroy=function(){};
a.on=function(){};a.once=function(){};a.emit=function(){}}c.__esModule=!0;var l=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();b=a("./BaseTexture");var k=d(b);b=a("./VideoBaseTexture");var f=d(b);b=a("./TextureUvs");var m=d(b);b=a("eventemitter3");b=d(b);var n=a("../math"),p=a("../utils");a=a("../settings");
var r=d(a),q=function(a){function b(c,d,f,e,k){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var m;m=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");m=m&&("object"===typeof m||"function"===typeof m)?m:this;m.noFrame=!1;d||(m.noFrame=!0,d=new n.Rectangle(0,0,1,1));c instanceof b&&(c=c.baseTexture);m.baseTexture=c;m._frame=d;m.trim=e;m.valid=!1;m.requiresUpdate=!1;m._uvs=null;m.orig=f||d;m._rotate=Number(k||
0);if(!0===k)m._rotate=2;else if(0!==m._rotate%2)throw Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");if(c.hasLoaded)m.noFrame&&(d=new n.Rectangle(0,0,c.width,c.height),c.on("update",m.onBaseTextureUpdated,m)),m.frame=d;else c.once("loaded",m.onBaseTextureLoaded,m);m._updateID=0;m.transform=null;m.textureCacheIds=[];return m}e(b,a);b.prototype.update=function(){this.baseTexture.update()};b.prototype.onBaseTextureLoaded=function(a){this._updateID++;this.frame=this.noFrame?
new n.Rectangle(0,0,a.width,a.height):this._frame;this.baseTexture.on("update",this.onBaseTextureUpdated,this);this.emit("update",this)};b.prototype.onBaseTextureUpdated=function(a){this._updateID++;this._frame.width=a.width;this._frame.height=a.height;this.emit("update",this)};b.prototype.destroy=function(a){this.baseTexture&&(a&&(p.TextureCache[this.baseTexture.imageUrl]&&b.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,
this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null);this.orig=this.trim=this._uvs=this._frame=null;this.valid=!1;b.removeFromCache(this);this.textureCacheIds=null};b.prototype.clone=function(){return new b(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)};b.prototype._updateUvs=function(){this._uvs||(this._uvs=new m.default);this._uvs.set(this._frame,this.baseTexture,this.rotate);this._updateID++};b.fromImage=function(a,c,d,f){var e=p.TextureCache[a];
e||(e=new b(k.default.fromImage(a,c,d,f)),b.addToCache(e,a));return e};b.fromFrame=function(a){var b=p.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache');return b};b.fromCanvas=function(a,c){return new b(k.default.fromCanvas(a,c,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas"))};b.fromVideo=function(a,c){return"string"===typeof a?b.fromVideoUrl(a,c):new b(f.default.fromVideo(a,c))};b.fromVideoUrl=function(a,c){return new b(f.default.fromUrl(a,
c))};b.from=function(a){if("string"===typeof a){var c=p.TextureCache[a];return!c?null!==a.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?b.fromVideoUrl(a):b.fromImage(a):c}return a instanceof HTMLImageElement?new b(k.default.from(a)):a instanceof HTMLCanvasElement?b.fromCanvas(a,r.default.SCALE_MODE,"HTMLCanvasElement"):a instanceof HTMLVideoElement?b.fromVideo(a):a instanceof k.default?new b(a):a};b.fromLoader=function(a,c,d){a=new k.default(a,void 0,(0,p.getResolutionOfUrl)(c));var f=new b(a);a.imageUrl=
c;d||(d=c);k.default.addToCache(f.baseTexture,d);b.addToCache(f,d);d!==c&&(k.default.addToCache(f.baseTexture,c),b.addToCache(f,c));return f};b.addToCache=function(a,b){b&&(-1===a.textureCacheIds.indexOf(b)&&a.textureCacheIds.push(b),p.TextureCache[b]&&console.warn("Texture added to the cache with an id ["+b+"] that already had an entry"),p.TextureCache[b]=a)};b.removeFromCache=function(a){if("string"===typeof a){var b=p.TextureCache[a];if(b){var c=b.textureCacheIds.indexOf(a);-1<c&&b.textureCacheIds.splice(c,
1);delete p.TextureCache[a];return b}}else if(a&&a.textureCacheIds){for(b=0;b<a.textureCacheIds.length;++b)p.TextureCache[a.textureCacheIds[b]]===a&&delete p.TextureCache[a.textureCacheIds[b]];a.textureCacheIds.length=0;return a}return null};l(b,[{key:"frame",get:function(){return this._frame},set:function(a){this._frame=a;this.noFrame=!1;var b=a.x,c=a.y,d=a.width,f=a.height,e=b+d>this.baseTexture.width,k=c+f>this.baseTexture.height;if(e||k)throw Error("Texture Error: frame does not fit inside the base Texture dimensions: "+
("X: "+b+" + "+d+" = "+(b+d)+" > "+this.baseTexture.width+" "+(e&&k?"and":"or")+" "+("Y: "+c+" + "+f+" = "+(c+f)+" > "+this.baseTexture.height)));this.valid=d&&f&&this.baseTexture.hasLoaded;!this.trim&&!this.rotate&&(this.orig=a);this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(a){this._rotate=a;this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]);return b}(b.default);
c.default=q;q.EMPTY=new q(new k.default);g(q.EMPTY);g(q.EMPTY.baseTexture);q.WHITE=function(){var a=document.createElement("canvas");a.width=10;a.height=10;var b=a.getContext("2d");b.fillStyle="white";b.fillRect(0,0,10,10);return new q(new k.default(a))}();g(q.WHITE);g(q.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(a,b,c){c.__esModule=!0;var d=function(){function a(b,c){for(var d=
0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),e=(a=a("../math/Matrix"))&&a.__esModule?a:{"default":a},g=new e.default;a=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._texture=b;this.mapCoord=new e.default;this.uClampFrame=new Float32Array(4);this.uClampOffset=new Float32Array(2);
this._lastTextureID=-1;this.clampOffset=0;this.clampMargin="undefined"===typeof c?0.5:c}a.prototype.multiplyUvs=function(a,b){void 0===b&&(b=a);for(var c=this.mapCoord,d=0;d<a.length;d+=2){var e=a[d],g=a[d+1];b[d]=e*c.a+g*c.c+c.tx;b[d+1]=e*c.b+g*c.d+c.ty}return b};a.prototype.update=function(a){var b=this._texture;if(!b||!b.valid||!a&&this._lastTextureID===b._updateID)return!1;this._lastTextureID=b._updateID;a=b._uvs;this.mapCoord.set(a.x1-a.x0,a.y1-a.y0,a.x3-a.x0,a.y3-a.y0,a.x0,a.y0);a=b.orig;var c=
b.trim;c&&(g.set(a.width/c.width,0,0,a.height/c.height,-c.x/c.width,-c.y/c.height),this.mapCoord.append(g));a=b.baseTexture;var c=this.uClampFrame,d=this.clampMargin/a.resolution,e=this.clampOffset;c[0]=(b._frame.x+d+e)/a.width;c[1]=(b._frame.y+d+e)/a.height;c[2]=(b._frame.x+b._frame.width-d+e)/a.width;c[3]=(b._frame.y+b._frame.height-d+e)/a.height;this.uClampOffset[0]=e/a.realWidth;this.uClampOffset[1]=e/a.realHeight;return!0};d(a,[{key:"texture",get:function(){return this._texture},set:function(a){this._texture=
a;this._lastTextureID=-1}}]);return a}();c.default=a},{"../math/Matrix":67}],117:[function(a,b,c){c.__esModule=!0;var d=(a=a("../math/GroupD8"))&&a.__esModule?a:{"default":a};a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.y0=this.x0=0;this.x1=1;this.y1=0;this.y2=this.x2=1;this.x3=0;this.y3=1;this.uvsUint32=new Uint32Array(4)}a.prototype.set=function(a,b,c){var f=b.width,e=b.height;if(c){b=a.width/2/f;var n=a.height/2/e,f=a.x/f+b;a=a.y/
e+n;c=d.default.add(c,d.default.NW);this.x0=f+b*d.default.uX(c);this.y0=a+n*d.default.uY(c);c=d.default.add(c,2);this.x1=f+b*d.default.uX(c);this.y1=a+n*d.default.uY(c);c=d.default.add(c,2);this.x2=f+b*d.default.uX(c);this.y2=a+n*d.default.uY(c);c=d.default.add(c,2);this.x3=f+b*d.default.uX(c);this.y3=a+n*d.default.uY(c)}else this.x0=a.x/f,this.y0=a.y/e,this.x1=(a.x+a.width)/f,this.y1=a.y/e,this.x2=(a.x+a.width)/f,this.y2=(a.y+a.height)/e,this.x3=a.x/f,this.y3=(a.y+a.height)/e;this.uvsUint32[0]=(65535*
this.y0&65535)<<16|65535*this.x0&65535;this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535;this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535;this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535};return a}();c.default=a},{"../math/GroupD8":66}],118:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){b||(b="video/"+a.substr(a.lastIndexOf(".")+1));var c=document.createElement("source");c.src=a;c.type=b;return c}c.__esModule=!0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),
l=(b=a("./BaseTexture"))&&b.__esModule?b:{"default":b},k=a("../utils"),f=a("../ticker"),m=a("../const"),n=(a=a("../utils/determineCrossOrigin"))&&a.__esModule?a:{"default":a};a=function(a){function b(c,d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");if(!c)throw Error("No video source element specified.");if((c.readyState===c.HAVE_ENOUGH_DATA||c.readyState===c.HAVE_FUTURE_DATA)&&c.width&&c.height)c.complete=!0;var f;f=a.call(this,c,d);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
f=f&&("object"===typeof f||"function"===typeof f)?f:this;f.width=c.videoWidth;f.height=c.videoHeight;f._autoUpdate=!0;f._isAutoUpdating=!1;f.autoPlay=!0;f.update=f.update.bind(f);f._onCanPlay=f._onCanPlay.bind(f);c.addEventListener("play",f._onPlayStart.bind(f));c.addEventListener("pause",f._onPlayStop.bind(f));f.hasLoaded=!1;f.__loaded=!1;f._isSourceReady()?f._onCanPlay():(c.addEventListener("canplay",f._onCanPlay),c.addEventListener("canplaythrough",f._onCanPlay));return f}d(b,a);b.prototype._isSourcePlaying=
function(){var a=this.source;return 0<a.currentTime&&!1===a.paused&&!1===a.ended&&2<a.readyState};b.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState};b.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay();!this._isAutoUpdating&&this.autoUpdate&&(f.shared.add(this.update,this,m.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)};b.prototype._onPlayStop=function(){this._isAutoUpdating&&(f.shared.remove(this.update,this),this._isAutoUpdating=
!1)};b.prototype._onCanPlay=function(){this.hasLoaded=!0;this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())};b.prototype.destroy=function(){this._isAutoUpdating&&f.shared.remove(this.update,this);this.source&&
this.source._pixiId&&(l.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load());a.prototype.destroy.call(this)};b.fromVideo=function(a,c){a._pixiId||(a._pixiId="video_"+(0,k.uid)());var d=k.BaseTextureCache[a._pixiId];d||(d=new b(a,c),l.default.addToCache(d,a._pixiId));return d};b.fromUrl=function(a,c,d){var f=document.createElement("video");f.setAttribute("webkit-playsinline","");f.setAttribute("playsinline","");var m=Array.isArray(a)?
a[0].src||a[0]:a.src||a;void 0===d&&0!==m.indexOf("data:")?f.crossOrigin=(0,n.default)(m):d&&(f.crossOrigin="string"===typeof d?d:"anonymous");if(Array.isArray(a))for(d=0;d<a.length;++d)f.appendChild(e(a[d].src||a[d],a[d].mime));else f.appendChild(e(m,a.mime));f.load();return b.fromVideo(f,c)};g(b,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(a){a!==this._autoUpdate&&(this._autoUpdate=a,!this._autoUpdate&&this._isAutoUpdating?(f.shared.remove(this.update,this),this._isAutoUpdating=
!1):this._autoUpdate&&!this._isAutoUpdating&&(f.shared.add(this.update,this,m.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]);return b}(l.default);c.default=a;a.fromUrls=a.fromUrl},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(a,b,c){c.__esModule=!0;var d=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,
e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),e=(b=a("../settings"))&&b.__esModule?b:{"default":b},g=a("../const"),l=(a=a("./TickerListener"))&&a.__esModule?a:{"default":a};a=function(){function a(){var b=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._head=new l.default(null,null,Infinity);this._requestId=null;this._maxElapsedMS=100;this.autoStart=!1;this.deltaTime=1;this.elapsedMS=1/e.default.TARGET_FPMS;this.lastTime=-1;this.speed=
1;this.started=!1;this._tick=function(a){b._requestId=null;b.started&&(b.update(a),b.started&&(null===b._requestId&&b._head.next)&&(b._requestId=requestAnimationFrame(b._tick)))}}a.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))};a.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)};a.prototype._startIfPossible=function(){this.started?
this._requestIfNeeded():this.autoStart&&this.start()};a.prototype.add=function(a,b){return this._addListener(new l.default(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:g.UPDATE_PRIORITY.NORMAL))};a.prototype.addOnce=function(a,b){return this._addListener(new l.default(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:g.UPDATE_PRIORITY.NORMAL,!0))};a.prototype._addListener=function(a){var b=this._head.next,c=this._head;if(b){for(;b;){if(a.priority>b.priority){a.connect(c);break}c=
b;b=b.next}a.previous||a.connect(c)}else a.connect(c);this._startIfPossible();return this};a.prototype.remove=function(a,b){for(var c=this._head.next;c;)c=c.match(a,b)?c.destroy():c.next;this._head.next||this._cancelIfNeeded();return this};a.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())};a.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())};a.prototype.destroy=function(){this.stop();for(var a=this._head.next;a;)a=a.destroy(!0);this._head.destroy();
this._head=null};a.prototype.update=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),b=void 0;if(a>this.lastTime){b=this.elapsedMS=a-this.lastTime;b>this._maxElapsedMS&&(b=this._maxElapsedMS);this.deltaTime=b*e.default.TARGET_FPMS*this.speed;for(var b=this._head,c=b.next;c;)c=c.emit(this.deltaTime);b.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=a};d(a,[{key:"FPS",get:function(){return 1E3/this.elapsedMS}},{key:"minFPS",get:function(){return 1E3/
this._maxElapsedMS},set:function(a){this._maxElapsedMS=1/Math.min(Math.max(0,a)/1E3,e.default.TARGET_FPMS)}}]);return a}();c.default=a},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(a,b,c){c.__esModule=!0;a=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.fn=b;this.context=c;this.priority=l;this.once=k;this.previous=this.next=null;this._destroyed=!1}a.prototype.match=function(a,b){return this.fn===a&&this.context===(b||null)};a.prototype.emit=function(a){this.fn&&(this.context?this.fn.call(this.context,a):this.fn(a));a=this.next;this.once&&this.destroy(!0);this._destroyed&&(this.next=null);return a};a.prototype.connect=function(a){this.previous=a;a.next&&(a.next.previous=this);this.next=a.next;a.next=this};a.prototype.destroy=function(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;this._destroyed=!0;this.context=this.fn=null;this.previous&&(this.previous.next=this.next);this.next&&(this.next.previous=this.previous);var b=this.previous;this.next=a?null:b;this.previous=null;return b};return a}();c.default=a},{}],121:[function(a,b,c){c.__esModule=!0;c.Ticker=c.shared=void 0;a=(a=a("./Ticker"))&&a.__esModule?a:{"default":a};b=new a.default;b.autoStart=!0;b.destroy=function(){};c.shared=b;c.Ticker=a.default},{"./Ticker":119}],
122:[function(a,b,c){c.__esModule=!0;c.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],123:[function(a,b,c){c.__esModule=!0;c.default=function(a){a*=6;for(var b=new Uint16Array(a),c=0,l=0;c<a;c+=6,l+=4)b[c+0]=l+0,b[c+1]=l+1,b[c+2]=l+2,b[c+3]=l+0,b[c+4]=l+2,b[c+5]=l+3;return b}},{}],124:[function(a,b,c){c.__esModule=!0;c.default=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===a.indexOf("data:"))return"";
b=b||window.location;e||(e=document.createElement("a"));e.href=a;a=d.default.parse(e.href);var c=!a.port&&""===b.port||a.port===b.port;return a.hostname!==b.hostname||!c||a.protocol!==b.protocol?"anonymous":""};var d=(a=a("url"))&&a.__esModule?a:{"default":a},e=void 0},{url:38}],125:[function(a,b,c){function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}function e(a){return a&&a.__esModule?a:{"default":a}}
c.__esModule=!0;c.premultiplyBlendMode=c.BaseTextureCache=c.TextureCache=c.earcut=c.mixins=c.pluginTarget=c.EventEmitter=c.removeItems=c.isMobile=void 0;c.uid=function(){return++r};c.hex2rgb=function(a,b){b=b||[];b[0]=(a>>16&255)/255;b[1]=(a>>8&255)/255;b[2]=(a&255)/255;return b};c.hex2string=function(a){a=a.toString(16);a="000000".substr(0,6-a.length)+a;return"#"+a};c.rgb2hex=function(a){return(255*a[0]<<16)+(255*a[1]<<8)+(255*a[2]|0)};c.getResolutionOfUrl=function(a,b){var c=l.default.RETINA_PREFIX.exec(a);
return c?parseFloat(c[1]):void 0!==b?b:1};c.decomposeDataUri=function(a){if(a=g.DATA_URI.exec(a))return{mediaType:a[1]?a[1].toLowerCase():void 0,subType:a[2]?a[2].toLowerCase():void 0,encoding:a[3]?a[3].toLowerCase():void 0,data:a[4]}};c.getUrlFileExtension=function(a){if(a=g.URL_FILE_EXTENSION.exec(a))return a[1].toLowerCase()};c.getSvgSize=function(a){a=g.SVG_SIZE.exec(a);var b={};a&&(b[a[1]]=Math.round(parseFloat(a[3])),b[a[5]]=Math.round(parseFloat(a[7])));return b};c.skipHello=function(){q=!0};
c.sayHello=function(a){q||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?window.console.log.apply(console,["\n %c %c %c PixiJS "+g.VERSION+" - \u2730 "+a+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;",
"color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):window.console&&window.console.log("PixiJS "+g.VERSION+" - "+a+" - http://www.pixijs.com/"),q=!0)};c.isWebGLSupported=function(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var b=document.createElement("canvas"),c=b.getContext("webgl",a)||b.getContext("experimental-webgl",a),d=!(!c||!c.getContextAttributes().stencil);if(c){var f=c.getExtension("WEBGL_lose_context");
f&&f.loseContext()}return d}catch(e){return!1}};c.sign=function(a){return 0===a?0:0>a?-1:1};c.destroyTextureCache=function(){var a=void 0;for(a in t)t[a].destroy();for(a in s)s[a].destroy()};c.clearTextureCache=function(){var a=void 0;for(a in t)delete t[a];for(a in s)delete s[a]};c.correctBlendMode=function(a,b){return v[b?1:0][a]};c.premultiplyTint=function(a,b){if(1===b)return(255*b<<24)+a;if(0===b)return 0;var c,d,f;c=(a>>16&255)*b+0.5|0;d=(a>>8&255)*b+0.5|0;f=(a&255)*b+0.5|0;return(255*b<<24)+
(c<<16)+(d<<8)+f};c.premultiplyRgba=function(a,b,c,d){c=c||new Float32Array(4);d||void 0===d?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b):(c[0]=a[0],c[1]=a[1],c[2]=a[2]);c[3]=b;return c};c.premultiplyTintToRgba=function(a,b,c,d){c=c||new Float32Array(4);c[0]=(a>>16&255)/255;c[1]=(a>>8&255)/255;c[2]=(a&255)/255;if(d||void 0===d)c[0]*=b,c[1]*=b,c[2]*=b;c[3]=b;return c};var g=a("../const");b=a("../settings");var l=e(b);b=a("eventemitter3");b=e(b);var k=a("./pluginTarget"),k=e(k),f=a("./mixin"),f=d(f),m=a("ismobilejs"),
m=d(m),n=a("remove-array-items"),n=e(n),p=a("./mapPremultipliedBlendModes"),p=e(p);a=a("earcut");a=e(a);var r=0,q=!1;c.isMobile=m;c.removeItems=n.default;c.EventEmitter=b.default;c.pluginTarget=k.default;c.mixins=f;c.earcut=a.default;var t=c.TextureCache=Object.create(null),s=c.BaseTextureCache=Object.create(null),v=c.premultiplyBlendMode=(0,p.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,earcut:2,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],
126:[function(a,b,c){c.__esModule=!0;c.default=function(){for(var a=[],b=[],c=0;32>c;c++)a[c]=c,b[c]=c;a[d.BLEND_MODES.NORMAL_NPM]=d.BLEND_MODES.NORMAL;a[d.BLEND_MODES.ADD_NPM]=d.BLEND_MODES.ADD;a[d.BLEND_MODES.SCREEN_NPM]=d.BLEND_MODES.SCREEN;b[d.BLEND_MODES.NORMAL]=d.BLEND_MODES.NORMAL_NPM;b[d.BLEND_MODES.ADD]=d.BLEND_MODES.ADD_NPM;b[d.BLEND_MODES.SCREEN]=d.BLEND_MODES.SCREEN_NPM;c=[];c.push(b);c.push(a);return c};var d=a("../const")},{"../const":46}],127:[function(a,b,c){c.__esModule=!0;c.default=
function(a){return d.default.tablet||d.default.phone?4:a};var d=(a=a("ismobilejs"))&&a.__esModule?a:{"default":a}},{ismobilejs:4}],128:[function(a,b,c){function d(a,b){if(a&&b)for(var c=Object.keys(b),d=0;d<c.length;++d){var e=c[d];Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(b,e))}}c.__esModule=!0;c.mixin=d;c.delayMixin=function(a,b){e.push(a,b)};c.performMixins=function(){for(var a=0;a<e.length;a+=2)d(e[a],e[a+1]);e.length=0};var e=[]},{}],129:[function(a,b,c){function d(a){a.__plugins=
{};a.registerPlugin=function(b,c){a.__plugins[b]=c};a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var b in a.__plugins)this.plugins[b]=new a.__plugins[b](this)};a.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),this.plugins[a]=null;this.plugins=null}}c.__esModule=!0;c.default={mixin:function(a){d(a)}}},{}],130:[function(a,b,c){c.__esModule=!0;c.default=function(a){var b=a.width,c=a.height;a=a.getContext("2d");for(var c=a.getImageData(0,
0,b,c).data,l=c.length,k=null,f=null,m=null,n=null,p=void 0,r=void 0,q=void 0,p=0;p<l;p+=4)0!==c[p+3]&&(r=p/4%b,q=~~(p/4/b),null===k&&(k=q),null===f?f=r:r<f&&(f=r),null===m?m=r+1:m<r&&(m=r+1),null===n?n=q:n<q&&(n=q));b=m-f;c=n-k+1;a=a.getImageData(f,k,b,c);return{height:c,width:b,data:a}}},{}],131:[function(a,b,c){function d(a){if(!e[a]){var b=Error().stack;"undefined"===typeof b?console.warn("Deprecation Warning: ",a):(b=b.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s",
"color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a),console.warn(b),console.groupEnd()):(console.warn("Deprecation Warning: ",a),console.warn(b)));e[a]=!0}}c.__esModule=!0;c.default=function(a){var b=a.mesh,c=a.particles,f=a.extras,e=a.filters,n=a.prepare,p=a.loaders,r=a.interaction;Object.defineProperties(a,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.");}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.");
}},Stage:{get:function(){d("You do not need to use a PIXI Stage any more, you can simply render any container.");return a.Container}},DisplayObjectContainer:{get:function(){d("DisplayObjectContainer has been shortened to Container, please use Container from now on.");return a.Container}},Strip:{get:function(){d("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.");return b.Mesh}},Rope:{get:function(){d("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.");
return b.Rope}},ParticleContainer:{get:function(){d("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on.");return c.ParticleContainer}},MovieClip:{get:function(){d("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite.");return f.AnimatedSprite}},TilingSprite:{get:function(){d("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.");
return f.TilingSprite}},BitmapText:{get:function(){d("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.");return f.BitmapText}},blendModes:{get:function(){d("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.");return a.BLEND_MODES}},scaleModes:{get:function(){d("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.");return a.SCALE_MODES}},BaseTextureCache:{get:function(){d("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.");
return a.utils.BaseTextureCache}},TextureCache:{get:function(){d("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.");return a.utils.TextureCache}},math:{get:function(){d("The math namespace is deprecated, please access members already accessible on PIXI.");return a}},AbstractFilter:{get:function(){d("AstractFilter has been renamed to Filter, please use PIXI.Filter");return a.Filter}},TransformManual:{get:function(){d("TransformManual has been renamed to TransformBase, please update your pixi-spine");
return a.TransformBase}},TARGET_FPMS:{get:function(){d("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS");return a.settings.TARGET_FPMS},set:function(b){d("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS");a.settings.TARGET_FPMS=b}},FILTER_RESOLUTION:{get:function(){d("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION");return a.settings.FILTER_RESOLUTION},set:function(b){d("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION");
a.settings.FILTER_RESOLUTION=b}},RESOLUTION:{get:function(){d("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION");return a.settings.RESOLUTION},set:function(b){d("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION");a.settings.RESOLUTION=b}},MIPMAP_TEXTURES:{get:function(){d("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES");return a.settings.MIPMAP_TEXTURES},set:function(b){d("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES");
a.settings.MIPMAP_TEXTURES=b}},SPRITE_BATCH_SIZE:{get:function(){d("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE");return a.settings.SPRITE_BATCH_SIZE},set:function(b){d("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE");a.settings.SPRITE_BATCH_SIZE=b}},SPRITE_MAX_TEXTURES:{get:function(){d("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES");return a.settings.SPRITE_MAX_TEXTURES},
set:function(b){d("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES");a.settings.SPRITE_MAX_TEXTURES=b}},RETINA_PREFIX:{get:function(){d("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX");return a.settings.RETINA_PREFIX},set:function(b){d("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX");a.settings.RETINA_PREFIX=b}},DEFAULT_RENDER_OPTIONS:{get:function(){d("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS");
return a.settings.RENDER_OPTIONS}}});for(var q=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],t=function(b){var c=q[b];Object.defineProperty(a[c.parent],"DEFAULT",{get:function(){d("PIXI."+c.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+c.target));return a.settings[c.target]},set:function(b){d("PIXI."+
c.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+c.target));a.settings[c.target]=b}})},s=0;s<q.length;s++)t(s);Object.defineProperties(a.settings,{PRECISION:{get:function(){d("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT");return a.settings.PRECISION_FRAGMENT},set:function(b){d("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT");a.settings.PRECISION_FRAGMENT=b}}});f.AnimatedSprite&&Object.defineProperties(f,
{MovieClip:{get:function(){d("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on.");return f.AnimatedSprite}}});f&&Object.defineProperties(f,{TextureTransform:{get:function(){d("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on.");return a.TextureMatrix}}});a.DisplayObject.prototype.generateTexture=function(a,b,c){d("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)");
return a.generateTexture(this,b,c)};a.Graphics.prototype.generateTexture=function(a,b){d("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture");return this.generateCanvasTexture(a,b)};a.GroupD8.isSwapWidthHeight=function(b){d("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical");return a.GroupD8.isVertical(b)};a.RenderTexture.prototype.render=function(a,b,c,f){this.legacyRenderer.render(a,this,c,b,!f);d("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")};
a.RenderTexture.prototype.getImage=function(a){d("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)");return this.legacyRenderer.extract.image(a)};a.RenderTexture.prototype.getBase64=function(a){d("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)");return this.legacyRenderer.extract.base64(a)};a.RenderTexture.prototype.getCanvas=function(a){d("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)");
return this.legacyRenderer.extract.canvas(a)};a.RenderTexture.prototype.getPixels=function(a){d("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)");return this.legacyRenderer.pixels(a)};a.Sprite.prototype.setTexture=function(a){this.texture=a;d("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};f.BitmapText&&(f.BitmapText.prototype.setText=function(a){this.text=a;d("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});
a.Text.prototype.setText=function(a){this.text=a;d("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};a.Text.calculateFontProperties=function(b){d("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont");return a.TextMetrics.measureFont(b)};Object.defineProperties(a.Text,{fontPropertiesCache:{get:function(){d("Text.fontPropertiesCache is deprecated");return a.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){d("Text.fontPropertiesCanvas is deprecated");
return a.TextMetrics._canvas}},fontPropertiesContext:{get:function(){d("Text.fontPropertiesContext is deprecated");return a.TextMetrics._context}}});a.Text.prototype.setStyle=function(a){this.style=a;d("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};a.Text.prototype.determineFontProperties=function(b){d("determineFontProperties is now deprecated, please use TextMetrics.measureFont method");return a.TextMetrics.measureFont(b)};a.Text.getFontStyle=function(b){d("getFontStyle is now deprecated, please use TextStyle.toFontString() instead");
b=b||{};b instanceof a.TextStyle||(b=new a.TextStyle(b));return b.toFontString()};Object.defineProperties(a.TextStyle.prototype,{font:{get:function(){d("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+("number"===typeof this._fontSize?this._fontSize+"px":this._fontSize)+" "+this._fontFamily},set:function(a){d("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on");
1<a.indexOf("italic")?this._fontStyle="italic":-1<a.indexOf("oblique")?this._fontStyle="oblique":this._fontStyle="normal";-1<a.indexOf("small-caps")?this._fontVariant="small-caps":this._fontVariant="normal";a=a.split(" ");var b=-1;this._fontSize=26;for(var c=0;c<a.length;++c)if(a[c].match(/(px|pt|em|%)/)){b=c;this._fontSize=a[c];break}this._fontWeight="normal";for(c=0;c<b;++c)if(a[c].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=a[c];break}if(-1<b&&b<a.length-
1){this._fontFamily="";for(b+=1;b<a.length;++b)this._fontFamily+=a[b]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}});a.Texture.prototype.setFrame=function(a){this.frame=a;d("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")};a.Texture.addTextureToCache=function(b,c){a.Texture.addToCache(b,c);d("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")};a.Texture.removeTextureFromCache=
function(b){d("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache");a.BaseTexture.removeFromCache(b);return a.Texture.removeFromCache(b)};Object.defineProperties(e,{AbstractFilter:{get:function(){d("AstractFilter has been renamed to Filter, please use PIXI.Filter");return a.AbstractFilter}},SpriteMaskFilter:{get:function(){d("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.");
return a.SpriteMaskFilter}},VoidFilter:{get:function(){d("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter");return e.AlphaFilter}}});a.utils.uuid=function(){d("utils.uuid() is deprecated, please use utils.uid() from now on.");return a.utils.uid()};a.utils.canUseNewCanvasBlendModes=function(){d("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on");return a.CanvasTinter.canUseMultiply};var v=!0;Object.defineProperty(a.utils,
"_saidHello",{set:function(a){a&&(d("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello());v=a},get:function(){return v}});n.BasePrepare&&(n.BasePrepare.prototype.register=function(a,b){d("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook");a&&this.registerFindHook(a);b&&this.registerUploadHook(b);return this});n.canvas&&Object.defineProperty(n.canvas,"UPLOADS_PER_FRAME",
{set:function(){d("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){d("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter");return NaN}});n.webgl&&Object.defineProperty(n.webgl,"UPLOADS_PER_FRAME",{set:function(){d("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},
get:function(){d("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter");return NaN}});if(p.Loader){var w=p.Resource,n=p.Loader;Object.defineProperties(w.prototype,{isJson:{get:function(){d("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`.");return this.type===w.TYPE.JSON}},isXml:{get:function(){d("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`.");return this.type===w.TYPE.XML}},isImage:{get:function(){d("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`.");
return this.type===w.TYPE.IMAGE}},isAudio:{get:function(){d("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`.");return this.type===w.TYPE.AUDIO}},isVideo:{get:function(){d("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`.");return this.type===w.TYPE.VIDEO}}});Object.defineProperties(n.prototype,{before:{get:function(){d("The before() method is deprecated, please use pre().");return this.pre}},after:{get:function(){d("The after() method is deprecated, please use use().");
return this.use}}})}r.interactiveTarget&&Object.defineProperty(r.interactiveTarget,"defaultCursor",{set:function(a){d("Property defaultCursor has been replaced with 'cursor'. ");this.cursor=a},get:function(){d("Property defaultCursor has been replaced with 'cursor'. ");return this.cursor}});r.InteractionManager&&(Object.defineProperty(r.InteractionManager,"defaultCursorStyle",{set:function(a){d("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. ");this.cursorStyles.default=
a},get:function(){d("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. ");return this.cursorStyles.default}}),Object.defineProperty(r.InteractionManager,"currentCursorStyle",{set:function(a){d("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.");this.currentCursorMode=a},get:function(){d("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.");return this.currentCursorMode}}))};
var e={}},{}],132:[function(a,b,c){c.__esModule=!0;var d=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core")),e=new d.Rectangle;a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=b;b.extract=this}a.prototype.image=function(a){var b=new Image;b.src=this.base64(a);return b};a.prototype.base64=function(a){return this.canvas(a).toDataURL()};
a.prototype.canvas=function(a){var b=this.renderer,c=void 0,m=void 0,g=void 0,g=void 0;a&&(g=a instanceof d.RenderTexture?a:b.generateTexture(a));g?(c=g.baseTexture._canvasRenderTarget.context,m=g.baseTexture._canvasRenderTarget.resolution,g=g.frame):(c=b.rootContext,g=e,g.width=this.renderer.width,g.height=this.renderer.height);var b=g.width*m,p=g.height*m;a=new d.CanvasRenderTarget(b,p);c=c.getImageData(g.x*m,g.y*m,b,p);a.context.putImageData(c,0,0);return a.canvas};a.prototype.pixels=function(a){var b=
this.renderer,c=void 0,m=void 0,g=void 0,g=void 0;a&&(g=a instanceof d.RenderTexture?a:b.generateTexture(a));g?(c=g.baseTexture._canvasRenderTarget.context,m=g.baseTexture._canvasRenderTarget.resolution,g=g.frame):(c=b.rootContext,g=e,g.width=b.width,g.height=b.height);return c.getImageData(0,0,g.width*m,g.height*m).data};a.prototype.destroy=function(){this.renderer=this.renderer.extract=null};return a}();c.default=a;d.CanvasRenderer.registerPlugin("extract",a)},{"../../core":65}],133:[function(a,
b,c){c.__esModule=!0;var d=a("./webgl/WebGLExtract");Object.defineProperty(c,"webgl",{enumerable:!0,get:function(){return(d&&d.__esModule?d:{"default":d}).default}});var e=a("./canvas/CanvasExtract");Object.defineProperty(c,"canvas",{enumerable:!0,get:function(){return(e&&e.__esModule?e:{"default":e}).default}})},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(a,b,c){c.__esModule=!0;var d=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core")),e=new d.Rectangle;a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=b;b.extract=this}a.prototype.image=function(a){var b=new Image;b.src=this.base64(a);return b};a.prototype.base64=function(a){return this.canvas(a).toDataURL()};a.prototype.canvas=function(a){var b=this.renderer,c=void 0,m=void 0,g=void 0,p=!1,r=void 0,q=!1;a&&(a instanceof d.RenderTexture?r=a:(r=this.renderer.generateTexture(a),
q=!0));r?(c=r.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],m=c.resolution,g=r.frame,p=!1):(c=this.renderer.rootRenderTarget,m=c.resolution,p=!0,g=e,g.width=c.size.width,g.height=c.size.height);var t=g.width*m;a=g.height*m;var s=new d.CanvasRenderTarget(t,a);c&&(b.bindRenderTarget(c),c=new Uint8Array(4*t*a),b=b.gl,b.readPixels(g.x*m,g.y*m,t,a,b.RGBA,b.UNSIGNED_BYTE,c),m=s.context.getImageData(0,0,t,a),m.data.set(c),s.context.putImageData(m,0,0),p&&(s.context.scale(1,-1),s.context.drawImage(s.canvas,
0,-a)));q&&r.destroy(!0);return s.canvas};a.prototype.pixels=function(a){var b=this.renderer,c=void 0,m=void 0,g=void 0,p=void 0,r=!1;a&&(a instanceof d.RenderTexture?p=a:(p=this.renderer.generateTexture(a),r=!0));p?(c=p.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],m=c.resolution,g=p.frame):(c=this.renderer.rootRenderTarget,m=c.resolution,g=e,g.width=c.size.width,g.height=c.size.height);a=g.width*m;var q=g.height*m,t=new Uint8Array(4*a*q);c&&(b.bindRenderTarget(c),b=b.gl,b.readPixels(g.x*
m,g.y*m,a,q,b.RGBA,b.UNSIGNED_BYTE,t));r&&p.destroy(!0);return t};a.prototype.destroy=function(){this.renderer=this.renderer.extract=null};return a}();c.default=a;d.WebGLRenderer.registerPlugin("extract",a)},{"../../core":65}],135:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../core"));a=function(a){function b(c,
d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var e;e=a.call(this,c[0]instanceof g.Texture?c[0]:c[0].texture);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=e&&("object"===typeof e||"function"===typeof e)?e:this;e._textures=null;e._durations=null;e.textures=c;e._autoUpdate=!1!==d;e.animationSpeed=1;e.loop=!0;e.onComplete=null;e.onFrameChange=null;e.onLoop=null;e._currentTime=0;e.playing=!1;return e}d(b,a);b.prototype.stop=
function(){this.playing&&(this.playing=!1,this._autoUpdate&&g.ticker.shared.remove(this.update,this))};b.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&g.ticker.shared.add(this.update,this,g.UPDATE_PRIORITY.HIGH))};b.prototype.gotoAndStop=function(a){this.stop();var b=this.currentFrame;this._currentTime=a;b!==this.currentFrame&&this.updateTexture()};b.prototype.gotoAndPlay=function(a){var b=this.currentFrame;this._currentTime=a;b!==this.currentFrame&&this.updateTexture();
this.play()};b.prototype.update=function(a){var b=this.animationSpeed*a,c=this.currentFrame;if(null!==this._durations){for(var d=this._currentTime%1*this._durations[this.currentFrame],d=d+1E3*(b/60);0>d;)this._currentTime--,d+=this._durations[this.currentFrame];a=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);d>=this._durations[this.currentFrame];)d-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=d/this._durations[this.currentFrame]}else this._currentTime+=
b;if(0>this._currentTime&&!this.loop){if(this.gotoAndStop(0),this.onComplete)this.onComplete()}else if(this._currentTime>=this._textures.length&&!this.loop){if(this.gotoAndStop(this._textures.length-1),this.onComplete)this.onComplete()}else if(c!==this.currentFrame){if(this.loop&&this.onLoop)if(0<this.animationSpeed&&this.currentFrame<c)this.onLoop();else if(0>this.animationSpeed&&this.currentFrame>c)this.onLoop();this.updateTexture()}};b.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame];
this._textureID=-1;this.cachedTint=16777215;if(this.onFrameChange)this.onFrameChange(this.currentFrame)};b.prototype.destroy=function(b){this.stop();a.prototype.destroy.call(this,b)};b.fromFrames=function(a){for(var c=[],d=0;d<a.length;++d)c.push(g.Texture.fromFrame(a[d]));return new b(c)};b.fromImages=function(a){for(var c=[],d=0;d<a.length;++d)c.push(g.Texture.fromImage(a[d]));return new b(c)};e(b,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},
set:function(a){if(a[0]instanceof g.Texture)this._textures=a,this._durations=null;else{this._textures=[];this._durations=[];for(var b=0;b<a.length;b++)this._textures.push(a[b].texture),this._durations.push(a[b].time)}this.gotoAndStop(0);this.updateTexture()}},{key:"currentFrame",get:function(){var a=Math.floor(this._currentTime)%this._textures.length;0>a&&(a+=this._textures.length);return a}}]);return b}(g.Sprite);c.default=a},{"../core":65}],136:[function(a,b,c){function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return b&&("object"===typeof b||"function"===typeof b)?b:a}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=
!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../core")),k=(b=a("../core/math/ObservablePoint"))&&b.__esModule?b:{"default":b},f=a("../core/utils"),m=(a=a("../core/settings"))&&a.__esModule?a:{"default":a};a=function(a){function b(c){var f=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var e=d(this,a.call(this));e._textWidth=0;e._textHeight=0;e._glyphs=[];e._font={tint:void 0!==f.tint?f.tint:16777215,align:f.align||"left",name:null,size:0};e.font=f.font;e._text=c;e._maxWidth=0;e._maxLineHeight=0;e._anchor=new k.default(function(){e.dirty=!0},e,0,0);e.dirty=!1;e.updateText();return e}e(b,a);b.prototype.updateText=function(){for(var a=b.fonts[this._font.name],c=this._font.size/
a.size,d=new l.Point,f=[],e=[],m=null,k=0,g=0,n=0,y=-1,B=0,C=0,F=0,D=0;D<this.text.length;D++){var E=this.text.charCodeAt(D);/(\s)/.test(this.text.charAt(D))&&(y=D,B=k);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(D)))e.push(k),g=Math.max(g,k),n++,d.x=0,d.y+=a.lineHeight,m=null;else if(-1!==y&&0<this._maxWidth&&d.x*c>this._maxWidth)l.utils.removeItems(f,y-C,D-y),D=y,y=-1,++C,e.push(B),g=Math.max(g,B),n++,d.x=0,d.y+=a.lineHeight,m=null;else{var H=a.chars[E];H&&(m&&H.kerning[m]&&(d.x+=H.kerning[m]),f.push({texture:H.texture,
line:n,charCode:E,position:new l.Point(d.x+H.xOffset,d.y+H.yOffset)}),k=d.x+(H.texture.width+H.xOffset),d.x+=H.xAdvance,F=Math.max(F,H.yOffset+H.texture.height),m=E)}}e.push(k);g=Math.max(g,k);m=[];for(k=0;k<=n;k++)y=0,"right"===this._font.align?y=g-e[k]:"center"===this._font.align&&(y=(g-e[k])/2),m.push(y);e=f.length;n=this.tint;for(k=0;k<e;k++)(y=this._glyphs[k])?y.texture=f[k].texture:(y=new l.Sprite(f[k].texture),this._glyphs.push(y)),y.position.x=(f[k].position.x+m[f[k].line])*c,y.position.y=
f[k].position.y*c,y.scale.x=y.scale.y=c,y.tint=n,y.parent||this.addChild(y);for(f=e;f<this._glyphs.length;++f)this.removeChild(this._glyphs[f]);this._textWidth=g*c;this._textHeight=(d.y+a.lineHeight)*c;if(0!==this.anchor.x||0!==this.anchor.y)for(a=0;a<e;a++)this._glyphs[a].x-=this._textWidth*this.anchor.x,this._glyphs[a].y-=this._textHeight*this.anchor.y;this._maxLineHeight=F*c};b.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};b.prototype.getLocalBounds=function(){this.validate();
return a.prototype.getLocalBounds.call(this)};b.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)};b.registerFont=function(a,c){var d={},e=a.getElementsByTagName("info")[0],k=a.getElementsByTagName("common")[0],g=a.getElementsByTagName("page")[0].getAttribute("file"),g=(0,f.getResolutionOfUrl)(g,m.default.RESOLUTION);d.font=e.getAttribute("face");d.size=parseInt(e.getAttribute("size"),10);d.lineHeight=parseInt(k.getAttribute("lineHeight"),10)/g;d.chars={};e=a.getElementsByTagName("char");
for(k=0;k<e.length;k++){var n=e[k],x=parseInt(n.getAttribute("id"),10),z=new l.Rectangle(parseInt(n.getAttribute("x"),10)/g+c.frame.x/g,parseInt(n.getAttribute("y"),10)/g+c.frame.y/g,parseInt(n.getAttribute("width"),10)/g,parseInt(n.getAttribute("height"),10)/g);d.chars[x]={xOffset:parseInt(n.getAttribute("xoffset"),10)/g,yOffset:parseInt(n.getAttribute("yoffset"),10)/g,xAdvance:parseInt(n.getAttribute("xadvance"),10)/g,kerning:{},texture:new l.Texture(c.baseTexture,z)}}e=a.getElementsByTagName("kerning");
for(k=0;k<e.length;k++)z=e[k],n=parseInt(z.getAttribute("first"),10)/g,x=parseInt(z.getAttribute("second"),10)/g,z=parseInt(z.getAttribute("amount"),10)/g,d.chars[x]&&(d.chars[x].kerning[n]=z);return b.fonts[d.font]=d};g(b,[{key:"tint",get:function(){return this._font.tint},set:function(a){this._font.tint="number"===typeof a&&0<=a?a:16777215;this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(a){this._font.align=a||"left";this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},
set:function(a){"number"===typeof a?this._anchor.set(a):this._anchor.copy(a)}},{key:"font",get:function(){return this._font},set:function(a){a&&("string"===typeof a?(a=a.split(" "),this._font.name=1===a.length?a[0]:a.slice(1).join(" "),this._font.size=2<=a.length?parseInt(a[0],10):b.fonts[this._font.name].size):(this._font.name=a.name,this._font.size="number"===typeof a.size?a.size:parseInt(a.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(a){a=a.toString()||
" ";this._text!==a&&(this._text=a,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(a){this._maxWidth!==a&&(this._maxWidth=a,this.dirty=!0)}},{key:"maxLineHeight",get:function(){this.validate();return this._maxLineHeight}},{key:"textWidth",get:function(){this.validate();return this._textWidth}},{key:"textHeight",get:function(){this.validate();return this._textHeight}}]);return b}(l.Container);c.default=a;a.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,
"../core/settings":101,"../core/utils":125}],137:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=
!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../core")),l=(a=a("../core/sprites/canvas/CanvasTinter"))&&a.__esModule?a:{"default":a},k=new g.Point;a=function(a){function b(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,e=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:100;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var k;k=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");k=k&&("object"===typeof k||"function"===typeof k)?k:this;k.tileTransform=new g.TransformStatic;k._width=d;k._height=e;k._canvasPattern=null;k.uvTransform=c.transform||new g.TextureMatrix(c);k.pluginName="tilingSprite";k.uvRespectAnchor=!1;return k}d(b,a);b.prototype._onTextureUpdate=
function(){this.uvTransform&&(this.uvTransform.texture=this._texture);this.cachedTint=16777215};b.prototype._renderWebGL=function(a){var b=this._texture;b&&b.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this))};b.prototype._renderCanvas=function(a){var b=this._texture;if(b.baseTexture.hasLoaded){var c=a.context,d=this.worldTransform,f=a.resolution,e=b.baseTexture,k=e.resolution,m=this.tilePosition.x/
this.tileScale.x%b._frame.width*k,u=this.tilePosition.y/this.tileScale.y%b._frame.height*k;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var x=new g.CanvasRenderTarget(b._frame.width,b._frame.height,k);16777215!==this.tint?(this.tintedTexture=l.default.getTintedTexture(this,this.tint),x.context.drawImage(this.tintedTexture,0,0)):x.context.drawImage(e.source,-b._frame.x*k,-b._frame.y*k);this.cachedTint=this.tint;this._canvasPattern=
x.context.createPattern(x.canvas,"repeat")}c.globalAlpha=this.worldAlpha;c.setTransform(d.a*f,d.b*f,d.c*f,d.d*f,d.tx*f,d.ty*f);a.setBlendMode(this.blendMode);c.fillStyle=this._canvasPattern;c.scale(this.tileScale.x/k,this.tileScale.y/k);a=this.anchor.x*-this._width;b=this.anchor.y*-this._height;this.uvRespectAnchor?(c.translate(m,u),c.fillRect(-m+a,-u+b,this._width/this.tileScale.x*k,this._height/this.tileScale.y*k)):(c.translate(m+a,u+b),c.fillRect(-m,-u,this._width/this.tileScale.x*k,this._height/
this.tileScale.y*k))}};b.prototype._calculateBounds=function(){this._bounds.addFrame(this.transform,this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))};b.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),b||(this._localBoundsRect||
(this._localBoundsRect=new g.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)};b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,k);var b=this._width;a=this._height;var c=-b*this.anchor._x;return k.x>=c&&k.x<c+b&&(b=-a*this.anchor._y,k.y>=b&&k.y<b+a)?!0:!1};b.prototype.destroy=function(b){a.prototype.destroy.call(this,b);this.uvTransform=this.tileTransform=null};b.from=function(a,c,d){return new b(g.Texture.from(a),c,
d)};b.fromFrame=function(a,c,d){var f=g.utils.TextureCache[a];if(!f)throw Error('The frameId "'+a+'" does not exist in the texture cache '+this);return new b(f,c,d)};b.fromImage=function(a,c,d,f,e){return new b(g.Texture.fromImage(a,f,e),c,d)};e(b,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(a){this.uvTransform.clampMargin=a;this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(a){this.tileTransform.scale.copy(a)}},
{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(a){this.tileTransform.position.copy(a)}},{key:"width",get:function(){return this._width},set:function(a){this._width=a}},{key:"height",get:function(){return this._height},set:function(a){this._height=a}}]);return b}(g.Sprite);c.default=a},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(a,b,c){var d=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(b[c]=a[c]);b.default=a;return b}(a("../core")),e=(b=a("../core/textures/Texture"))&&b.__esModule?b:{"default":b},g=(b=a("../core/textures/BaseTexture"))&&b.__esModule?b:{"default":b},l=a("../core/utils");a=d.DisplayObject;var k=new d.Matrix;a.prototype._cacheAsBitmap=!1;a.prototype._cacheData=!1;var f=function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.sprite=this.originalFilterArea=this.originalMask=this.originalDestroy=this.originalHitTest=this.originalUpdateTransform=
this.originalGetLocalBounds=this.originalCalculateBounds=this.originalRenderCanvas=this.originalRenderWebGL=this.textureCacheId=null};Object.defineProperties(a.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(a){if(this._cacheAsBitmap!==a){this._cacheAsBitmap=a;var b=void 0;a?(this._cacheData||(this._cacheData=new f),b=this._cacheData,b.originalRenderWebGL=this.renderWebGL,b.originalRenderCanvas=this.renderCanvas,b.originalUpdateTransform=this.updateTransform,b.originalCalculateBounds=
this._calculateBounds,b.originalGetLocalBounds=this.getLocalBounds,b.originalDestroy=this.destroy,b.originalContainsPoint=this.containsPoint,b.originalMask=this._mask,b.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(b=this._cacheData,b.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=b.originalRenderWebGL,this.renderCanvas=b.originalRenderCanvas,this._calculateBounds=b.originalCalculateBounds,
this.getLocalBounds=b.originalGetLocalBounds,this.destroy=b.originalDestroy,this.updateTransform=b.originalUpdateTransform,this.containsPoint=b.originalContainsPoint,this._mask=b.originalMask,this.filterArea=b.originalFilterArea)}}}});a.prototype._renderCachedWebGL=function(a){this.visible&&(!(0>=this.worldAlpha)&&this.renderable)&&(this._initCachedDisplayObject(a),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(a))};a.prototype._initCachedDisplayObject=
function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.alpha;this.alpha=1;a.currentRenderer.flush();var c=this.getLocalBounds().clone();this._filters&&c.pad(this._filters[0].padding);var f=a._activeRenderTarget,t=a.filterManager.filterStack,s=d.RenderTexture.create(c.width|0,c.height|0),v="cacheAsBitmap_"+(0,l.uid)();this._cacheData.textureCacheId=v;g.default.addToCache(s.baseTexture,v);e.default.addToCache(s,v);k.tx=-c.x;k.ty=-c.y;this.transform.worldTransform.identity();this.renderWebGL=
this._cacheData.originalRenderWebGL;a.render(this,s,!0,k,!0);a.bindRenderTarget(f);a.filterManager.filterStack=t;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this.filterArea=this._mask=null;f=new d.Sprite(s);f.transform.worldTransform=this.transform.worldTransform;f.anchor.x=-(c.x/c.width);f.anchor.y=-(c.y/c.height);f.alpha=b;f._bounds=this._bounds;this._calculateBounds=this._calculateCachedBounds;this.getLocalBounds=this._getCachedLocalBounds;this._cacheData.sprite=
f;this.transform._parentID=-1;this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null);this.containsPoint=f.containsPoint.bind(f)}};a.prototype._renderCachedCanvas=function(a){this.visible&&(!(0>=this.worldAlpha)&&this.renderable)&&(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(a))};a.prototype._initCachedDisplayObjectCanvas=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=
this.getLocalBounds(),c=this.alpha;this.alpha=1;var f=a.context,t=d.RenderTexture.create(b.width|0,b.height|0),s="cacheAsBitmap_"+(0,l.uid)();this._cacheData.textureCacheId=s;g.default.addToCache(t.baseTexture,s);e.default.addToCache(t,s);this.transform.localTransform.copy(k);k.invert();k.tx-=b.x;k.ty-=b.y;this.renderCanvas=this._cacheData.originalRenderCanvas;a.render(this,t,!0,k,!1);a.context=f;this.renderCanvas=this._renderCachedCanvas;this._calculateBounds=this._calculateCachedBounds;this.filterArea=
this._mask=null;f=new d.Sprite(t);f.transform.worldTransform=this.transform.worldTransform;f.anchor.x=-(b.x/b.width);f.anchor.y=-(b.y/b.height);f._bounds=this._bounds;f.alpha=c;this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null);this.updateTransform=this.displayObjectUpdateTransform;this._cacheData.sprite=f;this.containsPoint=f.containsPoint.bind(f)}};a.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()};
a.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()};a.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0);this._cacheData.sprite=null;g.default.removeFromCache(this._cacheData.textureCacheId);e.default.removeFromCache(this._cacheData.textureCacheId);this._cacheData.textureCacheId=null};a.prototype._cacheAsBitmapDestroy=function(a){this.cacheAsBitmap=!1;this.destroy(a)}},{"../core":65,"../core/textures/BaseTexture":112,
"../core/textures/Texture":115,"../core/utils":125}],139:[function(a,b,c){a=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../core"));a.DisplayObject.prototype.name=null;a.Container.prototype.getChildByName=function(a){for(var b=0;b<this.children.length;b++)if(this.children[b].name===a)return this.children[b];return null}},{"../core":65}],140:[function(a,b,c){var d=function(a){if(a&&a.__esModule)return a;
var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../core"));d.DisplayObject.prototype.getGlobalPosition=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new d.Point,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;this.parent?this.parent.toGlobal(this.position,a,b):(a.x=this.position.x,a.y=this.position.y);return a}},{"../core":65}],141:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}
c.__esModule=!0;c.BitmapText=c.TilingSpriteRenderer=c.TilingSprite=c.AnimatedSprite=void 0;var e=a("./AnimatedSprite");Object.defineProperty(c,"AnimatedSprite",{enumerable:!0,get:function(){return d(e).default}});var g=a("./TilingSprite");Object.defineProperty(c,"TilingSprite",{enumerable:!0,get:function(){return d(g).default}});var l=a("./webgl/TilingSpriteRenderer");Object.defineProperty(c,"TilingSpriteRenderer",{enumerable:!0,get:function(){return d(l).default}});var k=a("./BitmapText");Object.defineProperty(c,
"BitmapText",{enumerable:!0,get:function(){return d(k).default}});a("./cacheAsBitmap");a("./getChildByName");a("./getGlobalPosition")},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core")),g=a("../../core/const");a("path");var l=new e.Matrix;a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,
c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.shader=null;c.simpleShader=null;c.quad=null;return c}d(b,a);b.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new e.Shader(a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",
"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n");this.simpleShader=new e.Shader(a,
"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n");
this.renderer.bindVao(null);this.quad=new e.Quad(a,this.renderer.state.attribState);this.quad.initVao(this.shader)};b.prototype.render=function(a){var b=this.renderer,c=this.quad;b.bindVao(c.vao);var d=c.vertices;d[0]=d[6]=a._width*-a.anchor.x;d[1]=d[3]=a._height*-a.anchor.y;d[2]=d[4]=a._width*(1-a.anchor.x);d[5]=d[7]=a._height*(1-a.anchor.y);a.uvRespectAnchor&&(d=c.uvs,d[0]=d[6]=-a.anchor.x,d[1]=d[3]=-a.anchor.y,d[2]=d[4]=1-a.anchor.x,d[5]=d[7]=1-a.anchor.y);c.upload();var d=a._texture,f=d.baseTexture,
k=a.tileTransform.localTransform,s=a.uvTransform,v=f.isPowerOfTwo&&d.frame.width===f.width&&d.frame.height===f.height;v&&(f._glTextures[b.CONTEXT_UID]?v=f.wrapMode!==g.WRAP_MODES.CLAMP:f.wrapMode===g.WRAP_MODES.CLAMP&&(f.wrapMode=g.WRAP_MODES.REPEAT));var w=v?this.simpleShader:this.shader;b.bindShader(w);var u=d.width,x=d.height,z=a._width,y=a._height;l.set(k.a*u/z,k.b*u/y,k.c*x/z,k.d*x/y,k.tx/z,k.ty/y);l.invert();v?l.prepend(s.mapCoord):(w.uniforms.uMapCoord=s.mapCoord.toArray(!0),w.uniforms.uClampFrame=
s.uClampFrame,w.uniforms.uClampOffset=s.uClampOffset);w.uniforms.uTransform=l.toArray(!0);w.uniforms.uColor=e.utils.premultiplyTintToRgba(a.tint,a.worldAlpha,w.uniforms.uColor,f.premultipliedAlpha);w.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0);w.uniforms.uSampler=b.bindTexture(d);b.setBlendMode(e.utils.correctBlendMode(a.blendMode,f.premultipliedAlpha));c.vao.draw(this.renderer.gl.TRIANGLES,6,0)};return b}(e.ObjectRenderer);c.default=a;e.WebGLRenderer.registerPlugin("tilingSprite",
a)},{"../../core":65,"../../core/const":46,path:8}],143:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||
!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();b=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core"));a("path");a=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var d;d=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
d=d&&("object"===typeof d||"function"===typeof d)?d:this;d.alpha=c;d.glShaderKey="alpha";return d}d(b,a);e(b,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(a){this.uniforms.uAlpha=a}}]);return b}(b.Filter);c.default=a},{"../../core":65,path:8}],144:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=
a;return b}(a("../../core")),l=(b=a("./BlurXFilter"))&&b.__esModule?b:{"default":b},k=(a=a("./BlurYFilter"))&&a.__esModule?a:{"default":a};a=function(a){function b(c,d,e,q){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var t;t=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");t=t&&("object"===typeof t||"function"===typeof t)?t:this;t.blurXFilter=new l.default(c,d,e,q);t.blurYFilter=new k.default(c,d,e,q);
t.padding=0;t.resolution=e||g.settings.RESOLUTION;t.quality=d||4;t.blur=c||8;return t}d(b,a);b.prototype.apply=function(a,b,c){var d=a.getRenderTarget(!0);this.blurXFilter.apply(a,b,d,!0);this.blurYFilter.apply(a,d,c,!1);a.returnRenderTarget(d)};e(b,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},
set:function(a){this.blurXFilter.quality=this.blurYFilter.quality=a}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a;this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},
set:function(a){this.blurYFilter._blendMode=a}}]);return b}(g.Filter);c.default=a},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core"));b=a("./generateBlurVertSource");var k=d(b);b=a("./generateBlurFragSource");
var f=d(b);a=a("./getMaxBlurKernelSize");var m=d(a);a=function(a){function b(c,d,e,m){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");m=m||5;var g=(0,k.default)(m,!0);m=(0,f.default)(m);g=a.call(this,g,m);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=g&&("object"===typeof g||"function"===typeof g)?g:this;g.resolution=e||l.settings.RESOLUTION;g._quality=0;g.quality=d||4;g.strength=c||8;g.firstRun=!0;return g}e(b,a);
b.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,e=(0,m.default)(e);this.vertexSrc=(0,k.default)(e,!0);this.fragmentSrc=(0,f.default)(e);this.firstRun=!1}this.uniforms.strength=1/c.size.width*(c.size.width/b.size.width);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(1===this.passes)a.applyFilter(this,b,c,d);else{for(var g=e=a.getRenderTarget(!0),l=0;l<this.passes-1;l++){a.applyFilter(this,b,g,!0);var n=g,g=b;b=n}a.applyFilter(this,b,c,d);a.returnRenderTarget(e)}};
g(b,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a);this.strength=a}},{key:"quality",get:function(){return this._quality},set:function(a){this.passes=this._quality=a}}]);return b}(l.Filter);c.default=a},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(b,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a){if(a&&a.__esModule)return a;var b={};
if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core"));b=a("./generateBlurVertSource");var k=d(b);b=a("./generateBlurFragSource");var f=d(b);a=a("./getMaxBlurKernelSize");var m=d(a);a=function(a){function b(c,d,e,g){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");g=g||5;var m=(0,k.default)(g,!1);g=(0,f.default)(g);m=a.call(this,m,g);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
m=m&&("object"===typeof m||"function"===typeof m)?m:this;m.resolution=e||l.settings.RESOLUTION;m._quality=0;m.quality=d||4;m.strength=c||8;m.firstRun=!0;return m}e(b,a);b.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,e=(0,m.default)(e);this.vertexSrc=(0,k.default)(e,!1);this.fragmentSrc=(0,f.default)(e);this.firstRun=!1}this.uniforms.strength=1/c.size.height*(c.size.height/b.size.height);this.uniforms.strength*=this.strength;this.uniforms.strength/=this.passes;if(1===this.passes)a.applyFilter(this,
b,c,d);else{for(var g=e=a.getRenderTarget(!0),l=0;l<this.passes-1;l++){a.applyFilter(this,b,g,!0);var n=g,g=b;b=n}a.applyFilter(this,b,c,d);a.returnRenderTarget(e)}};g(b,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a);this.strength=a}},{key:"quality",get:function(){return this._quality},set:function(a){this.passes=this._quality=a}}]);return b}(l.Filter);c.default=a},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],
147:[function(a,b,c){c.__esModule=!0;c.default=function(a){for(var b=d[a],c=b.length,f=e,m="",n=void 0,p=0;p<a;p++){var r="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",p),n=p;p>=c&&(n=a-p-1);r=r.replace("%value%",b[n]);m+=r;m+="\n"}f=f.replace("%blur%",m);return f=f.replace("%size%",a)};var d={5:[0.153388,0.221461,0.250301],7:[0.071303,0.131514,0.189879,0.214607],9:[0.028532,0.067234,0.124009,0.179044,0.20236],11:[0.0093,0.028002,0.065984,0.121703,0.175713,
0.198596],13:[0.002406,0.009255,0.027867,0.065666,0.121117,0.174868,0.197641],15:[4.89E-4,0.002403,0.009246,0.02784,0.065602,0.120999,0.174697,0.197448]},e="varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}"},{}],148:[function(a,b,c){c.__esModule=!0;c.default=function(a,b){for(var c=Math.ceil(a/2),k=d,f="",m=void 0,m=b?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);",
n=0;n<a;n++)var p=m.replace("%index%",n),p=p.replace("%sampleIndex%",n-(c-1)+".0"),f=f+p,f=f+"\n";k=k.replace("%blur%",f);return k=k.replace("%size%",a)};var d="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform float strength;\nuniform mat3 projectionMatrix;\nvarying vec2 vBlurTexCoords[%size%];\nvoid main(void)\n{\ngl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n%blur%\n}"},{}],149:[function(a,b,c){c.__esModule=!0;c.default=function(a){a=
a.getParameter(a.MAX_VARYING_VECTORS);for(var b=15;b>a;)b-=2;return b}},{}],150:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];
e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();b=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core"));a("path");a=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var c;c=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n");
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];c.alpha=1;return c}d(b,a);b.prototype._loadMatrix=function(a){var b=a;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(b,this.uniforms.m,a),b=this._colorMatrix(b));this.uniforms.m=b};b.prototype._multiply=function(a,b,c){a[0]=b[0]*c[0]+b[1]*c[5]+b[2]*c[10]+b[3]*c[15];a[1]=
b[0]*c[1]+b[1]*c[6]+b[2]*c[11]+b[3]*c[16];a[2]=b[0]*c[2]+b[1]*c[7]+b[2]*c[12]+b[3]*c[17];a[3]=b[0]*c[3]+b[1]*c[8]+b[2]*c[13]+b[3]*c[18];a[4]=b[0]*c[4]+b[1]*c[9]+b[2]*c[14]+b[3]*c[19]+b[4];a[5]=b[5]*c[0]+b[6]*c[5]+b[7]*c[10]+b[8]*c[15];a[6]=b[5]*c[1]+b[6]*c[6]+b[7]*c[11]+b[8]*c[16];a[7]=b[5]*c[2]+b[6]*c[7]+b[7]*c[12]+b[8]*c[17];a[8]=b[5]*c[3]+b[6]*c[8]+b[7]*c[13]+b[8]*c[18];a[9]=b[5]*c[4]+b[6]*c[9]+b[7]*c[14]+b[8]*c[19]+b[9];a[10]=b[10]*c[0]+b[11]*c[5]+b[12]*c[10]+b[13]*c[15];a[11]=b[10]*c[1]+b[11]*
c[6]+b[12]*c[11]+b[13]*c[16];a[12]=b[10]*c[2]+b[11]*c[7]+b[12]*c[12]+b[13]*c[17];a[13]=b[10]*c[3]+b[11]*c[8]+b[12]*c[13]+b[13]*c[18];a[14]=b[10]*c[4]+b[11]*c[9]+b[12]*c[14]+b[13]*c[19]+b[14];a[15]=b[15]*c[0]+b[16]*c[5]+b[17]*c[10]+b[18]*c[15];a[16]=b[15]*c[1]+b[16]*c[6]+b[17]*c[11]+b[18]*c[16];a[17]=b[15]*c[2]+b[16]*c[7]+b[17]*c[12]+b[18]*c[17];a[18]=b[15]*c[3]+b[16]*c[8]+b[17]*c[13]+b[18]*c[18];a[19]=b[15]*c[4]+b[16]*c[9]+b[17]*c[14]+b[18]*c[19]+b[19];return a};b.prototype._colorMatrix=function(a){a=
new Float32Array(a);a[4]/=255;a[9]/=255;a[14]/=255;a[19]/=255;return a};b.prototype.brightness=function(a,b){this._loadMatrix([a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0],b)};b.prototype.greyscale=function(a,b){this._loadMatrix([a,a,a,0,0,a,a,a,0,0,a,a,a,0,0,0,0,0,1,0],b)};b.prototype.blackAndWhite=function(a){this._loadMatrix([0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0,0,0,1,0],a)};b.prototype.hue=function(a,b){a=(a||0)/180*Math.PI;var c=Math.cos(a),d=Math.sin(a),e=Math.sqrt,g=1/3,e=e(g);this._loadMatrix([c+
(1-c)*g,g*(1-c)-e*d,g*(1-c)+e*d,0,0,g*(1-c)+e*d,c+g*(1-c),g*(1-c)-e*d,0,0,g*(1-c)-e*d,g*(1-c)+e*d,c+g*(1-c),0,0,0,0,0,1,0],b)};b.prototype.contrast=function(a,b){var c=(a||0)+1,d=-0.5*(c-1);this._loadMatrix([c,0,0,0,d,0,c,0,0,d,0,0,c,0,d,0,0,0,1,0],b)};b.prototype.saturate=function(){var a=2*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)/3+1,b=-0.5*(a-1);this._loadMatrix([a,b,b,0,0,b,a,b,0,0,b,b,a,0,0,0,0,0,1,0],arguments[1])};b.prototype.desaturate=function(){this.saturate(-1)};b.prototype.negative=
function(a){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],a)};b.prototype.sepia=function(a){this._loadMatrix([0.393,0.7689999,0.18899999,0,0,0.349,0.6859999,0.16799999,0,0,0.272,0.5339999,0.13099999,0,0,0,0,0,1,0],a)};b.prototype.technicolor=function(a){this._loadMatrix([1.9125277891456083,-0.8545344976951645,-0.09155508482755585,0,11.793603434377337,-0.3087833385928097,1.7658908555458428,-0.10601743074722245,0,-70.35205161461398,-0.231103377548616,-0.7501899197440212,1.847597816108189,
0,30.950940869491138,0,0,0,1,0],a)};b.prototype.polaroid=function(a){this._loadMatrix([1.438,-0.062,-0.062,0,0,-0.122,1.378,-0.122,0,0,-0.016,-0.016,1.483,0,0,0,0,0,1,0],a)};b.prototype.toBGR=function(a){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],a)};b.prototype.kodachrome=function(a){this._loadMatrix([1.1285582396593525,-0.3967382283601348,-0.03992559172921793,0,63.72958762196502,-0.16404339962244616,1.0835251566291304,-0.05498805115633132,0,24.732407896706203,-0.16786010706155763,
-0.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],a)};b.prototype.browni=function(a){this._loadMatrix([0.5997023498159715,0.34553243048391263,-0.2708298674538042,0,47.43192855600873,-0.037703249837783157,0.8609577587992641,0.15059552388459913,0,-36.96841498319127,0.24113635128153335,-0.07441037908422492,0.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a)};b.prototype.vintage=function(a){this._loadMatrix([0.6279345635605994,0.3202183420819367,-0.03965408211312453,0,9.651285835294123,
0.02578397704808868,0.6441188644374771,0.03259127616149294,0,7.462829176470591,0.0466055556782719,-0.0851232987247891,0.5241648018700465,0,5.159190588235296,0,0,0,1,0],a)};b.prototype.colorTone=function(a,b,c,d,e){c=c||16770432;d=d||3375104;var g=(c>>16&255)/255,l=(c>>8&255)/255;c=(c&255)/255;var t=(d>>16&255)/255,s=(d>>8&255)/255;d=(d&255)/255;this._loadMatrix([0.3,0.59,0.11,0,0,g,l,c,a||0.2,0,t,s,d,b||0.15,0,g-t,l-s,c-d,0,0],e)};b.prototype.night=function(a,b){a=a||0.1;this._loadMatrix([-2*a,-a,
0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0],b)};b.prototype.predator=function(a,b){this._loadMatrix([11.224130630493164*a,-4.794486999511719*a,-2.8746118545532227*a,0*a,0.40342438220977783*a,-3.6330697536468506*a,9.193157196044922*a,-2.951810836791992*a,0*a,-1.316135048866272*a,-3.2184197902679443*a,-4.2375030517578125*a,7.476448059082031*a,0*a,0.8044459223747253*a,0,0,0,1,0],b)};b.prototype.lsd=function(a){this._loadMatrix([2,-0.4,0.5,0,0,-0.5,2,-0.4,0,0,-0.4,-0.5,3,0,0,0,0,0,1,0],a)};b.prototype.reset=
function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)};e(b,[{key:"matrix",get:function(){return this.uniforms.m},set:function(a){this.uniforms.m=a}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(a){this.uniforms.uAlpha=a}}]);return b}(b.Filter);c.default=a;a.prototype.grayscale=a.prototype.greyscale},{"../../core":65,path:8}],151:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(a){if(a&&a.__esModule)return a;var b={};
if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core"));a("path");a=function(a){function b(c,d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var e=new g.Matrix;c.renderable=!1;var p;p=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}",
"varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
p=p&&("object"===typeof p||"function"===typeof p)?p:this;p.maskSprite=c;p.maskMatrix=e;p.uniforms.mapSampler=c._texture;p.uniforms.filterMatrix=e;p.uniforms.scale={x:1,y:1};if(null===d||void 0===d)d=20;p.scale=new g.Point(d,d);return p}d(b,a);b.prototype.apply=function(a,b,c){this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.maskMatrix,this.maskSprite);this.uniforms.scale.x=this.scale.x;this.uniforms.scale.y=this.scale.y;a.applyFilter(this,b,c)};e(b,[{key:"map",get:function(){return this.uniforms.mapSampler},
set:function(a){this.uniforms.mapSampler=a}}]);return b}(g.Filter);c.default=a},{"../../core":65,path:8}],152:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;b=function(a){if(a&&a.__esModule)return a;
var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core"));a("path");a=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var c=a.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",
'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n');
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&("object"===typeof c||"function"===typeof c)?c:this}d(b,a);return b}(b.Filter);c.default=a},{"../../core":65,path:8}],153:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./fxaa/FXAAFilter");Object.defineProperty(c,"FXAAFilter",{enumerable:!0,get:function(){return d(e).default}});var g=a("./noise/NoiseFilter");Object.defineProperty(c,"NoiseFilter",
{enumerable:!0,get:function(){return d(g).default}});var l=a("./displacement/DisplacementFilter");Object.defineProperty(c,"DisplacementFilter",{enumerable:!0,get:function(){return d(l).default}});var k=a("./blur/BlurFilter");Object.defineProperty(c,"BlurFilter",{enumerable:!0,get:function(){return d(k).default}});var f=a("./blur/BlurXFilter");Object.defineProperty(c,"BlurXFilter",{enumerable:!0,get:function(){return d(f).default}});var m=a("./blur/BlurYFilter");Object.defineProperty(c,"BlurYFilter",
{enumerable:!0,get:function(){return d(m).default}});var n=a("./colormatrix/ColorMatrixFilter");Object.defineProperty(c,"ColorMatrixFilter",{enumerable:!0,get:function(){return d(n).default}});var p=a("./alpha/AlphaFilter");Object.defineProperty(c,"AlphaFilter",{enumerable:!0,get:function(){return d(p).default}})},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,
"./noise/NoiseFilter":154}],154:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;
"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();b=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core"));a("path");a=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0.5,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var e;e=a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n");
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=e&&("object"===typeof e||"function"===typeof e)?e:this;e.noise=c;e.seed=d;return e}d(b,a);e(b,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(a){this.uniforms.uNoise=a}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(a){this.uniforms.uSeed=a}}]);return b}(b.Filter);c.default=a},{"../../core":65,path:8}],155:[function(a,b,c){c.__esModule=!0;var d=function(){function a(b,
c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../core"));a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.global=
new e.Point;this.identifier=this.originalEvent=this.target=null;this.isPrimary=!1;this.tiltY=this.tiltX=this.height=this.width=this.buttons=this.button=0;this.pointerType=null;this.tangentialPressure=this.twist=this.rotationAngle=this.pressure=0}a.prototype.getLocalPosition=function(a,b,c){return a.worldTransform.applyInverse(c||this.global,b)};a.prototype.copyEvent=function(a){a.isPrimary&&(this.isPrimary=!0);this.button=a.button;this.buttons=Number.isInteger(a.buttons)?a.buttons:a.which;this.width=
a.width;this.height=a.height;this.tiltX=a.tiltX;this.tiltY=a.tiltY;this.pointerType=a.pointerType;this.pressure=a.pressure;this.rotationAngle=a.rotationAngle;this.twist=a.twist||0;this.tangentialPressure=a.tangentialPressure||0};a.prototype.reset=function(){this.isPrimary=!1};d(a,[{key:"pointerId",get:function(){return this.identifier}}]);return a}();c.default=a},{"../core":65}],156:[function(a,b,c){c.__esModule=!0;a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.stopped=!1;this.data=this.type=this.currentTarget=this.target=null}a.prototype.stopPropagation=function(){this.stopped=!0};a.prototype.reset=function(){this.stopped=!1;this.target=this.currentTarget=null};return a}();c.default=a},{}],157:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},l=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../core"));
b=a("./InteractionData");var k=d(b);b=a("./InteractionEvent");var f=d(b);b=a("./InteractionTrackingData");var m=d(b);b=a("eventemitter3");b=d(b);a=a("./interactiveTarget");a=d(a);l.utils.mixins.delayMixin(l.DisplayObject.prototype,a.default);var n=1,p={target:null,data:{global:null}};a=function(a){function b(c,d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var e;e=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
e=e&&("object"===typeof e||"function"===typeof e)?e:this;d=d||{};e.renderer=c;e.autoPreventDefault=void 0!==d.autoPreventDefault?d.autoPreventDefault:!0;e.interactionFrequency=d.interactionFrequency||10;e.mouse=new k.default;e.mouse.identifier=n;e.mouse.global.set(-999999);e.activeInteractionData={};e.activeInteractionData[n]=e.mouse;e.interactionDataPool=[];e.eventData=new f.default;e.interactionDOMElement=null;e.moveWhenInside=!1;e.eventsAdded=!1;e.mouseOverRenderer=!1;e.supportsTouchEvents="ontouchstart"in
window;e.supportsPointerEvents=!!window.PointerEvent;e.onPointerUp=e.onPointerUp.bind(e);e.processPointerUp=e.processPointerUp.bind(e);e.onPointerCancel=e.onPointerCancel.bind(e);e.processPointerCancel=e.processPointerCancel.bind(e);e.onPointerDown=e.onPointerDown.bind(e);e.processPointerDown=e.processPointerDown.bind(e);e.onPointerMove=e.onPointerMove.bind(e);e.processPointerMove=e.processPointerMove.bind(e);e.onPointerOut=e.onPointerOut.bind(e);e.processPointerOverOut=e.processPointerOverOut.bind(e);
e.onPointerOver=e.onPointerOver.bind(e);e.cursorStyles={"default":"inherit",pointer:"pointer"};e.currentCursorMode=null;e.cursor=null;e._tempPoint=new l.Point;e.resolution=1;e.setTargetElement(e.renderer.view,e.renderer.resolution);return e}e(b,a);b.prototype.hitTest=function(a,b){p.target=null;p.data.global=a;b||(b=this.renderer._lastObjectRendered);this.processInteractive(p,b,null,!0);return p.target};b.prototype.setTargetElement=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
1;this.removeEvents();this.interactionDOMElement=a;this.resolution=b;this.addEvents()};b.prototype.addEvents=function(){this.interactionDOMElement&&(l.ticker.shared.add(this.update,this,l.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",
this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",
this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),
this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)};b.prototype.removeEvents=function(){this.interactionDOMElement&&(l.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",
this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",
this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,
!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)};b.prototype.update=function(a){this._deltaTime+=a;if(!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{this.cursor=null;for(var b in this.activeInteractionData)this.activeInteractionData.hasOwnProperty(b)&&(a=this.activeInteractionData[b],a.originalEvent&&"touch"!==a.pointerType&&
(a=this.configureInteractionEventForDOMEvent(this.eventData,a.originalEvent,a),this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)));this.setCursorMode(this.cursor)}};b.prototype.setCursorMode=function(a){a=a||"default";if(this.currentCursorMode!==a){this.currentCursorMode=a;var b=this.cursorStyles[a];if(b)switch("undefined"===typeof b?"undefined":g(b)){case "string":this.interactionDOMElement.style.cursor=b;break;case "function":b(a);break;case "object":Object.assign(this.interactionDOMElement.style,
b)}else"string"===typeof a&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,a)&&(this.interactionDOMElement.style.cursor=a)}};b.prototype.dispatchEvent=function(a,b,c){if(!c.stopped&&(c.currentTarget=a,c.type=b,a.emit(b,c),a[b]))a[b](c)};b.prototype.mapPositionToPoint=function(a,b,c){var d=void 0,d=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0},e=navigator.isCocoonJS?this.resolution:1/this.resolution;a.x=(b-d.left)*(this.interactionDOMElement.width/
d.width)*e;a.y=(c-d.top)*(this.interactionDOMElement.height/d.height)*e};b.prototype.processInteractive=function(a,b,c,d,e){if(!b||!b.visible)return!1;var f=a.data.global;e=b.interactive||e;var g=!1,k=e,m=!0;b.hitArea?(d&&(b.worldTransform.applyInverse(f,this._tempPoint),b.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?g=!0:m=d=!1),k=!1):b._mask&&(d&&!b._mask.containsPoint(f))&&(m=d=!1);if(m&&b.interactiveChildren&&b.children)for(var m=b.children,l=m.length-1;0<=l;l--){var n=m[l],p=this.processInteractive(a,
n,c,d,k);p&&n.parent&&(k=!1,p&&(a.target&&(d=!1),g=!0))}e&&(d&&!a.target&&!b.hitArea&&b.containsPoint&&b.containsPoint(f)&&(g=!0),b.interactive&&(g&&!a.target&&(a.target=b),c&&c(a,b,!!g)));return g};b.prototype.onPointerDown=function(a){if(!(this.supportsTouchEvents&&"touch"===a.pointerType)){var b=this.normalizeToPointerData(a);this.autoPreventDefault&&b[0].isNormalized&&a.preventDefault();for(var c=b.length,d=0;d<c;d++){var e=b[d],f=this.getInteractionDataForPointerId(e),f=this.configureInteractionEventForDOMEvent(this.eventData,
e,f);f.data.originalEvent=a;this.processInteractive(f,this.renderer._lastObjectRendered,this.processPointerDown,!0);this.emit("pointerdown",f);if("touch"===e.pointerType)this.emit("touchstart",f);else if("mouse"===e.pointerType||"pen"===e.pointerType)this.emit(2===e.button?"rightdown":"mousedown",this.eventData)}}};b.prototype.processPointerDown=function(a,b,c){var d=a.data,e=a.data.identifier;if(c)if(b.trackedPointers[e]||(b.trackedPointers[e]=new m.default(e)),this.dispatchEvent(b,"pointerdown",
a),"touch"===d.pointerType)this.dispatchEvent(b,"touchstart",a);else if("mouse"===d.pointerType||"pen"===d.pointerType)(c=2===d.button)?b.trackedPointers[e].rightDown=!0:b.trackedPointers[e].leftDown=!0,this.dispatchEvent(b,c?"rightdown":"mousedown",a)};b.prototype.onPointerComplete=function(a,b,c){for(var d=this.normalizeToPointerData(a),e=d.length,f=a.target!==this.interactionDOMElement?"outside":"",g=0;g<e;g++){var k=d[g],m=this.getInteractionDataForPointerId(k),l=this.configureInteractionEventForDOMEvent(this.eventData,
k,m);l.data.originalEvent=a;this.processInteractive(l,this.renderer._lastObjectRendered,c,b||!f);this.emit(b?"pointercancel":"pointerup"+f,l);"mouse"===k.pointerType||"pen"===k.pointerType?this.emit(2===k.button?"rightup"+f:"mouseup"+f,l):"touch"===k.pointerType&&(this.emit(b?"touchcancel":"touchend"+f,l),this.releaseInteractionDataForPointerId(k.pointerId,m))}};b.prototype.onPointerCancel=function(a){if(!(this.supportsTouchEvents&&"touch"===a.pointerType))this.onPointerComplete(a,!0,this.processPointerCancel)};
b.prototype.processPointerCancel=function(a,b){var c=a.data,d=a.data.identifier;void 0!==b.trackedPointers[d]&&(delete b.trackedPointers[d],this.dispatchEvent(b,"pointercancel",a),"touch"===c.pointerType&&this.dispatchEvent(b,"touchcancel",a))};b.prototype.onPointerUp=function(a){if(!(this.supportsTouchEvents&&"touch"===a.pointerType))this.onPointerComplete(a,!1,this.processPointerUp)};b.prototype.processPointerUp=function(a,b,c){var d=a.data,e=a.data.identifier,f=b.trackedPointers[e],g="touch"===
d.pointerType;if("mouse"===d.pointerType||"pen"===d.pointerType){var d=2===d.button,k=m.default.FLAGS,k=d?k.RIGHT_DOWN:k.LEFT_DOWN,k=void 0!==f&&f.flags&k;c?(this.dispatchEvent(b,d?"rightup":"mouseup",a),k&&this.dispatchEvent(b,d?"rightclick":"click",a)):k&&this.dispatchEvent(b,d?"rightupoutside":"mouseupoutside",a);f&&(d?f.rightDown=!1:f.leftDown=!1)}c?(this.dispatchEvent(b,"pointerup",a),g&&this.dispatchEvent(b,"touchend",a),f&&(this.dispatchEvent(b,"pointertap",a),g&&(this.dispatchEvent(b,"tap",
a),f.over=!1))):f&&(this.dispatchEvent(b,"pointerupoutside",a),g&&this.dispatchEvent(b,"touchendoutside",a));f&&f.none&&delete b.trackedPointers[e]};b.prototype.onPointerMove=function(a){if(!(this.supportsTouchEvents&&"touch"===a.pointerType)){var b=this.normalizeToPointerData(a);if("mouse"===b[0].pointerType||"pen"===b[0].pointerType)this.didMove=!0,this.cursor=null;for(var c=b.length,d=0;d<c;d++){var e=b[d],f=this.getInteractionDataForPointerId(e),f=this.configureInteractionEventForDOMEvent(this.eventData,
e,f);f.data.originalEvent=a;this.processInteractive(f,this.renderer._lastObjectRendered,this.processPointerMove,"touch"===e.pointerType?this.moveWhenInside:!0);this.emit("pointermove",f);"touch"===e.pointerType&&this.emit("touchmove",f);("mouse"===e.pointerType||"pen"===e.pointerType)&&this.emit("mousemove",f)}"mouse"===b[0].pointerType&&this.setCursorMode(this.cursor)}};b.prototype.processPointerMove=function(a,b,c){var d=a.data,e="touch"===d.pointerType;(d="mouse"===d.pointerType||"pen"===d.pointerType)&&
this.processPointerOverOut(a,b,c);if(!this.moveWhenInside||c)this.dispatchEvent(b,"pointermove",a),e&&this.dispatchEvent(b,"touchmove",a),d&&this.dispatchEvent(b,"mousemove",a)};b.prototype.onPointerOut=function(a){if(!(this.supportsTouchEvents&&"touch"===a.pointerType)){a=this.normalizeToPointerData(a)[0];"mouse"===a.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var b=this.getInteractionDataForPointerId(a),c=this.configureInteractionEventForDOMEvent(this.eventData,a,b);c.data.originalEvent=
a;this.processInteractive(c,this.renderer._lastObjectRendered,this.processPointerOverOut,!1);this.emit("pointerout",c);"mouse"===a.pointerType||"pen"===a.pointerType?this.emit("mouseout",c):this.releaseInteractionDataForPointerId(b.identifier)}};b.prototype.processPointerOverOut=function(a,b,c){var d=a.data,e=a.data.identifier,d="mouse"===d.pointerType||"pen"===d.pointerType,f=b.trackedPointers[e];c&&!f&&(f=b.trackedPointers[e]=new m.default(e));void 0!==f&&(c&&this.mouseOverRenderer?(f.over||(f.over=
!0,this.dispatchEvent(b,"pointerover",a),d&&this.dispatchEvent(b,"mouseover",a)),d&&null===this.cursor&&(this.cursor=b.cursor)):f.over&&(f.over=!1,this.dispatchEvent(b,"pointerout",this.eventData),d&&this.dispatchEvent(b,"mouseout",a),f.none&&delete b.trackedPointers[e]))};b.prototype.onPointerOver=function(a){a=this.normalizeToPointerData(a)[0];var b=this.getInteractionDataForPointerId(a),b=this.configureInteractionEventForDOMEvent(this.eventData,a,b);b.data.originalEvent=a;"mouse"===a.pointerType&&
(this.mouseOverRenderer=!0);this.emit("pointerover",b);("mouse"===a.pointerType||"pen"===a.pointerType)&&this.emit("mouseover",b)};b.prototype.getInteractionDataForPointerId=function(a){var b=a.pointerId,c=void 0;b===n||"mouse"===a.pointerType?c=this.mouse:this.activeInteractionData[b]?c=this.activeInteractionData[b]:(c=this.interactionDataPool.pop()||new k.default,c.identifier=b,this.activeInteractionData[b]=c);c.copyEvent(a);return c};b.prototype.releaseInteractionDataForPointerId=function(a){var b=
this.activeInteractionData[a];b&&(delete this.activeInteractionData[a],b.reset(),this.interactionDataPool.push(b))};b.prototype.configureInteractionEventForDOMEvent=function(a,b,c){a.data=c;this.mapPositionToPoint(c.global,b.clientX,b.clientY);navigator.isCocoonJS&&"touch"===b.pointerType&&(c.global.x/=this.resolution,c.global.y/=this.resolution);"touch"===b.pointerType&&(b.globalX=c.global.x,b.globalY=c.global.y);c.originalEvent=b;a.reset();return a};b.prototype.normalizeToPointerData=function(a){var b=
[];if(this.supportsTouchEvents&&a instanceof TouchEvent)for(var c=0,d=a.changedTouches.length;c<d;c++){var e=a.changedTouches[c];"undefined"===typeof e.button&&(e.button=a.touches.length?1:0);"undefined"===typeof e.buttons&&(e.buttons=a.touches.length?1:0);"undefined"===typeof e.isPrimary&&(e.isPrimary=1===a.touches.length&&"touchstart"===a.type);"undefined"===typeof e.width&&(e.width=e.radiusX||1);"undefined"===typeof e.height&&(e.height=e.radiusY||1);"undefined"===typeof e.tiltX&&(e.tiltX=0);"undefined"===
typeof e.tiltY&&(e.tiltY=0);"undefined"===typeof e.pointerType&&(e.pointerType="touch");"undefined"===typeof e.pointerId&&(e.pointerId=e.identifier||0);"undefined"===typeof e.pressure&&(e.pressure=e.force||0.5);e.twist=0;e.tangentialPressure=0;"undefined"===typeof e.layerX&&(e.layerX=e.offsetX=e.clientX);"undefined"===typeof e.layerY&&(e.layerY=e.offsetY=e.clientY);e.isNormalized=!0;b.push(e)}else{if(a instanceof MouseEvent&&(!this.supportsPointerEvents||!(a instanceof window.PointerEvent)))"undefined"===
typeof a.isPrimary&&(a.isPrimary=!0),"undefined"===typeof a.width&&(a.width=1),"undefined"===typeof a.height&&(a.height=1),"undefined"===typeof a.tiltX&&(a.tiltX=0),"undefined"===typeof a.tiltY&&(a.tiltY=0),"undefined"===typeof a.pointerType&&(a.pointerType="mouse"),"undefined"===typeof a.pointerId&&(a.pointerId=n),"undefined"===typeof a.pressure&&(a.pressure=0.5),a.twist=0,a.tangentialPressure=0,a.isNormalized=!0;b.push(a)}return b};b.prototype.destroy=function(){this.removeEvents();this.removeAllListeners();
this._tempPoint=this.onPointerOver=this.processPointerOverOut=this.onPointerOut=this.processPointerMove=this.onPointerMove=this.processPointerCancel=this.onPointerCancel=this.processPointerUp=this.onPointerUp=this.processPointerDown=this.onPointerDown=this.interactionDOMElement=this.eventData=this.mouse=this.renderer=null};return b}(b.default);c.default=a;l.WebGLRenderer.registerPlugin("interaction",a);l.CanvasRenderer.registerPlugin("interaction",a)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,
"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(a,b,c){c.__esModule=!0;var d=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._pointerId=b;this._flags=a.FLAGS.NONE}
a.prototype._doSet=function(a,b){this._flags=b?this._flags|a:this._flags&~a};d(a,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(a){this._flags=a}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!==(this._flags&this.constructor.FLAGS.OVER)},set:function(a){this._doSet(this.constructor.FLAGS.OVER,a)}},{key:"rightDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},
set:function(a){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,a)}},{key:"leftDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(a){this._doSet(this.constructor.FLAGS.LEFT_DOWN,a)}}]);return a}();c.default=a;a.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./InteractionData");Object.defineProperty(c,"InteractionData",{enumerable:!0,get:function(){return d(e).default}});
var g=a("./InteractionManager");Object.defineProperty(c,"InteractionManager",{enumerable:!0,get:function(){return d(g).default}});var l=a("./interactiveTarget");Object.defineProperty(c,"interactiveTarget",{enumerable:!0,get:function(){return d(l).default}});var k=a("./InteractionTrackingData");Object.defineProperty(c,"InteractionTrackingData",{enumerable:!0,get:function(){return d(k).default}});var f=a("./InteractionEvent");Object.defineProperty(c,"InteractionEvent",{enumerable:!0,get:function(){return d(f).default}})},
{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(a,b,c){c.__esModule=!0;c.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(a){a?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){void 0===this._trackedPointers&&(this._trackedPointers={});return this._trackedPointers},_trackedPointers:void 0}},
{}],161:[function(a,b,c){function d(a,b){a.bitmapFont=k.BitmapText.registerFont(a.data,b)}c.__esModule=!0;c.parse=d;c.default=function(){return function(a,b){if(!a.data||a.type!==l.Resource.TYPE.XML)b();else if(0===a.data.getElementsByTagName("page").length||0===a.data.getElementsByTagName("info").length||null===a.data.getElementsByTagName("info")[0].getAttribute("face"))b();else{var c=!a.isDataUrl?e.dirname(a.url):"";a.isDataUrl&&("."===c&&(c=""),this.baseUrl&&c&&"/"===this.baseUrl.charAt(this.baseUrl.length-
1)&&(c+="/"));(c=c.replace(this.baseUrl,""))&&"/"!==c.charAt(c.length-1)&&(c+="/");c+=a.data.getElementsByTagName("page")[0].getAttribute("file");g.utils.TextureCache[c]?(d(a,g.utils.TextureCache[c]),b()):this.add(a.name+"_image",c,{crossOrigin:a.crossOrigin,loadType:l.Resource.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata,parentResource:a},function(c){d(a,c.texture);b()})}}};var e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(b[c]=a[c]);b.default=a;return b}(a("path")),g=a("../core"),l=a("resource-loader"),k=a("../extras")},{"../core":65,"../extras":141,path:8,"resource-loader":36}],162:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;c.shared=c.Resource=c.textureParser=c.getResourcePath=c.spritesheetParser=c.parseBitmapFontData=c.bitmapFontParser=c.Loader=void 0;var e=a("./bitmapFontParser");Object.defineProperty(c,"bitmapFontParser",{enumerable:!0,get:function(){return d(e).default}});
Object.defineProperty(c,"parseBitmapFontData",{enumerable:!0,get:function(){return e.parse}});var g=a("./spritesheetParser");Object.defineProperty(c,"spritesheetParser",{enumerable:!0,get:function(){return d(g).default}});Object.defineProperty(c,"getResourcePath",{enumerable:!0,get:function(){return g.getResourcePath}});var l=a("./textureParser");Object.defineProperty(c,"textureParser",{enumerable:!0,get:function(){return d(l).default}});var k=a("resource-loader");Object.defineProperty(c,"Resource",
{enumerable:!0,get:function(){return k.Resource}});b=a("../core/Application");b=d(b);a=a("./loader");var f=d(a);c.Loader=f.default;var m=new f.default;m.destroy=function(){};c.shared=m;c=b.default.prototype;c._loader=null;Object.defineProperty(c,"loader",{get:function(){this._loader||(this._loader=this._options.sharedLoader?m:new f.default);return this._loader}});c._parentDestroy=c.destroy;c.destroy=function(a){this._loader&&(this._loader.destroy(),this._loader=null);this._parentDestroy(a)}},{"../core/Application":43,
"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=
Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;b=a("resource-loader");b=d(b);var l=a("resource-loader/lib/middlewares/parsing/blob"),k=a("eventemitter3"),f=d(k),k=a("./textureParser"),k=d(k),m=a("./spritesheetParser"),m=d(m);a=a("./bitmapFontParser");a=d(a);var n=function(a){function b(c,d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var g=e(this,a.call(this,c,d));f.default.call(g);for(var k=0;k<b._pixiMiddleware.length;++k)g.use(b._pixiMiddleware[k]());g.onStart.add(function(a){return g.emit("start",a)});g.onProgress.add(function(a,b){return g.emit("progress",a,b)});g.onError.add(function(a,b,c){return g.emit("error",a,b,c)});g.onLoad.add(function(a,b){return g.emit("load",a,b)});g.onComplete.add(function(a,b){return g.emit("complete",a,b)});return g}g(b,a);b.addPixiMiddleware=function(a){b._pixiMiddleware.push(a)};b.prototype.destroy=
function(){this.removeAllListeners();this.reset()};return b}(b.default);c.default=n;for(var p in f.default.prototype)n.prototype[p]=f.default.prototype[p];n._pixiMiddleware=[l.blobMiddlewareFactory,k.default,m.default,a.default];c=b.default.Resource;c.setExtensionXhrType("fnt",c.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(a,b,c){function d(a,
b){return a.isDataUrl?a.data.meta.image:g.default.resolve(a.url.replace(b,""),a.data.meta.image)}c.__esModule=!0;c.default=function(){return function(a,b){var c=a.name+"_image";if(!a.data||a.type!==e.Resource.TYPE.JSON||!a.data.frames||this.resources[c])b();else{var g={crossOrigin:a.crossOrigin,metadata:a.metadata.imageMetadata,parentResource:a},p=d(a,this.baseUrl);this.add(c,p,g,function(c){if(c.error)b(c.error);else{var d=new l.Spritesheet(c.texture.baseTexture,a.data,a.url);d.parse(function(){a.spritesheet=
d;a.textures=d.textures;b()})}})}}};c.getResourcePath=d;var e=a("resource-loader"),g=(b=a("url"))&&b.__esModule?b:{"default":b},l=a("../core")},{"../core":65,"resource-loader":36,url:38}],165:[function(a,b,c){c.__esModule=!0;c.default=function(){return function(a,b){a.data&&a.type===d.Resource.TYPE.IMAGE&&(a.texture=e.default.fromLoader(a.data,a.url,a.name));b()}};var d=a("resource-loader"),e=(a=a("../core/textures/Texture"))&&a.__esModule?a:{"default":a}},{"../core/textures/Texture":115,"resource-loader":36}],
166:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);
Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../core")),l=(a=a("../core/textures/Texture"))&&a.__esModule?a:{"default":a},k=new g.Point,f=new g.Polygon;a=function(a){function b(c,d,e,f,k){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var v;v=a.call(this);
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");v=v&&("object"===typeof v||"function"===typeof v)?v:this;v._texture=c||l.default.EMPTY;v.uvs=e||new Float32Array([0,0,1,0,1,1,0,1]);v.vertices=d||new Float32Array([0,0,100,0,100,100,0,100]);v.indices=f||new Uint16Array([0,1,3,2]);v.dirty=0;v.indexDirty=0;v.blendMode=g.BLEND_MODES.NORMAL;v.canvasPadding=g.settings.MESH_CANVAS_PADDING;v.drawMode=k||b.DRAW_MODES.TRIANGLE_MESH;v.shader=null;v.tintRgb=new Float32Array([1,
1,1]);v._glDatas={};v._uvTransform=new g.TextureMatrix(v._texture);v.uploadUvTransform=!1;v.pluginName="mesh";return v}d(b,a);b.prototype._renderWebGL=function(a){this.refresh();a.setObjectRenderer(a.plugins[this.pluginName]);a.plugins[this.pluginName].render(this)};b.prototype._renderCanvas=function(a){this.refresh();a.plugins[this.pluginName].render(this)};b.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture;this.refresh()};b.prototype.multiplyUvs=function(){this.uploadUvTransform||
this._uvTransform.multiplyUvs(this.uvs)};b.prototype.refresh=function(a){this._uvTransform.update(a)&&this._refresh()};b.prototype._refresh=function(){};b.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)};b.prototype.containsPoint=function(a){if(!this.getBounds().contains(a.x,a.y))return!1;this.worldTransform.applyInverse(a,k);a=this.vertices;for(var c=f.points,d=this.indices,e=this.indices.length,g=this.drawMode===b.DRAW_MODES.TRIANGLES?
3:1,m=0;m+2<e;m+=g){var l=2*d[m],u=2*d[m+1],x=2*d[m+2];c[0]=a[l];c[1]=a[l+1];c[2]=a[u];c[3]=a[u+1];c[4]=a[x];c[5]=a[x+1];if(f.contains(k.x,k.y))return!0}return!1};e(b,[{key:"texture",get:function(){return this._texture},set:function(a){if(this._texture!==a&&(this._texture=a))if(a.baseTexture.hasLoaded)this._onTextureUpdate();else a.once("update",this._onTextureUpdate,this)}},{key:"tint",get:function(){return g.utils.rgb2hex(this.tintRgb)},set:function(a){this.tintRgb=g.utils.hex2rgb(a,this.tintRgb)}}]);
return b}(g.Container);c.default=a;a.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,
c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();a=a("./Plane");var g=10;a=function(a){function b(c,d,e,p,r){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var q;q=a.call(this,c,4,4);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");q=q&&("object"===typeof q||
"function"===typeof q)?q:this;q._origWidth=c.orig.width;q._origHeight=c.orig.height;q._width=q._origWidth;q._height=q._origHeight;q.leftWidth="undefined"!==typeof d?d:g;q.rightWidth="undefined"!==typeof p?p:g;q.topHeight="undefined"!==typeof e?e:g;q.bottomHeight="undefined"!==typeof r?r:g;q.refresh(!0);return q}d(b,a);b.prototype.updateHorizontalVertices=function(){var a=this.vertices;a[9]=a[11]=a[13]=a[15]=this._topHeight;a[17]=a[19]=a[21]=a[23]=this._height-this._bottomHeight;a[25]=a[27]=a[29]=
a[31]=this._height};b.prototype.updateVerticalVertices=function(){var a=this.vertices;a[2]=a[10]=a[18]=a[26]=this._leftWidth;a[4]=a[12]=a[20]=a[28]=this._width-this._rightWidth;a[6]=a[14]=a[22]=a[30]=this._width};b.prototype._renderCanvas=function(a){var b=a.context;b.globalAlpha=this.worldAlpha;a.setBlendMode(this.blendMode);var c=this.worldTransform,d=a.resolution;a.roundPixels?b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d|0,c.ty*d|0):b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d,c.ty*d);d=this._texture.baseTexture;
a=d.source;c=d.width*d.resolution;d=d.height*d.resolution;this.drawSegment(b,a,c,d,0,1,10,11);this.drawSegment(b,a,c,d,2,3,12,13);this.drawSegment(b,a,c,d,4,5,14,15);this.drawSegment(b,a,c,d,8,9,18,19);this.drawSegment(b,a,c,d,10,11,20,21);this.drawSegment(b,a,c,d,12,13,22,23);this.drawSegment(b,a,c,d,16,17,26,27);this.drawSegment(b,a,c,d,18,19,28,29);this.drawSegment(b,a,c,d,20,21,30,31)};b.prototype.drawSegment=function(a,b,c,d,e,g,k,l){var v=this.uvs,w=this.vertices,u=(v[k]-v[e])*c,x=(v[l]-v[g])*
d;k=w[k]-w[e];l=w[l]-w[g];1>u&&(u=1);1>x&&(x=1);1>k&&(k=1);1>l&&(l=1);a.drawImage(b,v[e]*c,v[g]*d,u,x,w[e],w[g],k,l)};b.prototype._refresh=function(){a.prototype._refresh.call(this);var b=this.uvs,c=this._texture;this._origWidth=c.orig.width;this._origHeight=c.orig.height;var c=1/this._origWidth,d=1/this._origHeight;b[0]=b[8]=b[16]=b[24]=0;b[1]=b[3]=b[5]=b[7]=0;b[6]=b[14]=b[22]=b[30]=1;b[25]=b[27]=b[29]=b[31]=1;b[2]=b[10]=b[18]=b[26]=c*this._leftWidth;b[4]=b[12]=b[20]=b[28]=1-c*this._rightWidth;b[9]=
b[11]=b[13]=b[15]=d*this._topHeight;b[17]=b[19]=b[21]=b[23]=1-d*this._bottomHeight;this.updateHorizontalVertices();this.updateVerticalVertices();this.dirty++;this.multiplyUvs()};e(b,[{key:"width",get:function(){return this._width},set:function(a){this._width=a;this._refresh()}},{key:"height",get:function(){return this._height},set:function(a){this._height=a;this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(a){this._leftWidth=a;this._refresh()}},{key:"rightWidth",
get:function(){return this._rightWidth},set:function(a){this._rightWidth=a;this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(a){this._topHeight=a;this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(a){this._bottomHeight=a;this._refresh()}}]);return b}((a&&a.__esModule?a:{"default":a}).default);c.default=a},{"./Plane":168}],168:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=(a=a("./Mesh"))&&a.__esModule?a:{"default":a};a=function(a){function b(c,d,m){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||
"function"===typeof c)?c:this;c._ready=!0;c.verticesX=d||10;c.verticesY=m||10;c.drawMode=e.default.DRAW_MODES.TRIANGLES;c.refresh();return c}d(b,a);b.prototype._refresh=function(){for(var a=this._texture,b=this.verticesX*this.verticesY,c=[],d=[],e=[],g=this.verticesX-1,l=this.verticesY-1,t=a.width/g,a=a.height/l,s=0;s<b;s++){var v=s%this.verticesX,w=s/this.verticesX|0;c.push(v*t,w*a);d.push(v/g,w/l)}b=g*l;for(l=0;l<b;l++)t=l%g,a=l/g|0,s=a*this.verticesX+t+1,v=(a+1)*this.verticesX+t,w=(a+1)*this.verticesX+
t+1,e.push(a*this.verticesX+t,s,v),e.push(s,w,v);this.vertices=new Float32Array(c);this.uvs=new Float32Array(d);this.colors=new Float32Array([]);this.indices=new Uint16Array(e);this.dirty++;this.indexDirty++;this.multiplyUvs()};b.prototype._onTextureUpdate=function(){e.default.prototype._onTextureUpdate.call(this);this._ready&&this.refresh()};return b}(e.default);c.default=a},{"./Mesh":166}],169:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;a=a("./Mesh");a=function(a){function b(c,d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var f;f=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=f&&("object"===typeof f||"function"===typeof f)?f:this;
f.points=d;f.vertices=new Float32Array(4*d.length);f.uvs=new Float32Array(4*d.length);f.colors=new Float32Array(2*d.length);f.indices=new Uint16Array(2*d.length);f.autoUpdate=!0;f.refresh();return f}d(b,a);b.prototype._refresh=function(){var a=this.points;if(!(1>a.length)&&this._texture._uvs){this.vertices.length/4!==a.length&&(this.vertices=new Float32Array(4*a.length),this.uvs=new Float32Array(4*a.length),this.colors=new Float32Array(2*a.length),this.indices=new Uint16Array(2*a.length));var b=this.uvs,
c=this.indices,d=this.colors;b[0]=0;b[1]=0;b[2]=0;b[3]=1;d[0]=1;d[1]=1;c[0]=0;c[1]=1;for(var a=a.length,e=1;e<a;e++){var g=4*e,r=e/(a-1);b[g]=r;b[g+1]=0;b[g+2]=r;b[g+3]=1;g=2*e;d[g]=1;d[g+1]=1;g=2*e;c[g]=g;c[g+1]=g+1}this.dirty++;this.indexDirty++;this.multiplyUvs();this.refreshVertices()}};b.prototype.refreshVertices=function(){var a=this.points;if(!(1>a.length))for(var b=a[0],c=void 0,d=c=0,e=this.vertices,g=a.length,r=0;r<g;r++){var q=a[r],t=4*r,c=r<a.length-1?a[r+1]:q,d=-(c.x-b.x),c=c.y-b.y,b=
Math.sqrt(c*c+d*d),s=this._texture.height/2,c=c/b,d=d/b,c=c*s,d=d*s;e[t]=q.x+c;e[t+1]=q.y+d;e[t+2]=q.x-c;e[t+3]=q.y-d;b=q}};b.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices();this.containerUpdateTransform()};return b}((a&&a.__esModule?a:{"default":a}).default);c.default=a},{"./Mesh":166}],170:[function(a,b,c){c.__esModule=!0;b=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core"));
var d=(a=a("../Mesh"))&&a.__esModule?a:{"default":a};a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.renderer=b}a.prototype.render=function(a){var b=this.renderer,c=b.context,e=a.worldTransform,m=b.resolution;b.roundPixels?c.setTransform(e.a*m,e.b*m,e.c*m,e.d*m,e.tx*m|0,e.ty*m|0):c.setTransform(e.a*m,e.b*m,e.c*m,e.d*m,e.tx*m,e.ty*m);b.context.globalAlpha=a.worldAlpha;b.setBlendMode(a.blendMode);a.drawMode===d.default.DRAW_MODES.TRIANGLE_MESH?
this._renderTriangleMesh(a):this._renderTriangles(a)};a.prototype._renderTriangleMesh=function(a){for(var b=a.vertices.length/2,c=0;c<b-2;c++){var d=2*c;this._renderDrawTriangle(a,d,d+2,d+4)}};a.prototype._renderTriangles=function(a){for(var b=a.indices,c=b.length,d=0;d<c;d+=3)this._renderDrawTriangle(a,2*b[d],2*b[d+1],2*b[d+2])};a.prototype._renderDrawTriangle=function(a,b,c,d){var e=this.renderer.context,n=a.uvs,p=a.vertices,r=a._texture;if(r.valid){var r=r.baseTexture,q=r.source,t=r.width,s=r.height,
v=void 0,w=void 0,u=void 0,x=void 0,z=void 0,y=void 0;a.uploadUvTransform?(y=a._uvTransform.mapCoord,v=(n[b]*y.a+n[b+1]*y.c+y.tx)*r.width,w=(n[c]*y.a+n[c+1]*y.c+y.tx)*r.width,u=(n[d]*y.a+n[d+1]*y.c+y.tx)*r.width,x=(n[b]*y.b+n[b+1]*y.d+y.ty)*r.height,z=(n[c]*y.b+n[c+1]*y.d+y.ty)*r.height,y=(n[d]*y.b+n[d+1]*y.d+y.ty)*r.height):(v=n[b]*r.width,w=n[c]*r.width,u=n[d]*r.width,x=n[b+1]*r.height,z=n[c+1]*r.height,y=n[d+1]*r.height);var n=p[b],B=p[c],C=p[d];b=p[b+1];c=p[c+1];d=p[d+1];var F=a.canvasPadding/
this.renderer.resolution;if(0<F){p=F/Math.abs(a.worldTransform.a);a=F/Math.abs(a.worldTransform.d);var F=(n+B+C)/3,D=(b+c+d)/3,E=n-F,H=b-D,I=Math.sqrt(E*E+H*H),n=F+E/I*(I+p);b=D+H/I*(I+a);E=B-F;H=c-D;I=Math.sqrt(E*E+H*H);B=F+E/I*(I+p);c=D+H/I*(I+a);E=C-F;H=d-D;I=Math.sqrt(E*E+H*H);C=F+E/I*(I+p);d=D+H/I*(I+a)}e.save();e.beginPath();e.moveTo(n,b);e.lineTo(B,c);e.lineTo(C,d);e.closePath();e.clip();a=v*z+x*u+w*y-z*u-x*w-v*y;e.transform((n*z+x*C+B*y-z*C-x*B-n*y)/a,(b*z+x*d+c*y-z*d-x*c-b*y)/a,(v*B+n*u+
w*C-B*u-n*w-v*C)/a,(v*c+b*u+w*d-c*u-b*w-v*d)/a,(v*z*C+x*B*u+n*w*y-n*z*u-x*w*C-v*B*y)/a,(v*z*d+x*c*u+b*w*y-b*z*u-x*w*d-v*c*y)/a);e.drawImage(q,0,0,t*r.resolution,s*r.resolution,0,0,t,s);e.restore();this.renderer.invalidateBlendMode()}};a.prototype.renderMeshFlat=function(a){var b=this.renderer.context;a=a.vertices;var c=a.length/2;b.beginPath();for(var d=1;d<c-2;++d){var e=2*d,n=a[e+2],p=a[e+3],r=a[e+4],q=a[e+5];b.moveTo(a[e],a[e+1]);b.lineTo(n,p);b.lineTo(r,q)}b.fillStyle="#FF0000";b.fill();b.closePath()};
a.prototype.destroy=function(){this.renderer=null};return a}();c.default=a;b.CanvasRenderer.registerPlugin("mesh",a)},{"../../core":65,"../Mesh":166}],171:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./Mesh");Object.defineProperty(c,"Mesh",{enumerable:!0,get:function(){return d(e).default}});var g=a("./webgl/MeshRenderer");Object.defineProperty(c,"MeshRenderer",{enumerable:!0,get:function(){return d(g).default}});var l=a("./canvas/CanvasMeshRenderer");
Object.defineProperty(c,"CanvasMeshRenderer",{enumerable:!0,get:function(){return d(l).default}});var k=a("./Plane");Object.defineProperty(c,"Plane",{enumerable:!0,get:function(){return d(k).default}});var f=a("./NineSlicePlane");Object.defineProperty(c,"NineSlicePlane",{enumerable:!0,get:function(){return d(f).default}});var m=a("./Rope");Object.defineProperty(c,"Rope",{enumerable:!0,get:function(){return d(m).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,
"./webgl/MeshRenderer":172}],172:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core")),g=(b=a("pixi-gl-core"))&&b.__esModule?b:{"default":b},l=(b=a("../Mesh"))&&b.__esModule?b:{"default":b};a("path");var k=e.Matrix.IDENTITY;a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.shader=null;return c}d(b,a);b.prototype.onContextChange=
function(){this.shader=new e.Shader(this.renderer.gl,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")};
b.prototype.render=function(a){var b=this.renderer,c=b.gl,d=a._texture;if(d.valid){var f=a._glDatas[b.CONTEXT_UID];f||(b.bindVao(null),f={shader:this.shader,vertexBuffer:g.default.GLBuffer.createVertexBuffer(c,a.vertices,c.STREAM_DRAW),uvBuffer:g.default.GLBuffer.createVertexBuffer(c,a.uvs,c.STREAM_DRAW),indexBuffer:g.default.GLBuffer.createIndexBuffer(c,a.indices,c.STATIC_DRAW),vao:null,dirty:a.dirty,indexDirty:a.indexDirty},f.vao=(new g.default.VertexArrayObject(c)).addIndex(f.indexBuffer).addAttribute(f.vertexBuffer,
f.shader.attributes.aVertexPosition,c.FLOAT,!1,8,0).addAttribute(f.uvBuffer,f.shader.attributes.aTextureCoord,c.FLOAT,!1,8,0),a._glDatas[b.CONTEXT_UID]=f);b.bindVao(f.vao);a.dirty!==f.dirty&&(f.dirty=a.dirty,f.uvBuffer.upload(a.uvs));a.indexDirty!==f.indexDirty&&(f.indexDirty=a.indexDirty,f.indexBuffer.upload(a.indices));f.vertexBuffer.upload(a.vertices);b.bindShader(f.shader);f.shader.uniforms.uSampler=b.bindTexture(d);b.state.setBlendMode(e.utils.correctBlendMode(a.blendMode,d.baseTexture.premultipliedAlpha));
f.shader.uniforms.uTransform&&(f.shader.uniforms.uTransform=a.uploadUvTransform?a._uvTransform.mapCoord.toArray(!0):k.toArray(!0));f.shader.uniforms.translationMatrix=a.worldTransform.toArray(!0);f.shader.uniforms.uColor=e.utils.premultiplyRgba(a.tintRgb,a.worldAlpha,f.shader.uniforms.uColor,d.baseTexture.premultipliedAlpha);f.vao.draw(a.drawMode===l.default.DRAW_MODES.TRIANGLE_MESH?c.TRIANGLE_STRIP:c.TRIANGLES,a.indices.length,0)}};return b}(e.ObjectRenderer);c.default=a;e.WebGLRenderer.registerPlugin("mesh",
a)},{"../../core":65,"../Mesh":166,path:8,"pixi-gl-core":15}],173:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var e=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||
!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../core")),l=a("../core/utils");a=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,d=arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
16384,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var q;q=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");q=q&&("object"===typeof q||"function"===typeof q)?q:this;16384<e&&(e=16384);e>c&&(e=c);q._properties=[!1,!0,!1,!1,!1];q._maxSize=c;q._batchSize=e;q._glBuffers={};q._bufferUpdateIDs=[];q._updateID=0;q.interactiveChildren=!1;q.blendMode=g.BLEND_MODES.NORMAL;
q.autoResize=l;q.roundPixels=!0;q.baseTexture=null;q.setProperties(d);q._tint=0;q.tintRgb=new Float32Array(4);q.tint=16777215;return q}d(b,a);b.prototype.setProperties=function(a){a&&(this._properties[0]="vertices"in a||"scale"in a?!!a.vertices||!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="tint"in a||
"alpha"in a?!!a.tint||!!a.alpha:this._properties[4])};b.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};b.prototype.renderWebGL=function(a){var b=this;if(this.visible&&!(0>=this.worldAlpha||!this.children.length||!this.renderable)){if(!this.baseTexture&&(this.baseTexture=this.children[0]._texture.baseTexture,!this.baseTexture.hasLoaded))this.baseTexture.once("update",function(){return b.onChildrenChange(0)});a.setObjectRenderer(a.plugins.particle);a.plugins.particle.render(this)}};
b.prototype.onChildrenChange=function(a){for(a=Math.floor(a/this._batchSize);this._bufferUpdateIDs.length<a;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[a]=++this._updateID};b.prototype.renderCanvas=function(a){if(this.visible&&!(0>=this.worldAlpha||!this.children.length||!this.renderable)){var b=a.context,c=this.worldTransform,d=!0,e=0,f=0,g=0,k=0;a.setBlendMode(this.blendMode);b.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var u=
this.children[l];if(u.visible){var x=u._texture.frame;b.globalAlpha=this.worldAlpha*u.alpha;0===u.rotation%(2*Math.PI)?(d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx*a.resolution,c.ty*a.resolution),d=!1),e=u.anchor.x*-x.width*u.scale.x+u.position.x+0.5,f=u.anchor.y*-x.height*u.scale.y+u.position.y+0.5,g=x.width*u.scale.x,k=x.height*u.scale.y):(d||(d=!0),u.displayObjectUpdateTransform(),e=u.worldTransform,a.roundPixels?b.setTransform(e.a,e.b,e.c,e.d,e.tx*a.resolution|0,e.ty*a.resolution|0):b.setTransform(e.a,
e.b,e.c,e.d,e.tx*a.resolution,e.ty*a.resolution),e=u.anchor.x*-x.width+0.5,f=u.anchor.y*-x.height+0.5,g=x.width,k=x.height);var z=u._texture.baseTexture.resolution;b.drawImage(u._texture.baseTexture.source,x.x*z,x.y*z,x.width*z,x.height*z,e*a.resolution,f*a.resolution,g*a.resolution,k*a.resolution)}}}};b.prototype.destroy=function(b){a.prototype.destroy.call(this,b);if(this._buffers)for(b=0;b<this._buffers.length;++b)this._buffers[b].destroy();this._bufferUpdateIDs=this._buffers=this._properties=
null};e(b,[{key:"tint",get:function(){return this._tint},set:function(a){this._tint=a;(0,l.hex2rgb)(a,this.tintRgb)}}]);return b}(g.Container);c.default=a},{"../core":65,"../core/utils":125}],174:[function(a,b,c){c.__esModule=!0;var d=a("./ParticleContainer");Object.defineProperty(c,"ParticleContainer",{enumerable:!0,get:function(){return(d&&d.__esModule?d:{"default":d}).default}});var e=a("./webgl/ParticleRenderer");Object.defineProperty(c,"ParticleRenderer",{enumerable:!0,get:function(){return(e&&
e.__esModule?e:{"default":e}).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(a,b,c){c.__esModule=!0;var d=(b=a("pixi-gl-core"))&&b.__esModule?b:{"default":b},e=(a=a("../../core/utils/createIndicesForQuads"))&&a.__esModule?a:{"default":a};a=function(){function a(b,c,d,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.gl=b;this.size=e;this.dynamicProperties=[];this.staticProperties=[];for(b=0;b<c.length;++b)e=c[b],e={attribute:e.attribute,
size:e.size,uploadFunction:e.uploadFunction,unsignedByte:e.unsignedByte,offset:e.offset},d[b]?this.dynamicProperties.push(e):this.staticProperties.push(e);this.staticStride=0;this.staticDataUint32=this.staticData=this.staticBuffer=null;this.dynamicStride=0;this.dynamicDataUint32=this.dynamicData=this.dynamicBuffer=null;this._updateID=0;this.initBuffers()}a.prototype.initBuffers=function(){var a=this.gl,b=0;this.indices=(0,e.default)(this.size);this.indexBuffer=d.default.GLBuffer.createIndexBuffer(a,
this.indices,a.STATIC_DRAW);for(var c=this.dynamicStride=0;c<this.dynamicProperties.length;++c){var g=this.dynamicProperties[c];g.offset=b;b+=g.size;this.dynamicStride+=g.size}b=new ArrayBuffer(16*this.size*this.dynamicStride);this.dynamicData=new Float32Array(b);this.dynamicDataUint32=new Uint32Array(b);this.dynamicBuffer=d.default.GLBuffer.createVertexBuffer(a,b,a.STREAM_DRAW);for(c=this.staticStride=b=0;c<this.staticProperties.length;++c)g=this.staticProperties[c],g.offset=b,b+=g.size,this.staticStride+=
g.size;b=new ArrayBuffer(16*this.size*this.staticStride);this.staticData=new Float32Array(b);this.staticDataUint32=new Uint32Array(b);this.staticBuffer=d.default.GLBuffer.createVertexBuffer(a,b,a.STATIC_DRAW);this.vao=(new d.default.VertexArrayObject(a)).addIndex(this.indexBuffer);for(b=0;b<this.dynamicProperties.length;++b)c=this.dynamicProperties[b],c.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,c.attribute,a.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*c.offset):this.vao.addAttribute(this.dynamicBuffer,
c.attribute,a.FLOAT,!1,4*this.dynamicStride,4*c.offset);for(b=0;b<this.staticProperties.length;++b)c=this.staticProperties[b],c.unsignedByte?this.vao.addAttribute(this.staticBuffer,c.attribute,a.UNSIGNED_BYTE,!0,4*this.staticStride,4*c.offset):this.vao.addAttribute(this.staticBuffer,c.attribute,a.FLOAT,!1,4*this.staticStride,4*c.offset)};a.prototype.uploadDynamic=function(a,b,c){for(var d=0;d<this.dynamicProperties.length;d++){var e=this.dynamicProperties[d];e.uploadFunction(a,b,c,e.unsignedByte?
this.dynamicDataUint32:this.dynamicData,this.dynamicStride,e.offset)}this.dynamicBuffer.upload()};a.prototype.uploadStatic=function(a,b,c){for(var d=0;d<this.staticProperties.length;d++){var e=this.staticProperties[d];e.uploadFunction(a,b,c,e.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,e.offset)}this.staticBuffer.upload()};a.prototype.destroy=function(){this.dynamicProperties=null;this.dynamicBuffer.destroy();this.staticProperties=this.dynamicDataUint32=this.dynamicData=this.dynamicBuffer=
null;this.staticBuffer.destroy();this.staticDataUint32=this.staticData=this.staticBuffer=null};return a}();c.default=a},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":15}],176:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}c.__esModule=!0;var e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core")),g=(b=a("./ParticleShader"))&&b.__esModule?b:{"default":b},l=(b=a("./ParticleBuffer"))&&b.__esModule?b:{"default":b},k=a("../../core/utils");a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.shader=null;c.indexBuffer=null;c.properties=null;c.tempMatrix=new e.Matrix;c.CONTEXT_UID=0;return c}d(b,a);b.prototype.onContextChange=function(){var a=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.shader=new g.default(a);this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,
offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]};b.prototype.start=function(){this.renderer.bindShader(this.shader)};b.prototype.render=function(a){var b=a.children,c=a._maxSize,d=a._batchSize,f=this.renderer,g=b.length;if(0!==g){g>c&&(g=c);(c=
a._glBuffers[f.CONTEXT_UID])||(c=a._glBuffers[f.CONTEXT_UID]=this.generateBuffers(a));var k=b[0]._texture.baseTexture;this.renderer.setBlendMode(e.utils.correctBlendMode(a.blendMode,k.premultipliedAlpha));var m=f.gl,l=a.worldTransform.copy(this.tempMatrix);l.prepend(f._activeRenderTarget.projectionMatrix);this.shader.uniforms.projectionMatrix=l.toArray(!0);this.shader.uniforms.uColor=e.utils.premultiplyRgba(a.tintRgb,a.worldAlpha,this.shader.uniforms.uColor,k.premultipliedAlpha);this.shader.uniforms.uSampler=
f.bindTexture(k);for(var k=!1,x=l=0;l<g;l+=d,x+=1){var z=g-l;z>d&&(z=d);if(x>=c.length){if(!a.autoResize)break;c.push(this._generateOneMoreBuffer(a))}var y=c[x];y.uploadDynamic(b,l,z);var B=a._bufferUpdateIDs[l]||0;if(k=k||y._updateID<B)y._updateID=a._updateID,y.uploadStatic(b,l,z);f.bindVao(y.vao);y.vao.draw(m.TRIANGLES,6*z)}}};b.prototype.generateBuffers=function(a){var b=this.renderer.gl,c=[],d=a._maxSize,e=a._batchSize;a=a._properties;for(var f=0;f<d;f+=e)c.push(new l.default(b,this.properties,
a,e));return c};b.prototype._generateOneMoreBuffer=function(a){return new l.default(this.renderer.gl,this.properties,a._properties,a._batchSize)};b.prototype.uploadVertices=function(a,b,c,d,e,f){for(var g=0,k=0,m=0,l=0,z=0;z<c;++z){var l=a[b+z],g=l._texture,y=l.scale.x,B=l.scale.y,m=g.trim,C=g.orig;m?(k=m.x-l.anchor.x*C.width,g=k+m.width,l=m.y-l.anchor.y*C.height,m=l+m.height):(g=C.width*(1-l.anchor.x),k=C.width*-l.anchor.x,m=C.height*(1-l.anchor.y),l=C.height*-l.anchor.y);d[f]=k*y;d[f+1]=l*B;d[f+
e]=g*y;d[f+e+1]=l*B;d[f+2*e]=g*y;d[f+2*e+1]=m*B;d[f+3*e]=k*y;d[f+3*e+1]=m*B;f+=4*e}};b.prototype.uploadPosition=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var k=a[b+g].position;d[f]=k.x;d[f+1]=k.y;d[f+e]=k.x;d[f+e+1]=k.y;d[f+2*e]=k.x;d[f+2*e+1]=k.y;d[f+3*e]=k.x;d[f+3*e+1]=k.y;f+=4*e}};b.prototype.uploadRotation=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var k=a[b+g].rotation;d[f]=k;d[f+e]=k;d[f+2*e]=k;d[f+3*e]=k;f+=4*e}};b.prototype.uploadUvs=function(a,b,c,d,e,f){for(var g=0;g<c;++g){var k=a[b+g]._texture._uvs;
k?(d[f]=k.x0,d[f+1]=k.y0,d[f+e]=k.x1,d[f+e+1]=k.y1,d[f+2*e]=k.x2,d[f+2*e+1]=k.y2,d[f+3*e]=k.x3,d[f+3*e+1]=k.y3):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0);f+=4*e}};b.prototype.uploadTint=function(a,b,c,d,e,f){for(var g=0;g<c;++g){var m=a[b+g],l=m._texture.baseTexture.premultipliedAlpha,x=m.alpha,m=1>x&&l?(0,k.premultiplyTint)(m._tintRGB,x):m._tintRGB+(255*x<<24);d[f]=m;d[f+e]=m;d[f+2*e]=m;d[f+3*e]=m;f+=4*e}};b.prototype.destroy=function(){this.renderer.gl&&
this.renderer.gl.deleteBuffer(this.indexBuffer);a.prototype.destroy.call(this);this.shader.destroy();this.tempMatrix=this.indices=null};return b}(e.ObjectRenderer);c.default=a;e.WebGLRenderer.registerPlugin("particle",a)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;a=a("../../core/Shader");a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute vec2 aPositionCoord;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nuniform vec4 uColor;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   vec2 v = vec2(x, y);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor * uColor;\n}",
"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n  gl_FragColor = color;\n}");if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&("object"===typeof c||"function"===typeof c)?c:this}d(b,a);return b}((a&&a.__esModule?a:{"default":a}).default);c.default=a},{"../../core/Shader":44}],178:[function(a,b,c){Math.sign||(Math.sign=function(a){a=
Number(a);return 0===a||isNaN(a)?a:0<a?1:-1})},{}],179:[function(a,b,c){Number.isInteger||(Number.isInteger=function(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a})},{}],180:[function(a,b,c){a=(a=a("object-assign"))&&a.__esModule?a:{"default":a};Object.assign||(Object.assign=a.default)},{"object-assign":6}],181:[function(a,b,c){a("./Object.assign");a("./requestAnimationFrame");a("./Math.sign");a("./Number.isInteger");window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||
(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Number.isInteger":179,"./Object.assign":180,"./requestAnimationFrame":182}],182:[function(a,b,c){(function(a){if(!Date.now||!Date.prototype.getTime)Date.now=function(){return(new Date).getTime()};if(!a.performance||!a.performance.now){var b=Date.now();a.performance||(a.performance={});a.performance.now=function(){return Date.now()-b}}for(var c=Date.now(),
l=["ms","moz","webkit","o"],k=0;k<l.length&&!a.requestAnimationFrame;++k){var f=l[k];a.requestAnimationFrame=a[f+"RequestAnimationFrame"];a.cancelAnimationFrame=a[f+"CancelAnimationFrame"]||a[f+"CancelRequestAnimationFrame"]}a.requestAnimationFrame||(a.requestAnimationFrame=function(a){if("function"!==typeof a)throw new TypeError(a+"is not a function");var b=Date.now(),d=16+c-b;0>d&&(d=0);c=b;return setTimeout(function(){c=Date.now();a(performance.now())},d)});a.cancelAnimationFrame||(a.cancelAnimationFrame=
function(a){return clearTimeout(a)})}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],183:[function(a,b,c){function d(a,b){var c=!1;if(a&&a._textures&&a._textures.length)for(var d=0;d<a._textures.length;d++)if(a._textures[d]instanceof n.Texture){var e=a._textures[d].baseTexture;-1===b.indexOf(e)&&(b.push(e),c=!0)}return c}function e(a,b){return a instanceof n.BaseTexture?(-1===b.indexOf(a)&&b.push(a),!0):!1}function g(a,b){if(a._texture&&
a._texture instanceof n.Texture){var c=a._texture.baseTexture;-1===b.indexOf(c)&&b.push(c);return!0}return!1}function l(a,b){return b instanceof n.Text?(b.updateText(!0),!0):!1}function k(a,b){if(b instanceof n.TextStyle){var c=b.toFontString();n.TextMetrics.measureFont(c);return!0}return!1}function f(a,b){if(a instanceof n.Text){-1===b.indexOf(a.style)&&b.push(a.style);-1===b.indexOf(a)&&b.push(a);var c=a._texture.baseTexture;-1===b.indexOf(c)&&b.push(c);return!0}return!1}function m(a,b){return a instanceof
n.TextStyle?(-1===b.indexOf(a)&&b.push(a),!0):!1}c.__esModule=!0;var n=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../core")),p=(a=a("./limiters/CountLimiter"))&&a.__esModule?a:{"default":a},r=n.ticker.shared;n.settings.UPLOADS_PER_FRAME=4;a=function(){function a(b){var c=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.limiter=new p.default(n.settings.UPLOADS_PER_FRAME);
this.renderer=b;this.uploadHookHelper=null;this.queue=[];this.addHooks=[];this.uploadHooks=[];this.completes=[];this.ticking=!1;this.delayedTick=function(){c.queue&&c.prepareItems()};this.registerFindHook(f);this.registerFindHook(m);this.registerFindHook(d);this.registerFindHook(e);this.registerFindHook(g);this.registerUploadHook(l);this.registerUploadHook(k)}a.prototype.upload=function(a,b){"function"===typeof a&&(b=a,a=null);a&&this.add(a);this.queue.length?(b&&this.completes.push(b),this.ticking||
(this.ticking=!0,r.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY))):b&&b()};a.prototype.tick=function(){setTimeout(this.delayedTick,0)};a.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var a=this.queue[0],b=!1;if(a&&!a._destroyed)for(var c=0,d=this.uploadHooks.length;c<d;c++)if(this.uploadHooks[c](this.uploadHookHelper,a)){this.queue.shift();b=!0;break}b||this.queue.shift()}if(this.queue.length)r.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY);
else{this.ticking=!1;a=this.completes.slice(0);b=this.completes.length=0;for(c=a.length;b<c;b++)a[b]()}};a.prototype.registerFindHook=function(a){a&&this.addHooks.push(a);return this};a.prototype.registerUploadHook=function(a){a&&this.uploadHooks.push(a);return this};a.prototype.add=function(a){for(var b=0,c=this.addHooks.length;b<c&&!this.addHooks[b](a,this.queue);b++);if(a instanceof n.Container)for(b=a.children.length-1;0<=b;b--)this.add(a.children[b]);return this};a.prototype.destroy=function(){this.ticking&&
r.remove(this.tick,this);this.ticking=!1;this.uploadHookHelper=this.limiter=this.queue=this.completes=this.renderer=this.uploadHooks=this.addHooks=null};return a}();c.default=a},{"../core":65,"./limiters/CountLimiter":186}],184:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(b instanceof g.BaseTexture){var c=b.source,d=0===c.width?a.canvas.width:Math.min(a.canvas.width,c.width),e=0===c.height?a.canvas.height:Math.min(a.canvas.height,c.height);a.ctx.drawImage(c,0,0,d,e,0,0,a.canvas.width,a.canvas.height);return!0}return!1}c.__esModule=!0;var g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core"));
a=a("../BasePrepare");var l=16;a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.uploadHookHelper=c;c.canvas=document.createElement("canvas");c.canvas.width=l;c.canvas.height=l;c.ctx=c.canvas.getContext("2d");c.registerUploadHook(e);return c}d(b,a);b.prototype.destroy=function(){a.prototype.destroy.call(this);
this.canvas=this.ctx=null};return b}((a&&a.__esModule?a:{"default":a}).default);c.default=a;g.CanvasRenderer.registerPlugin("prepare",a)},{"../../core":65,"../BasePrepare":183}],185:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./webgl/WebGLPrepare");Object.defineProperty(c,"webgl",{enumerable:!0,get:function(){return d(e).default}});var g=a("./canvas/CanvasPrepare");Object.defineProperty(c,"canvas",{enumerable:!0,get:function(){return d(g).default}});
var l=a("./BasePrepare");Object.defineProperty(c,"BasePrepare",{enumerable:!0,get:function(){return d(l).default}});var k=a("./limiters/CountLimiter");Object.defineProperty(c,"CountLimiter",{enumerable:!0,get:function(){return d(k).default}});var f=a("./limiters/TimeLimiter");Object.defineProperty(c,"TimeLimiter",{enumerable:!0,get:function(){return d(f).default}})},{"./BasePrepare":183,"./canvas/CanvasPrepare":184,"./limiters/CountLimiter":186,"./limiters/TimeLimiter":187,"./webgl/WebGLPrepare":188}],
186:[function(a,b,c){c.__esModule=!0;a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.maxItemsPerFrame=b;this.itemsLeft=0}a.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame};a.prototype.allowedToUpload=function(){return 0<this.itemsLeft--};return a}();c.default=a},{}],187:[function(a,b,c){c.__esModule=!0;a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.maxMilliseconds=
b;this.frameStart=0}a.prototype.beginFrame=function(){this.frameStart=Date.now()};a.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};return a}();c.default=a},{}],188:[function(a,b,c){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){return b instanceof k.BaseTexture?(b._glTextures[a.CONTEXT_UID]||a.textureManager.updateTexture(b),!0):!1}function g(a,b){return b instanceof k.Graphics?((b.dirty||b.clearDirty||!b._webGL[a.plugins.graphics.CONTEXT_UID])&&a.plugins.graphics.updateGraphics(b),!0):!1}function l(a,b){return a instanceof k.Graphics?(b.push(a),!0):!1}c.__esModule=!0;var k=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,
c)&&(b[c]=a[c]);b.default=a;return b}(a("../../core"));a=a("../BasePrepare");a=function(a){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=c&&("object"===typeof c||"function"===typeof c)?c:this;c.uploadHookHelper=c.renderer;c.registerFindHook(l);c.registerUploadHook(e);c.registerUploadHook(g);return c}d(b,a);return b}((a&&a.__esModule?a:{"default":a}).default);
c.default=a;k.WebGLRenderer.registerPlugin("prepare",a)},{"../../core":65,"../BasePrepare":183}],189:[function(a,b,c){(function(b){function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}c.__esModule=!0;c.loader=c.prepare=c.particles=c.mesh=c.loaders=c.interaction=c.filters=c.extras=c.extract=c.accessibility=void 0;var g=a("./polyfill");Object.keys(g).forEach(function(a){"default"===a||"__esModule"===
a||Object.defineProperty(c,a,{enumerable:!0,get:function(){return g[a]}})});var l=a("./core");Object.keys(l).forEach(function(a){"default"===a||"__esModule"===a||Object.defineProperty(c,a,{enumerable:!0,get:function(){return l[a]}})});var k=a("./deprecation"),k=k&&k.__esModule?k:{"default":k},f=a("./accessibility"),f=e(f),m=a("./extract"),m=e(m),n=a("./extras"),n=e(n),p=a("./filters"),p=e(p),r=a("./interaction"),r=e(r),q=a("./loaders"),q=e(q),t=a("./mesh"),t=e(t),s=a("./particles"),s=e(s),v=a("./prepare"),
v=e(v);l.utils.mixins.performMixins();var w=q.shared||null;c.accessibility=f;c.extract=m;c.extras=n;c.filters=p;c.interaction=r;c.loaders=q;c.mesh=t;c.particles=s;c.prepare=v;c.loader=w;"function"===typeof k.default&&(0,k.default)(c);b.PIXI=c}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,
"./particles":174,"./polyfill":181,"./prepare":185}]},{},[189])(189)});flax=flax||{};flax.Module=flax.Module||{};
flax.Module.CocosLike={childrenCount:0,running:!1,_toIndex:null,onEnter:function(){null==this.anchor&&(this.anchor=new flax.p);this.running=!0;this.children||(this.children=[]);this._childrenEnter();null!=this._toIndex&&(this._toIndex>=this.parent.childrenCount&&(this._toIndex=this.parent.childrenCount-1),this.parent.setChildIndex(this,this._toIndex),this._toIndex=null)},onExit:function(){this.running=!1;for(var a=this.children,b=a.length,c=0;c<b;c++)a[c].onExit();flax.inputManager&&(flax.inputManager.removeListener(this),
this.__isInputMask&&flax.inputManager.removeMask(this));this.unschedule()},removeFromParent:function(a){this.parent&&this.parent.removeChild(this)},retain:function(){},release:function(){},attr:function(a){flax.copyProperties(a,this)},getPosition:function(){return this.position},setPosition:function(a,b){void 0==b?(this.position.x=a.x,this.position.y=a.y):(this.position.x=a,this.position.y=b)},getPositionX:function(){return this.position.x},setPositionX:function(a){this.position.x=a},getPositionY:function(){return this.position.y},
setPositionY:function(a){this.position.y=a},getScale:function(){return this.scale},setScale:function(a,b){this.scale.x=a;this.scale.y=void 0==b?a:b},getScaleX:function(){return this.scale.x},setScaleX:function(a){this.scale.x=a},scaleX:{get:function(){return this.scale.x},set:function(a){this.scale.x=a}},getScaleY:function(){return this.scale.y},setScaleY:function(a){this.scale.y=a},scaleY:{get:function(){return this.scale.y},set:function(a){this.scale.y=a}},getRotation:function(){return this.rotation},
setRotation:function(a){this.rotation=a},getOpacity:function(){return Math.floor(255*this.alpha)},setOpacity:function(a){this.alpha=a/255},opacity:{get:function(){return Math.floor(255*this.alpha)},set:function(a){this.alpha=a/255}},isVisible:function(){return this.visible},setVisible:function(a){this.visible=a},zIndex:{get:function(){return this.parent?this.parent.getChildIndex(this):-1},set:function(a){this.parent?this.parent.setChildIndex(this,a):this._toIndex=a}},getAnchorPoint:function(){return this.anchor},
setAnchorPoint:function(a,b){null==this.anchor&&(this.anchor=new flax.p);void 0==b?(this.anchor.x=a.x,this.anchor.y=a.y):(this.anchor.x=a,this.anchor.y=b)},getAnchorPointInPoints:function(){return new flax.p(this.width*this.anchor.x,this.height*this.anchor.y)},_childrenEnter:function(){for(var a=this.children,b=a.length,c=0;c<b;c++)a[c].onEnter()}};PIXI.Rectangle.prototype.getCenter=function(){return flax.p(this.x+0.5*this.width,this.y+0.5*this.height)};flax=flax||{};
flax.moveTo=function(a,b,c,d){a=(new TWEEN.Tween(a.position)).to(c,1E3*b);0<d&&a.delay(1E3*d);return a};flax.moveBy=function(a,b,c,d){var e={};null!=c.x&&0!=c.x&&(e.x=(0<c.x?"+":"-")+Math.abs(c.x));null!=c.y&&0!=c.y&&(e.y=(0<c.y?"+":"-")+Math.abs(c.y));a=(new TWEEN.Tween(a.position)).to(e,1E3*b);0<d&&a.delay(1E3*d);return a};flax.rotateTo=function(a,b,c,d){return(new TWEEN.Tween(a)).to({rotation:c*DEGREE_TO_RADIAN},1E3*b)};
flax.rotateBy=function(a,b,c,d){var e={};null!=c&&0!=c&&(e.rotation=(0<c?"+":"-")+Math.abs(c*DEGREE_TO_RADIAN));a=(new TWEEN.Tween(a)).to(e,1E3*b);0<d&&a.delay(1E3*d);return a};flax.scaleTo=function(a,b,c,d){"object"!=typeof c&&(c={x:c,y:c});a=(new TWEEN.Tween(a.scale)).to(c,1E3*b);0<d&&a.delay(1E3*d);return a};
flax.scaleBy=function(a,b,c,d){"object"!=typeof c&&(c={x:c,y:c});var e={};null!=c.x&&0!=c.x&&(e.x=(0<c.x?"+":"-")+Math.abs(c.x));null!=c.y&&0!=c.y&&(e.y=(0<c.y?"+":"-")+Math.abs(c.y));a=(new TWEEN.Tween(a.scale)).to(e,1E3*b);0<d&&a.delay(1E3*d);return a};flax.alphaTo=function(a,b,c,d){a=(new TWEEN.Tween(a)).to({alpha:c},1E3*b);0<d&&a.delay(1E3*d);return a};
flax.alphaBy=function(a,b,c,d){var e={};null!=c&&0!=c&&(e.alpha=(0<c?"+":"-")+Math.abs(c));a=(new TWEEN.Tween(a)).to(e,1E3*b);0<d&&a.delay(1E3*d);return a};flax.blink=function(a,b,c,d){if(!flax.scheduler)return null;if(0>=c)throw"Blink times must > 0";c*=2;var e=(new TWEEN.Tween(a)).to({__test_prop:100},1E3*b*c).onStart(function(){var e=0;flax.scheduler.schedule(a,function(b){a.visible=0==e++%2},b,c,d)});0<d&&e.delay(1E3*d);return e};
flax.blinkColor=function(a,b,c,d,e){if(!flax.scheduler)return null;if(0>=d)throw"Blink times must > 0";d*=2;var g=(new TWEEN.Tween(a)).to({__test_prop:100},1E3*b*d).onStart(function(){var g=0,k=a.tint;flax.scheduler.schedule(a,function(b){b=0!=g++%2?c:k;"function"==typeof a.setColor?a.setColor(b):a.tint=b},b,d,e)});0<e&&g.delay(1E3*e);return g};
flax.runActions=function(a,b,c,d){if(!(a instanceof Array))throw"actions must be a array of action!";for(var e=a[0],g=e,l=null,k=1;k<a.length;k++)l=a[k],g.chain(l),g=l;!0===d&&(null==l?e.repeat(Infinity):l.chain(e));null==l&&(l=g);if(b)l.onComplete(b);if(c)e.onStart(c);e.start();return l};flax=flax||{};flax.Module=flax.Module||{};
flax.Module.Schedule={onExit:function(){flax.scheduler.unschedule(this)},schedule:function(a,b,c,d){flax.scheduler.schedule(this,a,b,c,d)},scheduleOnce:function(a,b){flax.scheduler.scheduleOnce(this,a,b)},scheduleUpdate:function(){flax.scheduler.scheduleUpdate(this)},unschedule:function(a){flax.scheduler.unschedule(this,a)},unscheduleUpdate:function(){flax.scheduler.unscheduleUpdate(this)}};flax=flax||{};
flax.SpriteFrameCache=flax.Class.extend({_REG1:/^\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*$/,_REG2:/^\s*\{\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*,\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*\}\s*$/,addSpriteFrames:function(a,b){var c=flax.loader.getRes(a);if(null==c)throw"Please load the resource: "+a+" firstly!";flax.loader.release(a);this._createSpriteFrames(a,c,b)},removeSpriteFramesFromFile:function(a){a=flax.path.changeExtname(a,".png");var b=flax.loader.getRes(a);
if(b){var b=b.textures,c;for(c in b)delete PIXI.utils.TextureCache[c]}delete PIXI.utils.BaseTextureCache[a];delete PIXI.utils.TextureCache[a]},getSpriteFrame:function(a){return PIXI.utils.TextureCache[a]},setSpriteFrame:function(a,b){PIXI.utils.TextureCache[a]=b},_createSpriteFrames:function(a,b,c){var d=b.frames;b=b.metadata;if(!d)throw"Invalid sprite frames file!";var e;if(!c||"string"==typeof c)e=c||flax.path.changeBasename(a,b.image||".png"),c=(c=flax.loader.getRes(e))&&c.texture?c.texture:PIXI.Texture.fromImage(e);
if(!c||!(c instanceof PIXI.Texture))throw"The texture parameter is not valid: "+e;for(var g in d){var l=d[g];if(l){e=this._rectFromString(l.frame);a=this._pointFromString(l.offset);b=this._pointFromString(l.sourceSize);var l=l.rotated||!1,k=null;if(0!=a.x||0!=a.y)k=flax.rect(a.x,a.y,e.width,e.height);a=flax.rect(e.x,e.y,b.x,b.y);e=new PIXI.Texture(c.baseTexture,e,a,k,l);PIXI.utils.TextureCache[g]=e}}},_rectFromString:function(a){a=this._REG2.exec(a);return!a?flax.rect(0,0,0,0):flax.rect(parseFloat(a[1]),
parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4]))},_pointFromString:function(a){a=this._REG1.exec(a);return!a?flax.p(0,0):flax.p(parseFloat(a[1]),parseFloat(a[2]))}});flax.spriteFrameCache=new flax.SpriteFrameCache;flax=flax||{};PIXI.loaders.Loader._pixiMiddleware.splice(2,1);
flax.Loader=flax.Class.extend({cache:null,ctor:function(){this.cache={}},load:function(a,b,c){Array.isArray(a)||(a=[a]);for(var d=[],e=0;e<a.length;e++){var g=a[e];this.getRes(g)||d.push(g)}var l=null,k=null;c&&b?(k=b,l=c):b&&(l=b);if(0==d.length)l&&l({},this.cache);else{for(var f=new PIXI.loaders.Loader,e=0;e<d.length;e++)g=d[e],f.add(g,flax.getResUrl(g));f.on("progress",function(a){k&&k(a,f.progress)},this);f.on("complete",function(a,b){flax.copyProperties(b,this.cache);l&&l(b);a.reset()},this);
f.on("error",function(a,b,c){console.log("Resource loaded error: "+c.url)},this);f.load()}},getRes:function(a){return(a=this.cache[a])&&a.type===PIXI.loaders.Resource.TYPE.JSON?a.data:a},release:function(a){a?delete this.cache[a]:this.cache={}}});
flax.loadJsonSync=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!1);/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?c.setRequestHeader("Accept-Charset","utf-8"):c.overrideMimeType&&c.overrideMimeType("text/plain; charset=utf-8");c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){var a=c.responseText,a=a.replace(/\\/g,"");try{a=JSON.parse(a)}catch(e){}b&&b(a)}};c.send(null)};
flax.getResUrl=function(a){if(0==a.indexOf("http"))return a;var b=flax.game.config.resUrl||flax.game.config.platformConfig&&flax.game.config.platformConfig.resUrl;if(!b||!b.length)return a;b.lastIndexOf("/")!=b.length-1&&(b+="/");return b+a};flax.loader=new flax.Loader;flax=flax||{};DELTA_RATE=0.001/0.06;
flax.Scheduler=flax.Class.extend({ticker:null,schedules:null,toRemoves:null,stats:null,time:-1,_timePaused:!0,_runningFrames:0,ctor:function(){this.schedules=[];this.toRemoves=[];this._setupTicker()},start:function(){this.ticker.start()},pause:function(){this.ticker.stop()},isPaused:function(){return!this.ticker.started},schedule:function(a,b,c,d,e,g){if(!a||!b)throw"Target or callback can not be null!";if(null==c||0>c)c=flax.frameInterval;null==d&&(d=flax.REPEAT_FOREVER);if(null==e||0>e)e=0;a={target:a,
callback:b,interval:c,repeat:d,delay:e,time:0,fixed:!0===g};(b=this._ifExist(a,this.schedules))?flax.copyProperties(a,b):this.schedules.push(a)},fixedSchedule:function(a,b,c,d,e){this.schedule(a,b,c,d,e,!0)},scheduleOnce:function(a,b,c){this.schedule(a,b,0,0,c)},scheduleUpdate:function(a,b){null==a.update||"function"!=typeof a.update?console.log("ScheduleUpdate need a function named update to invoke!"):this.schedule(a,a.update,flax.frameInterval,flax.REPEAT_FOREVER,0,b)},fixedScheduleUpdate:function(a){this.scheduleUpdate(a,
!0)},unscheduleUpdate:function(a){a.update&&this.unschedule(a,a.update)},unschedule:function(a,b){var c={target:a,callback:b},d=this.toRemoves;if(null==b)for(var e=this.schedules,g=e.length,l=0;l<g;l++)e[l].target==a&&(c={target:a,callback:e[l].callback},!this._ifExist(c,d)&&this._ifExist(c,this.schedules)&&d.push(c));else!this._ifExist(c,d)&&this._ifExist(c,this.schedules)&&d.push(c)},update:function(a){a*=DELTA_RATE;var b=window.performance.now();-1==this.time&&(this.time=b);1E3<b-this.time?(this._runningFrames=
0,this._timePaused||(this._timePaused=!0)):(this._runningFrames++,this._timePaused&&60<=this._runningFrames&&(this._timePaused=!1,flax.resumeAllSounds()));this.time=b;this.stats&&this.stats.begin();for(var b=this.schedules,c=this.toRemoves,d=b.length,e=0;e<d;e++){for(var g=b[e],l=!1,k=c.length;k--;){var f=c[k];if(f.target==g.target&&f.callback==g.callback){l=!0;b.splice(e,1);c.splice(k,1);e--;d--;break}}if(!l)if(0>=g.delay){if(0<=g.repeat&&(g.time+=a,g.time>=g.interval))if(k=g.time,g.time=0,g.repeat--,
!0===g.fixed){l=Math.floor(k/g.interval);g.time=k-g.interval*l;l=Math.min(6,l);for(k=0;k<l;k++)g.callback.apply(g.target,[g.interval])}else g.callback.apply(g.target,[a]);0>g.repeat&&this.unschedule(g.target,g.callback)}else g.delay-=a}"undefined"!=typeof TWEEN&&TWEEN.update(this.time);this.stats&&this.stats.end()},_ifExist:function(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d];if(e.target==a.target&&e.callback==a.callback)return e}return null},_setupTicker:function(){var a=this.ticker=PIXI.ticker.shared;
a.add(this.update,this);a.autoStart=!0},showFPS:function(){if(!0===flax.game.config.showFPS){var a=new Stats;a.setMode(0);a.domElement.style.position="absolute";a.domElement.style.left=flax.app.view.style.left;a.domElement.style.top=flax.app.view.style.top;document.body.appendChild(a.domElement);this.stats=a}}});flax=flax||{};flax.toClass(PIXI.Container);flax.toClass(PIXI.particles.ParticleContainer);flax.toClass(PIXI.Sprite);flax.toClass(PIXI.Text);flax.toClass(PIXI.Graphics);
flax.addModule(PIXI.Container,flax.Module.CocosLike,!1,!1);flax.addModule(PIXI.Container,flax.Module.Schedule);PIXI.Container.prototype.removeAllChildren=PIXI.Sprite.prototype.removeChildren;PIXI.Container.prototype.convertToWorldSpace=function(a){a=this.toGlobal(a);flax.stage&&(a=flax.stage.toLocal(a));return a};PIXI.Container.prototype.convertToNodeSpace=function(a,b){flax.stage&&(a=flax.stage.toGlobal(a));return a=this.toLocal(a,b)};PIXI.Container.prototype.getContentSize=PIXI.Sprite.prototype.getBounds;
PIXI.Container.prototype.setContentSize=function(a,b){};
PIXI.Container.prototype.addChild=function(a){var b=arguments.length;if(1<b)for(var c=0;c<b;c++){var d=arguments[c];d instanceof PIXI.DisplayObject?this.addChild(d):console.warn("The "+(c+1)+" parameter is not a PIXI.DisplayObjet when call addchild, will be ignored!")}else{a.parent&&a.parent.removeChild(a);a.parent=this;a.transform._parentID=-1;this.children.push(a);this._boundsID++;this.onChildrenChange(this.children.length-1);a.emit("added",this);this.childrenCount=this.children.length;if(this.running||
this==flax.stage)a.onEnter();return a}};PIXI.Container.prototype.addChildAt=function(a,b){if(0>b||b>this.children.length)throw Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length);a.parent&&a.parent.removeChild(a);a.parent=this;a.transform._parentID=-1;this.children.splice(b,0,a);this._boundsID++;this.onChildrenChange(b);a.emit("added",this);this.childrenCount=this.children.length;if(this.running||this==flax.stage)a.onEnter();return a};
PIXI.Container.prototype.removeChild=function(a){var b=arguments.length;if(1<b)for(var c=0;c<b;c++)this.removeChild(arguments[c]);else{b=this.children.indexOf(a);if(-1===b)return null;a.parent=null;a.transform._parentID=-1;(0,PIXI.utils.removeItems)(this.children,b,1);this._boundsID++;this.onChildrenChange(b);a.emit("removed",this)}this.childrenCount=this.children.length;a.onExit();return a};
PIXI.Container.prototype.removeChildAt=function(a){var b=this.getChildAt(a);b.parent=null;this.children.splice(a,1);this.onChildrenChange(a);b.emit("removed",this);this.childrenCount=this.children.length;b.onExit();return b};
PIXI.Container.prototype.removeChildren=function(a,b){var c=a||0,d="number"===typeof b?b:this.children.length,e=d-c;if(0<e&&e<=d){c=this.children.splice(c,e);for(d=0;d<c.length;++d)c[d].parent=null;this.onChildrenChange(a);for(d=0;d<c.length;++d)c[d].emit("removed",this)}else if(0===e&&0===this.children.length)c=[];else throw new RangeError("removeChildren: numeric values are outside the acceptable range.");this.childrenCount=this.children.length;e=c.length;for(d=0;d<e;++d){var g=c[d];if(g)g.onExit()}return c};
flax.Container=PIXI.Container.extend({__instanceId:null,ctor:function(){this.__instanceId=flax.getInstanceId();this._super()},onEnter:function(){this instanceof flax.FlaxContainer||flax.callModuleOnEnter(this);this._super()},onExit:function(){this instanceof flax.FlaxContainer||flax.callModuleOnExit(this);this._super()}});
flax.Sprite=PIXI.Sprite.extend({ctor:function(a){this.__instanceId=flax.getInstanceId();flax.isImageFile(a)?a=PIXI.Texture.fromImage(a):"string"===typeof a&&(a=PIXI.Texture.fromFrame(a));this._super(a)},onEnter:function(){this instanceof flax.FlaxSprite||flax.callModuleOnEnter(this);this._super()},onExit:function(){this instanceof flax.FlaxSprite||flax.callModuleOnExit(this);this._super()}});flax.SpriteBatchNode=flax.Sprite;flax.FlaxSpriteBatch=flax.Sprite;flax.Graphics=PIXI.Graphics;
flax.Text=PIXI.Text.extend({destroy:function(a){this.parent&&this.parent.removeChild(this);this.parent=null;this._super(a)}});flax.Scene=flax.Container.extend({name:null,onEnter:function(){this._super();flax.currentScene=this},onExit:function(){this._super()}});
function PixiTextInput(a,b,c,d){PIXI.Container.call(this);window.pixiTextInputTarget=this;a||(a="");a=a.toString();if(b&&b.wordWrap)throw"wordWrap is not supported for input fields";this._text=a;this._placeholder="";this.localWidth=b.wordWrapWidth||100;this._backgroundColor=13421772;this._borderWidth=this._borderColor=this._caretColor=0;this._background=!0;this._password=!1;this._value=a;"undefined"!==typeof c&&(void 0!==c&&!0===c)&&(this._password=!0,this.syncValue());this.style=b;this.textField=
new PIXI.Text(this._value,b);this.localHeight=b.lineHeight||this.textField.style.fontSize+this.textField.style.strokeThickness+4;this.textColor=this.textField.style.fill;this.backgroundGraphics=new PIXI.Graphics;this.textFieldMask=new PIXI.Graphics;this.selectionGraphics=new PIXI.Graphics;this.caret=new PIXI.Graphics;this.drawElements();this.addChild(this.backgroundGraphics);this.addChild(this.selectionGraphics);this.addChild(this.textField);this.addChild(this.caret);this.textFieldMask&&this.addChild(this.textFieldMask);
this._caretIndex=this.scrollIndex=0;this.caretFlashInterval=null;this._secondCaretIndex=0;this.blur();this.updateCaretPosition();this.backgroundGraphics.interactive=!0;this.backgroundGraphics.buttonMode=!0;this.backgroundGraphics.defaultCursor="text";this.backgroundGraphics.on("touchstart",this.onBackgroundMouseDown,this);this.backgroundGraphics.on("mousedown",this.onBackgroundMouseDown,this);this.keyEventClosure=this.onKeyEvent.bind(this);this.windowBlurClosure=this.onWindowBlur.bind(this);this.documentMouseDownClosure=
this.onDocumentMouseDown.bind(this);this.isFocusClick=!1;this.updateText();this.textFieldMask&&(this.textField.mask=this.textFieldMask);this.change=this.keydown=this.keypress=null;this.shiftDown=this.ctrlDown=!1;this.onChange=new signals.Signal}PixiTextInput.prototype=Object.create(PIXI.Container.prototype);PixiTextInput.prototype.constructor=PixiTextInput;
PixiTextInput.prototype.onBackgroundMouseDown=function(a){a=this.toLocal(a.data.global).x;this._caretIndex=this.getCaretIndexByCoord(a);this.updateCaretPosition();this.focus();this.isFocusClick=!0;var b=this;setTimeout(function(){b.isFocusClick=!1},0)};
PixiTextInput.prototype.focus=function(){this._nativeTextInput||(this._nativeTextInput=this.getNativeTextInput(this._password));this.updateNativeTextInput();this._nativeTextInput&&(this._nativeTextInput.value=this._text,this._secondCaretIndex=this._caretIndex,this._nativeTextInput.selectionStart=this._caretIndex,this._nativeTextInput.selectionEnd=this._caretIndex,this._nativeTextInput.focus());window.pixiTextInputTarget=this;this.blur();this.handleCopyReference=this.handleCopy.bind(this);document.addEventListener("copy",
this.handleCopyReference);this.handleCutReference=this.handleCut.bind(this);document.addEventListener("cut",this.handleCutReference);this.handlePasteReference=this.handlePaste.bind(this);document.addEventListener("paste",this.handlePasteReference);document.addEventListener("keydown",this.keyEventClosure);document.addEventListener("keypress",this.keyEventClosure);document.addEventListener("keyup",this.keyEventClosure);document.addEventListener("mousedown",this.documentMouseDownClosure);document.addEventListener("touchstart",
this.documentMouseDownClosure);window.addEventListener("blur",this.windowBlurClosure);this.showCaret()};
PixiTextInput.prototype.onKeyEvent=function(a){if("Enter"==a.key)this.blur();else{if("keypress"==a.type){if(32>a.charCode)return;32==a.charCode&&a.preventDefault();if(this.ctrlDown&&(67==a.charCode||99==a.charCode||86==a.charCode||118==a.charCode||88==a.charCode||120==a.charCode))return;this._selection&&(this.deleteSelectedText(),this.moveCarretRight());var b=this._text;this._text=b.substring(0,this._caretIndex)+String.fromCharCode(a.charCode)+b.substr(this._caretIndex);this._selection=!1;this.syncValue();
this._caretIndex++;this.ensureCaretInView();this.showCaret();this.updateText(!1);this.drawElements();this.trigger(this.keypress,a);this.trigger(this.change)}if("keydown"==a.type){switch(a.keyCode){case 8:this._selection?this.deleteSelectedText():0<this._caretIndex&&(b=this._text.substring(this._caretIndex),this._text=this._text.substring(0,this._caretIndex-1)+b,this._nativeTextInput.value=this._text,this.syncValue(!0),this._caretIndex--,this._secondCaretIndex=this._caretIndex,this.ensureCaretInView(),
this.showCaret(),this.updateText(),this._nativeTextInput.selectionStart=this._caretIndex,this._nativeTextInput.selectionEnd=this._caretIndex);a.preventDefault();this.trigger(this.change);break;case 16:this.shiftDown=!0;break;case 17:this.ctrlDown=!0;break;case 35:this._caretIndex=this._text.length;a.preventDefault();this.ensureCaretInView();this.updateCaretPosition();this.showCaret();this.updateText();break;case 36:this._caretIndex=0;a.preventDefault();this.ensureCaretInView();this.updateCaretPosition();
this.showCaret();this.updateText();break;case 46:this._text=this._text.substring(0,this._caretIndex)+this._text.substring(this._caretIndex+1);this.syncValue();this.ensureCaretInView();this.updateCaretPosition();this.showCaret();this.updateText();a.preventDefault();this.trigger(this.change);break;case 39:this.shiftDown&&!this._selection&&(this._selection=!0,this._secondCaretIndex=this._caretIndex);this.ctrlDown&&this._caretIndex+1<this._text.length?(b=this._text.indexOf(" ",this._caretIndex),b!=this._caretIndex?
this._caretIndex=-1!=b?b:this._text.length:this.moveCarretRight()):this.moveCarretRight();this.shiftDown||(this._selection=!1);this.ensureCaretInView();this.updateCaretPosition();this.showCaret();this.updateText();return;case 37:this.shiftDown&&!this._selection&&(this._selection=!0,this._secondCaretIndex=this._caretIndex);this.ctrlDown&&0<this._caretIndex+1?(b=this._text.lastIndexOf(" ",this._caretIndex-1),b!=this._caretIndex?this._caretIndex=-1!=b?b:0:this.moveCarretLeft()):this.moveCarretLeft();
this.shiftDown||(this._selection=!1);this.ensureCaretInView();this.updateCaretPosition();this.showCaret();this.updateText();this.drawElements();break;case 65:this.ctrlDown&&(this._selection=!0,this._caretIndex=0,this._secondCaretIndex=this._text.length,this.drawElements(),a.preventDefault())}this.trigger(this.keydown,a)}if("keyup"==a.type)switch(a.keyCode){case 16:this.shiftDown=!1;break;case 17:this.ctrlDown=!1}}};
PixiTextInput.prototype.handleCopy=function(a){a.clipboardData.setData("text/plain",this.getSelectedText());a.preventDefault()};PixiTextInput.prototype.handleCut=function(a){a.clipboardData.setData("text/plain",this.getSelectedText());this._selection&&(this.deleteSelectedText(),this.moveCarretRight());a.preventDefault()};
PixiTextInput.prototype.handlePaste=function(a){var b=a.clipboardData.getData("text/plain");this._selection&&(this.deleteSelectedText(),this.moveCarretRight());this.insertText(b);a.preventDefault()};
PixiTextInput.prototype.deleteSelectedText=function(a){var b;this._caretIndex>this._secondCaretIndex?(a=this._secondCaretIndex,b=this._caretIndex):(a=this._caretIndex,b=this._secondCaretIndex);this._text=0==a&&b==this._text.length?"":this._text.substring(0,a)+this._text.substring(b);this._selection=!1;this.syncValue();this._caretIndex=a;0>this._caretIndex&&(this._caretIndex=0);this.ensureCaretInView();this.showCaret();this.updateText();this.drawElements()};
PixiTextInput.prototype.insertText=function(a){this._text=this._text.substring(0,this._caretIndex)+a+this._text.substring(this._caretIndex);this._selection=!1;this._caretIndex+=a.length;this.updateCaretPosition();this.syncValue();this.ensureCaretInView();this.showCaret();this.updateText();this.drawElements()};
PixiTextInput.prototype.moveCarretRight=function(){this._selection&&!this.shiftDown?this._caretIndex<this._secondCaretIndex&&(this._caretIndex=this._secondCaretIndex):(this._caretIndex++,this._caretIndex>this._text.length&&(this._caretIndex=this._text.length))};PixiTextInput.prototype.moveCarretLeft=function(){this._selection&&!this.shiftDown?this._caretIndex>this._secondCaretIndex&&(this._caretIndex=this._secondCaretIndex):(this._caretIndex--,0>this._caretIndex&&(this._caretIndex=0))};
PixiTextInput.prototype.ensureCaretInView=function(){for(this.updateCaretPosition();this.caret.position.x>=this.localWidth-1;)this.scrollIndex++,this.updateCaretPosition();for(;0>this.caret.position.x;)this.scrollIndex-=2,0>this.scrollIndex&&(this.scrollIndex=0),this.updateCaretPosition()};
PixiTextInput.prototype.blur=function(){document.removeEventListener("copy",this.handleCopyReference);document.removeEventListener("cut",this.handleCutReference);document.removeEventListener("paste",this.handlePasteReference);document.removeEventListener("keydown",this.keyEventClosure);document.removeEventListener("keypress",this.keyEventClosure);document.removeEventListener("keyup",this.keyEventClosure);document.removeEventListener("mousedown",this.documentMouseDownClosure);window.removeEventListener("blur",
this.windowBlurClosure);this.hideCaret();this._nativeTextInput&&(this._value=this._nativeTextInput.value,this.updateText())};PixiTextInput.prototype.onDocumentMouseDown=function(){var a=this;a._nativeTextInput&&a._nativeTextInput.value&&setTimeout(function(){a._nativeTextInput&&a._nativeTextInput.value&&(a._caretIndex=a._nativeTextInput.selectionStart,a.updateCaretPosition())},100)};PixiTextInput.prototype.onWindowBlur=function(){};
PixiTextInput.prototype.updateCaretPosition=function(){if(this._caretIndex<this.scrollIndex)this.caret.position.x=-1;else{var a=this._value.substring(0,this._caretIndex).substring(this.scrollIndex);this.caret.position.x=this.textField.context.measureText(a).width}};PixiTextInput.prototype.updateText=function(a){this.textField.text=this._text=this._value;this.onChange&&!1!==a&&this.onChange.dispatch(this.textField.text)};
PixiTextInput.prototype.syncValue=function(a){this.textField&&this.textField.style.fill!=this.textColor&&(this.textField.style.fill=this.textColor,this.textField.alpha=1);this._password?this._value=this._text.replace(/./g,"*"):!0!==a&&0==this._text.length&&this._placeholder?(this._value=this._placeholder,this.textField&&(this.textField.style.fill=13421772,this.textField.alpha=0.5)):this._value=this._text};
PixiTextInput.prototype.drawElements=function(){this.backgroundGraphics.clear();this.backgroundGraphics.beginFill(this._backgroundColor);0<this._borderWidth&&this.backgroundGraphics.lineStyle(this._borderWidth,this._borderColor);this._background&&this.backgroundGraphics.drawRect(0,0,this.localWidth,this.localHeight);this.selectionGraphics.clear();if(this._selection&&this._caretIndex!=this._secondCaretIndex){var a,b,c=0;this._caretIndex>this._secondCaretIndex?(a=this._secondCaretIndex,b=this._caretIndex):
(a=this._caretIndex,b=this._secondCaretIndex);0<a&&(c=this.textField.context.measureText(this._text.substring(0,a)).width,this.scrollIndex&&(c-=this.textField.context.measureText(this._text.substring(0,this.scrollIndex)).width));a=this._text.substring(a,b);a=this.textField.context.measureText(a).width;c+a>this.localWidth&&(a=this.localWidth-c);this.selectionGraphics.beginFill(14540253,0.3);this.selectionGraphics.drawRect(c,0,a,this.localHeight)}this.backgroundGraphics.endFill();this.backgroundGraphics.hitArea=
new PIXI.Rectangle(0,0,this.localWidth,this.localHeight);this.textFieldMask&&(this.textFieldMask.clear(),this.textFieldMask.beginFill(this._backgroundColor,0),this.textFieldMask.drawRect(0,0,this.localWidth,this.localHeight),this.textFieldMask.endFill());this.caret.clear();this.caret.beginFill(this._caretColor);this.caret.drawRect(1,1,1,this.localHeight-2);this.caret.endFill()};
PixiTextInput.prototype.showCaret=function(){this.caretFlashInterval&&(clearInterval(this.caretFlashInterval),this.caretFlashInterval=null);this.caret.visible=!0;this.caretFlashInterval=setInterval(this.onCaretFlashInterval.bind(this),500)};PixiTextInput.prototype.hideCaret=function(){this.caretFlashInterval&&(clearInterval(this.caretFlashInterval),this.caretFlashInterval=null);this.caret&&(this.caret.visible=!1)};PixiTextInput.prototype.onCaretFlashInterval=function(){this.caret.visible=!this.caret.visible};
PixiTextInput.prototype.getCaretIndexByCoord=function(a){var b=1E4,c=0,d=this._text.substring(this.scrollIndex);for(i=0;i<d.length+1;i++){var e=d.substring(0,i),e=this.textField.context.measureText(e).width;Math.abs(e-a)<b&&(b=Math.abs(e-a),c=i)}return this.scrollIndex+c};
PixiTextInput.prototype.getSelectedText=function(){if(this._selection){if(this._caretIndex<this._secondCaretIndex)return this._text.substring(this._caretIndex,this._secondCaretIndex);if(this._caretIndex>this._secondCaretIndex)return this._text.substring(this._secondCaretIndex,this._caretIndex)}return""};
Object.defineProperty(PixiTextInput.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){this.localWidth=a;this.drawElements();this.ensureCaretInView();this.updateText()}});Object.defineProperty(PixiTextInput.prototype,"text",{get:function(){return this._text},set:function(a){this._text=a.toString();this.syncValue();this.caretIndex=this.scrollIndex=0;this.updateText(!1);this._nativeTextInput&&(this._nativeTextInput.value=this._text)}});
Object.defineProperty(PixiTextInput.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a;this.drawElements()}});Object.defineProperty(PixiTextInput.prototype,"borderColor",{get:function(){return this._borderColor},set:function(a){this._borderColor=a;this.drawElements()}});Object.defineProperty(PixiTextInput.prototype,"borderWidth",{get:function(){return this._borderWidth},set:function(a){this._borderWidth=a;this.drawElements()}});
Object.defineProperty(PixiTextInput.prototype,"caretColor",{get:function(){return this._caretColor},set:function(a){this._caretColor=a;this.drawElements()}});Object.defineProperty(PixiTextInput.prototype,"background",{get:function(){return this._background},set:function(a){this._background=a;this.drawElements()}});Object.defineProperty(PixiTextInput.prototype,"placeholder",{get:function(){return this._placeholder},set:function(a){this._placeholder=a;this.syncValue();this.updateText()}});
PixiTextInput.prototype.setText=function(a){this._nativeTextInput&&(this._nativeTextInput.value=a);this.text=a};PixiTextInput.prototype.trigger=function(a,b){a&&a(b)};PixiTextInput.prototype.getNativeTextInput=function(a){var b=document.getElementById("PixiTextInput");b||(b=document.createElement("input"),document.body.appendChild(b),a&&(b.type="password"),this.bindNativeTextInput());return b};
PixiTextInput.prototype.updateNativeTextInput=function(){var a=this._nativeTextInput;if(a&&(a.style.position="fixed",a.style.top="-100px",a.style.left="-100px",a.style.fontSize="50px",flax.sys.isMobile)){var b=this,c=flax.htmlStyleToObject(a),c=flax.mergeHtmlStyleToStr(c,"position:absolute;left:250px;top:500px");a.style=c;setTimeout(function(){flax.showStageMask(!0,function(){a.style.top="-100px";a.style.left="-100px";b._value=b._nativeTextInput.value;b.updateText()})},100)}};
PixiTextInput.prototype.bindNativeTextInput=function(a){a&&a.addEventListener("keyup",function(a){window.pixiTextInputTarget.text=this.value})};"undefined"!==typeof module&&(module.exports=PixiTextInput);flax._assetsClassMap={btn:"flax.SimpleButton",button:"flax.SimpleButton",progress:"flax.ProgressBar",jpg:"flax.Image",png:"flax.Image",scrollPane:"flax.ScrollPane",gun:"flax.Gunner",soundBtn:"flax.SimpleSoundButton"};
flax._assetsMcClassMap={button:"flax.Button",scrollPane:"flax.MCScrollPane",gun:"flax.MCGunner",gun1:"flax.MCGunner",soundBtn:"flax.SoundButton"};flax.ASSET_NONE=0;flax.ASSET_ANIMATOR=1;flax.ASSET_MOVIE_CLIP=2;flax.ASSET_IMAGE=3;flax.registerClass=function(a,b){flax._assetsClassMap[a]=b};flax.registerMcClass=function(a,b){flax._assetsMcClassMap[a]=b};
flax.AssetsManager=flax.Class.extend({framesCache:null,displaysCache:null,displayDefineCache:null,mcsCache:null,subAnimsCache:null,fontsCache:null,imageCache:null,metaCache:null,ctor:function(){this.framesCache={};this.displaysCache={};this.displayDefineCache={};this.mcsCache={};this.subAnimsCache={};this.fontsCache={};this.imageCache=[];this.metaCache={}},getAssetType:function(a,b){if(this.getMc(a,b))return flax.ASSET_MOVIE_CLIP;var c=this.getDisplayDefine(a,b);return c?"jpg"==c.type||"png"==c.type?
flax.ASSET_IMAGE:"share"==c.type?this.getAssetType(this._getSharedPlist(a,c),b):flax.ASSET_ANIMATOR:flax.ASSET_NONE},createDisplay:function(a,b,c,d,e){if(null==a||null==b)throw"Please give me assetsFile and assetID!";null==e&&c&&(e=c["class"]);if(c&&"string"===typeof c||e&&"string"!==typeof e)throw"Params error: maybe you are using the old api, please use the latest!";this.addAssets(a);var g=this.getSubAnims(a,b);g.length&&(b=b+"$"+g[0]);null==c&&(c={});var l=this.getDisplayDefine(a,b);if(l&&"share"==
l.type)return this.createDisplay(this._getSharedPlist(a,l),b,c,d,e);g=null;if(e&&(g=flax.nameToObject(e),null==g))throw"The class: "+e+" doesn't exist!";if(null==g){var k=!1;null==l&&(l=this.getMc(a,b),k=!0);if(l)e=l.type,"null"==e&&("jpg"!=b&&"png"!=b)&&(e=b),g=flax.nameToObject(e),null==g&&(e=k?flax._assetsMcClassMap[e]:flax._assetsClassMap[e],"flax.Image"==e&&l.scale9&&(null!=flax.Scale9Image?e="flax.Scale9Image":console.warn("Please add module of 'gui' or 'ccui'(cocos 3.10 later) into project.json if you want to use Scale9Image!")),
g=flax.nameToObject(e)),null==g&&(g=k?flax.MovieClip:flax.Animator,e=k?"flax.MovieClip":"flax.Animator",k&&!0===c.batch&&(g=flax.MovieClipBatch,e="flax.MovieClipBatch"));else throw"There is no display with assetID: "+b+" in assets file: "+a+", or make sure the display is not a BLANK symbol!";}l=null;k=c.parent;delete c.parent;!0===d?(l=flax.ObjectPool.get(a,e,b).fetch(b,null,c),k&&k.addChild(l)):(l=g.create?g.create(a,b):new g(a,b),flax.copyProperties(c,l),k&&k.addChild(l),l.clsName=e);return l},
cloneDisplay:function(a,b,c){if(!flax.isFlaxDisplay(a))throw"cloneDisplay only support flax type display!";b=this.createDisplay(a.assetsFile,a.assetID,{parent:c?a.parent:null},b,a.clsName);c&&b.setPosition(a.getPosition());b.name=a.name;b.setScale(a.getScale());b.setRotation(a.rotation);b.zIndex=a.zIndex;return b},getTexture:function(a,b,c){null==c&&(c=0);b=this.getDisplayDefine(a,b);a=this.getFrameNames(a,b.start,b.end);return flax.spriteFrameCache.getSpriteFrame(a[c])},getTextures:function(a,b,
c,d){b=this.getDisplayDefine(a,b);if(null==c||c<b.start)c=b.start;if(null==d||d<b.end)d=b.end;a=this.getFrameNames(a,c,d);c=[];for(d=0;d<a.length;d++)c.push(flax.spriteFrameCache.getSpriteFrame(a[d]));return c},removeAssets:function(a){delete this.framesCache[a];delete this.displaysCache[a];delete this.displayDefineCache[a];delete this.mcsCache[a];delete this.subAnimsCache[a];delete this.fontsCache[a];delete this.metaCache[a];var b=a;".flax"==flax.path.extname(a)&&(b=flax.path.changeBasename(b,DATA_FORMAT));
flax.spriteFrameCache.removeSpriteFramesFromFile(b);flax.loader.release(b);flax.loader.release(flax.path.changeBasename(b,".png"))},removeAllAssets:function(){for(var a in this.framesCache)this.removeAssets(a);for(a=0;a<this.imageCache.length;a++)flax.loader.release(this.imageCache[a]);this.imageCache.length=0},addAssets:function(a){if("undefined"!==typeof this.framesCache[a])return!1;var b=a;".flax"==flax.path.extname(a)&&(b=flax.path.changeBasename(b,DATA_FORMAT));var c=flax.loader.getRes(b);if(null==
c)throw"Make sure you have loaded the resource: "+a;if(null==c.displays&&null==c.fonts)return this._addFromOriginPlist(b);this.metaCache[a]=c.metadata;var d=this.getToolVersion(a);if(!d||d<MIN_TOOL_VERSION)throw"The resource: "+a+" was exported with the old version of Flax, please do it with current version!";d=c.metadata.fps;flax.spriteFrameCache.addSpriteFrames(b);flax.loader.cache[b]="loaded!";var b=[],e=c.frames,g;for(g in e)b.push(g);b.sort();this.framesCache[a]=b;c.displays&&this._parseDisplays(a,
c.displays,d);c.mcs&&this._parseMovieClips(a,c.mcs,d);c.fonts&&this._parseFonts(a,c.fonts);return!0},_addFromOriginPlist:function(a){if("undefined"!==typeof this.framesCache[a])return!1;var b=flax.loader.getRes(a);if(null==b)throw"Make sure you have loaded the resource: "+a;flax.spriteFrameCache.addSpriteFrames(a);flax.loader.cache[a]="loaded!";var c=[],b=b.frames,d;for(d in b)c.push(d);c.sort();this.framesCache[a]=c;d=flax.path.basename(a);b=d.lastIndexOf(".");-1!==b&&(d=d.substring(0,b));this.displayDefineCache[a+
d]={type:null,start:0,end:c.length-1,fps:flax.game.config.frameRate};this.displaysCache[a]=[d];return!0},_parseDisplays:function(a,b,c){var d=flax.getResUrl(a.slice(0,a.lastIndexOf("/"))),e=[],g=null,l;for(l in b)if(e.push(l),g=b[l],g.anchors&&(g.anchors=this._parseFrames(g.anchors)),g.colliders&&(g.colliders=this._parseFrames(g.colliders)),g.scale9&&(g.scale9=flax._strToRect(g.scale9)),g.fps=c||flax.game.config.frameRate,this.displayDefineCache[a+l]=g,this._parseSubAnims(a,l),"png"==g.type||"jpg"==
g.type)g.url=d+"/"+g.url,this.imageCache.push(g.url);this.displaysCache[a]=e},_parseMovieClips:function(a,b,c){for(var d in b){var e=b[d];e.anchors&&(e.anchors=this._parseFrames(e.anchors));e.colliders&&(e.colliders=this._parseFrames(e.colliders));var g,l=e.children,k;for(k in l){g=l[k];if(0==k.indexOf("label__")){var f=k.replace("label__","");g._isLanguageElement=!0;l[f]=g;delete l[k]}g.frames=this._strToArray(g.frames)}e.fps=c||flax.game.config.frameRate;this.mcsCache[a+d]=e;this._parseSubAnims(a,
d)}},_parseFonts:function(a,b){for(var c in b)this.fontsCache[a+c]=b[c]},_parseSubAnims:function(a,b){var c=b.split("$"),d=c[0],c=c[1];if(d&&c&&""!=d&&""!=c){var d=a+d,e=this.subAnimsCache[d];null==e&&(e=[],this.subAnimsCache[d]=e);e.push(c)}},_parseFrames:function(a){var b={},c;for(c in a)b[c]=this._strToArray(a[c]);return b},_strToArray:function(a){a=a.split("|");for(var b=-1,c=[];++b<a.length;){var d=a[b];"null"===d?c.push(null):""===d?c.push(c[b-1]):c.push(d)}return c},_getSharedPlist:function(a,
b){return a.slice(0,a.lastIndexOf("/"))+"/"+b.url+DATA_FORMAT},getFrameNames:function(a,b,c){this.addAssets(a);a=this.framesCache[a];if(null==a)return[];-1==b&&(b=0);-1==c&&(c=a.length-1);return a.slice(parseInt(b),parseInt(c)+1)},getFrameNamesOfDisplay:function(a,b){var c=this.getDisplayDefine(a,b);if(null==c)throw"There is no display named: "+b+" in assetsFile: "+a;return this.getFrameNames(a,c.start,c.end)},getDisplayDefine:function(a,b){this.addAssets(a);return this.displayDefineCache[a+b]},getDisplayNames:function(a){this.addAssets(a);
return this.displaysCache[a]||[]},getRandomDisplayName:function(a){a=this.getDisplayNames(a);var b=Math.floor(Math.random()*a.length);return a[b]},getMc:function(a,b){this.addAssets(a);return this.mcsCache[a+b]},getSubAnims:function(a,b){this.addAssets(a);return this.subAnimsCache[a+b]||[]},getFont:function(a,b){this.addAssets(a);return this.fontsCache[a+b]},getToolVersion:function(a){return this.metaCache[a].version||this.metaCache[a].flaxVersion||0}});flax.assetsManager=new flax.AssetsManager;
flax._strToRect=function(a){a=a.split(",");return flax.rect(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]))};flax.createDisplay=function(a,b,c,d,e){return flax.assetsManager.createDisplay(a,b,c,d,e)};
flax.ObjectPool=flax.Class.extend({maxCount:100,_clsName:null,_cls:null,_assetsFile:null,_pool:null,_extraID:"",init:function(a,b,c){if(this._assetsFile&&this._cls)return console.log("The pool has been inited with cls: "+this._cls),!1;this._clsName=b;this._cls=flax.nameToObject(b);if(null==this._cls)return console.log("There is no class named: "+b),!1;this._assetsFile=a;this._pool=[];void 0!==c&&(this.maxCount=c);return!0},fetch:function(a,b,c){if(null==a)return console.log("Please give me a assetID to fetch a object!"),
null;var d=null;0<this._pool.length?(d=this._pool.shift(),d.__fromPool=!0,d.reset&&d.reset(),d.setSource(this._assetsFile,a)):d=this._cls.create?this._cls.create(this._assetsFile,a):new this._cls(this._assetsFile,a);d.__pool__id__=this._extraID;d.clsName=this._clsName;d._destroyed=!1;d.autoRecycle=!0;d.visible=!0;c?"undefined"===typeof c.zIndex&&(c.zIndex=0):c={zIndex:0};d.attr(c);b&&b.addChild(d);return d},recycle:function(a){a instanceof this._cls?this._pool.length<this.maxCount&&(a.retain&&a.retain(),
this._pool.push(a)):console.log("The object to recycle is not the same type with this pool: "+this._clsName)},release:function(){for(var a=this._pool.length;a--;)this._pool[a].release&&this._pool[a].release();this._pool.length=0}});flax.ObjectPool.all={};flax.ObjectPool.create=function(a,b,c){var d=new flax.ObjectPool;return d.init(a,b,c)?d:null};
flax.ObjectPool.get=function(a,b,c){null==b&&(b="flax.Animator");null==c&&(c="");var d=a+b+c,e=flax.ObjectPool.all[d];null==e&&(e=flax.ObjectPool.create(a,b),e._extraID=c,flax.ObjectPool.all[d]=e);return e};flax.ObjectPool.release=function(){for(var a in flax.ObjectPool.all)flax.ObjectPool.all[a].release(),delete flax.ObjectPool.all[a]};flax=flax||{};
flax.Anchor=flax.Class.extend({x:0,y:0,zIndex:0,rotation:0,scaleX:1,scaleY:1,skewX:0,skewY:0,ctor:function(a){a=a.split(",");this.x=parseFloat(a[0]);this.y=parseFloat(a[1]);2<a.length&&(this.zIndex=parseInt(a[2]));3<a.length&&(this.rotation=parseFloat(a[3]));4<a.length&&(this.scaleX=parseFloat(a[4]));5<a.length&&(this.scaleY=parseFloat(a[5]));6<a.length&&(this.skewX=parseFloat(a[6]));7<a.length&&(this.skewY=parseFloat(a[7]))}});
flax._sprite={__mOnFuctions:null,onAnimationOver:null,onSequenceOver:null,onFrameChanged:null,onFrameLabel:null,autoDestroyWhenOver:!1,autoStopWhenOver:!1,autoHideWhenOver:!1,autoRecycle:!1,currentFrame:0,currentAnim:null,totalFrames:0,frameInterval:0,define:null,name:null,assetsFile:null,assetID:null,clsName:"flax.FlaxSprite",playing:!1,_prevFrame:-1,_labelFrames:null,_frameSounds:null,_labelSounds:null,_loopStart:0,_loopEnd:0,_isLanguageElement:!1,__isFlaxSprite:!0,__isInputMask:!1,_fps:0,_anchorBindings:null,
_inited:!1,_mouseEnabled:!0,_baseAssetID:null,_subAnims:null,_animSequence:null,_loopSequence:!1,_sequenceIndex:0,_fpsForAnims:null,_animTime:0,_animReversed:!1,_destroyed:!1,ctor:function(a,b){if("flax.FlaxSprite"==this.clsName)throw"flax.FlaxSprite is an abstract class, please use flax.Animator or flax.MovieClip!";if(!a||!b)throw"Please set assetsFile and assetID to me!";this._super();this.reset();this.setSource(a,b)},setSource:function(a,b){if(null==a||null==b)throw"assetsFile and assetID can not be null!";
if(this.__fromPool||!(this.assetsFile==a&&(this.assetID==b||this._baseAssetID==b))){this.assetsFile=a;this.currentAnim=null;this.assetID=this._handleSumAnims(b);this.define=this.getDefine();var c=this.define.anchorX,d=this.define.anchorY;!isNaN(c)&&!isNaN(d)&&this.setAnchorPoint(c,d);null==this.__pool__id__&&(this.__pool__id__=this.assetID);0==this.fps&&(this.fps=this.define.fps);this.currentFrame=0;this.onInit();this._initFrameLabels();this.renderFrame(this.currentFrame,!0);this.parent&&this._updateLaguage();
flax.callModuleFunction(this,"onInit");this.currentAnim&&this.onFrameLabel&&this.onFrameLabel.dispatch(this.currentAnim)}},_handleSumAnims:function(a){a=a.split("$");this._baseAssetID=a[0];this._subAnims=flax.assetsManager.getSubAnims(this.assetsFile,this._baseAssetID);var b=a[1];null==b&&this._subAnims&&(b=this._subAnims[0]);a=this._baseAssetID;b&&(a=this._baseAssetID+"$"+b,this.currentAnim=b);return a},_initFrameLabels:function(){this._labelFrames=[];this._frameSounds={};var a=this.define.labels;
if(a){for(var b in a){var c=a[b];-1<b.indexOf("@")?(null==this.define.sounds&&(this.define.sounds={}),this.define.sounds[""+c.start]=DEFAULT_SOUNDS_FOLDER+b.slice(0,b.indexOf("@")),delete a[b]):this._labelFrames.push(c.start)}flax.copyProperties(this.define.sounds,this._frameSounds)}},setFpsForAnim:function(a,b){this._fpsForAnims&&(this._fpsForAnims[a]=b)},addFrameSound:function(a,b){this._frameSounds&&(this._frameSounds[""+a]=b)},removeFrameSound:function(a){this._frameSounds&&delete this._frameSounds[""+
a]},getLabels:function(a){return!this.define?null:this.define.labels?this.define.labels[a]:null},hasLabel:function(a){return null!=this.getLabels(a)},getAnchor:function(a){if(!this.define)return null;if(this.define.anchors){var b=this.define.anchors[a];if(null!=b){if((b=b[this.currentFrame])&&"string"===typeof b)b=new flax.Anchor(b),this.define.anchors[a][this.currentFrame]=b;return b}}return null},bindAnchor:function(a,b,c){if(!this.define)return null;if(!this.define.anchors)return console.log(this.assetID+
": there is no any anchor!"),null;if(null==this.define.anchors[a])return console.log(this.assetID+": there is no anchor named "+a),null;if(null==b)throw"Node can't be null!";if(-1<this._anchorBindings.indexOf(b))return console.log(this.assetID+": anchor has been bound, "+a),null;!1!==c&&this._anchorBindings.push(b);b.__anchor__=a;this._updateAnchorNode(b,this.getAnchor(a));b.parent!=this&&(b.removeFromParent(!1),this.addChild(b));return b},unbindAnchor:function(a,b){if(this._anchorBindings)for(var c=
null,d=-1,e=this._anchorBindings.length;++d<e;)if(c=this._anchorBindings[d],c===a||c.__anchor__===a){this._anchorBindings.splice(d,1);delete c.__anchor__;b&&(c.destroy?c.destroy():c.removeFromParent());break}},getCurrentLabel:function(){if(!this.define)return null;var a=this.define.labels;if(!a)return null;for(var b in a){var c=a[b];if(this.currentFrame>=c.start&&this.currentFrame<=c.end)return b}return null},nextFrame:function(){this.gotoAndStop(Math.min(++this.currentFrame,this.totalFrames-1))},
prevFrame:function(){this.gotoAndStop(Math.max(--this.currentFrame,0))},play:function(a){!this._isLanguageElement&&!this.__isButton&&(!0!==a?(this._loopStart=0,this._loopEnd=this.totalFrames-1):(this._animReversed=!0,this.currentFrame=this._loopStart=this.totalFrames-1,this._loopEnd=0),this.updatePlaying(!0),this.currentAnim=null)},playSequence:function(a){if(null==a)return!1;a instanceof Array||(a=Array.prototype.slice.call(arguments));if(0==a.length)return!1;this._loopSequence=!1;this._sequenceIndex=
0;var b=this.gotoAndPlay(a[0]);this._animSequence=a;return b},playSequenceLoop:function(a){a instanceof Array||(a=Array.prototype.slice.call(arguments));this.playSequence(a);this._loopSequence=!0},stopSequence:function(){this._animSequence&&(this._loopSequence=!1,this._animSequence.length=0)},_setSubAnim:function(a,b){if(!this._subAnims||!a||0==a.length)return!1;if(null==this._subAnims||-1==this._subAnims.indexOf(a))return this.__isButton||console.log("There is no animation named: "+a),!1;this.setSource(this.assetsFile,
this._baseAssetID+"$"+a);!1===b?this.gotoAndStop(0):(this._fpsForAnims[a]&&this.setFPS(this._fpsForAnims[a]),this.gotoAndPlay(0));this.currentAnim=a;this._animTime=0;return!0},gotoAndPlay:function(a,b){this._animReversed=!1;if(this._isLanguageElement||this.__isButton)return!1;if("string"===typeof a){if(this.playing&&this.currentAnim==a&&!0!==b)return!0;var c=this.getLabels(a);if(null==c)return c=this._setSubAnim(a,!0),c||(console.log("There is no animation named: "+a),this.play()),c;this._loopStart=
c.start;this._loopEnd=c.end;this.currentFrame=this._loopStart;this.currentAnim=a;this._fpsForAnims&&this._fpsForAnims[a]&&this.setFPS(this._fpsForAnims[a])}else{if(!this.isValideFrame(a))return console.log("The frame: "+a+" is out of range!"),!1;this._loopStart=0;this._loopEnd=this.totalFrames-1;this.currentFrame=a;this.currentAnim=null}this.renderFrame(this.currentFrame);this.updatePlaying(!0);this._animTime=0;return!0},stop:function(){this._animReversed=!1;this.updatePlaying(!1);this.currentAnim=
null},gotoAndStop:function(a){this._animReversed=!1;if("string"==typeof a){var b=this.getLabels(a);if(null==b)return b=this._setSubAnim(a,!1),!b&&!this.__isButton&&console.log("There is no animation named: "+a),b;a=b.start}this.currentAnim=null;if(!this.isValideFrame(a))return console.log("The frame: "+a+" is out of range!"),!1;this.updatePlaying(!1);this.currentFrame=a;this.renderFrame(a);return!0},setFPS:function(a){this._fps!=a&&(this._fps=a,this.updateSchedule())},getFPS:function(){return this._fps},
updatePlaying:function(a){this.playing!=a&&(this.playing=a,this.updateSchedule())},updateSchedule:function(){this.playing?1<this.totalFrames&&this.schedule(this.onFrame,1/this._fps):this.unschedule(this.onFrame)},onFrame:function(a){if(this.visible&&this.running){var b=this._animReversed;this.currentFrame+=b?-1:1;this._animTime+=a;if(a=!b?this.currentFrame>this._loopEnd:this.currentFrame<this._loopEnd){this.currentFrame=this._loopEnd;(this.autoDestroyWhenOver||this.autoStopWhenOver||this.autoHideWhenOver)&&
this.updatePlaying(!1);this.onAnimationOver&&this.onAnimationOver.getNumListeners()&&this.onAnimationOver.dispatch(this);if(!this.running)return;this.autoDestroyWhenOver?this.destroy():this.autoHideWhenOver?this.visible=!1:this._animSequence.length?this._playNext():this.autoStopWhenOver||(this.currentFrame=this._loopStart);this._animTime=0}if(this.running){a=!b?this.currentFrame>this._loopEnd:this.currentFrame<this._loopEnd;b=!b?this.currentFrame>this.totalFrames-1:0>this.currentFrame;if(a||b)this.currentFrame=
this._loopStart;this.renderFrame(this.currentFrame)}}},_playNext:function(){this._sequenceIndex++;if(this._sequenceIndex>=this._animSequence.length&&(this._loopSequence?this._sequenceIndex=0:(this.autoStopWhenOver||this.gotoAndPlay(this._animSequence[this._sequenceIndex-1],!0),this._animSequence=[]),this.onSequenceOver&&this.onSequenceOver.getNumListeners()&&this.onSequenceOver.dispatch(this),0!=this._sequenceIndex))return;var a=this._animSequence,b=a[this._sequenceIndex];if("number"===typeof b)if(this._loopSequence&&
this._sequenceIndex==a.length-1?this._sequenceIndex=0:this._sequenceIndex++,a.length>this._sequenceIndex&&"string"===typeof a[this._sequenceIndex]){var c=b,b=a[this._sequenceIndex];this.scheduleOnce(function(){this.gotoAndPlay(b)},c-this._animTime);this.updatePlaying(!1)}else this._animSequence=[],this.currentFrame=this._loopStart;else this.gotoAndPlay(b,!0)},isValideFrame:function(a){return 0<=a&&a<this.totalFrames},renderFrame:function(a,b){if(!(this._prevFrame==a&&!0!=b)&&(this._prevFrame!=a&&
(this._prevFrame=a),this._handleAnchorBindings(),this.define&&this.doRenderFrame(a),this.onFrameChanged&&this.onFrameChanged.getNumListeners()&&this.onFrameChanged.dispatch(this.currentFrame),this.onFrameLabel&&-1<this._labelFrames.indexOf(a)&&this.onFrameLabel.dispatch(this.getCurrentLabel(a)),this._frameSounds)){var c=this._frameSounds[""+a];c&&flax.playSound&&flax.playSound(c)}},setColor:function(a){"string"==typeof a&&(a=a.replace("#","0x"),a=parseInt(a));return this.tint=a},doRenderFrame:function(a){},
_handleAnchorBindings:function(){if(this._anchorBindings)for(var a=null,b=null,c=-1,d=this._anchorBindings.length;++c<d;)a=this._anchorBindings[c],a.visible&&(b=this.getAnchor(a.__anchor__),null!=b&&this._updateAnchorNode(a,b))},_updateAnchorNode:function(a,b){null!=b&&(0<=b.zIndex&&(a.zIndex=b.zIndex),a.setScaleX(b.scaleX),a.setScaleY(b.scaleY),0!=b.skewX||0!=b.skewY?a.skew?(a.skew.x=b.skewX*DEGREE_TO_RADIAN,a.skew.y=b.skewY*DEGREE_TO_RADIAN):console.log("***Warning: this version of pixi has not implemented the skew!"):
a.setRotation(b.rotation),a.setPosition(b.x,b.y))},onEnter:function(){this._destroyed=!1;this._updateLaguage();flax.callModuleOnEnter(this);this.__fromPool&&(this.__fromPool=!1,this.release());this.renderFrame(this.currentFrame,!0);this._super();var a=flax.game.config.platform;this.hasLabel(a)&&this.gotoAndStop(a);if(this.name&&(a=this.name.split("__"),0<a.length)){var b=a[1];"mask"==a[0]&&this.parent[b]&&(this.parent[b].mask=this)}},onExit:function(){this._super();this._destroyed=!0;this.__anchor__&&
this.parent.unbindAnchor&&(this.parent.unbindAnchor(this.__anchor__,!1),delete this.__anchor__);for(var a=null,b=-1,c=this._anchorBindings.length;++b<c;)a=this._anchorBindings[b],a.destroy?a.destroy():a.removeFromParent(!0),delete a.__anchor__;this._anchorBindings.length=0;flax.callModuleOnExit(this);this.onAnimationOver&&(this.onAnimationOver.dispose(),this.onAnimationOver=null);this.onSequenceOver&&(this.onSequenceOver.dispose(),this.onSequenceOver=null);this.onFrameChanged&&(this.onFrameChanged.dispose(),
this.onFrameChanged=null);this.onFrameLabel&&(this.onFrameLabel.dispose(),this.onFrameLabel=null);this._frameSounds=this._fpsForAnims=this._loopSequence=this._animSequence=this._subAnims=this._labelSounds=this._labelFrames=this.define=null},_updateLaguage:function(){flax.language&&(this._isLanguageElement||(this._isLanguageElement=-1<flax.language.index&&this.name&&0==this.name.indexOf("label__")),this._isLanguageElement&&(this.gotoAndStop(flax.language.index)||this.gotoAndStop(0)))},destroy:function(){this._destroyed||
(this._destroyed=!0,this.parent&&!0===this.parent.__isMovieClip&&this.parent.namedChildren[this.name]==this&&(delete this.parent.namedChildren[this.name],delete this.parent[this.name]),this.autoRecycle&&flax.ObjectPool.get(this.assetsFile,this.clsName,this.__pool__id__||"").recycle(this),this.removeFromParent(),this.autoRecycle=!1)},reset:function(){this._anchorBindings=[];this._animSequence=[];this._fpsForAnims={};this.onAnimationOver=new signals.Signal;this.onSequenceOver=new signals.Signal;this.onFrameChanged=
new signals.Signal;this.onFrameLabel=new signals.Signal;this.setScale(1);this.opacity=255;this.rotation=0;this.autoHideWhenOver=this.autoStopWhenOver=this.autoDestroyWhenOver=!1;RESET_FRAME_ON_RECYCLE&&(this.currentFrame=0);this.setPosition(0,0);this._animSequence.length=0;this._loopSequence=!1;this._sequenceIndex=0;this._animReversed=!1;this.currentAnim=null;this.__isInputMask=!1},isMouseEnabled:function(){return this._mouseEnabled},setMouseEnabled:function(a){this._mouseEnabled=a},getDefine:function(){return null},
onInit:function(){}};function _defineGT(a){flax.defineGetterSetter(a,"fps",a.getFPS,a.setFPS);flax.defineGetterSetter(a,"currentLabel",a.getCurrentLabel);flax.defineGetterSetter(a,"x",a.getPositionX,a.setPositionX);flax.defineGetterSetter(a,"y",a.getPositionY,a.setPositionY)}flax.FlaxSprite=flax.Sprite.extend(flax._sprite);flax.FlaxSprite.create=function(a,b){var c=new flax.FlaxSprite(a,b);c.clsName="flax.FlaxSprite";return c};window.flax.FlaxSprite=flax.FlaxSprite;_defineGT(flax.FlaxSprite.prototype);
flax.FlaxContainer=flax.Container.extend(flax._sprite);flax.FlaxContainer.create=function(a,b){var c=new flax.FlaxContainer(a,b);c.clsName="flax.FlaxContainer";return c};window.flax.FlaxContainer=flax.FlaxContainer;_defineGT(flax.FlaxContainer.prototype);
flax.Animator=flax.FlaxSprite.extend({clsName:"flax.Animator",_frameNames:null,onInit:function(){this._frameNames=flax.assetsManager.getFrameNames(this.assetsFile,this.define.start,this.define.end);this.totalFrames=this._frameNames.length;0==this.totalFrames&&console.log("There is no frame for display: "+this.assetID)},onExit:function(){this._super();this._frameNames=null},doRenderFrame:function(a){this.texture=flax.spriteFrameCache.getSpriteFrame(this._frameNames[a])},getDefine:function(){var a=
flax.assetsManager.getDisplayDefine(this.assetsFile,this.assetID);if(null==a)throw"There is no Animator named: "+this.assetID+" in assets: "+this.assetsFile+", or make sure this class extends from the proper class!";return a}});window.flax.Animator=flax.Animator;flax=flax||{};
flax.FrameData=flax.Class.extend({x:0,y:0,rotation:0,scaleX:1,scaleY:1,alpha:1,opacity:255,zIndex:-1,skewX:0,skewY:0,font:null,fontSize:12,fontColor:"",textAlign:"",textWidth:40,textHeight:20,lineHeight:0,_isText:!1,_data:null,_hasSkew:!1,ctor:function(a){this._data=a;this.x=parseFloat(a[0]);this.y=parseFloat(a[1]);this.rotation=parseFloat(a[2]);this.scaleX=parseFloat(a[3]);this.scaleY=parseFloat(a[4]);this.alpha=parseFloat(a[5]);this.opacity=Math.round(255*this.alpha);6<a.length&&(this.zIndex=parseInt(a[6]));
7<a.length&&(this.skewX=parseFloat(a[7]));8<a.length&&(this.skewY=parseFloat(a[8]));this._hasSkew=7<a.length&&(0!=this.skewX||0!=this.skewY);9<a.length&&(this._isText=!0,this.font=a[9],this.fontSize=parseInt(a[10]*flax.resolution),this.fontColor=a[11],this.textAlign=a[12],this.textWidth=parseFloat(a[13])*flax.resolution,this.textHeight=parseFloat(a[14])*flax.resolution,this.lineHeight=parseFloat(a[15])*flax.resolution)},setForChild:function(a){a.setScaleX(this.scaleX);a.setScaleY(this.scaleY);this._hasSkew?
a.skew?(a.skew.x=this.skewX,a.skew.y=this.skewY):console.log("***Warning: this version of pixi has not implemented the skew!"):a.setRotation(this.rotation);void 0!=a.alpha?a.alpha=this.alpha:a.setOpacity&&a.setOpacity(this.opacity);var b=this.x,c=this.y;if(this.font&&!0===a.__isTTF){var d=a.style;d.fontFamily=this.font;d.fontSize=this.fontSize*flax.resolution;d.fill=this.fontColor;d.align=this.textAlign}a.setPositionX(b);a.setPositionY(c)},clone:function(){return new flax.FrameData(this._data)},destroy:function(){this._data=
null}});
flax._movieClip={clsName:"flax.MovieClip",sameFpsForChildren:!1,createChildFromPool:!1,_autoPlayChildren:!1,namedChildren:null,_childrenDefine:null,_gRect:null,_extraChildren:null,__isMovieClip:!0,replaceChild:function(a,b,c){if(this._destroyed)return!1;var d=this._childrenDefine[a];if(null==d)return console.log("There is no child with named: "+a+"  in MovieClip: "+this.assetID),!1;var e=this.namedChildren[a];if(e){c||(c=this.assetsFile);d=flax.isDisplay(b);if(!d&&!flax.assetsManager.getAssetType(c,b))return!1;
var g=e._autoPlayChildren;this.destroyChild(e);e=d?b:flax.assetsManager.createDisplay(c,b,null,this.createChildFromPool);e.name=a;this.namedChildren[a]=e;!0===e.__isMovieClip&&!g&&(e.autoPlayChildren=this._autoPlayChildren);this._autoPlayChildren&&!0===e.__isFlaxSprite&&(this.playing?e.gotoAndPlay(0):e.gotoAndStop(0));this[a]=e;this.addChild(e);this.renderFrame(this.currentFrame,!0)}else d["class"]=b,d.assetsFile=c;return!0},getFrameData:function(a,b){if(!this.define)return null;if(this.define&&this.define.frames){var c=
this.define.frames[b];if(c)for(var d=0;d<c.length;d++){var e=c[d];if(e.name==a)return e.data}}console.log("This MovieClip maybe is not initialized yet!");return null},setOpacity:function(a){},setColor:function(a){a=this._super(a);for(var b in this.children){var c=this.children[b];c.setColor?c.setColor(a):this.children[b].tint=a}},onInit:function(){for(var a in this.namedChildren)this.destroyChild(this.namedChildren[a]);this.namedChildren={};this._childrenDefine=this.define.children;this.totalFrames=
this.define.totalFrames;this._gRect=flax._strToRect(this.define.rect);this.setContentSize(this._gRect.width,this._gRect.height);this._initFrameData()},_initFrameData:function(){if(!this.define.frames){var a={};this.define.frames=[];for(var b=0;b<this.totalFrames;b++){var c=[],d=[],e;for(e in this._childrenDefine){var g=a[e];if(null==g){for(var g=[],l=this._childrenDefine[e].frames,k=-1;++k<l.length;){var f=l[k];f&&(f=new flax.FrameData(f.split(",")),g[k]=f)}delete this._childrenDefine[e].frames;a[e]=
g}g=g[b];null==g?d.push({name:e,data:null}):c[g.zIndex]={name:e,data:g}}this.define.frames[b]=d.concat(c)}}},onEnter:function(){this._super();this.setContentSize(this._gRect.width,this._gRect.height)},addChildAt:function(a,b){this._super(a,b);if(!a.name||this.namedChildren&&!this.namedChildren[a.name])this._extraChildren||(this._extraChildren=[]),a.__eIndex=b,this._extraChildren.push(a)},doRenderFrame:function(a){a=this.define.frames[a];for(var b=a.length,c=0;c<b;c++){var d=a[c];if(null==d){continue;
throw"Please check if there are duplicated children names in this MovieClip when export from flash with flax tool!";}var e=d.name,g=d.data,d=this.namedChildren[e];if(g){var l=this._childrenDefine[e];if(null==d){if(null!=l.text){d=flax.createLabel(this.assetsFile,g,l);if(d.__isTTF){var k=flax.language.getStr(e);k&&(d.text=k)}d.name=e}else d=flax.assetsManager.createDisplay(l.assetsFile||this.assetsFile,l["class"],{name:e,_isLanguageElement:l._isLanguageElement},this.createChildFromPool);this.namedChildren[e]=
d;this[e]=d;this.onNewChild(d)}g.setForChild(d);this.sameFpsForChildren&&(d.fps=this.fps);e=-1==g.zIndex?l.zIndex:g.zIndex;d.parent!=this?(d.removeFromParent(!1),this.addChildAt(d,e)):d.zIndex!=e&&(d.zIndex=e)}else d&&this.destroyChild(d)}if(this._extraChildren)for(c=0;c<this._extraChildren.length;c++)d=this._extraChildren[c],d.zIndex=d.__eIndex},destroyChild:function(a){var b=a.name;this.namedChildren&&this.namedChildren[b]==a&&(delete this.namedChildren[b],delete this[b]);a.destroy?a.destroy():
a.removeFromParent(!0)},stop:function(){this._super();if(this._autoPlayChildren&&this.namedChildren)for(var a in this.namedChildren){var b=this.namedChildren[a];!0===b.__isFlaxSprite&&b.stop()}},play:function(){this._super();if(this._autoPlayChildren&&this.namedChildren)for(var a in this.namedChildren){var b=this.namedChildren[a];!0===b.__isFlaxSprite&&b.play()}},getAutoPlayChildren:function(){return this._autoPlayChildren},setAutoPlayChildren:function(a){if(this._autoPlayChildren!=a&&(this._autoPlayChildren=
a,this.namedChildren))for(var b in this.namedChildren){var c=this.namedChildren[b];!0===c.__isMovieClip&&c.setAutoPlayChildren(a);c.__isFlaxSprite&&(a?c.play():c.stop())}},onNewChild:function(a){!0===a.__isMovieClip&&(a.autoPlayChildren=this._autoPlayChildren);this._autoPlayChildren&&!0===a.__isFlaxSprite&&(this.playing?a.gotoAndPlay(0):a.gotoAndStop(0))},getDefine:function(){var a=flax.assetsManager.getMc(this.assetsFile,this.assetID);if(null==a)throw"There is no MovieClip named: "+this.assetID+
" in assets: "+this.assetsFile+", or make sure this class extends from the proper class!";return a},getChild:function(a,b){if(!this.namedChildren)return null;void 0===b&&(b=!0);var c=this.namedChildren[a];if(c)return c;if(!b)return null;for(var d in this.namedChildren)if(c=this.namedChildren[d],c.getChild&&(c=c.getChild(a,b)))return c;return null},getChildByAssetID:function(a){if(!this.namedChildren)return null;var b=null,c;for(c in this.namedChildren)if(b=this.namedChildren[c],b.assetID==a)return b;
return null},getLabelText:function(a,b){var c=this.getChild(a,void 0===b?!0:b);return c&&(c instanceof flax.BitmapLabel||!0===c.__isTTF)?c.getString():null},setLabelText:function(a,b,c){return(a=this.getChild(a,void 0===c?!0:c))&&(a instanceof flax.BitmapLabel||!0===a.__isTTF)?(a.setString(b),a):null},setFPS:function(a){if(this._fps!=a&&(this._fps=a,this.updateSchedule(),this.sameFpsForChildren&&this.namedChildren)){a=null;for(var b in this.namedChildren)a=this.namedChildren[b],a.fps=this._fps}},
reset:function(){this._super();this._autoPlayChildren=this.createChildFromPool=this.sameFpsForChildren=!1;if(RESET_FRAME_ON_RECYCLE)for(var a in this.namedChildren)!0===this.namedChildren[a].__isFlaxSprite&&(this.currentFrame=0)},onExit:function(){this._super();for(var a in this.namedChildren)delete this.namedChildren[a],delete this[a];this._extraChildren=this._gRect=this._childrenDefine=null},getBounds:function(a){return this.mainCollider.getBounds(a)}};flax.MovieClip=flax.FlaxContainer.extend(flax._movieClip);
flax.MovieClip.create=function(a,b){var c=new flax.MovieClip(a,b);c.clsName="flax.MovieClip";return c};var _p=flax.MovieClip.prototype;flax.defineGetterSetter(_p,"autoPlayChildren",_p.getAutoPlayChildren,_p.setAutoPlayChildren);flax.defineGetterSetter(_p,"opacity",_p.getOpacity,_p.setOpacity);window.flax.MovieClip=flax.MovieClip;var _superCls=PIXI.particles.ParticleContainer;
flax.BitmapLabel=_superCls.extend({mlWidth:0,mlHeight:0,fontName:null,fontSize:20,frames:[],chars:[],assetsFile:null,name:null,params:null,style:null,styleStr:"",_str:null,_gap:0,_spaceGap:10,_fontDefine:null,_isRealFont:!1,reset:function(){this.frames=[];this.chars=[]},onEnter:function(){this._super();this._updateStr()},onExit:function(){this._super();this._fontDefine=this.style=this.params=this.chars=this.frames=null},getString:function(){return this._str},setString:function(a){null==a&&(a="");
a=""+a;a!==this._str&&(this._str=a,this._updateStr())},getSpaceGap:function(){return this._spaceGap},setSpaceGap:function(a){this._spaceGap!=a&&(this._spaceGap=a,this._str&&-1<this._str.indexOf(" ")&&this._updateStr())},getGap:function(){return this._gap},setGap:function(a){a!=this._gap&&(this._gap=a,this._str&&this._updateStr())},setFontName:function(a){if(null!=a&&!(null!=this.fontName&&this.fontName==a)){this.fontName=a;this._isRealFont=!0;this._fontDefine=flax.assetsManager.getFont(this.assetsFile,
this.fontName);null==this._fontDefine&&(this._isRealFont=!1,this._fontDefine=flax.assetsManager.getDisplayDefine(this.assetsFile,this.fontName));if(null==this._fontDefine)throw"Can't find the font named: "+this.fontName;this.frames=flax.assetsManager.getFrameNames(this.assetsFile,parseInt(this._fontDefine.start),parseInt(this._fontDefine.end));this.chars=this._fontDefine.chars;this._isRealFont&&(this.fontSize=parseInt(this._fontDefine.size));this.style=new PIXI.TextStyle({fontFamily:this.params.font,
fontSize:this.params.fontSize*flax.resolution,fill:this.params.fontColor,align:this.params.textAlign,wordWrap:!1});this.styleStr=this.style.toFontString()}},tweenInt:function(a,b,c){this.setString(a);var d=flax.numberSign(b-a);if(0!=d){var e=Math.abs(b-a),g=Math.max(c/e,flax.frameInterval),e=Math.round(c/g),d=d*Math.round(Math.abs(b-a)/e);this.schedule(function(a){a=parseInt(this._str);var c=a+d;0<d&&c>b?c=b:0>d&&c<b&&(c=b);c!=a&&this.setString(c)},g,e+10)}},_updateStr:function(){if(this.parent&&
this._str&&this._str.length){this._isRealFont||(this.params.textHeight=0);this.removeAllChildren();for(var a=flax.BitmapLabel.fontCache,b=flax.spriteFrameCache,c=this.params,d=this.mlHeight=this.mlWidth=0;d<this._str.length;d++){var e=this._str[d];if("\n"!=e)if(" "==e)this.mlWidth+=this._spaceGap;else{var g=this._findCharIndex(e);if(-1==g)console.log("Not found the char: "+e+" in the fonts: "+this.fontName);else{g=new flax.Sprite(b.getSpriteFrame(this.frames[g]));g.setAnchorPoint(this._fontDefine.anchorX,
this._fontDefine.anchorY);g.x=this.mlWidth;g.y=0;this.addChild(g);var g=this.styleStr+"@"+e,l=a[g];l||(a[g]=l=PIXI.TextMetrics.measureText(e,this.style,!1));this.mlWidth+=l.width;d!=this._str.length-1&&(this.mlWidth+=this._gap);this.mlHeight=l.height>this.mlHeight?l.height:this.mlHeight;!this._isRealFont&&c.textHeight<l.height&&(c.textHeight=l.height)}}}if(c&&c.textWidth&&c.textHeight){d=c.textWidth;b=Math.max(this.mlWidth/d,this.mlHeight/c.textHeight);a=0;1<b?(e=1/b,this.setScale(e),a=this.mlHeight*
(1-1/b)*b,this.mlWidth*=e,this.mlHeight*=e):this.setScale(1);b=(d-this.mlWidth)/2;for(d=this.childrenCount;d--;)if(e=this.children[d])"center"==c.textAlign?e.x+=b:"right"==c.textAlign&&(e.x+=2*b),e.y+=a}}},_findCharIndex:function(a){var b=-1;if(this._isRealFont)for(var c=0;c<this.chars.length;c++){if(this.chars[c]==a){b=c;break}}else{if(this._fontDefine.labels&&(c=this._fontDefine.labels[a]))b=c.start;-1==b&&!isNaN(parseInt(a))&&(b=parseInt(a))}return b},getBounds1:function(a){null==a&&(a=!0);var b=
flax.rect(0.5*this.width/this._str.length,-this.params.textHeight,this.width,this.height+2);b.y+=(this.params.textHeight-this.height)/2-1;if(!a)return b;var c=b.width,d=b.height,b=flax.p(b.x,b.y),b=this.convertToWorldSpace(b);a.convertToNodeSpace&&(b=a.convertToNodeSpace(b));return flax.rect(b.x,b.y,c,d)},destroy:function(){this.removeFromParent()}});flax.BitmapLabel.fontCache={};flax.Label=flax.BitmapLabel;flax.BitmapLabel.prototype.getRect=flax.BitmapLabel.prototype.getBounds1;_p=flax.BitmapLabel.prototype;
flax.defineGetterSetter(_p,"gap",_p.getGap,_p.setGap);flax.defineGetterSetter(_p,"spaceGap",_p.getSpaceGap,_p.setSpaceGap);flax.defineGetterSetter(_p,"text",_p.getString,_p.setString);flax.BitmapLabel.createFromAnim=function(a,b,c){var d=new flax.BitmapLabel;flax.assetsManager.addAssets(a);d.assetsFile=a;d.params={textWidth:0,textHeight:0,textAlign:"left"};d.setFontName(b);d.setAnchorPoint(0,0);d.setString(c);return d};
var ButtonState={UP:"up",OVER:"over",DOWN:"down",SELECTED:"selected",SELECTED_OVER:"selected_over",SELECTED_DOWN:"selected_down",DISABLED:"disabled",LOCKED:"locked"};
flax._buttonDefine={clickSound:null,group:null,_playChildrenOnState:!1,_state:null,_initScaleX:1,_initScaleY:1,_inScaleDown:!1,_inDisabledGray:!0,__isButton:!0,onEnter:function(){this._super();null==this._state&&this.setState(ButtonState.UP);this._initScaleX=this.scaleX;this._initScaleY=this.scaleY;this._addListeners()},onExit:function(){this.group&&(this.group.removeButton(this),this.group=null);this._removeListeners();this._super()},reset:function(){this._super();this._playChildrenOnState=!1;this._state=
null;this._inScaleDown=!1;this.disabledCover&&(this.disabledCover.visible=!0);this._inDisabledGray=!0},setState:function(a){var b=this.isSelected();this._state=a;this.gotoAndStop(this._state)||(a=this.isSelected()?ButtonState.SELECTED:ButtonState.UP,this.gotoAndStop(a)||(this.gotoAndStop(0),-1<this._state.indexOf("down")&&(this._inScaleDown=!0,this.setScale(this._initScaleX*MOUSE_DOWN_SCALE,this._initScaleY*MOUSE_DOWN_SCALE)),this._state==ButtonState.DISABLED&&(this._inDisabledGray=!0,this.disabledCover&&
(this.disabledCover.visible=!0))));-1==this._state.indexOf("down")&&this._inScaleDown&&this.setScale(this._initScaleX,this._initScaleY);this._state!=ButtonState.DISABLED&&this._inDisabledGray&&(this._inDisabledGray=!1,this.disabledCover&&(this.disabledCover.visible=!1));this._playOrPauseChildren();this.isSelected()&&(!b&&this.group)&&this.group.updateButtons(this);this.handleStateChange()},handleStateChange:function(){},getState:function(){return this._state},isSelected:function(){return this._state&&
0==this._state.indexOf("selected")},setSelected:function(a){this.isSelected()==a||(!this.isSelectable()||!this.isMouseEnabled()||this.isLocked())||this.setState(a?ButtonState.SELECTED:ButtonState.UP)},isSelectable:function(){return this.hasLabel(ButtonState.SELECTED)},setMouseEnabled:function(a){this.setState(a?ButtonState.UP:ButtonState.DISABLED);return!0},isMouseEnabled:function(){return this._state!=ButtonState.DISABLED},setLocked:function(a){this.setState(a?ButtonState.LOCKED:ButtonState.UP)},
isLocked:function(){return this._state==ButtonState.LOCKED},setPlayChildrenOnState:function(a){this._playChildrenOnState!=a&&(this._playChildrenOnState=a,this._playOrPauseChildren())},getPlayChildrenOnState:function(){return this._playChildrenOnState},_onPress:function(a,b){if(!(this._state==ButtonState.LOCKED||this._state==ButtonState.DISABLED)){var c=this.clickSound||flax.buttonSound;c&&flax.playSound&&flax.playSound(c);this._toSetState(ButtonState.DOWN)}},_onClick:function(a,b){if(this.running&&
!(this._state==ButtonState.LOCKED||this._state==ButtonState.DISABLED))if(this.isSelectable()){var c=this.isSelected();!c||this.group?(this.setState(ButtonState.SELECTED),c&&this.group.updateButtons(this)):this.setState(ButtonState.UP)}else this.setState(ButtonState.UP)},_onMove:function(a){flax.ifTouched(this,a.getLocation())?this._onOver():this._onOut()},_onOver:function(){this._state==ButtonState.DISABLED||this._state==ButtonState.LOCKED||this._toSetState(flax.isMobile?ButtonState.DOWN:ButtonState.OVER)},
_onOut:function(){this._state==ButtonState.DISABLED||this._state==ButtonState.LOCKED||this._toSetState(ButtonState.UP)},_toSetState:function(a){this.isSelectable()&&this.isSelected()&&(a=a==ButtonState.UP?ButtonState.SELECTED:"selected_"+a);this.setState(a)},_playOrPauseChildren:function(){for(var a=this.childrenCount;a--;){var b=this.children[a];flax.isFlaxSprite(b)&&(this._playChildrenOnState?(b.autoPlayChildren=!0,b.play&&b.play()):(b.autoPlayChildren=!1,b.stop&&b.stop()))}},_addListeners:function(){this.buttonMode=
this.interactive=!0;var a=flax.isMobile;this.on(a?"touchstart":"mousedown",this._onPress,this);this.on(a?"tap":"click",this._onClick,this);a||(this.on("mouseover",this._onOver,this),this.on("mouseout",this._onOut,this))},_removeListeners:function(){var a=flax.isMobile;this.removeListener(a?"touchstart":"mousedown",this._onPress);this.removeListener(a?"tap":"click",this._onClick);a||(this.removeListener("mouseover",this._onOver),this.removeListener("mouseout",this._onOut))}};flax.SimpleButton=flax.Animator.extend(flax._buttonDefine);
flax.SimpleButton.create=function(a,b){var c=new flax.SimpleButton(a,b);c.clsName="flax.SimpleButton";c.setState(ButtonState.UP);return c};window.flax.SimpleButton=flax.SimpleButton;_p=flax.SimpleButton.prototype;flax.defineGetterSetter(_p,"state",_p.getState,_p.setState);flax.defineGetterSetter(_p,"playChildrenOnState",_p.getPlayChildrenOnState,_p.setPlayChildrenOnState);flax.defineGetterSetter(_p,"selected",_p.isSelected,_p.setSelected);flax.Button=flax.MovieClip.extend(flax._buttonDefine);
flax.Button.create=function(a,b){var c=new flax.Button(a,b);c.clsName="flax.Button";c.setState(ButtonState.UP);return c};window.flax.Button=flax.Button;_p=flax.Button.prototype;flax.defineGetterSetter(_p,"state",_p.getState,_p.setState);flax.defineGetterSetter(_p,"playChildrenOnState",_p.getPlayChildrenOnState,_p.setPlayChildrenOnState);flax.defineGetterSetter(_p,"selected",_p.isSelected,_p.setSelected);
flax.ButtonGroup=flax.Class.extend({buttons:null,selectedButton:null,onSelected:null,ctor:function(){this.buttons=[];this.onSelected=new signals.Signal},addButton:function(a){a instanceof Array||(a=Array.prototype.slice.call(arguments));for(var b=0;b<a.length;b++){var c=a[b];if(!flax.isButton(c))throw"The element added to a ButtonGroup must be a flax button!";-1<this.buttons.indexOf(c)||(this.buttons.push(c),c.group=this)}},removeButton:function(a){var b=this.buttons.indexOf(a);-1<b&&(this.buttons.splice(b,
1),a.group=null,this.selectedButton==a&&(this.selectedButton=null));0==this.buttons.length&&(this.onSelected.dispose(),this.onSelected=null)},updateButtons:function(a){for(var b=0;b<this.buttons.length;b++){var c=this.buttons[b];c!=a&&(c.isMouseEnabled()&&!c.isLocked())&&c.setState(ButtonState.UP)}this.selectedButton=a;b=flax.mousePos&&flax.ifTouched(a,flax.mousePos);this.onSelected.dispatch(a,b)},destroy:function(){this.buttons=null;this.onSelected.removeAll();this.selectedButton=this.onSelected=
null}});flax=flax||{};ROW_MIN_DIST=6;
flax.ListView=flax.MovieClip.extend({gap:null,cgap:null,margin:0,dataArray:null,viewArray:null,_clickInited:!1,_columns:1,_yDirection:!0,_itemSize:0,_citemSize:0,_originSize:0,_blankFilled:!1,_totalSize:0,_visibleSize:0,_originPos:0,_startPos:0,_viewAnchorX:0,_viewAnchorY:0,_currentPos:0,_currentIndex:-1,_percentage:0,_scrollSpeed:0,_targetPos:0,_scrollDirect:0,onEnter:function(){this._super();this._yDirection?this.xDraggable=!1:this.yDraggable=!1;this.viewArray=[];this._totalSize=0;this._columns=
1;this._initItems();this._originSize=this._yDirection?this.height:this.width;this._currentPos=this._originPos=this._yDirection?this.getPositionY():this.getPositionX();this.onNewPosition()},onExit:function(){this._super();this.viewArray=this.dataArray=null},reset:function(){this._super();this._yDirection=!0;this._itemSize=0;this.gap=null;this._currentIndex=-1;this.margin=this._currentPos=0;this._columns=1;this._visibleSize=this._citemSize=0;this._clickInited=this._blankFilled=!1},refresh:function(a,
b){a&&a instanceof Array&&(this.dataArray=a);this._currentIndex=-1;this.onNewPosition();!0===b&&this.scrollToIndex(0)},getViewRect:function(){var a=this._yDirection?this.width:this._totalSize,b=this._yDirection?this._totalSize:this.height,c=this.getPosition();this.parent&&(c=this.parent.convertToWorldSpace(c));return flax.rect(c.x-a*this._viewAnchorX,c.y-b*this._viewAnchorY,a,b)},getMaxDragSpeed:function(){return this._itemSize||100},addItem:function(a){var b=this.gap,c=0,d=0,e=this.viewArray[this.viewArray.length-
1];e&&(c=this._yDirection?e.y:e.x,d=this._yDirection?e.height:e.width);0==this._itemSize&&(this._itemSize=d);a.x=this._yDirection?this.margin:c+d+b;a.y=this._yDirection?c+(d+b)*Y_DIRECTION:this.margin;a.parent!=this&&a.removeFromParent();this.addChild(a);this._totalSize+=(this._yDirection?a.height:a.width)+b;this.viewArray.push(a);return a},removeItem:function(a){a=this.viewArray.indexOf(a);if(-1==a)return!1;this.dataArray&&(a+=this._currentIndex);return this.removeItemAt(a)},removeItemAt:function(a){if(this.dataArray){if(0>
a||a>this.dataArray.length-1)return!1;this.dataArray.splice(a,1)}this.refresh();return!0},scrollToTop:function(a){this.scrollToIndex(0,a)},scrollToBottom:function(a){this.scrollToIndex(this.dataArray.length-1,a)},scrollToIndex:function(a,b){if(!(1>this.viewArray.length)){0>a&&(a=0);var c=(this._itemSize+this.gap)*a;this.dataArray||(a=Math.min(this.viewArray.length-1,a),c=this.viewArray[a],c=this.gap+(this._yDirection?c.y:c.x));this.scrollToPosition(c,b)}},scrollToPosition:function(a,b){this.dragEnabled=
!1;this._targetPos=this._originPos+a;this._scrollDirect=flax.numberSign(this._targetPos-this._currentPos);var c=b&&0<b;this._scrollSpeed=this._scrollDirect*(c?b:500);if(c)this.schedule(this._doScroll,flax.frameInterval);else for(;this._doScroll(););},_doScroll:function(a){null==a&&(a=flax.frameInterval);a*=this._scrollSpeed;return(0<this._scrollDirect?this._targetPos<=this._currentPos:this._targetPos>=this._currentPos)||!this.dragBy(this._yDirection?0:a,this._yDirection?a:0)?(this.unschedule(this._doScroll),
this.dragEnabled=!0,!1):!0},onStartDrag:function(){if(!this._clickInited){var a=this.getCollider("mask").getBounds(!0);this._visibleSize=this._yDirection?a.height:a.width;this.setClickArea(a);this._clickInited=!0}},onNewPosition:function(a,b){if(this.viewArray){var c=this._itemSize+this.gap;this.dataArray&&(this._totalSize=c*Math.ceil(this.dataArray.length/this._columns));var d=this._totalSize-this._originSize,e=this.getAnchorPoint();this._viewAnchorX=e.x;this._viewAnchorY=e.y;this._yDirection?this._viewAnchorY=
(this._originSize*e.y+d)/this._totalSize:this._viewAnchorX=(this._originSize*e.x+d)/this._totalSize;d=this._yDirection?this.getPositionY():this.getPositionX();d<this._originPos&&(d=this._originPos);e=d-this._originPos;this._percentage=e/this._totalSize;this.dataArray&&(c=Math.floor(e/c),e=!1,this._originSize<this._visibleSize+this._itemSize+this.gap&&!this._blankFilled&&(this._fillItem(),e=this._blankFilled=!0),this._currentIndex!=c&&(0<=this._currentIndex&&(e=flax.numberSign(d-this._currentPos),
this._yDirection&&(e*=Y_DIRECTION),this._fillItem(e)),this._currentIndex=c,e=!0),e&&this._updateData());this._currentPos=d}},_updateData:function(){for(var a=0;a<this.viewArray.length;a++){var b=this.viewArray[a],c=a+this._currentIndex*this._columns,d=this.dataArray[c];d&&b.setData&&b.setData(d,a,c);b.visible=null!=d}},_initItems:function(){if(this.children.length){var a=this,b=this.children.concat(),c=b[0];this._itemSize=this._yDirection?c.height:c.width;for(var d=b.length,e=[],g=c=0;g<d;g++){var l=
b[g];if(void 0==l.__temp_row)for(var k=g+1;k<d;k++){var f=b[k];if(void 0==f.__temp_row&&(a._yDirection?Math.abs(l.y-f.y):Math.abs(l.x-f.x))<ROW_MIN_DIST)void 0==l.__temp_row&&(l.__temp_row=c++,e[l.__temp_row]=[l]),f.__temp_row=l.__temp_row,e[l.__temp_row].push(f)}}if(e.length){flax.sortArray(e,function(b,c){return a._yDirection?0<Y_DIRECTION?b[0].y>c[0].y:b[0].y<c[0].y:b[0].x<c[0].x});this._columns=e[0].length;for(g=0;g<c;g++)b=e[g],flax.sortArray(b,function(b,c){return!a._yDirection?0<Y_DIRECTION?
b.y<c.y:b.y>c.y:b.x>c.x}),this.viewArray=this.viewArray.concat(b);b=this.viewArray}else flax.sortArray(b,function(b,c){return a._yDirection?0<Y_DIRECTION?b.y>c.y:b.y<c.y:b.x<c.x}),this.viewArray=b;c=b[0];g=b[1];this._startPos=this._yDirection?c.x:c.y;1<this._columns&&(this._citemSize=this._yDirection?c.width:c.height,this.cgap=this._yDirection?g.x-c.x-this._citemSize:Y_DIRECTION*(g.y-c.y)-this._citemSize,g=b[this._columns]);this.gap=this._yDirection?Y_DIRECTION*(g.y-c.y)-this._itemSize:g.x-c.x-this._itemSize;
this._totalSize=(this._itemSize+this.gap)*e.length||b.length}},_fillItem:function(a){var b=!0;null==a&&(a=-1,b=!1);for(var c=this.viewArray[this.viewArray.length-1],d=this.viewArray[0].getPosition(),e=c.getPosition(),g=this._itemSize+this.gap,l=this._citemSize+this.cgap,k=0;k<this._columns;k++){var f=null,f=b?0>a?this.viewArray.shift():this.viewArray.pop():flax.assetsManager.cloneDisplay(c,!1,!0),m=0;0>a?(this._yDirection?f.setPositionY(e.y+Y_DIRECTION*g):f.setPositionX(e.x-g),this.viewArray.push(f),
m=k):(this._yDirection?f.setPositionY(d.y-Y_DIRECTION*g):f.setPositionX(d.x+g),this.viewArray.unshift(f),m=this._columns-k-1);this._yDirection?f.setPositionX(this._startPos+m*l):f.setPositionY(this._startPos+Y_DIRECTION*m*l)}}});flax.addModule(flax.ListView,flax.Module.Draggable);flax=flax||{};
flax.LoadingAnim=flax.Container.extend({_bg:null,_circle:null,_star:null,_anim:null,onEnter:function(){this._super();var a=flax.stageRect.width,b=flax.stageRect.height,c=flax.game.config.width,d=flax.game.config.height,e=this.bg=new flax.Graphics;e.beginFill(0,0.5);e.drawRect(0,0,a,b);e.endFill();e.setPosition(-a/2,-b/2);this.addChild(e);e.interactive=!0;a=this._circle=new flax.Graphics;this.addChild(a);a.lineStyle(6,268435455);a.drawCircle(0,0,40);a.endFill();this._star=flax.drawPolygon(28,5,0,0,
!0,this,4);this._anim=flax.rotateBy(this._star,0.5,90).start().repeat(Infinity);this.setPosition(c/2,d/2)},onExit:function(){this._super();this._bg&&this._bg.destroy();this._circle&&this._circle.destroy();this._star&&this._star.destroy();this._anim&&this._anim.stop();this._anim=this._star=this._circle=this._bg=null}});flax.LoadingAnim.show=function(){if(!flax.LoadingAnim.current){var a=flax.LoadingAnim.current=new flax.LoadingAnim;flax.stage.addChild(a);return a}};
flax.LoadingAnim.hide=function(){flax.LoadingAnim.current&&(flax.LoadingAnim.current.destroy(),flax.LoadingAnim.current=null)};
flax._image={define:null,name:null,assetsFile:null,assetID:null,clsName:"flax.Image",autoRecycle:!1,_anchorBindings:null,_imgFile:null,_sx:1,_sy:1,_theSize:null,_destroyed:!1,_firstImg:null,ctor:function(a,b){this instanceof flax.Sprite?this._super():(this.define=flax.assetsManager.getDisplayDefine(assetsFile,b),this._imgFile=this.define.url,this._super(this._imgFile,flax.rect(),this.define.scale9),this.clsName="flax.Scale9Image");if(!a)throw"Please give assetsFile or url to me!";this._anchorBindings=
[];this.setSource(a,b)},setSource:function(a,b){if(null==a)throw"assetsFile or url can not be null!";if(!(this.assetsFile==a&&this.assetID==b)){var c=null;flax.isImageFile(a)?(c=a,this.define=null):(this.define=flax.assetsManager.getDisplayDefine(a,b),flax.isImageFile(this.define.url)&&(c=this.define.url));this.define&&(this.assetsFile=a,this.assetID=b);if(this.define){var d=this.define.anchorX,e=this.define.anchorY;!isNaN(d)&&!isNaN(e)&&this.setAnchorPoint(d,e)}var g=this;if(flax.isImageFile(c))if(g._firstImg||
(g._firstImg=c),g._imgFile=c,flax.loader.getRes(c))this.onImgLoaded(c);else flax.loader.load(c,function(a){g.onImgLoaded(c)});else if(a&&b)this.texture=flax.assetsManager.getTexture(a,b),this._updateSize();else throw"Give flax.image a url or assetID";this.onInit();null==this.__pool__id__&&(this.__pool__id__=this.assetID)}},onImgLoaded:function(a){var b=flax.loader.getRes(a);b&&(this._firstImg==a&&(this._theSize=flax.p(b.texture.width*this.scale.x,b.texture.height*this.scale.y)),this._imgFile==a&&
(this.texture=b.texture),this._updateSize())},destroy:function(){this._destroyed||(this._destroyed=!0,this.autoRecycle&&flax.ObjectPool.get(this.assetsFile,this.clsName,this.__pool__id__||"").recycle(this),this.removeFromParent())},onEnter:function(){this._super();this._destroyed=!1},onExit:function(){this._super();flax.inputManager&&flax.inputManager.removeListener(this);for(var a=null,b=-1,c=this._anchorBindings.length;++b<c;)a=this._anchorBindings[b],a.destroy?a.destroy():a.removeFromParent(!0),
delete a.__anchor__;this._anchorBindings.length=0;this.define=null},reset:function(){this.autoRecycle=!1;this.setScale(1);this.opacity=255;this.rotation=0;this.setPosition(0,0)},getAnchor:function(a){return!this.define?this.anchor:this.define.anchors&&(a=this.define.anchors[a],null!=a)?new flax.Anchor(a[0]):null},bindAnchor:function(a,b,c){if(this.define){if(!this.define.anchors)return console.log(this.assetID+": there is no any anchor!"),!1;if(null==this.define.anchors[a])return console.log(this.assetID+
": there is no anchor named "+a),!1;if(null==b)throw"Node can't be null!";if(-1<this._anchorBindings.indexOf(b))return console.log(this.assetID+": anchor has been bound, "+a),!1;!1!==c&&this._anchorBindings.push(b);b.__anchor__=a;this._updateAnchorNode(b,this.getAnchor(a));b.parent!=this&&(b.removeFromParent(!1),this.addChild(b));return!0}},_updateAnchorNode:function(a,b){null!=b&&(a.x=b.x,a.y=b.y,a.zIndex=b.zIndex,a.rotation=b.rotation)},_updateSize:function(){null!=this._theSize&&this.setScale(this._theSize.x/
this.texture.width,this._theSize.y/this.texture.height)},onInit:function(){}};flax.Image=flax.Sprite.extend(flax._image);window.flax.Image=flax.Image;_p=flax.Image.prototype;flax.defineGetterSetter(_p,"scaleX",_p.getScaleX,_p.setScaleX);flax.defineGetterSetter(_p,"scaleY",_p.getScaleY,_p.setScaleY);
flax.Scale9Sprite&&(flax.Scale9Image=flax.Scale9Sprite.extend(flax._image),_p=flax.Scale9Image.prototype,flax.defineGetterSetter(_p,"scaleX",_p.getScaleX,_p.setScaleX),flax.defineGetterSetter(_p,"scaleY",_p.getScaleY,_p.setScaleY),window.flax.Scale9Image=flax.Scale9Image);flax.ProgressBarType={HORIZONTAL:"horizontal",VERTICAL:"vertical",RADIAL:"radial"};
flax.ProgressBar=flax.Animator.extend({clsName:"flax.ProgressBar",_bar:null,_percentage:-1,_type:flax.ProgressBarType.HORIZONTAL,_reversed:!1,_to:null,_speed:null,_needRedraw:!1,onEnter:function(){this._super();this.setPercentage(50)},onExit:function(){this._super();this._bar&&(this._bar=null);this.mask=null;this._type=flax.ProgressBarType.HORIZONTAL;this._reversed=!1},reset:function(){this._super();this._percentage=0;this._type=flax.ProgressBarType.HORIZONTAL;this._reversed=!1},getPercentage:function(){return this._percentage},
setPercentage:function(a){this._percentage!=a&&(this._percentage=a,this._updateBar())},getType:function(){return this._type},setType:function(a){this._type!=a&&(this._type=a,this._needRedraw=!0,this._updateBar())},getReversed:function(){return this._reversed},setReversed:function(a){this._reversed!=a&&(this._reversed=a,this._needRedraw=!0,this._updateBar())},tween:function(a,b,c){if(0>a||100<a||0>b||100<b)throw"ProgressBar's percentage is from 0 to 100!";this.setPercentage(a);this._speed=(b-a)/c;
0!=this._speed&&(this._to=b,this.scheduleUpdate())},stopTween:function(){this.unscheduleUpdate();this._to=null},update:function(a){null==this._to?this.stopTween():(a*=this._speed,0<this._speed&&this._to-this._percentage<a||0>this._speed&&this._to-this._percentage>a?(a=this._to,this._to=null):a=this._percentage+a,this.setPercentage(a))},getBounds:function(a){return this.mainCollider.getBounds(a)},_updateBar:function(){if(this.running){var a=this._type==flax.ProgressBarType.RADIAL,b=this._type==flax.ProgressBarType.HORIZONTAL,
c=this.getBounds(this.parent);if(!this._bar||this._needRedraw)a?this._drawCircleBar(c):this._drawRectBar(b,c),this.mask=this._bar,this._needRedraw=!1;a=this._bar;if(this._type==flax.ProgressBarType.RADIAL){var d=0.01*2*Math.PI*this._percentage,b=Math.max(c.width/2,c.height/2),c=this._reversed?-1:1;a.clear();a.beginFill(16711680);a.moveTo(0,0);for(var e=-Math.PI/2,g=2*Math.PI/40,l=Math.floor(d/g),d=d-g*l,k=0,f=0;f<=l;f++)k=e+f*g*c,0==f?a.moveTo(b*Math.cos(k),b*Math.sin(k)):a.lineTo(b*Math.cos(k),b*
Math.sin(k));0<d&&a.lineTo(b*Math.cos(k+c*d),b*Math.sin(k+c*d));a.lineTo(0,0);a.endFill()}else c=0.01*this._percentage,b?a.setScaleX(c):a.setScaleY(c)}},_drawCircleBar:function(a){this._initBar();this._bar.setPosition(a.x+a.width/2,a.y+a.height/2)},_drawRectBar:function(a,b){this._initBar();var c=this._bar;c.beginFill(16711680);c.drawRect(0,0,b.width,b.height);var d=b.x,e=b.y;this._reversed&&(a?(d+=b.width,c.pivot.x=b.width):(e+=b.height,c.pivot.y=b.height));c.setPosition(d,e)},_initBar:function(){if(this._bar){var a=
this._bar;a.clear();a.setScale(1,1);a.pivot.x=0;a.pivot.y=0}else this._bar=new flax.Graphics,this.parent.addChild(this._bar)}});window.flax.ProgressBar=flax.ProgressBar;_p=flax.ProgressBar.prototype;flax.defineGetterSetter(_p,"percentage",_p.getPercentage,_p.setPercentage);flax.defineGetterSetter(_p,"type",_p.getType,_p.setType);flax.defineGetterSetter(_p,"reversed",_p.getReversed,_p.setReversed);
PIXI.Text.prototype.wordWrap=function(a){var b="";a=a.split("\n");for(var c=this._style.wordWrapWidth,d=0;d<a.length;d++){for(var e=c,g=a[d],l="",k=0,f=0;f<g.length;f++){var m=g.charCodeAt(f),n=!1,p=!1;255<m||0>m?(n=!0,""==l?l=g[f]:f--):" "==g[f]?p=n=!0:(l+=g[f],n=f==g.length-1);n&&(m=this.context.measureText(l).width,n=m+this.context.measureText(" ").width,0===k||n>e?(0<k&&(b+="\n"),b+=l,e=c-m):(p?(e-=n,b+=" "):e-=m,b+=l),l="",k++)}d<a.length-1&&(b+="\n")}return b};
PIXI.Text.prototype.setString=function(a){this.text=a};
flax.createLabel=function(a,b,c){if(!1===b._isText)throw"The assetsFile: "+a+" was exported with old version of Flax tool, re-export it to fix the Text issue!";flax.sys.isNative||(c.text=c.text.split("\\").join(""));var d=null,e=c["class"],d=flax.assetsManager.getFont(a,e),g={fontFamily:b.font,fontSize:b.fontSize*flax.resolution,fill:b.fontColor,align:b.textAlign,wordWrap:!0,breakWords:!0,wordWrapWidth:b.textWidth,lineHeight:b.lineHeight};!0==c.input?(delete g.wordWrap,a=new PIXI.TextStyle(g),d=new PixiTextInput("",
a,!1,!0),d.placeholder=c.text):b.font&&null==d?(a=new PIXI.TextStyle(g),d="null"==e||!flax.language?new flax.Text(c.text,a):new flax.Text(flax.language.getStr(e)||c.text,a),d.__isTTF=!0):(d=new flax.BitmapLabel,flax.assetsManager.addAssets(a),d.assetsFile=a,d.params=b,d.setFontName(e),d.setAnchorPoint(0,0),d.setString(c.text));return d};
PIXI.TextMetrics.measureText=function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:PIXI.TextMetrics._canvas;c=c||b.wordWrap;var e=b.toFontString(),g=PIXI.TextMetrics.measureFont(e),l=d.getContext("2d");l.font=e;for(var d=(c?PIXI.TextMetrics.wordWrap(a,b,d):a).split(/(?:\r\n|\r|\n)/),e=Array(d.length),k=b.wordWrap?b.wordWrapWidth:0,f=0;f<d.length;f++){var m=l.measureText(d[f]).width+(d[f].length-1)*b.letterSpacing;e[f]=m;k=Math.max(k,m)}l=k+b.strokeThickness;b.dropShadow&&(l+=
b.dropShadowDistance);f=b.lineHeight||g.fontSize+b.strokeThickness;m=Math.max(f,g.fontSize+b.strokeThickness)+(d.length-1)*(f+b.leading);b.dropShadow&&(m+=b.dropShadowDistance);return new PIXI.TextMetrics(a,b,l,m,d,e,f+b.leading,k,g)};
PIXI.TextMetrics.measureFont=function(a){if(PIXI.TextMetrics._fonts[a])return PIXI.TextMetrics._fonts[a];var b={},c=PIXI.TextMetrics._canvas,d=PIXI.TextMetrics._context;d.font=a;var e=Math.ceil(d.measureText("|M\u00c9q").width),g=Math.ceil(d.measureText("M").width),l=2*g,g=1.4*g|0;c.width=e;c.height=l;d.fillStyle="#f00";d.fillRect(0,0,e,l);d.font=a;d.textBaseline="alphabetic";d.fillStyle="#000";d.fillText("|M\u00c9q",0,g);for(var c=d.getImageData(0,0,e,l).data,d=c.length,e=4*e,k=0,f=0,m=!1,k=0;k<
g;++k){for(var n=0;n<e;n+=4)if(255!==c[f+n]){m=!0;break}if(m)break;else f+=e}b.ascent=g-k;f=d-e;m=!1;for(k=l;k>g;--k){for(l=0;l<e;l+=4)if(255!==c[f+l]){m=!0;break}if(m)break;else f-=e}b.descent=k-g;b.fontSize=b.ascent+b.descent;return PIXI.TextMetrics._fonts[a]=b};
flax.showVersionLabel=function(){if(flax.currentScene){var a=new PIXI.TextStyle({fontSize:24,fill:"#FFFFFF",align:"right",stroke:0,strokeThickness:5}),a=new flax.Text("V"+flax.game.config.version,a);flax.currentScene.addChild(a);if(flax.sys.isMobile){var b=flax.getRealScreenSize(),c=flax.getGameScale();a.position.x=b.x/c.x-85;a.position.y=b.y/c.y-35}else a.position.x=flax.stageRect.width-85,a.position.y=flax.stageRect.height-35}};flax=flax||{};flax.homeUrl="http://flax.so";
flax.goHomeUrl=function(){var a=flax.game.config.homeUrl||flax.homeUrl;!flax.sys.isNative&&a&&"function"==typeof window.open&&window.open(a)};
flax.AbstractPreloader=flax.Scene.extend({callback:null,context:null,initWithResources:function(a,b,c){"string"==typeof a&&(a=[a]);this.resources=a||[];this.callback=b;this.context=c},onEnter:function(){flax.InputManager&&(flax.inputManager=new flax.InputManager,this.addChild(flax.inputManager));this._super()},onExit:function(){this._super()},startLoad:function(){var a=this;flax.loader.load(a.resources,function(b,c,d){a._showProgress(c,d)},function(){a.onLoadComplete()})},_showProgress:function(a,
b){},onLoadComplete:function(){flax.inputManager&&flax.inputManager.removeFromParent();this.callback&&(this.callback.apply(this.context),this.callback=this.context=null)}});
flax._preloader={resources:null,_label:null,_logo:null,_inited:!1,initWithResources:function(a,b){this.init();"string"==typeof a&&(a=[a]);this.resources=a||[];this.cb=b},init:function(){if(!this._inited){this._inited=!0;var a=this,b=flax.p(flax.game.config.width/2,flax.game.config.height/2),c=flax.game.config.loading;c&&flax.isImageFile(c)?flax.loader.load(c,function(){a._logo=new flax.Sprite(c);a._logo.setAnchorPoint(0.5,0.5);a._logo.setPosition(b);a.addChild(a._logo);if(!flax.sys.isNative||"wechat"==
flax.game.config.platform){var d=16*(1+a._logo.width/200),e=flax.pAdd(b,flax.p(0,a._logo.height/2+0.6*d));a.createLabel(e,d);a.logoClick()}}):a.createLabel(b)}},createLabel:function(a,b){var c=new flax.Text("Loading...",{fontFamily:(b||18)+"px Arial",fill:16777215,stroke:3355443,strokeThickness:2});c.setPosition(a);c.setAnchorPoint(0.5,0.5);this.addChild(c);this._label=c},logoClick:function(){var a=this._logo;a.interactive=!0;a.once(flax.isMobile?"touchstart":"mousedown",function(){flax.goHomeUrl()})},
onEnter:function(){this._super();this.resources&&this.schedule(this._startLoading,0.3)},_startLoading:function(){var a=this;a.unschedule(a._startLoading);flax.loader.load(a.resources,function(b,c,d){null!=a._label&&a._showProgress(c,d)},function(){a.cb&&a.cb()})},_showProgress:function(a,b){this._label&&(null!=b?this._label.setString("Loading: "+(b+1)+"/"+a):this._label.setString("Loading: "+a.toFixed(1)+"%"))}};flax.Preloader=flax.Scene.extend(flax._preloader);flax.ResPreloader=flax.Sprite.extend(flax._preloader);
window.flax.Preloader=flax.Preloader;window.flax.ResPreloader=flax.ResPreloader;flax.gameVersion=0;flax.currentSceneName=null;flax.currentScene=null;flax.prevSceneName=null;flax.onSceneExit=null;flax.onSceneEnter=null;flax._scenesDict={};flax.registerScene=function(a,b,c,d){c||(c=[]);c instanceof Array||(c=[c]);flax._scenesDict[a]={scene:b,res:c,renderMode:d};null==flax.onSceneEnter&&(flax.onSceneExit=new signals.Signal,flax.onSceneEnter=new signals.Signal)};
flax.replaceScene=function(a,b,c){if(flax.isDomainAllowed()){flax.currentSceneName&&flax.onSceneExit.dispatch(flax.currentSceneName);flax.ObjectPool&&flax.ObjectPool.release();flax.BulletCanvas&&flax.BulletCanvas.release();flax.director.resume();flax.prevSceneName=flax.currentSceneName;flax.currentSceneName=a;flax.stopPhysicsWorld&&flax.stopPhysicsWorld();flax.clearDraw&&flax.clearDraw(!0);var d=flax._scenesDict[a];if(null==d)throw"Please register the scene: "+a+" firstly!";flax.language&&flax.language.checkRes(d.res);
if(flax._fontResources)for(var e in flax._fontResources)d.res.push({type:"font",name:e,srcs:flax._fontResources[e]});b=flax.game.config.platform;if(("wechat"==b||"fb"==b)&&-1==d.res.indexOf(RANK_LIST_JSON))d.res.push(RANK_LIST_JSON),d.res.push(RANK_LIST_PNG);flax.preload(d.res,function(){if(flax.language)flax.language.onLoaded(d.res);if(flax._fontResources){for(var b=d.res.length;b--;)"object"==typeof d.res[b]&&d.res.splice(b,1);flax._fontResources=null}flax.currentScene=new d.scene;flax.currentScene.name=
a;flax.InputManager&&(flax.inputManager=new flax.InputManager,flax.currentScene.addChild(flax.inputManager));flax.device&&flax.device.init();flax.director.runScene(flax.currentScene,d.renderMode);flax.device&&flax.device.showTipTop();flax.onSceneEnter.dispatch(flax.currentSceneName)})}};flax.refreshScene=function(){flax.currentSceneName&&flax.replaceScene(flax.currentSceneName)};flax._soundResources={};
flax.preload=function(a,b,c,d){if(!(null==a||0==a.length)){"string"===typeof a&&(a=[a]);for(var e=!1,g=[],l=a.length;l--;){var k=a[l];if(null==k)throw"There is a null resource!";var f=flax.loader.getRes(k),m=null==f&&null==flax._soundResources[k];null!=f&&(f.type===PIXI.loaders.Resource.TYPE.IMAGE&&null==f.texture)&&(m=!0);m&&("string"==typeof k&&".flax"==flax.path.extname(k)&&(flax.sys.isNative||!1===flax.game.config.useFlaxRes)?(flax.sys.isNative&&console.log("***Warning: .flax is not support JSB for now, use .plist + .png instead!"),
f=flax.path.changeBasename(k,DATA_FORMAT),k=flax.path.changeBasename(k,".png"),null==flax.loader.getRes(k)&&(g.unshift(flax._addResVersion(f)),g.unshift(flax._addResVersion(k)),e=!0)):(e=!0,g.unshift(flax._addResVersion(k))))}if(e){var n=flax.nameToObject(flax.game.config.preloader||"flax.Preloader");!0===c&&(n=flax.ResPreloader);n=new n;n.initWithResources(g,function(){!0===c&&(flax.inputManager&&flax.inputManager.removeMask(n),n.removeFromParent());b.apply(d)});!0===c?(flax.currentScene.addChild(n,
999999),flax.inputManager&&flax.inputManager.addMask(n)):flax.director.runScene(n);return n}}b.apply(d)};flax.isLocalDebug=function(){if(flax.sys.isNative)return!1;var a=document.domain;return!a?!1:"localhost"==a||0==a.indexOf("192.168.")};flax.isDomainAllowed=function(){if(flax.sys.isNative)return!0;var a=document.domain;if(!a)return!0;var b=flax.game.config.domainAllowed;return flax.isLocalDebug()||null==b||0==b.length||-1<b.indexOf(a)};flax._addResVersion=function(a){return a};
flax._removeResVersion=function(a){return a};flax=flax||{};flax.languages="zh en de fr it es tr pt ru".split(" ");
flax.language={current:null,index:-1,_dict:"zh",_toLoad:null,init:function(){var a=flax.game.config.language;null==a||""==a?null==this.current&&(a=flax.sys.language,this.update(a)):this.update(a)},checkRes:function(a){this._toLoad&&-1==a.indexOf(this._toLoad)&&a.push(this._toLoad)},onLoaded:function(a){if(this._toLoad){this._dict=flax.loader.getRes(this._resPath());var b=a.indexOf(this._toLoad);-1<b&&a.splice(b,1);this._toLoad=null}},getStr:function(a,b){if(null==this._dict)return console.log("Warning: there is no language defined: "+
this.current),null;var c=this._dict[a];if(null!=c&&b)for(a in b)c=c.replace(RegExp("{"+a+"}","g"),b[a]);return c},update:function(a){null==a||(""==a||a==this.current)||(this.current=a,flax.game.config.languages&&flax.game.config.languages.length&&(flax.languages=flax.game.config.languages),this.index=flax.languages.indexOf(a),-1==this.index&&console.log("Invalid language: "+a),flax.game.config.languageJson&&(this._toLoad=this._resPath(a)))},_resPath:function(a){return"res/locale/"+(a||this.current)+
".json"}};flax.updateLanguage=function(){throw"flax.updateLanguage is deprecated, please use flax.language.update instead!";};flax.getLanguageStr=function(){throw"flax.getLanguageStr is deprecated, please use flax.language.getStr instead!";};flax=flax||{};
flax.device={osVersion:"unknown",landscape:!1,onRotate:null,_imgTip:null,_oldGamePauseState:!1,init:function(){},isCorrectDirection:function(){return flax.game.config.landscape==this.landscape},showTipTop:function(){this._imgTip&&this._imgTip.parent&&this._imgTip.parent.setChildIndex(this._imgTip,this._imgTip.parent.childrenCount-1)},_showOrientaionTip:function(){var a=flax.device,b=90==Math.abs(window.orientation),c=flax.game.config.landscape;a._imgTip&&(a._imgTip.visible=c!=b,flax.inputManager&&
(flax.inputManager.enabled=!a._imgTip.visible));a.landscape=b;a.showTipTop();a.onRotate.dispatch(b)},_checkOSVersion:function(){if(!flax.sys.isNative){var a=navigator.userAgent,b;a.match(/iPad/i)||a.match(/iPhone/i)?(b=a.indexOf("OS "),-1<b&&(this.osVersion=a.substr(b+3,3).replace("_","."))):a.match(/Android/i)&&(b=a.indexOf("Android "),-1<b&&(this.osVersion=a.substr(b+8,3)))}},_getBackgroundColor:function(){var a=document.body.style.backgroundColor,a=a.replace("rgb(",""),a=a.replace(")",""),a=a.split(","),
b=parseInt(a[0]),c=parseInt(a[1]),a=parseInt(a[2]);return parseInt(rgbToHex(b,c,a),16)}};flax._soundButton={onEnter:function(){this._super();this.setState(flax.getSoundEnabled()?ButtonState.UP:ButtonState.SELECTED)},_onClick:function(a,b){this._super(a,b);flax.setSoundEnabled(!this.isSelected())}};flax.SimpleSoundButton=flax.SimpleButton.extend(flax._soundButton);flax.SoundButton=flax.Button.extend(flax._soundButton);flax=flax||{};SHOW_PAUSE_MASK=!0;
flax.PauseScreenMask=flax.Graphics.extend({ctor:function(){this._super();if(SHOW_PAUSE_MASK){var a=flax.stageRect.width+10,b=flax.stageRect.height+10;this.beginFill(0,0.5);this.drawRect(0,0,a,b);this.endFill()}},hide:function(){flax.stage.off(InputType.press,this.hide,this);flax.stage.off(InputType.up,this.hide,this);this.visible=!1},show:function(){this.visible=!0}});flax.PauseScreenMask.instance=null;
flax.PauseScreenMask.show=function(){if(flax.stage){var a=flax.PauseScreenMask.instance;a||(flax.PauseScreenMask.instance=a=new flax.PauseScreenMask,flax.stage.addChild(a));a.show();flax.stage.setChildIndex(a,flax.stage.children.length-1);flax.stage.interaction=!0;flax.stage.on(InputType.press,a.hide,a);flax.stage.on(InputType.up,a.hide,a)}};flax.PauseScreenMask.hide=function(){flax.PauseScreenMask.instance&&flax.PauseScreenMask.instance.hide()};flax=flax||{};flax.mousePos=null;
var InputType={press:flax.isMobile?"touchstart":"mousedown",up:flax.isMobile?"touchend":"mouseup",click:flax.isMobile?"tap":"click",move:flax.isMobile?"touchmove":"mousemove",upOutside:flax.isMobile?"touchendoutside":"mouseupoutside",mouseOver:flax.isMobile?null:"mouseover",mouseOut:flax.isMobile?null:"mouseout",keyPress:"keyPress",keyUp:"keyUp"};
flax.InputManager=flax.Container.extend({enabled:!0,nullEnabled:!0,inTouching:!1,inDragging:!1,justDragged:!1,justDragDist:0,justDragOff:0,soleTarget:null,_touchBeginPos:null,_callbacks:{},_keyboardCallbacks:{},_keyboardListener:null,ctor:function(){this._super();this.inTouching=!1;this._callbacks={};this._keyboardCallbacks={};this._keyboardListener=null},onEnter:function(){this._super();flax.stage.hitArea=flax.stageRect;flax.stage.interactive=!0;var a=this;flax.stage.on(InputType.press,function(b){flax.mousePos=
flax.currentScene?flax.currentScene.toLocal(b.data.global):b.data.global;if(!a.enabled||!a.nullEnabled)return!1;a.inDragging=!1;a.justDragged=!1;a.inTouching=!0},this);flax.stage.on(InputType.up,function(b){a.inDragging=!1;a.inTouching=!1},this);flax.stage.on(InputType.move,function(b){flax.mousePos=flax.currentScene?flax.currentScene.toLocal(b.data.global):b.data.global;a.inDragging=!0;a.justDragged=!0},this)},onExit:function(){this._super();this.removeAllTouchListeners();this.removeAllKeyboardListeners();
this.soleTarget=this._keyboardListener=this._keyboardCallbacks=this._callbacks=this._masks=null},addListener:function(a,b,c,d){if(null==b)throw"Event callback can not be null!";var e=c==InputType.keyPress||c==InputType.keyUp;if(null==a&&(a=this,!e))throw"Listening target is null, make sure you want to listen to the full screen input!";if(e)throw"todo for keyboard event!";null==c&&(c=InputType.click);null==a.__instanceId&&(a.__instanceId=flax.getInstanceId());e=this._callbacks[a.__instanceId];null==
e&&(e=[],this._callbacks[a.__instanceId]=e);for(var g=e.length;g--;)if(e[g].type==c&&e[g].func==b)return;d={target:a,type:c,func:b,context:d||a};e.push(d);a.interactive=!0;a.on(c,b,d.context)},removeListener:function(a,b,c,d){if(this.running){null==a&&(a=this);var e=this._callbacks[a.__instanceId];if(e&&(null==c||c!=InputType.keyPress&&c!=InputType.keyUp)){this.soleTarget==a&&(this.soleTarget=null);var g=null,l=e.length;if(b||c)for(;l--;)g=e[l],(!c||g.type==c)&&(!b||g.func==b)&&e.splice(l,1);(0==
e.length||!b&&!c)&&delete this._callbacks[a.__instanceId]}if(b&&(null==c||c==InputType.keyPress||c==InputType.keyUp))if(null==c?(e=this._keyboardCallbacks[InputType.keyPress]||[],e=e.concat(this._keyboardCallbacks[InputType.keyUp]||[])):e=this._keyboardCallbacks[c],e&&e.length)for(l=e.length;l--;)g=e[l],g.func==b&&e.splice(l,1);c&&a.off(c,b,d);(!c||null==this._callbacks[a.__instanceId])&&a.removeAllListeners()}},removeAllTouchListeners:function(){for(var a in this._callbacks){var b=this._callbacks[a],
c;for(c in b){var d=b[c];d.target.off(d.type,d.func,d.context)}}this.soleTarget=null;this._callbacks={}},removeAllKeyboardListeners:function(){this._keyboardCallbacks={};this._keyboardListener&&(this._keyboardListener=null)},addMask:function(a){},removeMask:function(a){},removeAllMasks:function(){}});flax.addListener=function(a,b,c,d){flax.inputManager.addListener(a,b,c,d)};flax.removeListener=function(a,b,c){flax.inputManager.removeListener(a,b,c)};
flax.Touch=flax.Class.extend({_event:null,_location:null,ctor:function(a){this._event=a},getLocation:function(){null==this._location&&(this._location=this._event.data.global,this._location=flax.currentScene.toLocal(this._location));return this._location},destroy:function(){this._location=this._event=null}});flax.getMousePos=function(a){a=a.data.global;return!flax.currentScene?a:flax.currentScene.toLocal(a)};flax=flax||{};flax.renderMode=null;
flax.Game=flax.Class.extend({config:null,onStart:null,run:function(){var a=this;flax.game.config?"undefined"!=typeof sdk?sdk.init(function(){a.doRun()}):a.doRun():flax.loadJsonSync("project.json",function(b){flax.game.config=b;"undefined"!=typeof sdk?sdk.init(function(){a.doRun()}):a.doRun()})},doRun:function(){flax.scheduler=new flax.Scheduler;flax.director=new flax.Director;if(this.onStart)this.onStart()}});flax.game=new flax.Game;
flax.Director=flax.Class.extend({renderer:null,scaleX:1,scaleY:1,_currentScene:null,_renderMode:-1,runScene:function(a,b){this._initRenderer(b)&&this._updateScale();this._currentScene&&(flax.stage.removeChild(this._currentScene),this._currentScene=null);this._currentScene=a;flax.stage.addChild(a);flax.stage.setChildIndex(a,0);this.resume()},_initRenderer:function(a){null==a&&(a=flax.game.config.renderMode);var b=!1;if(this._renderMode!=a||null==this.renderer)this._renderMode=a,this.renderer=flax._setupRenderer(a),
b=!0;return b},setScale:function(a,b){this.scaleX=a;this.scaleY=b;this._updateScale()},resume:function(){flax.scheduler.start()},pause:function(){flax.scheduler.pause()},isPaused:function(){return flax.scheduler.isPaused()},_updateScale:function(){this.renderer||this._initRenderer(-1<this._renderMode?this._renderMode:flax.game.config.renderMode);var a=this.scaleX,b=this.scaleY,c=flax.getRealScreenSize(),d=Math.round(flax.stageRect.width*a),e=Math.round(flax.stageRect.height*b);flax.sys.isMobile?this.renderer.resize(c.x,
c.y):this.renderer.resize(d,e);flax.stage.setScale(a,b);var g=this.renderer.view,l=g.style,k=0,f=0;flax.game.config.stageAlign?1==flax.game.config.stageAlign?f=0.5*(c.y-e):2==flax.game.config.stageAlign&&(f=1*(c.y-e)):(l.marginLeft="auto",l.marginRight="auto",g.parentElement&&(g=g.parentElement.style,g.textAlign="center",g.width="100%",g.margin="0 auto"),flax.isMobile?flax.stage.x=0.5*(c.x-flax.game.config.width*a):k=0.5*(c.x-flax.game.config.width*a));l.left=k+"px";l.top=f+"px";l.position="absolute";
flax.visibleRect.init(flax.rect(-k/a,-f/b,(d+2*k)/a,(e+2*f)/b))}});
flax._setupRenderer=function(a){flax.app&&flax.app.destroy(!0);var b=flax._rendererOptions||{};b.width=flax.stageRect.width;b.height=flax.stageRect.height;1===a&&(b.forceCanvas=!0);"undefined"!=typeof canvas&&"wechat"==flax.game.config.platform&&(b.view=canvas);flax.app=new PIXI.Application(b);document.body.appendChild(flax.app.view);flax.stage=flax.app.stage;flax.app.view.oncontextmenu=function(){return!1};flax.scheduler.showFPS();flax.audioEngine&&flax.audioEngine.init();return flax.app.renderer};
flax=flax||{};flax.sys={};var sys=flax.sys;sys.LANGUAGE_ENGLISH="en";sys.LANGUAGE_CHINESE="zh";sys.LANGUAGE_FRENCH="fr";sys.LANGUAGE_ITALIAN="it";sys.LANGUAGE_GERMAN="de";sys.LANGUAGE_SPANISH="es";sys.LANGUAGE_DUTCH="du";sys.LANGUAGE_RUSSIAN="ru";sys.LANGUAGE_KOREAN="ko";sys.LANGUAGE_JAPANESE="ja";sys.LANGUAGE_HUNGARIAN="hu";sys.LANGUAGE_PORTUGUESE="pt";sys.LANGUAGE_ARABIC="ar";sys.LANGUAGE_NORWEGIAN="no";sys.LANGUAGE_POLISH="pl";sys.OS_IOS="iOS";sys.OS_ANDROID="Android";sys.OS_WINDOWS="Windows";
sys.OS_MARMALADE="Marmalade";sys.OS_LINUX="Linux";sys.OS_BADA="Bada";sys.OS_BLACKBERRY="Blackberry";sys.OS_OSX="OS X";sys.OS_WP8="WP8";sys.OS_WINRT="WINRT";sys.OS_UNKNOWN="Unknown";sys.UNKNOWN=-1;sys.WIN32=0;sys.LINUX=1;sys.MACOS=2;sys.ANDROID=3;sys.IPHONE=4;sys.IPAD=5;sys.BLACKBERRY=6;sys.NACL=7;sys.EMSCRIPTEN=8;sys.TIZEN=9;sys.WINRT=10;sys.WP8=11;sys.MOBILE_BROWSER=100;sys.DESKTOP_BROWSER=101;sys.BROWSER_TYPE_WECHAT="wechat";sys.BROWSER_TYPE_ANDROID="androidbrowser";sys.BROWSER_TYPE_IE="ie";
sys.BROWSER_TYPE_QQ="qqbrowser";sys.BROWSER_TYPE_MOBILE_QQ="mqqbrowser";sys.BROWSER_TYPE_UC="ucbrowser";sys.BROWSER_TYPE_360="360browser";sys.BROWSER_TYPE_BAIDU_APP="baiduboxapp";sys.BROWSER_TYPE_BAIDU="baidubrowser";sys.BROWSER_TYPE_MAXTHON="maxthon";sys.BROWSER_TYPE_OPERA="opera";sys.BROWSER_TYPE_OUPENG="oupeng";sys.BROWSER_TYPE_MIUI="miuibrowser";sys.BROWSER_TYPE_FIREFOX="firefox";sys.BROWSER_TYPE_SAFARI="safari";sys.BROWSER_TYPE_CHROME="chrome";sys.BROWSER_TYPE_LIEBAO="liebao";
sys.BROWSER_TYPE_QZONE="qzone";sys.BROWSER_TYPE_SOUGOU="sogou";sys.BROWSER_TYPE_UNKNOWN="unknown";sys.isNative=!1;var win=window,nav=win.navigator,doc=document,docEle=doc.documentElement,ua=nav.userAgent.toLowerCase();sys.isMobile=-1!==ua.indexOf("mobile")||-1!==ua.indexOf("android");sys.platform=sys.isMobile?sys.MOBILE_BROWSER:sys.DESKTOP_BROWSER;var currLanguage=nav.language,currLanguage=(currLanguage=currLanguage?currLanguage:nav.browserLanguage)?currLanguage.split("-")[0]:sys.LANGUAGE_ENGLISH;
sys.language=currLanguage;var browserType=sys.BROWSER_TYPE_UNKNOWN,browserTypes=ua.match(/sogou|qzone|liebao|micromessenger|qqbrowser|ucbrowser|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|trident|oupeng|opera|miuibrowser|firefox/i)||ua.match(/chrome|safari/i);
browserTypes&&0<browserTypes.length?(browserType=browserTypes[0],"micromessenger"===browserType?browserType=sys.BROWSER_TYPE_WECHAT:"safari"===browserType&&ua.match(/android.*applewebkit/)?browserType=sys.BROWSER_TYPE_ANDROID:"trident"===browserType?browserType=sys.BROWSER_TYPE_IE:"360 aphone"===browserType&&(browserType=sys.BROWSER_TYPE_360)):ua.indexOf("iphone")&&ua.indexOf("mobile")&&(browserType="safari");sys.browserType=browserType;
var iOS=ua.match(/(iPad|iPhone|iPod)/i)?!0:!1,isAndroid=ua.match(/android/i)||nav.platform.match(/android/i)?!0:!1,osName=sys.OS_UNKNOWN;-1!==nav.appVersion.indexOf("Win")?osName=sys.OS_WINDOWS:iOS?osName=sys.OS_IOS:-1!==nav.appVersion.indexOf("Mac")?osName=sys.OS_OSX:-1!==nav.appVersion.indexOf("X11")&&-1===nav.appVersion.indexOf("Linux")?osName=sys.OS_UNIX:isAndroid?osName=sys.OS_ANDROID:-1!==nav.appVersion.indexOf("Linux")&&(osName=sys.OS_LINUX);sys.os=osName;
var multipleAudioWhiteList=[sys.BROWSER_TYPE_BAIDU,sys.BROWSER_TYPE_OPERA,sys.BROWSER_TYPE_FIREFOX,sys.BROWSER_TYPE_CHROME,sys.BROWSER_TYPE_BAIDU_APP,sys.BROWSER_TYPE_SAFARI,sys.BROWSER_TYPE_UC,sys.BROWSER_TYPE_QQ,sys.BROWSER_TYPE_MOBILE_QQ,sys.BROWSER_TYPE_IE];sys._supportMultipleAudio=-1<multipleAudioWhiteList.indexOf(sys.browserType);try{sys._supportWebAudio=!(!win.AudioContext&&!win.webkitAudioContext&&!win.mozAudioContext)}catch(e$$40){sys._supportWebAudio=!1}
try{var localStorage=sys.localStorage=win.localStorage;localStorage.setItem("storage","");localStorage.removeItem("storage");localStorage=null}catch(e$$41){var warn=function(){flax.warn("Warning: localStorage isn't enabled. Please confirm browser cookie or privacy option")};sys.localStorage={getItem:warn,setItem:warn,removeItem:warn,clear:warn}}
sys.dump=function(){var a;a=""+("isMobile : "+this.isMobile+"\r\n");a+="language : "+this.language+"\r\n";a+="browserType : "+this.browserType+"\r\n";a+="os : "+this.os+"\r\n";a+="platform : "+this.platform+"\r\n";console.log(a)};sys.openURL=function(a){"function"==typeof window.open&&window.open(a)};var DEBUG=!1,sys=flax.sys,supportTable={common:{multichannel:!0,webAudio:flax.sys._supportWebAudio,auto:!0}};
supportTable[sys.BROWSER_TYPE_IE]={multichannel:!0,webAudio:flax.sys._supportWebAudio,auto:!0,emptied:!0};supportTable[sys.BROWSER_TYPE_ANDROID]={multichannel:!1,webAudio:!1,auto:!1};supportTable[sys.BROWSER_TYPE_CHROME]={multichannel:!0,webAudio:!0,auto:!1};supportTable[sys.BROWSER_TYPE_FIREFOX]={multichannel:!0,webAudio:!0,auto:!0,delay:!0};supportTable[sys.BROWSER_TYPE_UC]={multichannel:!0,webAudio:!1,auto:!1};supportTable[sys.BROWSER_TYPE_QQ]={multichannel:!1,webAudio:!1,auto:!0};
supportTable[sys.BROWSER_TYPE_OUPENG]={multichannel:!1,webAudio:!1,auto:!1,replay:!0,emptied:!0};supportTable[sys.BROWSER_TYPE_WECHAT]={multichannel:!1,webAudio:!1,auto:!1,replay:!0,emptied:!0};supportTable[sys.BROWSER_TYPE_360]={multichannel:!1,webAudio:!1,auto:!0};supportTable[sys.BROWSER_TYPE_MIUI]={multichannel:!1,webAudio:!1,auto:!0};supportTable[sys.BROWSER_TYPE_LIEBAO]={multichannel:!1,webAudio:!1,auto:!1,replay:!0,emptied:!0};
supportTable[sys.BROWSER_TYPE_SOUGOU]={multichannel:!1,webAudio:!1,auto:!1,replay:!0,emptied:!0};supportTable[sys.BROWSER_TYPE_BAIDU]={multichannel:!1,webAudio:!1,auto:!1,replay:!0,emptied:!0};supportTable[sys.BROWSER_TYPE_BAIDU_APP]={multichannel:!1,webAudio:!1,auto:!1,replay:!0,emptied:!0};supportTable[sys.BROWSER_TYPE_SAFARI]={multichannel:!0,webAudio:!0,auto:!1,webAudioCallback:function(a){document.createElement("audio").src=a}};var version,tmp;
try{ua=navigator.userAgent.toLowerCase();switch(sys.browserType){case sys.BROWSER_TYPE_IE:tmp=ua.match(/(msie |rv:)([\d.]+)/);break;case sys.BROWSER_TYPE_FIREFOX:tmp=ua.match(/(firefox\/|rv:)([\d.]+)/);break;case sys.BROWSER_TYPE_CHROME:tmp=ua.match(/chrome\/([\d.]+)/);break;case sys.BROWSER_TYPE_BAIDU:tmp=ua.match(/baidubrowser\/([\d.]+)/);break;case sys.BROWSER_TYPE_UC:tmp=ua.match(/ucbrowser\/([\d.]+)/);break;case sys.BROWSER_TYPE_QQ:tmp=ua.match(/qqbrowser\/([\d.]+)/);break;case sys.BROWSER_TYPE_OUPENG:tmp=
ua.match(/oupeng\/([\d.]+)/);break;case sys.BROWSER_TYPE_WECHAT:tmp=ua.match(/micromessenger\/([\d.]+)/);break;case sys.BROWSER_TYPE_SAFARI:tmp=ua.match(/safari\/([\d.]+)/);break;case sys.BROWSER_TYPE_MIUI:tmp=ua.match(/miuibrowser\/([\d.]+)/)}version=tmp?tmp[1]:""}catch(e$$42){console.log(e$$42)}
if(version)switch(sys.browserType){case sys.BROWSER_TYPE_CHROME:30>parseInt(version)&&(supportTable[sys.BROWSER_TYPE_CHROME]={multichannel:!1,webAudio:!0,auto:!1});break;case sys.BROWSER_TYPE_MIUI:if(version=version.match(/\d+/g),2>version[0]||2===version[0]&&0===version[1]&&1>=version[2])supportTable[sys.BROWSER_TYPE_MIUI].auto=!1}
if(flax.sys.isMobile)flax.__audioSupport=flax.sys.os!==flax.sys.OS_IOS?supportTable[sys.browserType]||supportTable.common:supportTable[sys.BROWSER_TYPE_SAFARI];else switch(sys.browserType){case sys.BROWSER_TYPE_IE:flax.__audioSupport=supportTable[sys.BROWSER_TYPE_IE];break;case sys.BROWSER_TYPE_FIREFOX:flax.__audioSupport=supportTable[sys.BROWSER_TYPE_FIREFOX];break;default:flax.__audioSupport=supportTable.common}
DEBUG&&setTimeout(function(){console.log("browse type: "+sys.browserType);console.log("browse version: "+version);console.log("multichannel: "+flax.__audioSupport.multichannel);console.log("webAudio: "+flax.__audioSupport.webAudio);console.log("auto: "+flax.__audioSupport.auto)},0);
flax.Audio=flax.Class.extend({volume:1,loop:!1,src:null,_touch:!1,_playing:!1,_AUDIO_TYPE:"AUDIO",_pause:!1,_buffer:null,_currentSource:null,_startTime:null,_currentTime:null,_context:null,_volume:null,_ignoreEnded:!1,_element:null,ctor:function(a,b,c){a&&(this._context=a);b&&(this._volume=b);a&&b&&(this._AUDIO_TYPE="WEBAUDIO");this.src=c},_setBufferCallback:null,setBuffer:function(a){if(a){var b=this._playing;this._AUDIO_TYPE="WEBAUDIO";this._buffer&&(this._buffer!==a&&this.getPlaying())&&this.stop();
this._buffer=a;b&&this.play();this._volume.gain.value=this.volume;this._setBufferCallback&&this._setBufferCallback(a)}},_setElementCallback:null,setElement:function(a){if(a){var b=this._playing;this._AUDIO_TYPE="AUDIO";this._element&&(this._element!==a&&this.getPlaying())&&this.stop();this._element=a;b&&this.play();a.volume=this.volume;a.loop=this.loop;this._setElementCallback&&this._setElementCallback(a)}},play:function(a,b){this._playing=!0;this.loop=void 0===b?this.loop:b;"AUDIO"===this._AUDIO_TYPE?
this._playOfAudio(a):this._playOfWebAudio(a)},getPlaying:function(){if(!this._playing)return this._playing;if("AUDIO"===this._AUDIO_TYPE){var a=this._element;return!a||this._pause||a.ended?this._playing=!1:!0}a=this._currentSource;return!a?!0:null==a.playbackState?this._playing:this.loop||this._currentTime+this._context.currentTime-this._startTime<this._currentSource.buffer.duration},_playOfWebAudio:function(a){var b=this._currentSource;if(this._buffer){if(!this._pause&&b)if(0===this._context.currentTime||
this._currentTime+this._context.currentTime-this._startTime>this._currentSource.buffer.duration)this._stopOfWebAudio();else return;b=this._context.createBufferSource();b.buffer=this._buffer;b.connect(this._volume);b.loop=this.loop;this._startTime=this._context.currentTime;this._currentTime=a||0;if(b.start)b.start(0,a||0);else if(b.noteGrainOn){var c=b.buffer.duration;this.loop?b.noteGrainOn(0,a,c):b.noteGrainOn(0,a,c-a)}else b.noteOn(0);this._currentSource=b;var d=this;b.onended=function(){d._ignoreEnded?
d._ignoreEnded=!1:d._playing=!1}}},_playOfAudio:function(){var a=this._element;a&&(a.loop=this.loop,a.play())},stop:function(){this._playing=!1;"AUDIO"===this._AUDIO_TYPE?this._stopOfAudio():this._stopOfWebAudio()},_stopOfWebAudio:function(){var a=this._currentSource;this._ignoreEnded=!0;a&&(a.stop(0),this._currentSource=null)},_stopOfAudio:function(){var a=this._element;a&&(a.pause(),a.duration&&Infinity!==a.duration&&(a.currentTime=0))},pause:function(){!1!==this.getPlaying()&&(this._playing=!1,
this._pause=!0,"AUDIO"===this._AUDIO_TYPE?this._pauseOfAudio():this._pauseOfWebAudio())},_pauseOfWebAudio:function(){this._currentTime+=this._context.currentTime-this._startTime;var a=this._currentSource;a&&a.stop(0)},_pauseOfAudio:function(){var a=this._element;a&&a.pause()},resume:function(){this._pause&&("AUDIO"===this._AUDIO_TYPE?this._resumeOfAudio():this._resumeOfWebAudio(),this._pause=!1,this._playing=!0)},_resumeOfWebAudio:function(){var a=this._currentSource;a&&(this._startTime=this._context.currentTime,
this._playOfWebAudio(this._currentTime%a.buffer.duration))},_resumeOfAudio:function(){var a=this._element;a&&a.play()},setVolume:function(a){1<a&&(a=1);0>a&&(a=0);this.volume=a;"AUDIO"===this._AUDIO_TYPE?this._element&&(this._element.volume=a):this._volume&&(this._volume.gain.value=a)},getVolume:function(){return this.volume},cloneNode:function(){var a,b;if("AUDIO"===this._AUDIO_TYPE){a=new flax.Audio;var c=document.createElement("audio");c.src=this.src;a.setElement(c)}else c=this._context.createGain(),
c.gain.value=1,c.connect(this._context.destination),a=new flax.Audio(this._context,c,this.src),this._buffer?a.setBuffer(this._buffer):(b=this,this._setBufferCallback=function(c){a.setBuffer(c);b._setBufferCallback=null});a._AUDIO_TYPE=this._AUDIO_TYPE;return a}});
(function(a){var b=a.webAudio,c=a.multichannel,d=a.auto,e=[];(function(){var a=document.createElement("audio");if(a.canPlayType){var b=a.canPlayType('audio/ogg; codecs="vorbis"');b&&""!==b&&e.push(".ogg");(b=a.canPlayType("audio/mpeg"))&&""!==b&&e.push(".mp3");(b=a.canPlayType('audio/wav; codecs="1"'))&&""!==b&&e.push(".wav");(b=a.canPlayType("audio/mp4"))&&""!==b&&e.push(".mp4");(a=a.canPlayType("audio/x-m4a"))&&""!==a&&e.push(".m4a")}})();try{if(b){var g=new (window.AudioContext||window.webkitAudioContext||
window.mozAudioContext);a.delay&&setTimeout(function(){g=new (window.AudioContext||window.webkitAudioContext||window.mozAudioContext)},0)}}catch(l){b=!1,console.log("browser don't support webAudio")}var k={cache:{},load:function(a,c,d,l){if(0===e.length)return l("can not support audio!");var r=flax.path.extname(a),q=[r];for(d=0;d<e.length;d++)r!==e[d]&&q.push(e[d]);var t;if(k.cache[c])return l(null,k.cache[c]);if(b)try{var s=g.createGain();s.gain.value=1;s.connect(g.destination);t=new flax.Audio(g,
s,a)}catch(v){b=!1,console.log("browser don't support webAudio"),t=new flax.Audio(null,null,a)}else t=new flax.Audio(null,null,a);this.loadAudioFromExtList(a,q,t,l);k.cache[c]=t},loadAudioFromExtList:function(c,d,l,p){if(0===d.length){var r="can not found the resource of audio! Last match url is : ",r=r+c.replace(/\.(.*)?$/,"(");e.forEach(function(a){r+=a+"|"});r=r.replace(/\|$/,")");return p(r)}c=flax.path.changeExtname(c,d.splice(0,1));if(b){a.webAudioCallback&&a.webAudioCallback(c);var q=new XMLHttpRequest;
q.open("GET",c,!0);q.responseType="arraybuffer";q.onload=function(){g.decodeAudioData(q.response,function(a){l.setBuffer(a);p(null,l)},function(){k.loadAudioFromExtList(c,d,l,p)})};q.send()}else{var t=document.createElement("audio"),s=!1,v=!1,w=setTimeout(function(){0===t.readyState?z():(v=!0,t.pause(),document.body.removeChild(t),p("audio load timeout : "+c,l))},1E4),u=function(){if(!s){t.pause();try{t.currentTime=0,t.volume=1}catch(a){}document.body.removeChild(t);l.setElement(t);t.removeEventListener("canplaythrough",
u,!1);t.removeEventListener("error",x,!1);t.removeEventListener("emptied",z,!1);!v&&p(null,l);s=!0;clearTimeout(w)}},x=function(){s&&(t.pause(),document.body.removeChild(t),t.removeEventListener("canplaythrough",u,!1),t.removeEventListener("error",x,!1),t.removeEventListener("emptied",z,!1),!v&&k.loadAudioFromExtList(c,d,l,p),s=!0,clearTimeout(w))},z=function(){v=!0;u();p(null,l)};t.addEventListener("canplaythrough",u,!1);t.addEventListener("error",x,!1);a.emptied&&t.addEventListener("emptied",z,
!1);t.src=c;document.body.appendChild(t);t.volume=0;t.play()}}};flax.audioEngine={_currMusic:null,_musicVolume:1,willPlayMusic:function(){return!1},playMusic:function(a,b){var c=this._currMusic;c&&(c.src!==a&&c.getPlaying())&&c.stop();c=k.cache[a];c||(k.load(a,a,null,function(a,b){}),c=k.cache[a]);c.play(0,b);c.setVolume(this._musicVolume);return this._currMusic=c},stopMusic:function(a){var b=this._currMusic;b&&(b.stop(),a&&flax.loader.release(b.src))},pauseMusic:function(){var a=this._currMusic;
a&&a.pause()},resumeMusic:function(){var a=this._currMusic;a&&a.resume()},rewindMusic:function(){var a=this._currMusic;a&&(a.stop(),a.play())},getMusicVolume:function(){return this._musicVolume},setMusicVolume:function(a){a-=0;isNaN(a)&&(a=1);1<a&&(a=1);0>a&&(a=0);this._musicVolume=a;var b=this._currMusic;b&&b.setVolume(a)},isMusicPlaying:function(){var a=this._currMusic;return a?a.getPlaying():!1},_audioPool:{},_maxAudioInstance:5,_effectVolume:1,playEffect:function(a,d){if(!c)return null;var e=
this._audioPool[a];e||(e=this._audioPool[a]=[]);var g;for(g=0;g<e.length&&e[g].getPlaying();g++);if(e[g])l=e[g],l.setVolume(this._effectVolume),l.play(0,d);else if(!b&&g>this._maxAudioInstance)console.log("Error: %s greater than %d",a,this._maxAudioInstance);else{var l=k.cache[a];l||(k.load(a,a,null,function(a,b){}),l=k.cache[a]);l=l.cloneNode();l.setVolume(this._effectVolume);l.loop=d||!1;l.play();e.push(l)}return l},setEffectsVolume:function(a){a-=0;isNaN(a)&&(a=1);1<a&&(a=1);0>a&&(a=0);this._effectVolume=
a;var b=this._audioPool,c;for(c in b){var d=b[c];if(Array.isArray(d))for(var e=0;e<d.length;e++)d[e].setVolume(a)}},getEffectsVolume:function(){return this._effectVolume},pauseEffect:function(a){a&&a.pause()},pauseAllEffects:function(){var a=this._audioPool,b;for(b in a)for(var c=a[b],d=0;d<a[b].length;d++)c[d].getPlaying()&&c[d].pause()},resumeEffect:function(a){a&&a.resume()},resumeAllEffects:function(){var a=this._audioPool,b;for(b in a)for(var c=a[b],d=0;d<a[b].length;d++)c[d].resume()},stopEffect:function(a){a&&
a.stop()},stopAllEffects:function(){var a=this._audioPool,b;for(b in a)for(var c=a[b],d=0;d<a[b].length;d++)c[d].stop()},unloadEffect:function(a){if(a){flax.loader.release(a);var b=this._audioPool[a];b&&(b.length=0);delete this._audioPool[a];delete k.cache[a]}},end:function(){this.stopMusic();this.stopAllEffects()},_pauseCache:[],_pausePlaying:function(){var a=this._currMusic;a&&a.getPlaying()&&(a.pause(),this._pauseCache.push(a));var a=this._audioPool,b;for(b in a)for(var c=a[b],d=0;d<a[b].length;d++)c[d].getPlaying()&&
(c[d].pause(),this._pauseCache.push(c[d]))},_resumePlaying:function(){for(var a=this._pauseCache,b=0;b<a.length;b++)a[b].resume();a.length=0},_reBGM:function(){var b=flax.audioEngine._currMusic;b&&(!1===b._touch&&b._playing&&b.getPlaying())&&(b._touch=!0,b.play(0,b.loop),!a.replay&&flax.app.view.removeEventListener("touchstart",this._reBGM))},init:function(){d||flax.app.view.addEventListener("touchstart",this._reBGM.bind(this),!1)}}})(flax.__audioSupport);flax=flax||{};flax.buttonSound=null;
flax._sound_cookie_key="flax_sound_state";flax._soundEnabled="false"!=flax.sys.localStorage.getItem(flax._sound_cookie_key);flax._registeredSounds={};flax.preloadSounds=function(){var a=flax.game.config.sounds;if(a){for(var b in a.manifest){var c=a.manifest[b],c=a.path+c,c=c.replace(/\/\//g,"/");flax._registeredSounds[b]=c}a.autoPlayMusic&&flax.playMusic(a.autoPlayMusic)}};
flax.setSoundEnabled=function(a){if(flax._soundEnabled!=a){flax._soundEnabled=a;var b=flax.audioEngine;a?b._resumePlaying():b._pausePlaying();flax.sys.localStorage.setItem(flax._sound_cookie_key,a?"true":"false")}};flax.getSoundEnabled=function(){return flax._soundEnabled};flax._lastMusic=null;flax._currentMusic=null;
flax.playMusic=function(a,b,c,d){!1!==c&&(c=!0);b||(b=1);(d=flax._registeredSounds[a])||(d=a);if(flax._soundEnabled){if("wechat"===flax.game.config.platform)return d=wx.createInnerAudioContext(),d.autoplay=!0,d.loop=c,d.src=flax.getResUrl(flax._registeredSounds[a]),d.volume=b,d.play(),d;flax._currentMusic=flax.audioEngine.playMusic(d,c)}else flax._lastMusic={id:a,volume:b,loop:c}};flax.stopMusic=function(a){flax.audioEngine.stopMusic(!0===a)};flax.pauseMusic=function(){flax.audioEngine.pauseMusic()};
flax.resumeMusic=function(){flax._soundEnabled&&flax.audioEngine.resumeMusic()};flax.pauseAllSounds=function(){flax.audioEngine._pausePlaying()};flax.resumeAllSounds=function(){flax._soundEnabled&&flax.audioEngine._resumePlaying()};flax.DEFAULT_MIN_SOUND_INTERVAL=100;flax.minSoundIntervals={};flax._lastSoundTimes={};
flax.playEffect=function(a,b){if(flax._soundEnabled){var c=flax._registeredSounds[a];c||(c=a);var d=flax.minSoundIntervals[a]||flax.DEFAULT_MIN_SOUND_INTERVAL,e=flax._lastSoundTimes[a];e||(flax._lastSoundTimes[a]=0);var g=flax.scheduler.time;if(!(g-e<d))return flax._lastSoundTimes[a]=g,"wechat"===flax.game.config.platform?(c=wx.createInnerAudioContext(),c.autoplay=!1,c.loop=!1,c.src=flax.getResUrl(flax._registeredSounds[a]),c.volume=b||1,c.play(),c):flax.audioEngine.playEffect(c)}};
flax.stopEffect=function(a){var b=flax.audioEngine;null!=a?b.stopEffect(a):b.stopAllEffects()};flax.playSound=function(a){return flax.playEffect(a)};flax.setMusicVolume=function(a){flax.audioEngine.setMusicVolume(a)};flax.onScreenHide.add(flax.pauseAllSounds);flax.onScreenShow.add(flax.resumeAllSounds);flax=flax||{};flax.ResolutionPolicy={EXACT_FIT:0,NO_BORDER:1,SHOW_ALL:2,FIXED_HEIGHT:3,FIXED_WIDTH:4,UNKNOWN:6};
flax.view={_width:0,_height:0,_resolutionPolicy:flax.ResolutionPolicy.SHOW_ALL,setDesignResolutionSize:function(a,b,c){this._width=a;this._height=b;this._resolutionPolicy=c||this._resolutionPolicy;this.updateView()},updateView:function(){var a=flax.getGameScale();flax.director.setScale(a.x,a.y)},getResolutionPolicy:function(){return this._resolutionPolicy},adjustViewPort:function(){},resizeWithBrowserSize:function(){},enableRetina:function(){}};
flax.visibleRect={topLeft:flax.p(0,0),topRight:flax.p(0,0),top:flax.p(0,0),bottomLeft:flax.p(0,0),bottomRight:flax.p(0,0),bottom:flax.p(0,0),center:flax.p(0,0),left:flax.p(0,0),right:flax.p(0,0),width:0,height:0,hArr:null,vArr:null,init:function(a){var b=this.width=a.width,c=this.height=a.height,d=a.x;a=a.y;var e=d+b,g=a+c/2,l=a;a+=c;c=l;this.topLeft.x=d;this.topLeft.y=c;this.topRight.x=e;this.topRight.y=c;this.top.x=d+b/2;this.top.y=c;this.bottomLeft.x=d;this.bottomLeft.y=a;this.bottomRight.x=e;
this.bottomRight.y=a;this.bottom.x=d+b/2;this.bottom.y=a;this.center.x=d+b/2;this.center.y=g;this.left.x=d;this.left.y=g;this.right.x=e;this.right.y=g;this.hArr=[d,this.center.x,e];this.vArr=[a,this.center.y,c]}};
flax.setViewPortMeta=function(){if(flax.sys.isMobile){var a=document.getElementById("flaxViewPort");a&&document.head.removeChild(a);var b,c,a=document.createElement("meta");a.id="flaxViewPort";a.name="viewport";a.content="";b={"user-scalable":"no","minimal-ui":"true"};c="";for(var d in b)c+=","+d+"="+b[d];/^,/.test(c)&&(c=c.substr(1));a.content=c;document.head.appendChild(a)}};flax=flax||{};flax.toClass(PIXI.extras.TilingSprite);
flax.TilingSprite=PIXI.extras.TilingSprite.extend({currentFrame:0,totalFrames:0,_frameNames:null,_loopStart:0,_loopEnd:0,_fps:0,_animReversed:!1,ctor:function(a,b,c){this._super(a||PIXI.Texture.EMPTY,b,c)},onEnter:function(){this._super();this.renderFrame(this.currentFrame)},setSource:function(a,b){var c=flax.assetsManager.getDisplayDefine(a,b);if(!c)throw"There is no asset: "+b+" in file: "+a;this._frameNames=flax.assetsManager.getFrameNames(a,c.start,c.end);this.totalFrames=this._frameNames.length;
0==this._fps&&this.setFPS(c.fps);this.renderFrame(this.currentFrame)},play:function(a){!0!==a?(this._loopStart=0,this._loopEnd=this.totalFrames-1):(this._animReversed=!0,this.currentFrame=this._loopStart=this.totalFrames-1,this._loopEnd=0);this.updatePlaying(!0)},stop:function(){this._animReversed=!1;this.updatePlaying(!1)},onFrame:function(a){if(this.visible){a=this._animReversed;this.currentFrame+=a?-1:1;var b=!a?this.currentFrame>this.totalFrames-1:0>this.currentFrame;if((!a?this.currentFrame>
this._loopEnd:this.currentFrame<this._loopEnd)||b)this.currentFrame=this._loopStart;this.renderFrame(this.currentFrame)}},renderFrame:function(a){this._texture=flax.spriteFrameCache.getSpriteFrame(this._frameNames[a])},setFPS:function(a){this._fps!=a&&(this._fps=a,this.updateSchedule())},getFPS:function(){return this._fps},updatePlaying:function(a){this.playing!=a&&(this.playing=a,this.updateSchedule())},updateSchedule:function(){this.playing?1<this.totalFrames&&this.schedule(this.onFrame,1/this._fps):
this.unschedule(this.onFrame)}});flax.__drawNode=null;flax.createDrawNode=function(a,b){if(!flax.__drawNode||!flax.__drawNode.parent||a)null==flax.__drawNode&&(flax.__drawNode=new flax.Graphics),flax.currentScene&&(a||(a=flax.currentScene),flax.__drawNode.parent&&flax.__drawNode.parent!=a&&(flax.__drawNode.parent.removeChild(flax.__drawNode),flax.__drawNode.clear()),null==flax.__drawNode.parent&&a.addChild(flax.__drawNode),flax.__drawNode.zIndex=b||a.childrenCount-1)};
flax.clearDraw=function(a){null!=flax.__drawNode&&(flax.__drawNode.clear(),!0===a&&(flax.__drawNode.parent&&flax.__drawNode.parent.removeChild(flax.__drawNode),flax.__drawNode=null))};flax.drawLine=function(a,b,c,d){flax.createDrawNode();var e=flax.__drawNode;e.lineStyle(c||1,d||16711680);e.moveTo(a.x,a.y);e.lineTo(b.x,b.y);return e};flax.drawRay=function(a,b,c,d,e){return flax.drawLine(a,flax.getPointOnCircle(a,c,b),d,e)};
flax.drawRect=function(a,b,c,d){flax.createDrawNode();var e=flax.__drawNode;e.lineStyle(b||1,c||16711680);e.beginFill(d||16711680,0.3);e.drawRect(a.x,a.y,a.width,a.height);e.endFill();return e};flax.drawStageRect=function(){var a=h=2;flax.drawRect(flax.rect(flax.stageRect.x+a,flax.stageRect.y+h,flax.stageRect.width-2*a,flax.stageRect.height-2*h))};flax.drawCircle=function(a,b,c,d){flax.createDrawNode();var e=flax.__drawNode;e.lineStyle(c||1,d||16711680);e.drawCircle(a.x,a.y,b);e.endFill();return e};
flax.drawDot=function(a,b,c){flax.createDrawNode();var d=flax.__drawNode;d.beginFill(c||16711680,1);d.drawCircle(a.x,a.y,b||5);d.endFill();return d};var HEX_NUM="0123456789ABCDEF";function hexToRgb(a){var b="#"==a.charAt(0)?a.substring(1,7):a;a=parseInt(b.substring(0,2),16);var c=parseInt(b.substring(2,4),16),b=parseInt(b.substring(4,6),16);return[a,c,b]}function randomColor(){var a=hsvToRgb(Math.random(),0.9725,1);return rgbToHex(a[0],a[1],a[2]).toUpperCase()}
function rgbToHex(a,b,c){return _toHex(a)+_toHex(b)+_toHex(c)}function rgbToHsl(a,b,c){a/=255;b/=255;c/=255;var d=Math.max(a,b,c),e=Math.min(a,b,c),g,l=(d+e)/2;if(d==e)g=e=0;else{var k=d-e,e=0.5<l?k/(2-d-e):k/(d+e);switch(d){case a:g=(b-c)/k+(b<c?6:0);break;case b:g=(c-a)/k+2;break;case c:g=(a-b)/k+4}g/=6}return[g,e,l]}
function hslToRgb(a,b,c){if(0==b)c=b=a=c;else{var d=function(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*c:0.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a},e=0.5>c?c*(1+b):c+b-c*b,g=2*c-e;c=d(g,e,a+1/3);b=d(g,e,a);a=d(g,e,a-1/3)}return[255*c,255*b,255*a]}function rgbToHsv(a,b,c){a/=255;b/=255;c/=255;var d=Math.max(a,b,c),e=Math.min(a,b,c),g,l=d-e;if(d==e)g=0;else{switch(d){case a:g=(b-c)/l+(b<c?6:0);break;case b:g=(c-a)/l+2;break;case c:g=(a-b)/l+4}g/=6}return[g,0==d?0:l/d,d]}
function hsvToRgb(a,b,c){var d,e,g,l=Math.floor(6*a),k=6*a-l;a=c*(1-b);var f=c*(1-k*b);b=c*(1-(1-k)*b);switch(l%6){case 0:d=c;e=b;g=a;break;case 1:d=f;e=c;g=a;break;case 2:d=a;e=c;g=b;break;case 3:d=a;e=f;g=c;break;case 4:d=b;e=a;g=c;break;case 5:d=c,e=a,g=f}return[255*d,255*e,255*g]}function darkenHexColor(a,b){var c=hexToRgb(a),c=rgbToHsl(c[0],c[1],c[2]);c[2]-=b;c=hslToRgb(c[0],c[1],c[2]);return rgbToHex(c[0],c[1],c[2])}
function _toHex(a){a=parseInt(a,10);if(isNaN(a))return"00";a=Math.max(0,Math.min(a,255));return HEX_NUM.charAt((a-a%16)/16)+HEX_NUM.charAt(a%16)}flax=flax||{};flax.paddingString=function(a,b,c,d){a+="";if(a.length>=b)return a;c||(c="0");for(var e=a.length;e<b;e++)a=d?a+c:c+a;return a};
flax.utf8ToUnicode=function(a){if(a){for(var b="",c=a.length,d=0,e=c,g,l,k;d<c;)if(g=a.charCodeAt(d),0==(g&128)){if(1>e)break;b+=String.fromCharCode(g&127);d++;e-=1}else if(192==(g&224)){l=a.charCodeAt(d+1);if(2>e||128!=(l&192))break;b+=String.fromCharCode((g&63)<<6|l&63);d+=2;e-=2}else if(224==(g&240)){l=a.charCodeAt(d+1);k=a.charCodeAt(d+2);if(3>e||128!=(l&192)||128!=(k&192))break;b+=String.fromCharCode((g&15)<<12|(l&63)<<6|k&63);d+=3;e-=3}else break;return 0!=e?"":b}};
String.prototype.isCHS=function(a){return 255<this.charCodeAt(a)||0>this.charCodeAt(a)?!0:!1};flax.containChineseChar=function(a){return/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi.exec(a)};MINUTE_SECONDS=60;HOUR_SECONDS=60*MINUTE_SECONDS;DAY_SECONDS=24*HOUR_SECONDS;MONTH_SENCONDS=30*DAY_SECONDS;YEAR_SECONDS=12*MONTH_SENCONDS;
flax.formatTime=function(a,b,c){if(0>=a)return"00:00:00";b||(b=2);var d=Math.floor(a/YEAR_SECONDS);a-=d*YEAR_SECONDS;var e=Math.floor(a/MONTH_SENCONDS);a-=e*MONTH_SENCONDS;var g=Math.floor(a/DAY_SECONDS);a-=g*DAY_SECONDS;var l=Math.floor(a/HOUR_SECONDS);a-=l*HOUR_SECONDS;var k=Math.floor(a/60),f=[];a=[d,e,g,l,k,a-60*k];d=[];"en"==c?d="ymdhms".split(""):"cn"==c&&(d="\u5e74 \u6708 \u5929 \u5c0f\u65f6 \u5206\u949f \u79d2".split(" "));c=!1;for(g=e=0;g<a.length;g++)if(l=a[g],0<l||c)if(c=!0,e++,l=flax.paddingString(l,
2),l+=d[g]||":",f.length>=b){f.push(l);break}else f.push(l);if(e<b)for(g=e;g<b;g++)f.unshift("00:");l=f[f.length-1];l.lastIndexOf(":")==l.length-1&&(l=l.substring(0,l.length-1),f[f.length-1]=l);return f.join(" ")||"0"};
flax.generateUid=function(a,b){var c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),d=[],e;b=b||c.length;if(a)for(e=0;e<a;e++)d[e]=c[0|Math.random()*b];else{var g;d[8]=d[13]=d[18]=d[23]="-";d[14]="4";for(e=0;36>e;e++)d[e]||(g=0|16*Math.random(),d[e]=c[19==e?g&3|8:g])}return d.join("")};flax.getAppStoreUrl=function(a,b){b||(b="cn");return"https://itunes.apple.com/"+b+"/app/id"+a};
flax.isEthereumAddress=function(a){return/^(0x)?[0-9a-f]{40}$/i.test(a)?!/^(0x)?[0-9a-f]{40}$/.test(a)||/^(0x)?[0-9A-F]{40}$/.test(a)?!1:!0:!1};flax.hex2utf8=function(a){0==a.indexOf("0x")&&(a=a.substring(2));var b="";try{b=decodeURIComponent(a.replace(/\s+/g,"").replace(/[0-9a-f]{2}/g,"%$&"))}catch(c){for(var d=0;d<a.length;d+=2)0>=parseInt(a.substr(d,2),16)||(b+=String.fromCharCode())}a=!0;for(d=0;d<b.length;d++)0<b.charCodeAt(d)&&(a=!1);a&&(b="");return b};
flax.getDateStrFromTody=function(a,b){a||(a=0);b||(b="/");var c=new Date;c.setDate(c.getDate()+a);var d=c.getFullYear(),e=c.getMonth()+1,c=c.getDate();return e+b+c+b+d};flax.getTimestamp=function(a,b,c,d,e,g){return(new Date(b+"/"+c+"/"+a+" "+d+":"+e+":"+g)).getTime()};flax.getTimestampFromStr=function(a){return(new Date(a)).getTime()};
function _fallbackCopyTextToClipboard(a){var b=document.createElement("textarea");b.value=a;document.body.appendChild(b);if(flax.sys.os==flax.sys.OS_IOS){var c;a=document.createRange();a.selectNodeContents(b);c=window.getSelection();c.removeAllRanges();c.addRange(a);b.setSelectionRange(0,999999)}else b.select();try{var d=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+d)}catch(e){console.error("Fallback: Oops, unable to copy",e)}document.body.removeChild(b)}
flax.copyTextToClipboard=function(a){navigator.clipboard?navigator.clipboard.writeText(a).then(function(){console.log("Async: Copying to clipboard was successful!")},function(a){console.error("Async: Could not copy text: ",a)}):_fallbackCopyTextToClipboard(a)};flax=flax||{};flax.Module||(flax.Module={});var HLayoutType={LEFT:0,CENTER:1,RIGHT:2},VLayoutType={BOTTOM:0,MIDDLE:1,TOP:2},LayoutRate=[0,0.5,1],LayoutRate1=[1,0.5,0];
flax.getLayoutPosition=function(a,b,c){a=flax.getBounds(a,!1);var d=flax.visibleRect,e=d.hArr[b],d=d.vArr[c];if(null==e||null==d)throw"Invalid layout!";e=flax.p(e,d);c=a.y+LayoutRate1[c]*a.height;e.x-=a.x+LayoutRate[b]*a.width;e.y-=c;return e};
flax.getLayoutPosition_old=function(a,b,c){var d=flax.getBounds(a,!0),e=flax.visibleRect.center,g=a.getAnchorPointInPoints(),l=0,k=0;switch(b){case HLayoutType.LEFT:l=0;break;case HLayoutType.CENTER:l=e.x-d.width/2;break;case HLayoutType.RIGHT:l=flax.visibleRect.right.x-d.width}switch(c){case VLayoutType.BOTTOM:k=0;break;case VLayoutType.MIDDLE:k=e.y-d.height/2;break;case VLayoutType.TOP:k=flax.visibleRect.top.y-d.height}b=flax.p(l+(!b?flax.visibleRect.bottomLeft.x:0)+1*g.x,k+(!c?flax.visibleRect.bottomLeft.y:
0)+1*g.y);a.parent&&(b=a.parent.convertToNodeSpace(b));return b};
flax.Module.ScreenLayout={layoutWhenResize:!1,_isAutoLayout:!1,_hlayout:null,_vlayout:null,_offsetX:0,_offsetY:0,onEnter:function(){this.layoutWhenResize&&(flax.device&&flax.device.onRotate&&flax.device.onRotate.add(this._updateLayout,this),flax.onScreenResize&&flax.onScreenResize.add(this._updateLayout,this))},onExit:function(){this.layoutWhenResize&&(flax.device&&flax.device.onRotate&&flax.device.onRotate.remove(this._updateLayout,this),flax.onScreenResize&&flax.onScreenResize.remove(this._updateLayout,
this))},setLayoutOffset:function(a,b){this._offsetX=a;this._offsetY=b;this._updateLayout()},showInCenter:function(){this.setLayout(HLayoutType.CENTER,VLayoutType.MIDDLE)},setLayout:function(a,b){this._isAutoLayout=!1;this._hlayout=a;this._vlayout=b;var c=flax.getLayoutPosition(this,a,b);c.x+=this._offsetX;c.y+=this._offsetY;this.setPosition(c)},autoLayout:function(){if(flax.view.getResolutionPolicy()==flax.ResolutionPolicy.NO_BORDER&&(!flax.device||flax.device.isCorrectDirection())){this._isAutoLayout=
!0;var a=this.getBounds(),b=flax.visibleRect.center,b=this.parent.convertToNodeSpace(b);null==this.__oxx&&(this.__oxx=this.x,this.__oxg=b.x-(a.x+a.width/2));null==this.__oyy&&(this.__oyy=this.y,this.__oyg=b.y-(a.y+a.height/2));this.getAnchorPointInPoints();a=flax.visibleRect.width/flax.designedStageSize.width;1!=a&&(this.x=this.__oxx+this.__oxg*(1-a));a=flax.visibleRect.height/flax.designedStageSize.height;1!=a&&(this.y=this.__oyy+this.__oyg*(1-a))}},_updateLayout:function(a){this._isAutoLayout?this.autoLayout():
null!=this._hlayout&&null!=this._vlayout&&this.setLayout(this._hlayout,this._vlayout)}};flax=flax||{};flax.Module||(flax.Module={});flax.ColliderType={rect:"Rect",circle:"Circle",poly3:"Poly3",poly4:"Poly4",poly5:"Poly5",poly6:"Poly6",poly7:"Poly7",poly8:"Poly8",polygon:"Poly"};
flax.Collider=flax.Class.extend({name:null,owner:null,type:flax.ColliderType.rect,_center:null,_width:0,_height:0,_rotation:0,_localRect:null,_polygons:null,_polygonsStr:"",_polygonBounds:null,_originData:null,_clickArea:null,_debugNode:null,ctor:function(a){this.init(a)},init:function(a){this._originData=a;a=a.split(",");this.type=a[0];this._center=flax.p(parseFloat(a[1]),parseFloat(a[2]));this._width=parseFloat(a[3]);this._height=parseFloat(a[4]);this._rotation=parseFloat(a[5]);if(this.type==flax.ColliderType.polygon){this._polygons=
[];var b=a[6].split("'");this._polygonsStr=b.join(" ");for(a=0;a<b.length-1;a+=2){var c={x:parseFloat(b[a]),y:parseFloat(b[a+1])};this._polygons.push(c)}}else if(-1<this.type.indexOf("Poly")){a=parseInt(this.type.replace("Poly",""));if(isNaN(a)){console.warn("This is not a valid polygon specification!");return}b=flax.getPolygonPoints(polygon_half_width_to_radius[a]*this._width/2,a);this._polygonBounds=flax.findPolygonBounds(b);this._polygonsStr="";for(a=0;a<b.length-1;a++)c=b[a],this._polygonsStr+=
c.x+" "+c.y,a!=b.length-1&&(this._polygonsStr+=" ")}this._localRect=flax.rect(this._center.x-this._width/2,this._center.y-this._height/2,this._width,this._height)},destroy:function(){this._debugNode=this._originData=this._polygons=this.owner=null},clone:function(){return new flax.Collider(this._originData)},setOwner:function(a){if(this.owner!=a){this.owner=a;this.owner.retain();var b=this._polygonBounds;b&&a.setAnchorPoint(0.5-b.centerX/this._width,0.5-b.centerY/this._height)}},checkCollision:function(a){if(a.type==
this.type&&this.type==flax.ColliderType.rect)return flax.rectIntersectsRect(this.getBounds(!0),a.getBounds(!0));if(a.type==this.type&&this.type==flax.ColliderType.circle){var b=this.getCenter(!0),c=a.getCenter(!0);return flax.pDistance(b,c)<=(this.getSize().width+a.getSize().width)/2}if(this.type==flax.ColliderType.rect)return this._ifRectCollidCircle(this.getBounds(!0),a.getBounds(!0));if(this.type==flax.ColliderType.circle)return this._ifRectCollidCircle(a.getBounds(!0),this.getBounds(!0))},containPoint:function(a){return this.containsPoint(a)},
containsPoint:function(a){if(this._clickArea)return flax.rectContainsPoint(this._clickArea,a);a=this.owner.convertToNodeSpace(a);return this.type==flax.ColliderType.rect?flax.rectContainsPoint(this._localRect,a):this.type==flax.ColliderType.polygon?this._polyContainsPoint(a):flax.pDistance(a,this._center)<=this._width/2},_polyContainsPoint:function(a){for(var b=!1,c=this._polygons.length,d=0,e=c-1;d<c;e=d++){var g=this._polygons[d],e=this._polygons[e];(intersect=g.y>a.y!==e.y>a.y&&a.x<(e.x-g.x)*(a.y-
g.y)/(e.y-g.y)+g.x)&&(b=!b)}return b},_ifRectCollidCircle:function(a,b){var c=Math.abs(b.x+b.width/2-(a.x+a.width/2)),d=Math.abs(b.y+b.height/2-(a.y+a.height/2));if(c>a.width/2+b.width/2||d>a.height/2+b.width/2)return!1;if(c<=a.width/2||d<=a.height/2)return!0;c-=a.width/2;d-=a.height/2;return c*c+d*d<=b.width/2*b.width/2},getBounds:function(a){null==a&&(a=!0);if(!a)return this._localRect;var b=this.getCenter(a);a=this.getSize(a);return flax.rect(b.x-a.width/2,b.y-a.height/2,a.width,a.height)},getCenter:function(a){var b=
this.owner.convertToWorldSpace(this._center);this.owner.parent&&(!1===a?b=this.owner.parent.convertToNodeSpace(b):flax.isDisplay(a)&&(b=a.convertToNodeSpace(b)));return b},getSize:function(a){return{width:this._width,height:this._height}},debugDraw:function(){this._debugDraw_pixi()},_debugDraw_pixi:function(){var a=this.getBounds(!0),b=a.getCenter();null==this._debugNode?(this._debugNode=new flax.Graphics,flax.currentScene&&flax.currentScene.addChildAt(this._debugNode,flax.currentScene.childrenCount)):
this._debugNode.clear();var c=this._debugNode;c.lineStyle(1,65280,1);c.beginFill(16711680,0.5);if(this.type==flax.ColliderType.rect)c.drawRect(-a.width/2,-a.height/2,a.width,a.height),c.setPosition(b.x,b.y);else if(this.type==flax.ColliderType.circle)c.drawCircle(0,0,a.width/2),c.setPosition(b.x,b.y);else{for(var b=a=null,d=0;d<this._polygons.length-1;d++)b=flax.p(this._polygons[d]),b=this.owner.convertToWorldSpace(b),0==d?(a=flax.p(b),c.moveTo(b.x,b.y)):c.lineTo(b.x,b.y);c.lineTo(a.x,a.y)}c.endFill()}});
flax.Collider.prototype.getRect=flax.Collider.prototype.getBounds;
flax.Module.Collider={_colliders:null,_mainCollider:null,_definedMainCollider:!1,onInit:function(){this._mainCollider=null;this._colliders={};var a=this.define.colliders;if(a){var b=null,c;for(c in a){this._colliders[c]=[];for(var d=a[c],e=-1;++e<d.length;)if(null==d[e])this._colliders[c][e]=null;else if(b=this._colliders[c][e]=new flax.Collider(d[e]),b.name=c,b.setOwner(this),"main"==c||"base"==c)this._mainCollider=b}}(this._definedMainCollider=null!=this._mainCollider)||this._initMainCollider()},
_initMainCollider:function(){var a=0,b=0;this.__isMovieClip?(a=this._gRect.width,b=this._gRect.height):(a=this.width,b=this.height);var c,d;c=a/2-this.anchor.x*a;d=b/2-this.anchor.y*b;this._mainCollider=new flax.Collider("Rect,"+c+","+d+","+a+","+b+",0");this._mainCollider.name="main";this._mainCollider.setOwner(this)},onEnter:function(){},onExit:function(){if(this._colliders){for(var a in this._colliders)for(var b=this._colliders[a],c=-1;++c<b.length;){var d=b[c];d&&d.destroy&&d.destroy()}this._colliders=
null}this._mainCollider&&(this._mainCollider.destroy(),this._mainCollider=null)},setClickArea:function(a){this._mainCollider&&(this._mainCollider._clickArea=a)},getClickArea:function(){return this._mainCollider?this._mainCollider._clickArea:null},mainCollider:{get:function(){this._mainCollider&&(0==this._mainCollider._width&&0<this.width||0==this._mainCollider._height&&0<this.height)&&this._initMainCollider();return this._mainCollider||flax.ZERO_RECT}},center:{get:function(){return this.getCenter()}},
getCollider:function(a){var b=null;this._colliders&&(a=this._colliders[a],null!=a&&(b=a[this.currentFrame]));return b},colliders:{get:function(){return this._colliders}},getBounds:function(a){return this.mainCollider.getBounds(a)},debugDraw:function(){this.mainCollider.debugDraw()},getCenter:function(a){return this.mainCollider.getCenter(a)},_updateCollider:function(){}};flax.Module.Collider.getRect=flax.Module.Collider.getBounds;flax.ifCollide=function(a,b){return a.mainCollider.checkCollision(b.mainCollider)};
flax=flax||{};flax.Module||(flax.Module={});
flax.Module.Move={gravityOnMove:null,destroyWhenReach:!1,destroyWhenOutofStage:!1,moveSpeed:null,moveAcc:null,restrainRect:null,inRandom:!1,_moveSpeedLen:0,_targetPos:null,_inMoving:!1,_callBack:null,_callContext:null,onEnter:function(){},onExit:function(){this.destroyWhenOutofStage=this.destroyWhenReach=!1;this.restrainRect=this.gravityOnMove=null;this._inMoving=this.inRandom=!1;this._callContext=this._callBack=this._targetPos=null},moveTo:function(a,b,c,d){this.inRandom=!1;this._targetPos=b;this._callBack=
c;this._callContext=d;b=flax.pSub(b,this.getPosition());c=!1;if(!a||0>=a)a=0.1,c=!0;1>flax.pLength(b)||c?this.scheduleOnce(this._moveOver,0.01):(this.moveSpeed=flax.pMult(b,1/a),this._moveSpeedLen=flax.pLength(this.moveSpeed),this.resumeMove())},moveToBySpeed:function(a,b,c,d){this.inRandom=!1;this._targetPos=b;this._callBack=c;this._callContext=d;b=flax.pSub(b,this.getPosition());c=flax.pLength(b);1>c?this.scheduleOnce(this._moveOver,0.01):(this.moveSpeed=flax.pMult(b,a/c),this._moveSpeedLen=flax.pLength(this.moveSpeed),
this.resumeMove())},moveBySpeed:function(a,b){this._callBack=this._targetPos=null;this.inRandom=!1;this.moveSpeed="object"===typeof a?a:flax.getPointOnCircle(flax.p(),a,b);this.resumeMove()},moveRandomly:function(a,b,c){this.restrainRect=c||flax.stageRect;this.moveBySpeed(a,b||360*Math.random());this.inRandom=null==b},pauseMove:function(){this._inMoving&&(this.unschedule(this._doMove),this._inMoving=!1)},resumeMove:function(){this._inMoving||(this._inMoving=!0,this.schedule(this._doMove,1/60,flax.REPEAT_FOREVER))},
stopMove:function(){this._inMoving&&(this.moveSpeed=null,this._inMoving=!1,this.restrainRect=null,this.inRandom=!1,this.unschedule(this._doMove))},_doMove:function(a){var b=this.getPosition();if((this._targetPos?flax.pDistance(b,this._targetPos):Number.maxValue)<=this._moveSpeedLen*a||this.destroyWhenOutofStage&&!flax.rectContainsRect(flax.stageRect,flax.getBounds(this,!0)))this.stopMove(),this._moveOver();else{var c=flax.getBounds(this,this.parent);if(this.restrainRect){var d=0,e=0;c.x<this.restrainRect.x?
d=1:c.x>this.restrainRect.x+this.restrainRect.width-c.width&&(d=-1);c.y<this.restrainRect.y?e=1:c.y>this.restrainRect.y+this.restrainRect.height-c.height&&(e=-1);this.inRandom&&(d&&(this.moveSpeed.x=d*Math.abs(this.moveSpeed.x)),e&&(this.moveSpeed.y=e*Math.abs(this.moveSpeed.y)))}c=this.moveAcc;this.gravityOnMove&&(c=flax.pAdd(c||flax.p(),this.gravityOnMove));c&&(this.moveSpeed=flax.pAdd(this.moveSpeed,flax.pMult(c,a)));this.setPosition(flax.pAdd(b,flax.pMult(this.moveSpeed,a)))}},_moveOver:function(){this._targetPos&&
(this.setPosition(this._targetPos),this._targetPos=null);this._callBack&&(this._callBack.apply(this._callContext||this),this._callBack=null);this.destroyWhenReach&&this.destroy()}};flax=flax||{};
flax.Module.Shake={_shakeTarget:null,_originPos:null,_lastAxis:"",_lastOffset:0,_shakeCount:0,_maxCount:0,_shakeRange:0,startShake:function(a,b,c,d){this.stopShake();this._shakeTarget=a;this._shakeRange=0<b?b:8;this._maxCount=0<c?c:5;this._originPos=flax.p(a.getPosition());this._shakeCount=0;this._lastAxis="";a.schedule(this._doShake.bind(this),d||flax.frameInterval,c)},stopShake:function(){this._shakeTarget&&(this._originPos&&this._shakeTarget.setPosition(this._originPos),this._shakeTarget=null)},
_doShake:function(){if(this._shakeTarget){var a=this._shakeRange;this._lastAxis?(this._shakeTarget[this._lastAxis]-=this._lastOffset,this._lastAxis=""):(this._lastAxis=0.5>=Math.random()?"x":"y",a=a/2+Math.random()*a/2,0.5>=Math.random()&&(a*=-1),this._lastOffset=a,this._shakeTarget[this._lastAxis]+=this._lastOffset);this._shakeCount++;this._shakeCount>this._maxCount&&this.stopShake()}}};HTTP_TIME_OUT=8E3;
function http_get(a,b,c,d,e,g,l){if(!(null==a||""==a)){null==l&&(l=3);var k=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP");if(d){var f=JSON.stringify(c);k.open("POST",a);console.log("send post: "+a,f)}else{var f=encodeUrlVars(c),m=a;""!==f&&(m=a+"?"+f);console.log("send get: "+m);k.open("GET",m)}k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");g&&(k.responseType=g);var n=setTimeout(function(){console.log("http error: connection time out!");
e&&e("time out")},HTTP_TIME_OUT);!d||""==f?k.send():k.send(f);k.onreadystatechange=function(){if(4==k.readyState)if(200==k.status){var f=null;if("arraybuffer"==g)f=k.response;else{f=k.responseText;f=f.replace(/\\/g,"");try{f=JSON.parse(f)}catch(m){}}b&&b(f)}else--l?(console.log("retry on response error: "+a,l),http_get(a,b,c,d,e,g,l)):(f=k.responseText,e&&e(f));clearTimeout(n)}}}
function encodeUrlVars(a,b){if(!a)return"";var c="",d;for(d in a)""!=c&&(c+="&"),c+=d+"="+encodeURIComponent(a[d]);return c}function urlParams(a){try{var b=RegExp("[?&]"+a+"=([^&#]*)").exec(window.location.href);return null==b?null:decodeURI(b[1])||0}catch(c){return{}}}function _Orientation(a,b,c,d,e,g,l,k,f){return{f0:a,f1:b,f2:c,f3:d,b0:e,b1:g,b2:l,b3:k,start_angle:f}}
var allConst={gameWidth:750,gameHeight:1206,offset:-Math.PI/6,orientation_offset:Math.PI/3,pointy:_Orientation(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,0.5),flat:_Orientation(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3),0),weixinKey:"score"},config={primaryRate:0.5,secondaryRate:1,adjectiveRate:1,winRate:0.7,divisor:Math.PI/40,timeout:40,delayTime:300},allEnum={orientation:{pointy:"pointy",flat:"flat"},shape:{Parallelograms:"par",Triangles:"tri",Hexagons:"hex",Rectangles:"rec"},
shapeMode:{Left:"left",None:"none",Right:"right",Up:"up",Down:"down"},hexOrientation:{East:0,EastNorth:1,North:2,West:3,WestSouth:4,South:5},owner:{None:"none",Mine:"mine",Enemy:"enemy"},color:{grey:13421772,skyBlue:39372,blue:39372,grass:3394611,orange:16750899,red:13382451,gold:16750848,green:26163,purple:6697728,black:0,white:16777215},enemyType:{Normal:0,Defence:-1,Silly:-2,Attack:1,Smart:2},status:{None:"none",Win:"win",Lose:"lose"},levelRank:{primary:"pri",secondary:"sec",adjective:"adj"}};
"use strict";function Point(a,b){return{x:a,y:b}}function Hex(a,b,c){if(0!==Math.round(a+b+c))throw"q + r + s must be 0";return{q:a,r:b,s:c,orientation:allEnum.hexOrientation.East,owner:allEnum.owner.None}}function hex_add(a,b){return Hex(a.q+b.q,a.r+b.r,a.s+b.s)}function hex_subtract(a,b){return Hex(a.q-b.q,a.r-b.r,a.s-b.s)}function hex_scale(a,b){return Hex(a.q*b,a.r*b,a.s*b)}
function rotateHex(a){a.orientation--;a.orientation<allEnum.hexOrientation.East&&(a.orientation=allEnum.hexOrientation.South)}function rotateMulHex(a,b){for(var c=0;c<b;c++)rotateHex(a)}function hex_rotate_left(a){return Hex(-a.s,-a.q,-a.r)}function hex_rotate_right(a){return Hex(-a.r,-a.s,-a.q)}var hex_directions=[Hex(1,0,-1),Hex(1,-1,0),Hex(0,-1,1),Hex(-1,0,1),Hex(-1,1,0),Hex(0,1,-1)];function hex_direction(a){return hex_directions[a]}
function hex_neighbor(a,b){return hex_add(a,hex_direction(b))}var hex_diagonals=[Hex(2,-1,-1),Hex(1,-2,1),Hex(-1,-1,2),Hex(-2,1,1),Hex(-1,2,-1),Hex(1,1,-2)];function hex_diagonal_neighbor(a,b){return hex_add(a,hex_diagonals[b])}function hex_length(a){return(Math.abs(a.q)+Math.abs(a.r)+Math.abs(a.s))/2}function hex_distance(a,b){return hex_length(hex_subtract(a,b))}
function hex_round(a){var b=Math.round(a.q),c=Math.round(a.r),d=Math.round(a.s),e=Math.abs(b-a.q),g=Math.abs(c-a.r);a=Math.abs(d-a.s);e>g&&e>a?b=-c-d:g>a?c=-b-d:d=-b-c;return Hex(b,c,d)}function hex_lerp(a,b,c){return Hex(a.q*(1-c)+b.q*c,a.r*(1-c)+b.r*c,a.s*(1-c)+b.s*c)}function hex_linedraw(a,b){for(var c=hex_distance(a,b),d=Hex(a.q+1E-6,a.r+1E-6,a.s-2E-6),e=Hex(b.q+1E-6,b.r+1E-6,b.s-2E-6),g=[],l=1/Math.max(c,1),k=0;k<=c;k++)g.push(hex_round(hex_lerp(d,e,l*k)));return g}
function OffsetCoord(a,b){return{col:a,row:b}}var EVEN=1,ODD=-1;function qoffset_from_cube(a,b){return OffsetCoord(b.q,b.r+(b.q+a*(b.q&1))/2)}function qoffset_to_cube(a,b){var c=b.col,d=b.row-(b.col+a*(b.col&1))/2;return Hex(c,d,-c-d)}function roffset_from_cube(a,b){return OffsetCoord(b.q+(b.r+a*(b.r&1))/2,b.r)}function roffset_to_cube(a,b){var c=b.col-(b.row+a*(b.row&1))/2,d=b.row;return Hex(c,d,-c-d)}
function Orientation(a,b,c,d,e,g,l,k,f){return{f0:a,f1:b,f2:c,f3:d,b0:e,b1:g,b2:l,b3:k,start_angle:f}}function Layout(a,b,c){return{orientation:a,size:b,origin:c}}var layout_pointy=Orientation(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,0.5),layout_flat=Orientation(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0);function hex_to_pixel(a,b){var c=a.orientation,d=a.size,e=a.origin;return Point((c.f0*b.q+c.f1*b.r)*d.x+e.x,(c.f2*b.q+c.f3*b.r)*d.y+e.y)}
function pixel_to_hex(a,b){var c=a.orientation,d=a.size,e=a.origin,e=Point((b.x-e.x)/d.x,(b.y-e.y)/d.y),d=c.b0*e.x+c.b1*e.y,c=c.b2*e.x+c.b3*e.y;return Hex(d,c,-d-c)}function hex_corner_offset(a,b){var c=a.size,d=2*Math.PI*(a.orientation.start_angle-b)/6;return Point(c.x*Math.cos(d),c.y*Math.sin(d))}function polygon_corners(a,b){for(var c=[],d=hex_to_pixel(a,b),e=0;6>e;e++){var g=hex_corner_offset(a,e);c.push(Point(d.x+g.x,d.y+g.y))}return c}function complain(a){console.log("FAIL",a)}
function equal_hex(a,b,c){b.q===c.q&&b.s===c.s&&b.r===c.r||complain(a)}function hex_equal(a,b){return a.q==b.q&&a.r==b.r}function equal_offsetcoord(a,b,c){b.col===c.col&&b.row===c.row||complain(a)}function equal_int(a,b,c){b!==c&&complain(a)}function equal_hex_array(a,b,c){equal_int(a,b.length,c.length);for(var d=0;d<b.length;d++)equal_hex(a,b[d],c[d])}
function test_hex_arithmetic(){equal_hex("hex_add",Hex(4,-10,6),hex_add(Hex(1,-3,2),Hex(3,-7,4)));equal_hex("hex_subtract",Hex(-2,4,-2),hex_subtract(Hex(1,-3,2),Hex(3,-7,4)))}function test_hex_direction(){equal_hex("hex_direction",Hex(0,-1,1),hex_direction(2))}function test_hex_neighbor(){equal_hex("hex_neighbor",Hex(1,-3,2),hex_neighbor(Hex(1,-2,1),2))}function test_hex_diagonal(){equal_hex("hex_diagonal",Hex(-1,-1,2),hex_diagonal_neighbor(Hex(1,-2,1),3))}
function test_hex_distance(){equal_int("hex_distance",7,hex_distance(Hex(3,-7,4),Hex(0,0,0)))}function test_hex_rotate_right(){equal_hex("hex_rotate_right",hex_rotate_right(Hex(1,-3,2)),Hex(3,-2,-1))}function test_hex_rotate_left(){equal_hex("hex_rotate_left",hex_rotate_left(Hex(1,-3,2)),Hex(-2,-1,3))}
function test_hex_round(){var a=Hex(0,0,0),b=Hex(1,-1,0),c=Hex(0,-1,1);equal_hex("hex_round 1",Hex(5,-10,5),hex_round(hex_lerp(Hex(0,0,0),Hex(10,-20,10),0.5)));equal_hex("hex_round 2",hex_round(a),hex_round(hex_lerp(a,b,0.499)));equal_hex("hex_round 3",hex_round(b),hex_round(hex_lerp(a,b,0.501)));equal_hex("hex_round 4",hex_round(a),hex_round(Hex(0.4*a.q+0.3*b.q+0.3*c.q,0.4*a.r+0.3*b.r+0.3*c.r,0.4*a.s+0.3*b.s+0.3*c.s)));equal_hex("hex_round 5",hex_round(c),hex_round(Hex(0.3*a.q+0.3*b.q+0.4*c.q,0.3*
a.r+0.3*b.r+0.4*c.r,0.3*a.s+0.3*b.s+0.4*c.s)))}function test_hex_linedraw(){equal_hex_array("hex_linedraw",[Hex(0,0,0),Hex(0,-1,1),Hex(0,-2,2),Hex(1,-3,2),Hex(1,-4,3),Hex(1,-5,4)],hex_linedraw(Hex(0,0,0),Hex(1,-5,4)))}
function test_conversion_roundtrip(){var a=Hex(3,4,-7),b=OffsetCoord(1,-3);equal_hex("conversion_roundtrip even-q",a,qoffset_to_cube(EVEN,qoffset_from_cube(EVEN,a)));equal_offsetcoord("conversion_roundtrip even-q",b,qoffset_from_cube(EVEN,qoffset_to_cube(EVEN,b)));equal_hex("conversion_roundtrip odd-q",a,qoffset_to_cube(ODD,qoffset_from_cube(ODD,a)));equal_offsetcoord("conversion_roundtrip odd-q",b,qoffset_from_cube(ODD,qoffset_to_cube(ODD,b)));equal_hex("conversion_roundtrip even-r",a,roffset_to_cube(EVEN,
roffset_from_cube(EVEN,a)));equal_offsetcoord("conversion_roundtrip even-r",b,roffset_from_cube(EVEN,roffset_to_cube(EVEN,b)));equal_hex("conversion_roundtrip odd-r",a,roffset_to_cube(ODD,roffset_from_cube(ODD,a)));equal_offsetcoord("conversion_roundtrip odd-r",b,roffset_from_cube(ODD,roffset_to_cube(ODD,b)))}
function test_offset_from_cube(){equal_offsetcoord("offset_from_cube even-q",OffsetCoord(1,3),qoffset_from_cube(EVEN,Hex(1,2,-3)));equal_offsetcoord("offset_from_cube odd-q",OffsetCoord(1,2),qoffset_from_cube(ODD,Hex(1,2,-3)))}function test_offset_to_cube(){equal_hex("offset_to_cube even-",Hex(1,2,-3),qoffset_to_cube(EVEN,OffsetCoord(1,3)));equal_hex("offset_to_cube odd-q",Hex(1,2,-3),qoffset_to_cube(ODD,OffsetCoord(1,2)))}
function test_all(){test_hex_arithmetic();test_hex_direction();test_hex_neighbor();test_hex_diagonal();test_hex_distance();test_hex_rotate_right();test_hex_rotate_left();test_hex_round();test_hex_linedraw();test_layout();test_conversion_roundtrip();test_offset_from_cube();test_offset_to_cube()}var global=global||{};function initGlobal(){global.orientation=null;global.isOneWay=!0;global.params=[]}initGlobal();
var res={main:"res/main.json",main_png:"res/main.png",login:"res/login.json",login_png:"res/login.png",rank:"res/rank.json",rank_png:"res/rank.png",expand_effect:"res/music/xiaoguo.mp3"},resource={res_main:[res.main,res.main_png,res.expand_effect],res_login:[res.login,res.login_png,res.rank,res.rank_png],res_expand:res.expand_effect},hexMap={origin_const:Point(allConst.gameWidth/2,allConst.gameHeight/2),origin:null,size:0,layout:null,allHex:[],mineColor:allEnum.color.blue,enemyColor:allEnum.color.red,
_north:allEnum.hexOrientation.North,_sourth:allEnum.hexOrientation.South,_west:allEnum.hexOrientation.West,_east:allEnum.hexOrientation.East,_westSouth:allEnum.hexOrientation.WestSouth,_eastNorth:allEnum.hexOrientation.EastNorth,_pointy:allEnum.orientation.pointy,_flat:allEnum.orientation.flat,getParallelograms:function(a,b,c,d,e,g,l,k){var f=[];l||(k=0);k||(k=0);for(var m=!1;b<=c;b++)for(var n=d;n<=e;n++){for(var m=!1,p=-l+1;p<l;p++){var r=-k<n&&n<k;if(b==p&&r){m=!0;break}}m||f.push(this.getHexCoor(a,
b,n,g))}return f},getHexagons:function(a,b,c){void 0==c&&(c=0);for(var d=[],e=!1,g=-b;g<=b;g++)for(var e=Math.max(-b,-g-b),l=Math.min(b,-g+b),k=e;k<=l;k++){e=!1;if(0<c)for(var f=-c;f<=c;f++){var m=g===f,n=Math.max(-c,-f-c),p=Math.min(c,-f+c),n=n<=k&&k<=p;if(m&&n){e=!0;break}}e||d.push(this.getHexCoor(a,g,k))}return d},getTriangles:function(a,b,c){var d=[];c=c===allEnum.shapeMode.Up;if(a===this._flat)if(c)for(c=0;c<b;c++)for(var e=1-b;e<=-c;e++)d.push(this.getHexCoor(a,c,e));else for(c=0;c>-b;c--)for(e=
-c;e<b;e++)d.push(this.getHexCoor(a,c,e));else if(c)for(c=0;c<b;c++)for(e=0;e>=-c;e--)d.push(this.getHexCoor(a,c,e));else for(c=0;c>-b;c--)for(e=0;e<=-c;e++)d.push(this.getHexCoor(a,c,e));return d},getRectangles:function(a,b,c,d,e,g){for(var l=[],k=0;k<=c-b+1;k++)for(var f=Math.floor(k/2),m=-f;m<e-d+1-f;m++)l.push(this.getHexCoor(a,m,k,g));return l},initAllHex:function(a,b,c,d,e,g,l,k,f,m){switch(b){case allEnum.shape.Parallelograms:this.allHex=this.getParallelograms(a,e,g,l,k,d,f,m);break;case allEnum.shape.Triangles:this.allHex=
this.getTriangles(a,c,d);break;case allEnum.shape.Rectangles:this.allHex=this.getRectangles(a,e,g,l,k,d);break;default:this.allHex=this.getHexagons(a,c,f)}},initSize:function(a,b,c,d,e){a=Math.floor(a.width/2)+3;this.size={x:a,y:a};this.origin={};this.origin.x=this.origin_const.x;this.origin.y=this.origin_const.y;c===allEnum.shape.Triangles&&this.calTriOrigin(b,d,e);this.layout=Layout(allConst[b],this.size,this.origin)},calTriOrigin:function(a,b,c){a=a===this._flat;c=c===allEnum.shapeMode.Up;var d=
this.size.x*(2-1/Math.sqrt(3))/2,e=0,g=0,e=0.5*(this.size.x/Math.sqrt(3)),g=0.5*this.size.x*(2/Math.sqrt(3)-1);a?(e=c?(b-1)*d:-(b-1)*d,g=0):c?(e=0+e,g=-(b-1)*d+g):(e=0+e,g=(b-1)*d+g);this.origin.x+=e;this.origin.y+=g},getHexCoor:function(a,b,c,d){switch(d){case allEnum.shapeMode.None:a===this._flat?(a=-b-c,d=b,b=c):(a=c,d=-b-c);break;case allEnum.shapeMode.Left:a=b;d=c;b=-b-c;break;default:a===this._flat?(a=c,d=-b-c):(a=-b-c,d=b,b=c)}return Hex(a,d,b)},calStartHex:function(a,b,c,d,e,g,l,k){var f;
switch(b){case allEnum.shape.Parallelograms:f=this.calParalStart(a,d,e,g,l,k);break;case allEnum.shape.Triangles:f=this.calTriangleStart(a,d,c);break;case allEnum.shape.Rectangles:this.calRectangleStart(a,d,e,g,l,k);break;default:f=this.calHexagousStart(a,c)}return f},calParalStart:function(a,b,c,d,e,g){var l={mine:null,enemy:null};switch(b){case allEnum.shapeMode.Left:l.enemy=Hex(c,e,-c-e);l.mine=Hex(d,g,-d-g);break;case allEnum.shapeMode.Right:a===this._flat?(l.mine=Hex(e,-e-c,c),l.enemy=Hex(g,
-g-d,d)):(l.mine=Hex(-d-e,d,e),l.enemy=Hex(-c-g,c,g));break;default:a===this._flat?(l.enemy=Hex(-d-g,d,g),l.mine=Hex(-c-e,c,e)):(l.mine=Hex(e,-e-c,c),l.enemy=Hex(g,-g-d,d))}return l},calRectangleStart:function(a,b,c,d,e,g){},calTriangleStart:function(a,b,c){console.log(a,b,c);var d={mine:null,enemy:null};b=b===allEnum.shapeMode.Up;a===this._flat?b?(d.mine=Hex(0,0,0),d.enemy=Hex(1-c,0,c-1)):(d.mine=Hex(c-1,0,1-c),d.enemy=Hex(c-1,1-c,0)):b?(d.mine=Hex(0,c-1,1-c),d.enemy=Hex(1-c,c-1,0)):(d.mine=Hex(c-
1,1-c,0),d.enemy=Hex(0,1-c,c-1));return d},calHexagousStart:function(a,b){var c={mine:null,enemy:null};a===this._flat?(c.mine=Hex(0,b,-b),c.enemy=Hex(0,-b,b)):(console.log("point"),c.enemy=Hex(-b,0,b),c.mine=Hex(b,0,-b));return c},showStartPos:function(a,b,c,d,e,g,l,k){var f=hexMap.calStartHex(a,b,c,d,e,g,l,k),m=hexHelper.getHexByCoor(f.mine,hexMap.allHex),f=hexHelper.getHexByCoor(f.enemy,hexMap.allHex);m.owner=allEnum.owner.Mine;f.owner=allEnum.owner.Enemy;hexHelper.enemyPos.push(f);var n=f.q+"-"+
f.r,p=m.q+"-"+m.r;hexHelper.allItems[p].showHex.tint=this.mineColor;hexHelper.allItems[p].showArrow.tint=this.mineColor;hexHelper.allItems[n].showHex.tint=this.enemyColor;hexHelper.allItems[n].showArrow.tint=this.enemyColor;this.initStartRotation(a,b,c,d,e,g,l,k,m,f)},initStartRotation:function(a,b,c,d,e,g,l,k,f,m){switch(b){case allEnum.shape.Hexagons:this.initHexStartRotation(a,f,m);break;case allEnum.shape.Parallelograms:this.initParalStartRotation(a,d,e,g,l,k,f,m);break;case allEnum.shape.Triangles:this.initTriangleRotation(a,
d,f,m);break;default:this.initRectangleRotation()}},initHexStartRotation:function(a,b,c){(a=a===this._pointy)?this.initRotation(b,this._sourth,c,this._north,a):this.initRotation(b,this._westSouth,c,this._eastNorth,a)},initParalStartRotation:function(a,b,c,d,e,g,l,k){a=a===this._pointy;switch(b){case allEnum.shapeMode.Left:this.initRotation(l,this._westSouth,k,this._eastNorth,!0);break;case allEnum.shapeMode.Right:a?this.initRotation(l,this._westSouth,k,this._eastNorth,a):this.initRotation(l,this._west,
k,this._east,a);break;default:a?this.initRotation(l,this._west,k,this._east,a):this.initRotation(l,this._sourth,k,this._north,a)}},initRotation:function(a,b,c,d,e){var g=c.q+"-"+c.r,l=a.q+"-"+a.r;e=e?allConst.offset:0;a.orientation=b;c.orientation=d;hexHelper.allItems[l].rotation=-b*allConst.orientation_offset+e;hexHelper.allItems[g].rotation=-d*allConst.orientation_offset+e},initTriangleRotation:function(a,b,c,d){a=a===this._pointy;switch(b){case allEnum.shapeMode.Up:a?this.initRotation(c,this._westSouth,
d,this._north,a):this.initRotation(c,this._sourth,d,this._eastNorth,a);break;default:a?this.initRotation(c,this._sourth,d,this._eastNorth,a):this.initRotation(c,this._westSouth,d,this._east,a)}},initRectangleRotation:function(){}},hexHelper={score:0,totalScore:0,scoreTxt:null,mainScene:null,allPositon:[],allItems:{},allArrows:[],mineRate:0,enemyRate:0,highestTimeoutId:0,pathNumber:0,isAction:!1,enemyPos:[],mineCount:1,enemyCount:1,interval:300,status:allEnum.status.None,isOver:!1,getHexByCoor:function(a,
b){var c=null,d;for(d in b)if(a.q==b[d].q&&a.r==b[d].r){c=b[d];break}return c},clickItem:function(a){if(!this.isOver){a=a.hexIndex;var b=hexMap.allHex[a];if(b.owner===allEnum.owner.Mine&&!this.isAction){this.isAction=!0;var c=this,d=c.allArrows[a];a=global.orientation===allEnum.orientation.pointy?allConst.offset:0;rotateHex(b);this.pathNumber=1;var e=-b.orientation*allConst.orientation_offset+a;d.rotation>=a&&(d.rotation=-6*allConst.orientation_offset+a);var g=setInterval(function(){d.rotation+=config.divisor;
d.rotation>=e&&(d.rotation=e,clearInterval(g),c.dealLink(b,!1))},config.timeout)}}},dealLink:function(a,b){var c=b?allEnum.owner.Enemy:allEnum.owner.Mine,d=[];global.isOneWay||this.addNeighbour(a,c,d);this.addPoint(a,c,d);this.pathNumber--;0===d.length?this.judgeEnd(b):this.dealFill(d,b)},addNeighbour:function(a,b,c){for(var d=0;d<hex_directions.length;d++){var e=hex_neighbor(a,d);if((e=this.getHexByCoor(e,hexMap.allHex))&&e.owner!==b){var g=hex_neighbor(e,e.orientation);hex_equal(g,a)&&c.push(e)}}},
addPoint:function(a,b,c){a=hex_neighbor(a,a.orientation);a=this.getHexByCoor(a,hexMap.allHex);if(null!=a&&a.owner!==b){b=!1;for(var d=0;d<c.length;d++)if(hex_equal(c[d],a)){b=!0;break}b||c.push(a)}},judgeEnd:function(a){var b=this;if(0===this.pathNumber){var c=this.judgeWin();c!==allEnum.status.None?(this.status=c,this.isOver=!0,a=new winBoard,this.mainScene.addChild(a)):a?this.isAction=!1:b.highestTimeoutId=setTimeout(function(){b.clickEnemyItem()},3*config.delayTime)}},dealFill:function(a,b){if(!this.isOver){var c=
b?allEnum.owner.Enemy:allEnum.owner.Mine;this.pathNumber+=a.length;for(var d=0;d<a.length;d++){var e=a[d],g=this.allItems[e.q+"-"+e.r];if(e.owner===(!b?allEnum.owner.Enemy:allEnum.owner.Mine))b?this.mineCount--:(this.enemyCount--,this.removeEnemyHex(e));e.owner=c;b?(g.showArrow.tint=hexMap.enemyColor,g.showHex.tint=hexMap.enemyColor,this.enemyCount++,this.enemyPos.push(e)):(g.showArrow.tint=hexMap.mineColor,g.showHex.tint=hexMap.mineColor,this.mineCount++)}this.enemyRate.text=(100*(this.enemyCount/
this.allPositon.length)).toFixed(1)+"%";this.mineRate.text=(100*(this.mineCount/this.allPositon.length)).toFixed(1)+"%";this.score=this.mineCount;this.scoreTxt.text=""+this.score;flax.playSound(resource.res_expand);for(d=0;d<a.length;d++)e=a[d],this.delay(e,b)}},delay:function(a,b){var c=this;c.highestTimeoutId=setTimeout(function(){c.dealLink(a,b)},config.delayTime)},judgeWin:function(){return 0===this.enemyCount||this.mineCount/hexMap.allHex.length>=config.winRate?allEnum.status.Win:0===this.mineCount||
this.enemyCount/hexMap.allHex.length>=config.winRate?allEnum.status.Lose:allEnum.status.None},clickEnemyItem:function(){var a={rotate1:[],rotate2:[],rotate3:[],rotate4:[],rotate5:[]};this.calTimesOfRotation(a);var b=this.getRandHex(a);if(!b)throw"\u9519\u8bef\uff0chex\u4e3a\u7a7a";var c=this.allItems[b.q+"-"+b.r],a=global.orientation===allEnum.orientation.pointy?allConst.offset:0;rotateHex(b);this.pathNumber=1;var d=this,e=-b.orientation*allConst.orientation_offset+a;c.rotation>=a&&(c.rotation=-6*
allConst.orientation_offset+a);var g=setInterval(function(){c.rotation+=config.divisor;c.rotation>=e&&(c.rotation=e,clearInterval(g),d.dealLink(b,!0))},config.timeout)},calTimesOfRotation:function(a){for(var b=0;b<this.enemyPos.length;b++){var c=this.enemyPos[b],d=Hex(c.q,c.r,c.s);d.orientation=c.orientation;for(var e=1;5>=e;e++){rotateMulHex(d,e);var g=hex_neighbor(d,d.orientation),g=this.getHexByCoor(g,hexMap.allHex);if(null!=g&&g.owner!==allEnum.owner.Enemy){a["rotate"+e].push(c);break}}}},getRandHex:function(a){for(var b=
null,c=1;5>=c;c++){var d=a["rotate"+c];if(0<d.length){a=Math.floor(d.length*Math.random());b=d[a];break}}return b},removeEnemyHex:function(a){for(var b=-1,c=0;c<this.enemyPos.length;c++)if(a.q==this.enemyPos[c].q&&a.r==this.enemyPos[c].r){b=c;break}-1===b?console.log("\u51fa\u9519\u4e86\uff0c\u8bf7\u770blog"):this.enemyPos.splice(b,1)},reset:function(){this.pathNumber=0;this.isAction=!1;this.enemyPos=[];this.enemyCount=this.mineCount=1;for(var a=0;a<this.highestTimeoutId;a++)clearTimeout(a);this.highestTimeoutId=
0;this.isOver=!1}},levelUtil={_pointy:allEnum.orientation.pointy,_flat:allEnum.orientation.flat,_par:allEnum.shape.Parallelograms,_hex:allEnum.shape.Hexagons,_tri:allEnum.shape.Triangles,_rec:allEnum.shape.Rectangles,_left:allEnum.shapeMode.Left,_right:allEnum.shapeMode.Right,_none:allEnum.shapeMode.None,_up:allEnum.shapeMode.Up,_down:allEnum.shapeMode.Down,allLevels:[],getPrimary:function(){return[[this._pointy,this._par,2,this._right,-2,2,-2,2,1,1],[this._pointy,this._par,2,this._left,-2,2,-2,2,
1,1],[this._pointy,this._par,2,this._none,-2,2,-2,2,1,1],[this._flat,this._par,2,this._right,-2,2,-2,2,1,1],[this._flat,this._par,2,this._left,-2,2,-2,2,1,1],[this._flat,this._par,2,this._none,-2,2,-2,2,1,1],[this._flat,this._tri,7,this._up,-2,2,-2,2,1,1],[this._flat,this._tri,7,this._down,-2,2,-2,2,1,1],[this._pointy,this._tri,7,this._up,-2,2,-2,2,1,1][this._pointy,this._tri,7,this._down,-2,2,-2,2,1,1]]},getSecondary:function(){return[[this._flat,this._hex,3,this._none,-5,5,-5,5,1,1],[this._pointy,
this._hex,3,this._none,-5,5,-5,5,1,1],[this._flat,this._par,2,this._right,-3,3,-3,3,1,1],[this._pointy,this._par,2,this._none,-3,3,-3,3,1,1],[this._flat,this._par,2,this._left,-3,3,-3,3,1,1]]},getAdjective:function(){return[]},getInfinite:function(){return[this._flat,this._hex,4,this._none,-5,5,-5,5,0,0,!0]},initLevel:function(a){var b=[],c=[],d=1;switch(a){case allEnum.levelRank.primary:c=this.getPrimary();d=config.primaryRate;break;case allEnum.levelRank.secondary:c=this.getSecondary();d=config.secondaryRate;
break;default:c=this.getAdjective(),d=config.adjectiveRate}for(a=c.length;b.length<Math.ceil(a*d);){var e=parseInt(Math.random()*a);-1===b.indexOf(e)&&(b.push(e),this.allLevels.push(c[e]))}},initLevelAll:function(){for(var a in allEnum.levelRank)this.initLevel(allEnum.levelRank[a])}},weixinHelper={isOfWeiXin:"undefined"!==typeof wx,OfWeiXin:!1,openDataContext:null,sharedCanvas:null,initData:function(){this.isOfWeiXin&&(this.openDataContext=wx.getOpenDataContext(),this.sharedCanvas=this.openDataContext.canvas,
this.sharedCanvas.width=allConst.width,this.sharedCanvas.height=allConst.height)},initWeiXin:function(){this.isOfWeiXin&&(this.login(this.getUserInfo),this.initScore("score",0),this.showShareMenu())},login:function(a){wx.login({success:function(){a&&a()}})},getUserInfo:function(){wx.getUserInfo({fail:function(a){(-1<a.errMsg.indexOf("auth deny")||-1<a.errMsg.indexOf("auth denied"))&&console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743")},success:function(a){console.log("\u83b7\u5f97\u7528\u6237\u4fe1\u606f\u6210\u529f")},
complete:function(){weixinHelper.openDataContext.postMessage({text:"getUserInfo"})}})},showShareMenu:function(){wx.showShareMenu({withShareTicket:!0})},initScore:function(a,b){this.openDataContext.postMessage({text:"initScore",key:a,value:b})},showGroupRank:function(a,b){this.openDataContext.postMessage({text:"getGroupCloudStorage",ticket:a,key:b});null!=rankItem&&rankItem.rankTitle&&(rankItem.rankTitle.text="\u7fa4\u6392\u884c\u699c")},shareGroup:function(a,b,c){var d=this;wx.shareAppMessage({success:function(e){e.shareTickets&&
(e=e.shareTickets[0],c?(e=new rankList(a,b,c,e),weixinHelper.mainScene.addChild(e),null!=rankItem&&rankItem.rankTitle&&(rankItem.rankTitle.text="\u7fa4\u6392\u884c\u699c")):d.showGroupRank(e,a))},fail:function(a){}})}},flax=flax||{},rankItem=null,rankList=flax.Container.extend({key:"",sprite:null,isFromRankLittle:!1,isGroup:!1,ticket:"",ctor:function(a,b,c,d){this._super();this.key=a;this.isFromRankLittle=b;this.isGroup=c;this.ticket=d},onEnter:function(){this._super();this.initView();this.scheduleUpdate()},
onExit:function(){this._super();this.ticket=this.sprite=this.key=null},initView:function(){var a=flax.createDisplay(res.rank,"a38");this.addChild(a);rankItem=a;weixinHelper.isOfWeiXin&&(this.hide(a),this.setScript(a),this.calCoor(a))},hide:function(a){a.rank.visible=!1;a.icon.visible=!1;a.nickName.visible=!1;a.score.visible=!1;a.rankUser.visible=!1;a.iconUser.visible=!1;a.nickNameUser.visible=!1;a.scoreUser.visible=!1;a.backItem.visible=!1},setScript:function(a){var b=this;flax.addListener(a.exitBtn,
function(){rankItem=null;b.destroy();var a={text:"exitRank",refresh:!1};b.isFromRankLittle&&(a.refresh=!0);weixinHelper.openDataContext.postMessage(a)},InputType.click);flax.addListener(a.preBtn,function(){b.prePage()},InputType.click);flax.addListener(a.nextBtn,function(){b.nextPage()},InputType.click);flax.addListener(a.groupBtn,function(){weixinHelper.shareGroup(b.key,!1,!1)},InputType.click)},calCoor:function(a){a={text:"getFriendCloudStorage",rank:a.rank.position.x+"-"+a.rank.position.y,icon:a.icon.position.x+
"-"+a.icon.position.y,nickName:a.nickName.position.x+"-"+a.nickName.position.y,scorePos:a.score.position.x+"-"+a.score.position.y,rankUser:a.rankUser.position.x+"-"+a.rankUser.position.y,iconUser:a.iconUser.position.x+"-"+a.iconUser.position.y,nickNameUser:a.nickNameUser.position.x+"-"+a.nickNameUser.position.y,scorePosUser:a.scoreUser.position.x+"-"+a.scoreUser.position.y,backItem:a.backItem.position.x+"-"+a.backItem.position.y,itemHeight:a.backItem.height,itemWidth:a.backItem.width,key:this.key};
this.isFromRankLittle?a.text="showAllRank":this.isGroup&&(a.text="getGroupCloudStorage",a.ticket=this.ticket);this.showCanvas(a)},showCanvas:function(a){weixinHelper.openDataContext.postMessage(a);this.sprite=new PIXI.Sprite;this.addChild(this.sprite);a=new PIXI.BaseTexture(weixinHelper.sharedCanvas);this.sprite.texture=new PIXI.Texture(a)},update:function(){var a=new PIXI.BaseTexture(weixinHelper.sharedCanvas);this.sprite.texture=new PIXI.Texture(a)},nextPage:function(){weixinHelper.openDataContext.postMessage({text:"nextPage"})},
prePage:function(){weixinHelper.openDataContext.postMessage({text:"prePage"})},inviteFriend:function(){wx.shareAppMessage({success:function(a){},fail:function(a){}})}}),rankListLittle=flax.Container.extend({key:"",score:0,sprite:null,ctor:function(a,b){this._super();this.key=a;this.score=b},onEnter:function(){this._super();this.initView();this.scheduleUpdate()},initView:function(){var a=flax.createDisplay(res.rank,"a47");this.addChild(a);weixinHelper.isOfWeiXin&&(this.hide(a),this.setScript(a),this.calCoor(a))},
onExit:function(){this._super();this.sprite=this.key=null},hide:function(a){a.rank1.visible=!1;a.icon1.visible=!1;a.nickName1.visible=!1;a.score1.visible=!1;a.leftItem.visible=!1},setScript:function(a){var b=this;flax.addListener(a.viewBtn,function(){var a=new rankList(b.key,!0,!1);b.parent.addChild(a)},InputType.click)},calCoor:function(a){this.showCanvas({text:"showLittleRank",rank:a.rank1.position.x+"-"+a.rank1.position.y,icon:a.icon1.position.x+"-"+a.icon1.position.y,nickName:a.nickName1.position.x+
"-"+a.nickName1.position.y,scorePos:a.score1.position.x+"-"+a.score1.position.y,leftItem:a.leftItem.position.x+"-"+a.leftItem.position.y,itemHeight:a.leftItem.height,itemWidth:a.leftItem.width,key:this.key,score:this.score})},showCanvas:function(a){weixinHelper.openDataContext.postMessage(a);this.sprite=new PIXI.Sprite;this.addChild(this.sprite);a=new PIXI.BaseTexture(weixinHelper.sharedCanvas);this.sprite.texture=new PIXI.Texture(a)},update:function(){var a=new PIXI.BaseTexture(weixinHelper.sharedCanvas);
this.sprite.texture=new PIXI.Texture(a)}}),hexBoard=flax.Container.extend({onEnter:function(){this._super();var a=[],a=-1!==flax.userData.userLevel?levelUtil.allLevels[flax.userData.userLevel]:levelUtil.getInfinite();global.params=a;this.initView.apply(this,a)},initView:function(a,b,c,d,e,g,l,k,f,m,n){console.log("\u5173\u5361\u5173\u952e\u53c2\u6570\u4e3a:",a,"__",b,"___",d);global.orientation=a;global.isOneWay=void 0===n?!1:n;hexHelper.allPositon=[];hexMap.initAllHex(a,b,c,d,e,g,l,k,f,m);for(e=
0;e<hexMap.allHex.length;e++)l=hexMap.allHex[e],g=flax.createDisplay(res.main,"hex"),this.addChild(g),0===e&&hexMap.initSize(g,a,b,c,d),l=hex_to_pixel(hexMap.layout,l),g.position.x=l.x,g.position.y=l.y,hexHelper.allPositon.push(g.position),g.hexIndex=e,a===allEnum.orientation.pointy&&(g.rotation+=allConst.offset),flax.addListener(g,function(a,b){hexHelper.clickItem(a.currentTarget)},InputType.click)},onExit:function(){this._super()}}),hexBody=flax.Container.extend({onEnter:function(){this._super();
this.initView.apply(this,global.params)},onExit:function(){this._super()},initView:function(a,b,c,d,e,g,l,k){hexHelper.allItems={};hexHelper.allArrows=[];for(var f=0;f<hexMap.allHex.length;f++){var m=hexMap.allHex[f],n=flax.createDisplay(res.main,"a2");this.addChild(n);n.position.x=hexHelper.allPositon[f].x;n.position.y=hexHelper.allPositon[f].y;hexHelper.allItems[m.q+"-"+m.r]=n;var p=Math.floor(6*Math.random());m.orientation=p;n.rotation=-p*allConst.orientation_offset;a===allEnum.orientation.pointy&&
(n.rotation+=allConst.offset);n.showArrow.tint=allEnum.color.black;n.showHex.tint=allEnum.color.black;hexHelper.allArrows.push(n)}hexMap.showStartPos(a,b,c,d,e,g,l,k)}}),infoBoard=flax.Container.extend({onEnter:function(){this._super();this.initView()},onExit:function(){this._super()},initView:function(){var a=flax.createDisplay(res.main,"a21");this.addChild(a);a.levelNum.text=""+(flax.userData.userLevel+1);hexHelper.enemyRate=a.enemyRateNum;hexHelper.mineRate=a.mineRateNum;hexHelper.scoreTxt=a.scoreNum;
hexHelper.enemyRate.text=(100/hexHelper.allPositon.length).toFixed(1)+"%";hexHelper.mineRate.text=(100/hexHelper.allPositon.length).toFixed(1)+"%";hexHelper.scoreTxt.text="1"}}),winBoard=flax.Container.extend({onEnter:function(){this._super();this.initView()},onExit:function(){this._super()},initView:function(){var a=flax.createDisplay(res.main,"a64");this.addChild(a);hexHelper.status===allEnum.status.Lose?(a.winTitle.text="\u5f88\u9057\u61be\uff0c\u4f60\u8f93\u4e86",hexHelper.score=0,a.scoreNum.text=
a.scoreNum.text.replace("{n}",hexHelper.score),a.totalNum.text=a.totalNum.text.replace("{n}",hexHelper.totalScore),hexHelper.scoreTxt="0",a.continueBtn.continueTxt.text="\u590d\u6d3b\u95ef\u5173"):(0===flax.userData.userLevel&&(hexHelper.totalScore=0),-1===flax.userData.userLevel?(flax.userData.userLevel=flax.userData.get("userLevel"),flax.userData.finalMax||(flax.userData.finalMax=0),flax.userData.finalMax<hexHelper.score&&(flax.userData.finalMax=hexHelper.score),a.totalNum.text="\u6700\u9ad8\u5f97\u5206:"+
flax.userData.finalMax,a.scoreNum.text=a.scoreNum.text.replace("{n}",hexHelper.score),hexHelper.score=0,flax.userData.save(),flax.userData.userLevel=-1,console.log("\u65e0\u9650\u5173\u5361\u901a\u5173")):(a.winTitle.text="\u606d\u559c\u4f60\u901a\u5173!",hexHelper.totalScore+=hexHelper.score,flax.userData.userPoint=hexHelper.totalScore,flax.userData.maxScore<hexHelper.totalScore&&(flax.userData.maxScore=hexHelper.totalScore),flax.userData.userLevel<levelUtil.allLevels.length-1?flax.userData.userLevel++:
(a.gotoAndStop(1),a.returnBtn.returnTxt.text="\u8fd4\u56de\u6e38\u620f",a.maxNum.text=a.maxNum.text.replace("{n}",flax.userData.maxScore),flax.userData.userLevel=0,flax.userData.gameOver=!0),flax.userData.save(),a.scoreNum.text=a.scoreNum.text.replace("{n}",hexHelper.score),a.totalNum.text=a.totalNum.text.replace("{n}",hexHelper.totalScore),hexHelper.score=0,hexHelper.scoreTxt="0"));flax.addListener(a.returnBtn,function(){hexHelper.reset();flax.replaceScene("login")},InputType.click);a.continueBtn&&
flax.addListener(a.continueBtn,function(){hexHelper.reset();flax.replaceScene(0===flax.userData.userLevel?"login":"main")})}}),scenes=scenes||{},flax=flax||{};
scenes.loginScene=flax.Scene.extend({onEnter:function(){this._super();var a=flax.createDisplay(res.login,"a5");this.addChild(a);a.scoreTxt.text=a.scoreTxt.text.replace("{n}",flax.userData.maxScore);a.conTxt.text=a.conTxt.text.replace("{n}",100*config.winRate+"%");var b=0===flax.userData.get("userLevel")?ButtonState.DISABLED:ButtonState.SELECTED;a.viewGroup.setState(b);b=flax.userData.gameOver?ButtonState.SELECTED:ButtonState.DISABLED;a.viewFriends.setState(b);flax.addListener(a.startBtn,function(){flax.userData.userLevel=
0;flax.replaceScene("main")},InputType.click);flax.addListener(a.viewGroup,function(a,b){a.currentTarget.getState()!==ButtonState.DISABLED&&(flax.userData.userLevel=flax.userData.get("userLevel"),hexHelper.totalScore=flax.userData.userPoint,flax.replaceScene("main"))},InputType.click);flax.addListener(a.viewFriends,function(a,b){a.currentTarget.getState()!==ButtonState.DISABLED&&(flax.userData.userLevel=-1,flax.replaceScene("main"))},InputType.click)},onExit:function(){this._super()}});
scenes=scenes||{};flax=flax||{};scenes.mainScene=flax.Scene.extend({onEnter:function(){this._super();var a=new hexBoard;this.addChild(a);a=new hexBody;this.addChild(a);a=new infoBoard;this.addChild(a);hexHelper.mainScene=this},onExit:function(){this._super()}});
flax.game.config={version:1,platform:"web",gameId:"HexDemo",width:750,height:1206,landscape:!1,rotateImg:"res/rotate.png",resUrl:"",wx:!1,language:"",languageJson:!1,loading:"res/favicon.ico",preloader:null,domainAllowed:[],debugMode:0,showFPS:!1,frameRate:60,renderMode:0,frameWork:"pixi",flaxDir:"src/flax",modules:["core","game","extras","modules"],jsList:[],inTest:!1,testImages:["res/test.jpg"],versionType:0,platformConfig:{}};var flax=flax||{},clinetId="CrazyHex",_cookie=localStorage.getItem(clinetId);
flax.userData=_cookie?JSON.parse(_cookie):{userLevel:0,userPoint:0,maxScore:0,finalMax:0,gameOver:!1,timeStamp:0,times:0};flax.userData.save=function(){localStorage.setItem(clinetId,JSON.stringify(flax.userData))};flax.userData.get=function(a){var b=localStorage.getItem(clinetId);if(!b)return 0;b=JSON.parse(b);return b[a]};
flax.game.onStart=function(){flax.init(flax.ResolutionPolicy.SHOW_ALL,null,{backgroundColor:allEnum.color.black,clearBeforeRender:!0});flax.view.enableRetina(!0);registerModules();flax.replaceScene("login")};initData();flax.game.run();function registerModules(){flax.registerScene("main",scenes.mainScene,resource.res_main);flax.registerScene("login",scenes.loginScene,resource.res_login)}function initData(){levelUtil.initLevelAll()};
